import{a5 as i,a6 as s,a9 as w,bA as C,_ as d,b9 as V,bh as S,V as N,cb as P,h3 as D,s as te,cA as le}from"./index-b516d057.js";import{r as A,n as o,X as ie,e as R,O as x,i as G}from"./jsxFactory-92036771.js";import{e as q}from"./globalCss-94006b67.js";import{c as z,p as H}from"./SketchTooltipOptions-cc43c059.js";import{l as j,p as se}from"./SnappingManager-aa70fdd4.js";import{t as ne,b as X}from"./layerListUtils-a0f5e0ab.js";import{y as oe}from"./LayerListViewModel-3e44a2f6.js";import{k as ae}from"./ListItem-5ca108fc.js";let m=class extends C{constructor(e){super(e),this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};i([s({type:Boolean,nonNullable:!0})],m.prototype,"header",void 0),i([s({type:Boolean,nonNullable:!0})],m.prototype,"labelsToggle",void 0),i([s({type:Boolean,nonNullable:!0})],m.prototype,"tooltipsToggle",void 0),m=i([w("esri.widgets.support.SketchTooltipControls.VisibleElements")],m);const J=m;let _=class extends C{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.header=!1,this.layerList=!0,this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};i([s({type:Boolean,nonNullable:!0})],_.prototype,"enabledToggle",void 0),i([s({type:Boolean,nonNullable:!0})],_.prototype,"featureEnabledToggle",void 0),i([s({type:Boolean,nonNullable:!0})],_.prototype,"header",void 0),i([s({type:Boolean,nonNullable:!0})],_.prototype,"layerList",void 0),i([s({type:Boolean,nonNullable:!0})],_.prototype,"layerListToggleLayersButton",void 0),i([s({type:Boolean,nonNullable:!0})],_.prototype,"selfEnabledToggle",void 0),_=i([w("esri.widgets.support.SnappingControls.VisibleElements")],_);const K=_,Q=()=>Promise.all([A({icon:()=>d(()=>import("./calcite-icon-39deb8ae.js"),["assets/calcite-icon-39deb8ae.js","assets/icon-c122f720.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/observers-9c654f26.js"]),label:()=>d(()=>import("./calcite-label-4966fb24.js"),["assets/calcite-label-4966fb24.js","assets/label-fe92b4f9.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/label2-0071fcd4.js"]),switch:()=>d(()=>import("./calcite-switch-d026b1cc.js"),["assets/calcite-switch-d026b1cc.js","assets/switch-bf0dca96.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/form-60623048.js","assets/interactive-39956fb6.js","assets/key-c2c83cc7.js","assets/label2-0071fcd4.js","assets/loadable-7d42c3de.js"]),tooltip:()=>d(()=>import("./calcite-tooltip-5cb74da1.js"),["assets/calcite-tooltip-5cb74da1.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/floating-ui-a6c9d5df.js","assets/debounce-7cc294e2.js","assets/guid-2347ca41.js","assets/openCloseComponent-3fbda1cf.js","assets/FloatingArrow-9e5c8eb0.js"])})]),I="esri-labeled-switch",$={label:`${I}__label`,labelContent:`${I}__label-content`,icon:`${I}__icon`};function T({checked:t,disabled:e,hint:l,key:n,label:a,onChange:r}){return o("calcite-label",{class:$.label,disabled:e,key:n,layout:"inline-space-between",scale:"s"},o("div",{class:$.labelContent,key:"label-content"},l?o(ie,null,o("div",null,a),o("calcite-icon",{class:$.icon,icon:"information",id:n,scale:"s"}),o("calcite-tooltip",{referenceElement:n},l)):a),o("calcite-switch",{checked:t,disabled:e,scale:"s",onCalciteSwitchChange:c=>r(c.target.checked)}))}const re="esri.widgets.support.SketchTooltipControls.SketchTooltipControlsViewModel";let E=class extends C{constructor(e){super(e),this.labelOptions=new z,this.tooltipOptions=new H}};i([s({type:z,nonNullable:!0})],E.prototype,"labelOptions",void 0),i([s({type:H,nonNullable:!0})],E.prototype,"tooltipOptions",void 0),E=i([w(re)],E);const pe=E,M="esri-sketch-tooltip-controls",k={base:M,widgetIcon:G.gear,block:`${M}__block`,blockContent:`${M}__block-content`,hintIcon:`${M}__hint-icon`};let u=class extends x{constructor(e,l){super(e,l),this._defaultViewModel=null,this.icon=null,this.iconClass=k.widgetIcon,this.visibleElements=new J,this.viewType=void 0,this._onTooltipsEnabledChange=c=>{this.tooltipOptions.enabled=c},this._onLabelsEnabledChange=c=>{this.labelOptions.enabled=c};const{tooltipOptions:n,labelOptions:a,viewModel:r}=e;this.viewModel=r??(this._defaultViewModel=new pe({tooltipOptions:n,labelOptions:a}))}loadDependencies(){return Promise.all([A({block:()=>d(()=>import("./calcite-block-0b12426c.js"),["assets/calcite-block-0b12426c.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/conditionalSlot-11b5e54d.js","assets/observers-9c654f26.js","assets/interactive-39956fb6.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/t9n-622f279b.js","assets/Heading-2d7d203c.js","assets/loadable-7d42c3de.js","assets/openCloseComponent-3fbda1cf.js","assets/action-79a6733c.js","assets/guid-2347ca41.js","assets/component-7281ffa6.js","assets/icon-c122f720.js","assets/loader-ea663d25.js","assets/action-menu-8419d112.js","assets/array-755a0ace.js","assets/popover-33772892.js","assets/floating-ui-a6c9d5df.js","assets/debounce-7cc294e2.js","assets/FloatingArrow-9e5c8eb0.js","assets/handle-d29406b2.js","assets/scrim-41a5f26e.js"])}),Q()])}render(){const{label:e,visibleElements:l}=this,n=this._renderContent();return o("div",{"aria-label":e,class:this.classes(k.base,q.widget)},n?o("calcite-block",{class:k.block,heading:l.header?this.label:"",key:"content-block",open:!0},o("div",{class:k.blockContent,key:"content"},n)):void 0)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=V(this._defaultViewModel)),this._set("viewModel",e))}_renderContent(){const{visibleElements:e,viewType:l}=this,n=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&l!=="2d"?this._renderLabelsToggle():null].filter(S);return n.length===0?null:n}_renderTooltipsToggle(){const{messages:e,tooltipOptions:l}=this;return o(T,{checked:l.enabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,labelOptions:l}=this;return o(T,{checked:l.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}};i([s()],u.prototype,"icon",void 0),i([s()],u.prototype,"iconClass",void 0),i([s()],u.prototype,"label",null),i([s()],u.prototype,"labelOptions",null),i([s()],u.prototype,"tooltipOptions",null),i([s()],u.prototype,"viewModel",null),i([s({type:J,nonNullable:!0})],u.prototype,"visibleElements",void 0),i([s(),R("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],u.prototype,"messages",void 0),i([s({type:String})],u.prototype,"viewType",void 0),u=i([w("esri.widgets.support.SketchTooltipControls")],u);const Me=u,B=t=>de(t)||ce(t),de=t=>{if(!("type"in t))return!1;switch(t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":return!0;default:return!1}},ce=t=>{const e=ne(t);if(e!=null&&t.hasOwnProperty(e)&&t[e]!=null){for(const l of t[e])if(B(l))return!0}return!1};var F;let y=F=class extends ae{constructor(t){super(t),this.children=new N,this.parent=null}get allChildrenEnabled(){return this.children.every(t=>t.enabled)??!1}get childLayerIds(){return this.children.map(t=>t.layer.id).toArray()}get enabled(){return this.featureSource!=null&&this.featureSource.enabled}get featureSource(){const{layer:t,getFeatureSnappingSources:e}=this;return e().find(l=>l.layer===t)}get hasChildrenEnabled(){return this.children.some(t=>t.enabled)}_initializeChildLayers(t){if(!t)return;const e=t.filter(B);super._initializeChildLayers(e)}_makeChildren(t){return t.map(e=>X(e)?new F({layer:e,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(S).reverse()}};i([s()],y.prototype,"allChildrenEnabled",null),i([s()],y.prototype,"children",void 0),i([s()],y.prototype,"childLayerIds",null),i([s()],y.prototype,"enabled",null),i([s()],y.prototype,"featureSource",null),i([s({constructOnly:!0})],y.prototype,"getFeatureSnappingSources",void 0),i([s()],y.prototype,"hasChildrenEnabled",null),i([s()],y.prototype,"parent",void 0),y=F=i([w("esri.widgets.support.SnappingControls.SnappingListItem")],y);let v=class extends oe{constructor(){super(...arguments),this.featureSnappingSources=new N}get operationalItemsFlat(){return this.operationalItems.flatten(t=>t.children)}get selectableItems(){return this.operationalItemsFlat.filter(t=>{var e;return!((e=t.children)!=null&&e.length)})}_compileList(){var n,a;const t=(a=(n=this.view)==null?void 0:n.map)==null?void 0:a.layers;if(!t)return;const e=t.filter(B);this._watchLayersListMode(e);const l=this._getViewableLayers(e);l!=null&&l.length?(this._createNewItems(l),this._removeItems(l),this._sortItems(l)):this._removeAllItems()}_createListItem(t){return new y({layer:t,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};i([s()],v.prototype,"featureSnappingSources",void 0),i([s()],v.prototype,"operationalItems",void 0),i([s()],v.prototype,"operationalItemsFlat",null),i([s()],v.prototype,"selectableItems",null),v=i([w("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],v);const he="esri.widgets.support.SnappingControls.SnappingControlsViewModel";let b=class extends C{constructor(e){super(e),this.layerListViewModel=new v,this.snappingOptions=new j,this.view=null}initialize(){this.addHandles([P(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:l})=>{e.view=l},D),P(()=>{var e;return{viewModel:this.layerListViewModel,sources:(e=this.snappingOptions)==null?void 0:e.featureSources}},({viewModel:e,sources:l})=>{e.featureSnappingSources=l},D)])}get allLayersEnabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(l=>l.enabled)}get allLayersDisabled(){var e;return(((e=this.layerListViewModel)==null?void 0:e.selectableItems)??[]).every(l=>!l.enabled)}get layersEnabledCount(){var e,l;return((l=(e=this.layerListViewModel)==null?void 0:e.selectableItems)==null?void 0:l.filter(n=>n.enabled).length)??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,l){e==null||e.forEach(n=>l?this.enableSnappingForLayer(n):this.disableSnappingForLayer(n))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:{id:l}})=>{e?this.enableSnappingForLayer(l):this.disableSnappingForLayer(l)})}enableSnappingForLayer(e){(this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e)).enabled=!0}disableSnappingForLayer(e){const l=this._findSnappingSourceForLayer(e);l&&(l.enabled=!1)}updateEnabledFeatureSources(e){for(const l of this.snappingOptions.featureSources)X(l.layer)&&(l.enabled=e.includes(l.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(l=>l.layer.id===e)}_makeSnappingSourceForLayer(e){var a;const l=(a=this.layerListViewModel.operationalItemsFlat.find(r=>r.layer.id===e))==null?void 0:a.layer;if(!l)throw new te("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);const n=new se({layer:l});return this.snappingOptions.featureSources.add(n),n}};i([s()],b.prototype,"allLayersEnabled",null),i([s()],b.prototype,"allLayersDisabled",null),i([s({constructOnly:!0})],b.prototype,"layerListViewModel",void 0),i([s()],b.prototype,"layersEnabledCount",null),i([s({type:j,nonNullable:!0})],b.prototype,"snappingOptions",void 0),i([s()],b.prototype,"state",null),i([s()],b.prototype,"view",void 0),b=i([w(he)],b);const ue=b,g="esri-snapping-controls",h={base:g,widgetIcon:G.vertexGps,container:`${g}__container`,item:`${g}__item`,toggleBlock:`${g}__toggle-block`,layerListBlock:`${g}__layer-list-block`,layerList:`${g}__layer-list`,layerListFilter:`${g}__layer-list__filter`,layerListButton:`${g}__layer-list__button`,layerListItem:`${g}__layer-list__item`,layerListGroup:`${g}__layer-list__group`,nestedContainer:`${g}__nested-container`},f={checked:"check-square-f",unchecked:"square",indeterminate:"minus-square"};let p=class extends x{constructor(t,e){super(t,e),this._defaultViewModel=null,this._layerListFilter=null,this.iconClass=h.widgetIcon,this.icon=null,this.layerListOpen=!0,this.messages=null,this.visibleElements=new K,this._enableSnappingSwitchChange=r=>{this.snappingOptions.enabled=r},this._featureEnabledSwitchChange=r=>{this.snappingOptions.featureEnabled=r},this._selfEnabledSwitchChange=r=>{this.snappingOptions.selfEnabled=r},this._onToggleLayersButtonClick=r=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),requestAnimationFrame(()=>r.target.setFocus())};const{snappingOptions:l,view:n,viewModel:a}=t;this.viewModel=a??(this._defaultViewModel=new ue({snappingOptions:l,view:n}))}normalizeCtorArgs(t){const{snappingOptions:e,view:l,viewModel:n,...a}=t;return a}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=V(this._defaultViewModel))}loadDependencies(){return Promise.all([A({accordion:()=>d(()=>import("./calcite-accordion-c92b8d10.js"),["assets/calcite-accordion-c92b8d10.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/observers-9c654f26.js"]),"accordion-item":()=>d(()=>import("./calcite-accordion-item-4338c263.js"),["assets/calcite-accordion-item-4338c263.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/conditionalSlot-11b5e54d.js","assets/observers-9c654f26.js","assets/component-7281ffa6.js","assets/icon-c122f720.js"]),action:()=>d(()=>import("./calcite-action-dcffc330.js"),["assets/calcite-action-dcffc330.js","assets/action-79a6733c.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/guid-2347ca41.js","assets/interactive-39956fb6.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/observers-9c654f26.js","assets/component-7281ffa6.js","assets/t9n-622f279b.js","assets/icon-c122f720.js","assets/loader-ea663d25.js"]),block:()=>d(()=>import("./calcite-block-0b12426c.js"),["assets/calcite-block-0b12426c.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/conditionalSlot-11b5e54d.js","assets/observers-9c654f26.js","assets/interactive-39956fb6.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/t9n-622f279b.js","assets/Heading-2d7d203c.js","assets/loadable-7d42c3de.js","assets/openCloseComponent-3fbda1cf.js","assets/action-79a6733c.js","assets/guid-2347ca41.js","assets/component-7281ffa6.js","assets/icon-c122f720.js","assets/loader-ea663d25.js","assets/action-menu-8419d112.js","assets/array-755a0ace.js","assets/popover-33772892.js","assets/floating-ui-a6c9d5df.js","assets/debounce-7cc294e2.js","assets/FloatingArrow-9e5c8eb0.js","assets/handle-d29406b2.js","assets/scrim-41a5f26e.js"]),button:()=>d(()=>import("./calcite-button-5457cec5.js"),["assets/calcite-button-5457cec5.js","assets/button-27a2f99e.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/form-60623048.js","assets/interactive-39956fb6.js","assets/label2-0071fcd4.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/observers-9c654f26.js","assets/component-7281ffa6.js","assets/t9n-622f279b.js","assets/icon-c122f720.js","assets/loader-ea663d25.js","assets/guid-2347ca41.js"]),icon:()=>d(()=>import("./calcite-icon-39deb8ae.js"),["assets/calcite-icon-39deb8ae.js","assets/icon-c122f720.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/observers-9c654f26.js"]),input:()=>d(()=>import("./calcite-input-f0ebb300.js"),["assets/calcite-input-f0ebb300.js","assets/input-9795a695.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/form-60623048.js","assets/interactive-39956fb6.js","assets/key-c2c83cc7.js","assets/label2-0071fcd4.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/observers-9c654f26.js","assets/t9n-622f279b.js","assets/component-7281ffa6.js","assets/icon-c122f720.js","assets/progress-2100df13.js"]),list:()=>d(()=>import("./calcite-list-2b87684c.js"),["assets/calcite-list-2b87684c.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/interactive-39956fb6.js","assets/observers-9c654f26.js","assets/utils3-c1eb0197.js","assets/loadable-7d42c3de.js","assets/filter2-4b1b51ca.js","assets/debounce-7cc294e2.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/t9n-622f279b.js","assets/icon-c122f720.js","assets/input-9795a695.js","assets/form-60623048.js","assets/label2-0071fcd4.js","assets/component-7281ffa6.js","assets/progress-2100df13.js","assets/loader-ea663d25.js","assets/guid-2347ca41.js","assets/scrim-41a5f26e.js"]),"list-item":()=>d(()=>import("./calcite-list-item-acd56289.js"),["assets/calcite-list-item-acd56289.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/interactive-39956fb6.js","assets/utils3-c1eb0197.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/observers-9c654f26.js","assets/t9n-622f279b.js","assets/loadable-7d42c3de.js","assets/action-79a6733c.js","assets/guid-2347ca41.js","assets/component-7281ffa6.js","assets/icon-c122f720.js","assets/loader-ea663d25.js","assets/handle-d29406b2.js"])}),Q()])}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(t){this.viewModel.snappingOptions=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}set viewModel(t){t!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===t||(this._defaultViewModel=V(this._defaultViewModel)),this._set("viewModel",t))}render(){const{label:t}=this;return o("div",{"aria-label":t,class:this.classes(h.base,q.widget)},o("div",{class:h.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList()]}_renderToggles(){const{visibleElements:t}=this,e=[t.selfEnabledToggle?this._renderSelfEnabledToggle():null,t.featureEnabledToggle?this._renderFeatureEnabledToggle():null].filter(S),l=[t.enabledToggle?this._renderEnabledToggle():null,e.length>0?o("div",{class:h.nestedContainer},e):null].filter(S);return l.length===0?null:o("calcite-block",{class:h.toggleBlock,heading:t.header?this.label:"",key:"toggle-block",open:!0},l)}_renderEnabledToggle(){const{messages:t,viewModel:e}=this,{snappingOptions:l}=e;return o(T,{checked:l.enabled,disabled:l.enabledToggled,key:`${this.id}__enabled-toggle`,label:t.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){const{messages:t,viewModel:e}=this,{snappingOptions:l}=e,n=l.enabled&&l.selfEnabled,a=l.enabledToggled||!l.enabled;return o(T,{checked:n,disabled:a,key:`${this.id}__self-enabled-toggle`,label:t.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){const{messages:t,viewModel:e}=this,{snappingOptions:l}=e,n=l.enabled&&l.featureEnabled,a=l.enabledToggled||!l.enabled;return o(T,{checked:n,disabled:a,key:`${this.id}__feature-enabled-toggle`,label:t.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const{messages:t,viewModel:e}=this,{snappingOptions:{enabled:l,enabledToggled:n}}=e,a=({target:{value:L}})=>{this._layerListFilter=L===""?null:new RegExp(L,"i")},r=e.layerListViewModel.operationalItems.length>9?o("calcite-input",{class:h.layerListFilter,clearable:!0,placeholder:t==null?void 0:t.searchLayers,onCalciteInputInput:a}):null,c=n||!l,O=this.layerListOpen&&!c;return o("calcite-block",{class:h.layerListBlock,collapsible:!0,disabled:c,heading:t.snappingLayers,key:"list-block",open:O,onCalciteBlockToggle:L=>this.layerListOpen=L.target.open},r,this._renderToggleLayersButton(),o("calcite-list",{class:h.layerList},this._renderLayerListItemCollection(e.layerListViewModel.operationalItems,this._layerListFilter)))}_renderLayerListItemCollection(t,e){return t.map(l=>{if(!e||this._itemTitleMatchesFilter(l,e))return l.children.length>0?this._renderLayerListItemGroup(l):this._renderLayerListItem(l);const n=l.children.filter(a=>this._itemTitleMatchesFilter(a,e));return n.length>0?this._renderLayerListItemGroup(l,n):null}).toArray().filter(S)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;const{viewModel:{allLayersEnabled:t},messages:e}=this,l=t?e.disableAllLayers:e.enableAllLayers;return o("calcite-button",{appearance:"transparent",class:h.layerListButton,label:l,name:"layer-toggle",onclick:this._onToggleLayersButtonClick,scale:"m"},l)}_renderLayerListItem(t){const{messages:{untitledLayer:e}}=this,l=t.title||e,n=t.enabled,a=()=>{this._handleLayerListItemChange({checked:!n,value:t.layer.id})};return o("calcite-list-item",{class:h.layerListItem,key:`${this.id}-list-item-${t.uid}`,label:l,onCalciteListItemSelect:a},o("calcite-icon",{icon:n?f.checked:f.unchecked,scale:"s",slot:"content-start"}))}_renderLayerListItemGroup(t,e){const{allChildrenEnabled:l,children:n,hasChildrenEnabled:a,title:r}=t,c=this.messages,O=r||c.untitledLayer,L=r&&r!==""?r:le(),U=!!e,W=e??n,Y=l?f.checked:a?f.indeterminate:f.unchecked,Z=l?c.disableAllLayers:c.enableAllLayers,ee=()=>{this.viewModel.toggleSnappingForLayers(t.childLayerIds,!l)};return o("calcite-list-item",{class:h.layerListItem,key:L},o("calcite-accordion",{appearance:"transparent",class:h.layerListGroup},o("calcite-accordion-item",{expanded:U,heading:O,key:t.uid},o("calcite-action",{onclick:ee,scale:"m",slot:"actions-start",text:Z,textEnabled:!1},o("calcite-icon",{icon:Y,scale:"s"})),o("calcite-list",null,this._renderLayerListItemCollection(W)))))}_itemTitleMatchesFilter(t,e){return e!=null&&e.test(t.title)}async _handleLayerListItemChange(t){t.checked?this.viewModel.enableSnappingForLayer(t.value):this.viewModel.disableSnappingForLayer(t.value)}};i([s()],p.prototype,"_defaultViewModel",void 0),i([s()],p.prototype,"_layerListFilter",void 0),i([s()],p.prototype,"iconClass",void 0),i([s()],p.prototype,"icon",void 0),i([s()],p.prototype,"label",null),i([s({type:Boolean,nonNullable:!0})],p.prototype,"layerListOpen",void 0),i([s(),R("esri/widgets/support/SnappingControls/t9n/SnappingControls")],p.prototype,"messages",void 0),i([s()],p.prototype,"snappingOptions",null),i([s()],p.prototype,"view",null),i([s()],p.prototype,"viewModel",null),i([s({type:K,nonNullable:!0})],p.prototype,"visibleElements",void 0),p=i([w("esri.widgets.support.SnappingControls")],p);const Ce=p;export{Me as _,K as a,J as l,Ce as w};
