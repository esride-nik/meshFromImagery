import{M as m,ez as c}from"./index-b516d057.js";function u(e,n){return n?"xoffset"in n&&n.xoffset?Math.max(e,Math.abs(n.xoffset)):"yoffset"in n&&n.yoffset?Math.max(e,Math.abs(n.yoffset||0)):e:e}function h(e){let n=0,t=0;for(let r=0;r<e.length;r++){const s=e[r].size;typeof s=="number"&&(n+=s,t++)}return n/t}function p(e,n){var t;return typeof e=="number"?e:(t=e==null?void 0:e.stops)!=null&&t.length?h(e.stops):n}function M(e,n){if(!n)return e;const t=n.filter(o=>o.type==="size").map(o=>{const{maxSize:a,minSize:f}=o;return(p(a,e)+p(f,e))/2});let r=0;const s=t.length;if(s===0)return e;for(let o=0;o<s;o++)r+=t[o];const i=Math.floor(r/s);return Math.max(i,e)}function b(e){var i,o;const n=e==null?void 0:e.renderer,t=(i=e==null?void 0:e.event)==null?void 0:i.pointerType,r=t==="touch"?9:6;if(!n)return r;const s="visualVariables"in n?M(r,n.visualVariables):r;if(n.type==="simple")return u(s,n.symbol);if(n.type==="unique-value"){let a=s;return(o=n.uniqueValueInfos)==null||o.forEach(f=>{a=u(a,f.symbol)}),a}if(n.type==="class-breaks"){let a=s;return n.classBreakInfos.forEach(f=>{a=u(a,f.symbol)}),a}return n.type==="dot-density"||n.type,s}function z(e,n,t,r=new m){let s=0;if(t.type==="2d")s=n*(t.resolution??0);else if(t.type==="3d"){const x=t.overlayPixelSizeInMapUnits(e),l=t.basemapSpatialReference;s=l==null||l.equals(t.spatialReference)?n*x:c(l)/c(t.spatialReference)}const i=e.x-s,o=e.y-s,a=e.x+s,f=e.y+s,{spatialReference:y}=t;return r.xmin=Math.min(i,a),r.ymin=Math.min(o,f),r.xmax=Math.max(i,a),r.ymax=Math.max(o,f),r.spatialReference=y,r}function R(e,n,t){const r=t.toMap(e);return r==null?!1:z(r,b(),t,d).intersects(n)}const d=new m;export{R as i,b as o,z as r};
