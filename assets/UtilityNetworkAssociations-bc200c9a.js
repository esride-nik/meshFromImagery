import{a5 as e,a6 as n,a9 as E,bA as N,dT as L,_ as u,dA as J,j5 as R,mW as S,V as K,cb as C,an as V,s as D,kl as Q,eI as X,eJ as Y,di as G,B as O,M as Z,eH as U,eL as tt,km as it}from"./index-b516d057.js";import{e as I,O as W,n as s,r as F}from"./jsxFactory-92036771.js";import{h as st}from"./UpdatingHandles-7949a657.js";import{e as B}from"./layerUtils-437666a3.js";import"./uuid-709b6c67.js";let b=class extends N{constructor(t){super(t),this.arrowsToggle=!1,this.capSelect=!1,this.colorPicker=!0,this.stylePicker=!0,this.widthInput=!0}};e([n({type:Boolean,nonNullable:!0})],b.prototype,"arrowsToggle",void 0),e([n({type:Boolean,nonNullable:!0})],b.prototype,"capSelect",void 0),e([n({type:Boolean,nonNullable:!0})],b.prototype,"colorPicker",void 0),e([n({type:Boolean,nonNullable:!0})],b.prototype,"stylePicker",void 0),e([n({type:Boolean,nonNullable:!0})],b.prototype,"widthInput",void 0),b=e([E("esri.widgets.UtilityNetworkAssociations.VisibleElementsSettingsPane")],b);const f=b,v="esri-un-associations",_={divControlsSymbolPicker:`${v}__div-controls-symbol-picker`,dropdown:`${v}__dropdown`,dropdownItemLineCap:`${v}__dropdown-item-line-cap`,dropdownItemLinePattern:`${v}__dropdown-item-line-pattern`,dropdownSelectedItemLineCap:`${v}__dropdown-selected-item-line-cap`,dropdownSelectedItemLinePattern:`${v}__dropdown-selected-item-line-pattern`,dropdownTrigger:`${v}__dropdown-trigger`,labelAndToggle:`${v}__label-and-toggle`};let k=class extends W{constructor(t,i){super(t,i),this._lineCapTypes=["butt","round","square"],this._lineStyleTypes=["solid","dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","short-dash","short-dash-dot","short-dash-dot-dot","short-dot"],this.lineSymbol=new L,this.messages=null,this.showArrows=!1,this.visibleElements=new f,this._afterComponentCreate=this._afterComponentCreate.bind(this)}render(){const{messages:{input:{lineCap:t,lineColor:i,lineStyle:o,lineWidth:a,showArrows:c}},visibleElements:h}=this,A=this.lineSymbol;return s("div",{class:_.divControlsSymbolPicker},h.arrowsToggle?this._renderToggle(c,this.showArrows,A,"marker"):void 0,h.capSelect?this._renderLineStylePicker(t,this._lineCapTypes,A,"cap"):void 0,h.colorPicker&&A.color?this._renderColorPicker(i,A.color.toHex(),A,"color"):void 0,h.stylePicker?this._renderLineStylePicker(o,this._lineStyleTypes,A,"style"):void 0,h.widthInput?this._renderNumberInput(a,A.width.toString(),A,"width"):void 0)}loadDependencies(){return F({dropdown:()=>u(()=>import("./calcite-dropdown-772cccf6.js"),["assets/calcite-dropdown-772cccf6.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/floating-ui-a6c9d5df.js","assets/debounce-7cc294e2.js","assets/guid-2347ca41.js","assets/interactive-39956fb6.js","assets/key-c2c83cc7.js","assets/loadable-7d42c3de.js","assets/observers-9c654f26.js","assets/openCloseComponent-3fbda1cf.js"]),"dropdown-group":()=>u(()=>import("./calcite-dropdown-group-67362aeb.js"),["assets/calcite-dropdown-group-67362aeb.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/observers-9c654f26.js","assets/resources2-13ab706c.js"]),"dropdown-item":()=>u(()=>import("./calcite-dropdown-item-38ec91b4.js"),["assets/calcite-dropdown-item-38ec91b4.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/resources2-13ab706c.js","assets/loadable-7d42c3de.js","assets/component-7281ffa6.js","assets/icon-c122f720.js","assets/observers-9c654f26.js"]),input:()=>u(()=>import("./calcite-input-f0ebb300.js"),["assets/calcite-input-f0ebb300.js","assets/input-9795a695.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/form-60623048.js","assets/interactive-39956fb6.js","assets/key-c2c83cc7.js","assets/label2-0071fcd4.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/observers-9c654f26.js","assets/t9n-622f279b.js","assets/component-7281ffa6.js","assets/icon-c122f720.js","assets/progress-2100df13.js"]),"input-number":()=>u(()=>import("./calcite-input-number-0916b1b5.js"),["assets/calcite-input-number-0916b1b5.js","assets/input-number-9c00b0ee.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/form-60623048.js","assets/interactive-39956fb6.js","assets/key-c2c83cc7.js","assets/label2-0071fcd4.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/observers-9c654f26.js","assets/t9n-622f279b.js","assets/component-7281ffa6.js","assets/icon-c122f720.js","assets/progress-2100df13.js"]),label:()=>u(()=>import("./calcite-label-4966fb24.js"),["assets/calcite-label-4966fb24.js","assets/label-fe92b4f9.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/label2-0071fcd4.js"]),switch:()=>u(()=>import("./calcite-switch-d026b1cc.js"),["assets/calcite-switch-d026b1cc.js","assets/switch-bf0dca96.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/form-60623048.js","assets/interactive-39956fb6.js","assets/key-c2c83cc7.js","assets/label2-0071fcd4.js","assets/loadable-7d42c3de.js"])})}_afterComponentCreate(t){"value"in t&&t.value!=null&&"setNumberValue"in t&&t.setNumberValue({committing:!1,value:t.value,origin:"direct"})}_renderColorPicker(t,i,o,a){return s("calcite-label",{scale:"s"},t,s("calcite-input",{scale:"s",type:"color",value:i,onCalciteInputInput:c=>{const h=c.target;o.set(a,new J(h.value))}}))}_renderLineStylePicker(t,i,o,a){const c=a==="style",h="esri/widgets/UtilityNetworkAssociations/assets/img";function A(y,p){return s("calcite-dropdown-item",{label:y,selected:o[p]===y},s("div",{class:c?_.dropdownItemLinePattern:_.dropdownItemLineCap,style:`background-image:url(${R(`${h}/line-${c?"patterns":"caps"}/${y}.png`)})`}))}return s("calcite-label",{scale:"s"},t,s("calcite-dropdown",{class:_.dropdown,onCalciteDropdownSelect:y=>{const p=y.target;o.set(a,p.selectedItems[0].label)}},s("div",{class:_.dropdownTrigger,role:"button",slot:"trigger"},s("div",{class:c?_.dropdownSelectedItemLinePattern:_.dropdownSelectedItemLineCap,style:`background-image:url(${R(`${h}/line-${c?"patterns":"caps"}/${o[a]}.png`)})`})),s("calcite-dropdown-group",null,i.map(y=>A(y,a)))))}_renderNumberInput(t,i,o,a){return s("calcite-label",{scale:"s"},t,s("calcite-input-number",{afterCreate:this._afterComponentCreate,max:10,min:1,scale:"s",step:1,type:"number",value:i,onCalciteInputNumberChange:c=>{const h=c.target;o.set(a,h.value)}}))}_renderToggle(t,i,o,a){return s("div",{class:_.labelAndToggle},s("calcite-label",{scale:"s"},t),s("calcite-switch",{bind:this,checked:i,scale:"m",onCalciteSwitchChange:c=>{c.target.checked?o.set(a,new S({style:"arrow"})):o.set(a,null)}}))}};e([n()],k.prototype,"lineSymbol",void 0),e([n(),I("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],k.prototype,"messages",void 0),e([n()],k.prototype,"showArrows",void 0),e([n({type:f,nonNullable:!0})],k.prototype,"visibleElements",void 0),k=e([E("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsLineSymbolPicker")],k);const H=k;let d=class extends N{constructor(t){super(t),this._internalGraphicsLayerConnectivity=this._createInternalGraphicsLayer("Connectivity Associations (Internal)"),this._internalGraphicsLayerStructuralAttachment=this._createInternalGraphicsLayer("Structural Attachment Associations (Internal)"),this._initialValidationsFinished=!1,this._updatingHandles=new st,this.autoRefreshAssociations=!1,this.connectivityAssociationsLineSymbol=new L({style:"short-dash",width:2,color:[190,159,159,1]}),this.executionError="",this.loadErrors=new K,this.maxAllowableAssociations=250,this.showAssociationsEnabled=!1,this.showArrowsConnectivity=!1,this.showArrowsStructuralAttachment=!1,this.structuralAttachmentAssociationsLineSymbol=new L({style:"short-dash",width:2,color:[159,190,159,1]})}initialize(){const t=async()=>{this.messages||(this.messages=await it("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations"))};t().then(()=>{this.view||(this.view=null),this.utilityNetwork||(this.utilityNetwork=null),this.addHandles([C(()=>[this.view,this.utilityNetwork],async()=>{var A,y;const{loadErrors:i,messages:{info:{noUtilityNetwork:o,noView:a}}}=this;this._initialValidationsFinished=!1,i.removeAll();let c=!1,h=!1;this.removeAssociations(),((A=this.utilityNetwork)==null?void 0:A.type)!=="utility"?(this.loadErrors.push(o),V.getLogger(this).error(new D("utilityNetworkAssociations:missing-property",o))):(this.utilityNetwork.loaded||await this.utilityNetwork.load(),c=!0),((y=this.view)==null?void 0:y.type)!=="2d"?(this.loadErrors.push(a),V.getLogger(this).error(new D("utilityNetworkAssociations:missing-property",a))):(B(this.view,this._internalGraphicsLayerConnectivity),B(this.view,this._internalGraphicsLayerStructuralAttachment),h=!0),c&&h&&this.showAssociationsEnabled&&await this.showAssociations(),this._internalGraphicsLayerConnectivity.visible=this.includeConnectivityAssociations,this._internalGraphicsLayerStructuralAttachment.visible=this.includeStructuralAttachmentAssociations,this._initialValidationsFinished=!0},{initial:!0}),C(()=>{var i;return[(i=this.view)==null?void 0:i.stationary,this.showAssociationsEnabled,this.maxAllowableAssociations]},async()=>{var i;(i=this.view)!=null&&i.stationary&&this.showAssociationsEnabled&&(this.includeConnectivityAssociations||this.includeStructuralAttachmentAssociations)&&await this.showAssociations()}),C(()=>[this.showArrowsConnectivity],()=>{const i=this.connectivityAssociationsLineSymbol.clone();i.marker=null,this.showArrowsConnectivity&&(i.marker=new S({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const o of this._internalGraphicsLayerConnectivity.graphics)o.symbol=i}),C(()=>[this.showArrowsStructuralAttachment],()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();i.marker=null,this.showArrowsStructuralAttachment&&(i.marker=new S({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}));for(const o of this._internalGraphicsLayerStructuralAttachment.graphics)o.symbol=i}),C(()=>{const{cap:i,color:o,style:a,width:c,marker:h}=this.connectivityAssociationsLineSymbol;return[i,o,a,c,h]},()=>{const i=this.connectivityAssociationsLineSymbol.clone();for(const o of this._internalGraphicsLayerConnectivity.graphics)o.symbol=i;this.showArrowsConnectivity=!1,i.marker=null,this.connectivityAssociationsLineSymbol.marker&&(this.showArrowsConnectivity=!0,i.marker=new S({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),C(()=>{const{cap:i,color:o,style:a,width:c,marker:h}=this.structuralAttachmentAssociationsLineSymbol;return[i,o,a,c,h]},()=>{const i=this.structuralAttachmentAssociationsLineSymbol.clone();for(const o of this._internalGraphicsLayerStructuralAttachment.graphics)o.symbol=i;this.showArrowsStructuralAttachment=!1,i.marker=null,this.structuralAttachmentAssociationsLineSymbol.marker&&(this.showArrowsStructuralAttachment=!0,i.marker=new S({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"}))}),Q(t)])})}destroy(){this._updatingHandles.destroy(),this.view=null,this._removeInternalGraphicsLayers()}set includeConnectivityAssociations(t){this._set("includeConnectivityAssociations",t),this._internalGraphicsLayerConnectivity.visible=t}set includeStructuralAttachmentAssociations(t){this._set("includeStructuralAttachmentAssociations",t),this._internalGraphicsLayerStructuralAttachment.visible=t}get state(){return this.loadErrors.length?"disabled":this._updatingHandles.updating?"executing":this.executionError!==""?"warning":this._initialValidationsFinished?"ready":"loading"}set utilityNetwork(t){this._get("utilityNetwork")!==t&&this._set("utilityNetwork",t)}set view(t){this._get("view")!==t&&this._set("view",t)}removeAssociations(){this._internalGraphicsLayerConnectivity.removeAll(),this._internalGraphicsLayerStructuralAttachment.removeAll()}async showAssociations(){const{messages:{info:{maxAllowableAssociationsExceeded:t,noAssociationsFound:i}},utilityNetwork:o}=this,{spatialReference:a,extent:{xmin:c,ymin:h,xmax:A,ymax:y}}=this.view,p=o==null?void 0:o.spatialReference;X()||await Y();const T=G(new O({x:c,y:h,spatialReference:a}),p),P=G(new O({x:A,y,spatialReference:a}),p),q=new Z({xmin:T.x,ymin:T.y,xmax:P.x,ymax:P.y,spatialReference:p});this._set("executionError",""),this.removeAssociations(),this._updatingHandles.addPromise(o==null?void 0:o.synthesizeAssociationGeometries({returnConnectivityAssociations:this.includeConnectivityAssociations,returnAttachmentAssociations:this.includeStructuralAttachmentAssociations,extent:q,outSpatialReference:p,maxGeometryCount:this.maxAllowableAssociations}).then(w=>{let $=[],M=[];w!=null&&w.maxGeometryCountExceeded?this._set("executionError",t):(w==null?void 0:w.associations.length)!==0?w&&($=w==null?void 0:w.associations.filter(({associationType:g})=>g==="connectivity").map(g=>(this.connectivityAssociationsLineSymbol.marker=null,this.showArrowsConnectivity&&(this.connectivityAssociationsLineSymbol.marker=new S({color:this.connectivityAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new U({geometry:g.geometry.clone(),symbol:this.connectivityAssociationsLineSymbol}))),M=w.associations.filter(({associationType:g})=>g==="attachment").map(g=>(this.structuralAttachmentAssociationsLineSymbol.marker=null,this.showArrowsStructuralAttachment&&(this.structuralAttachmentAssociationsLineSymbol.marker=new S({color:this.structuralAttachmentAssociationsLineSymbol.color,placement:"end",style:"arrow"})),new U({geometry:g.geometry.clone(),symbol:this.structuralAttachmentAssociationsLineSymbol}))),$.length>0&&this._internalGraphicsLayerConnectivity.addMany($),M.length>0&&this._internalGraphicsLayerStructuralAttachment.addMany(M)):this._set("executionError",i)},({message:w})=>{this._set("executionError",w)}))}_createInternalGraphicsLayer(t){return new tt({listMode:"hide",internal:!0,title:t})}_removeInternalGraphicsLayers(){var t;this._internalGraphicsLayerConnectivity&&this._internalGraphicsLayerStructuralAttachment&&((t=this.view)!=null&&t.map)&&(this.view.map.remove(this._internalGraphicsLayerConnectivity),this.view.map.remove(this._internalGraphicsLayerStructuralAttachment))}};e([n()],d.prototype,"_initialValidationsFinished",void 0),e([n()],d.prototype,"autoRefreshAssociations",void 0),e([n({type:L,nonNullable:!0})],d.prototype,"connectivityAssociationsLineSymbol",void 0),e([n({readOnly:!0})],d.prototype,"executionError",void 0),e([n({type:Boolean,value:!0})],d.prototype,"includeConnectivityAssociations",null),e([n({type:Boolean,value:!0})],d.prototype,"includeStructuralAttachmentAssociations",null),e([n()],d.prototype,"loadErrors",void 0),e([n()],d.prototype,"maxAllowableAssociations",void 0),e([n()],d.prototype,"messages",void 0),e([n()],d.prototype,"showAssociationsEnabled",void 0),e([n()],d.prototype,"showArrowsConnectivity",void 0),e([n()],d.prototype,"showArrowsStructuralAttachment",void 0),e([n({readOnly:!0})],d.prototype,"state",null),e([n({type:L,nonNullable:!0})],d.prototype,"structuralAttachmentAssociationsLineSymbol",void 0),e([n()],d.prototype,"utilityNetwork",null),e([n()],d.prototype,"view",null),d=e([E("esri.widgets.UtilityNetworkAssociations.UtilityNetworkAssociationsViewModel")],d);const z=d;let x=class extends N{constructor(t){super(t),this.maxAllowableAssociationsSlider=!1,this.connectivityAssociationsSettings=null,this.structuralAttachmentAssociationsSettings=null}};e([n({type:Boolean,nonNullable:!0})],x.prototype,"maxAllowableAssociationsSlider",void 0),e([n({type:f,nonNullable:!0})],x.prototype,"connectivityAssociationsSettings",void 0),e([n({type:f,nonNullable:!0})],x.prototype,"structuralAttachmentAssociationsSettings",void 0),x=e([E("esri.widgets.UtilityNetworkAssociations.VisibleElements")],x);const j=x,m="esri-un-associations",l={action:`${m}__action`,actionRefresh:`${m}__action-refresh`,blockContent:`${m}__block-content`,blockSectionSettings:`${m}__block-section-settings`,divControlsMain:`${m}__div-controls-main`,label:`${m}__label`,labelAndSlider:`${m}__label-and-slider`,labelAndToggle:`${m}__label-and-toggle`,slider:`${m}__slider`,statusIconContainer:`${m}__status-icon-container`,statusIconWarning:`${m}__status-icon-warning`,switch:`${m}__switch`,switchContainer:`${m}__switch-container`,widgetContainer:`${m}__widget-container`};let r=class extends W{constructor(t,i){super(t,i),this._autoRefreshAssociations=!0,this._associationsOptionsEnabled=!1,this._maxAllowableAssociationsSliderMax=1e3,this._maxAllowableAssociationsSliderMin=250,this._maxAllowableAssociationsSliderStep=250,this.messages=null,this.messagesCommon=null,this.viewModel=new z,this.visibleElements=new j}initialize(){this.addHandles([C(()=>{var t;return[(t=this.view)==null?void 0:t.stationary,this.showAssociationsEnabled,this.includeConnectivityAssociations,this.includeStructuralAttachmentAssociations,this.maxAllowableAssociations]},()=>{this.autoRefreshAssociations===!0&&(this.showAssociationsEnabled===!0?this.viewModel.showAssociations():this.viewModel.removeAssociations())})])}get autoRefreshAssociations(){return this._autoRefreshAssociations}set autoRefreshAssociations(t){this._autoRefreshAssociations=t}get connectivityAssociationsLineSymbol(){return this.viewModel.connectivityAssociationsLineSymbol}set connectivityAssociationsLineSymbol(t){this.viewModel.connectivityAssociationsLineSymbol=t}get includeConnectivityAssociations(){return this.viewModel.includeConnectivityAssociations}set includeConnectivityAssociations(t){this.viewModel.includeConnectivityAssociations=t}get includeStructuralAttachmentAssociations(){return this.viewModel.includeStructuralAttachmentAssociations}set includeStructuralAttachmentAssociations(t){this.viewModel.includeStructuralAttachmentAssociations=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get maxAllowableAssociations(){return this.viewModel.maxAllowableAssociations}set maxAllowableAssociations(t){this.viewModel.maxAllowableAssociations=t}get maxAllowableAssociationsSliderMax(){return this._maxAllowableAssociationsSliderMax}set maxAllowableAssociationsSliderMax(t){t<=this.maxAllowableAssociationsSliderMin||(this._maxAllowableAssociationsSliderMax=t)}get maxAllowableAssociationsSliderMin(){return this._maxAllowableAssociationsSliderMin}set maxAllowableAssociationsSliderMin(t){t<0||t>=this.maxAllowableAssociationsSliderMax||(this._maxAllowableAssociationsSliderMin=t)}get maxAllowableAssociationsSliderStep(){return this._maxAllowableAssociationsSliderStep}set maxAllowableAssociationsSliderStep(t){this._maxAllowableAssociationsSliderStep=t}get showArrowsConnectivity(){return this.viewModel.showArrowsConnectivity}set showArrowsConnectivity(t){this.viewModel.showArrowsConnectivity=t}get showArrowsStructuralAttachment(){return this.viewModel.showArrowsStructuralAttachment}set showArrowsStructuralAttachment(t){this.viewModel.showArrowsStructuralAttachment=t}get showAssociationsEnabled(){return this.viewModel.showAssociationsEnabled}set showAssociationsEnabled(t){this.viewModel.showAssociationsEnabled=t}get structuralAttachmentAssociationsLineSymbol(){return this.viewModel.structuralAttachmentAssociationsLineSymbol}set structuralAttachmentAssociationsLineSymbol(t){this.viewModel.structuralAttachmentAssociationsLineSymbol=t}get utilityNetwork(){return this.viewModel.utilityNetwork}set utilityNetwork(t){this.viewModel.utilityNetwork=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{label:t}=this;return s("div",{class:l.widgetContainer},s("calcite-block",{class:l.blockContent,collapsible:!0,heading:t},this._renderStatusIcon(),this.autoRefreshAssociations?this._renderShowAssociationsSwitch():this._renderRefreshAssociationsAction(),this._renderContent()))}loadDependencies(){return F({action:()=>u(()=>import("./calcite-action-dcffc330.js"),["assets/calcite-action-dcffc330.js","assets/action-79a6733c.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/guid-2347ca41.js","assets/interactive-39956fb6.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/observers-9c654f26.js","assets/component-7281ffa6.js","assets/t9n-622f279b.js","assets/icon-c122f720.js","assets/loader-ea663d25.js"]),block:()=>u(()=>import("./calcite-block-0b12426c.js"),["assets/calcite-block-0b12426c.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/conditionalSlot-11b5e54d.js","assets/observers-9c654f26.js","assets/interactive-39956fb6.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/t9n-622f279b.js","assets/Heading-2d7d203c.js","assets/loadable-7d42c3de.js","assets/openCloseComponent-3fbda1cf.js","assets/action-79a6733c.js","assets/guid-2347ca41.js","assets/component-7281ffa6.js","assets/icon-c122f720.js","assets/loader-ea663d25.js","assets/action-menu-8419d112.js","assets/array-755a0ace.js","assets/popover-33772892.js","assets/floating-ui-a6c9d5df.js","assets/debounce-7cc294e2.js","assets/FloatingArrow-9e5c8eb0.js","assets/handle-d29406b2.js","assets/scrim-41a5f26e.js"]),"block-section":()=>u(()=>import("./calcite-block-section-fee737f3.js"),["assets/calcite-block-section-fee737f3.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/key-c2c83cc7.js","assets/locale-2cb18332.js","assets/observers-9c654f26.js","assets/t9n-622f279b.js","assets/loadable-7d42c3de.js","assets/icon-c122f720.js","assets/label-fe92b4f9.js","assets/label2-0071fcd4.js","assets/switch-bf0dca96.js","assets/form-60623048.js","assets/interactive-39956fb6.js"]),icon:()=>u(()=>import("./calcite-icon-39deb8ae.js"),["assets/calcite-icon-39deb8ae.js","assets/icon-c122f720.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/observers-9c654f26.js"]),label:()=>u(()=>import("./calcite-label-4966fb24.js"),["assets/calcite-label-4966fb24.js","assets/label-fe92b4f9.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/label2-0071fcd4.js"]),notice:()=>u(()=>import("./calcite-notice-ae448cb5.js"),["assets/calcite-notice-ae448cb5.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/conditionalSlot-11b5e54d.js","assets/observers-9c654f26.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/t9n-622f279b.js","assets/openCloseComponent-3fbda1cf.js","assets/component-7281ffa6.js","assets/icon-c122f720.js"]),panel:()=>u(()=>import("./calcite-panel-e7a1d066.js"),["assets/calcite-panel-e7a1d066.js","assets/panel-4decad7b.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/interactive-39956fb6.js","assets/loadable-7d42c3de.js","assets/observers-9c654f26.js","assets/action-menu-8419d112.js","assets/array-755a0ace.js","assets/guid-2347ca41.js","assets/key-c2c83cc7.js","assets/action-79a6733c.js","assets/locale-2cb18332.js","assets/component-7281ffa6.js","assets/t9n-622f279b.js","assets/icon-c122f720.js","assets/loader-ea663d25.js","assets/popover-33772892.js","assets/floating-ui-a6c9d5df.js","assets/debounce-7cc294e2.js","assets/Heading-2d7d203c.js","assets/openCloseComponent-3fbda1cf.js","assets/FloatingArrow-9e5c8eb0.js","assets/scrim-41a5f26e.js"]),slider:()=>u(()=>import("./calcite-slider-7adfa62e.js"),["assets/calcite-slider-7adfa62e.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/guid-2347ca41.js","assets/form-60623048.js","assets/interactive-39956fb6.js","assets/key-c2c83cc7.js","assets/label2-0071fcd4.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/observers-9c654f26.js","assets/math-d5d87794.js"]),switch:()=>u(()=>import("./calcite-switch-d026b1cc.js"),["assets/calcite-switch-d026b1cc.js","assets/switch-bf0dca96.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/form-60623048.js","assets/interactive-39956fb6.js","assets/key-c2c83cc7.js","assets/label2-0071fcd4.js","assets/loadable-7d42c3de.js"]),tooltip:()=>u(()=>import("./calcite-tooltip-5cb74da1.js"),["assets/calcite-tooltip-5cb74da1.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/floating-ui-a6c9d5df.js","assets/debounce-7cc294e2.js","assets/guid-2347ca41.js","assets/openCloseComponent-3fbda1cf.js","assets/FloatingArrow-9e5c8eb0.js"])})}_connectivityAssociationsSwitchChange(t){this.includeConnectivityAssociations=t.target.checked}_getLoadErrorMessagesAsNotices(t,i){return s("calcite-notice",{closable:!1,key:`error-notice-${i}`,kind:"warning",open:!0,scale:"s"},s("div",{slot:"message"},t))}_maxAllowableAssociationsSliderChange(t){this.maxAllowableAssociations=Number(t.target.value)}_refreshAssociations(){const{viewModel:t,viewModel:{state:i}}=this;i!=="ready"&&i!=="warning"||t.showAssociations()}_renderConnectivityAsssociationsSettings(){const{messages:{input:{enableConnectivity:t}},visibleElements:{connectivityAssociationsSettings:i}}=this;if(i)return s("calcite-block-section",{class:l.blockSectionSettings,text:t},s(H,{id:`${this.id}-symbol-picker-connectivity`,lineSymbol:this.connectivityAssociationsLineSymbol,showArrows:this.showArrowsConnectivity,visibleElements:i}))}_renderConnectivityAssociationsToggle(){const{messages:{input:{enableConnectivity:t}}}=this;return s("div",{class:l.labelAndToggle,key:"connectivityAssociationsToggleDiv"},s("calcite-label",{class:l.label},t),s("calcite-switch",{bind:this,checked:this.includeConnectivityAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._connectivityAssociationsSwitchChange}))}_renderContent(){const{viewModel:{loadErrors:t,state:i}}=this;return i==="disabled"?s("div",{class:l.divControlsMain,key:"loadErrorsDiv"},t.items.map(this._getLoadErrorMessagesAsNotices)):s("calcite-panel",{disabled:i==="loading"},s("div",{class:l.divControlsMain},this._renderConnectivityAssociationsToggle(),this._renderStructuralAttachmentAssociationsToggle(),this._renderSettingsPane()))}_renderLoadingAction(t,i,o){return s("div",{key:t,slot:"control"},s("calcite-action",{id:i,loading:!0,text:o}),s("calcite-tooltip",{referenceElement:i},s("span",null,o)))}_renderMaxAllowableAssociationsSlider(){const{messages:{input:{maxAllowableAssociations:t}},visibleElements:{maxAllowableAssociationsSlider:i}}=this;if(i)return s("div",{class:l.labelAndSlider},s("calcite-label",{class:l.label},t),s("calcite-slider",{bind:this,class:l.slider,labelTicks:!0,max:this.maxAllowableAssociationsSliderMax,min:this.maxAllowableAssociationsSliderMin,scale:"s",snap:!0,step:this.maxAllowableAssociationsSliderStep,ticks:this.maxAllowableAssociationsSliderStep,value:this.maxAllowableAssociations,onCalciteSliderChange:this._maxAllowableAssociationsSliderChange}))}_renderRefreshAssociationsAction(){const{messages:{input:{refreshAssociations:t}},messagesCommon:{loading:i},viewModel:{state:o}}=this,a=`${this.id}-refresh-action`;if(o!=="disabled")return s("div",{class:l.actionRefresh,slot:"control"},s("calcite-action",{bind:this,class:l.action,icon:"refresh-",id:a,loading:o==="loading",onclick:this._refreshAssociations,text:t}),s("calcite-tooltip",{referenceElement:a},s("span",null,o==="loading"?i:t)))}_renderSettingsPane(){const{messagesCommon:{settings:t},visibleElements:{maxAllowableAssociationsSlider:i,connectivityAssociationsSettings:o,structuralAttachmentAssociationsSettings:a}}=this;if(i||o||a)return s("calcite-block",{class:l.blockContent,collapsible:!0,heading:t},this._renderMaxAllowableAssociationsSlider(),this._renderConnectivityAsssociationsSettings(),this._renderStructuralAttachmentAsssociationsSettings())}_renderShowAssociationsSwitch(){const{messages:{input:{enableAssociations:t}},messagesCommon:{loading:i},viewModel:{state:o}}=this,a=`${this.id}-show-associations-switch`;if(o!=="disabled")return o==="loading"?this._renderLoadingAction("loadingActionDiv",`${this.id}-loading-action`,i):s("div",{class:l.switchContainer,key:"switchDiv",slot:"control"},s("calcite-switch",{bind:this,checked:this.showAssociationsEnabled,class:l.switch,id:a,onCalciteSwitchChange:this._showAssociationsSwitchChange}),s("calcite-tooltip",{referenceElement:a},s("span",null,t)))}_renderStatusIcon(){const{messagesCommon:{executing:t},viewModel:{executionError:i,state:o}}=this;switch(o){case"disabled":return this._renderWarningIcon("statusDiv",`${this.id}-disabled-icon`,null);case"warning":return this._renderWarningIcon("statusDiv",`${this.id}-warning-icon`,i);case"executing":return this._renderLoadingAction("executingActionDiv",`${this.id}-executing-action`,t);default:return}}_renderStructuralAttachmentAsssociationsSettings(){const{messages:{input:{enableStructuralAttachment:t}},visibleElements:{structuralAttachmentAssociationsSettings:i}}=this;if(i)return s("calcite-block-section",{class:l.blockSectionSettings,text:t},s(H,{id:`${this.id}-symbol-picker-structural-attachment`,lineSymbol:this.structuralAttachmentAssociationsLineSymbol,showArrows:this.showArrowsStructuralAttachment,visibleElements:i}))}_renderStructuralAttachmentAssociationsToggle(){const{messages:{input:{enableStructuralAttachment:t}}}=this;return s("div",{class:l.labelAndToggle,key:"structuralAttachmentAssociationsToggleDiv"},s("calcite-label",{class:l.label},t),s("calcite-switch",{bind:this,checked:this.includeStructuralAttachmentAssociations,disabled:!this._associationsOptionsEnabled&&this.autoRefreshAssociations,onCalciteSwitchChange:this._structuralAttAssociationsSwitchChange}))}_showAssociationsSwitchChange(t){const{viewModel:i}=this;this.showAssociationsEnabled=t.target.checked,this._associationsOptionsEnabled=t.target.checked,this.showAssociationsEnabled||i.removeAssociations()}_structuralAttAssociationsSwitchChange(t){this.includeStructuralAttachmentAssociations=t.target.checked}_renderWarningIcon(t,i,o){return o?s("div",{class:l.statusIconContainer,key:t,slot:"control"},s("calcite-icon",{class:l.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}),s("calcite-tooltip",{referenceElement:i},s("span",null,o))):s("div",{class:l.statusIconContainer,key:t,slot:"control"},s("calcite-icon",{class:l.statusIconWarning,icon:"exclamation-mark-triangle",id:i,scale:"s"}))}};e([n()],r.prototype,"autoRefreshAssociations",null),e([n()],r.prototype,"connectivityAssociationsLineSymbol",null),e([n()],r.prototype,"includeConnectivityAssociations",null),e([n()],r.prototype,"includeStructuralAttachmentAssociations",null),e([n()],r.prototype,"label",null),e([n()],r.prototype,"maxAllowableAssociations",null),e([n()],r.prototype,"maxAllowableAssociationsSliderMax",null),e([n()],r.prototype,"maxAllowableAssociationsSliderMin",null),e([n()],r.prototype,"maxAllowableAssociationsSliderStep",null),e([n(),I("esri/widgets/UtilityNetworkAssociations/t9n/UtilityNetworkAssociations")],r.prototype,"messages",void 0),e([n(),I("esri/t9n/common")],r.prototype,"messagesCommon",void 0),e([n()],r.prototype,"showArrowsConnectivity",null),e([n()],r.prototype,"showArrowsStructuralAttachment",null),e([n()],r.prototype,"showAssociationsEnabled",null),e([n()],r.prototype,"structuralAttachmentAssociationsLineSymbol",null),e([n()],r.prototype,"utilityNetwork",null),e([n()],r.prototype,"view",null),e([n({type:z})],r.prototype,"viewModel",void 0),e([n({type:j,nonNullable:!0})],r.prototype,"visibleElements",void 0),r=e([E("esri.widgets.UtilityNetworkAssociations")],r);const rt=r;export{rt as default};
