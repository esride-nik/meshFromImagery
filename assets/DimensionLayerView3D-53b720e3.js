import{a5 as a,a6 as t,a9 as y,V as h,iL as w,cb as u,dr as c,s as d,cn as V,b9 as p,gj as _,gt as m,_ as v}from"./index-b516d057.js";import{n as A}from"./LayerView3D-c03d44fc.js";import{u as f}from"./LayerView-060b46d4.js";import"./heightModelInfoUtils-0dd2b6e4.js";import"./HeightModelInfo-b816d32b.js";import"./UpdatingHandles-7949a657.js";const D=e=>{let s=class extends e{constructor(...i){super(...i),this.layer=null}get interactive(){return this.analysisView!=null&&this.analysisView.interactive}set interactive(i){this.analysisView!=null&&(this.analysisView.interactive=i)}get results(){return this.analysisView!=null?this.analysisView.results:new h}get selectedDimension(){return this.analysisView!=null?this.analysisView.selectedDimension:null}set selectedDimension(i){this.analysisView!=null&&(this.analysisView.selectedDimension=i)}async createLengthDimensions(i){if(this.analysisView==null)throw w();await this.analysisView.createLengthDimensions(i)}};return a([t()],s.prototype,"layer",void 0),a([t()],s.prototype,"interactive",null),a([t({readOnly:!0})],s.prototype,"results",null),a([t()],s.prototype,"selectedDimension",null),a([t()],s.prototype,"analysisView",void 0),s=a([y("esri.views.layers.DimensionLayerView")],s),s},o="analysis-view-handles";let n=class extends A(D(f)){constructor(e){super(e),this.type="dimension-3d",this._analysisModule=null}initialize(){this.addHandles(u(()=>this.layer.source,e=>{this._destroyAnalysisView(),e!=null&&this._createAnalysisView(e)},c),o)}destroy(){this.removeHandles(o),this._destroyAnalysisView()}isUpdating(){return this._createAnalysisViewTask!=null||this.analysisView!=null&&this.analysisView.updating}async whenAnalysisView(){if(this.analysisView!=null)return this.analysisView;if(this._createAnalysisViewTask!=null)return this._createAnalysisViewTask.promise;throw new d("layerview:no-analysisview-for-analysis","The analysis has not been set on the DimensionLayer of this layer view")}_createAnalysisView(e){const s=V(async i=>(this.analysisView=await this._createAnalysisViewPromise(e,i),this._createAnalysisViewTask===s&&(this._createAnalysisViewTask=null),this.analysisView));this.addResolvingPromise(s.promise),this._createAnalysisViewTask=s}_destroyAnalysisView(){this.analysisView=p(this.analysisView),this._createAnalysisViewTask=_(this._createAnalysisViewTask)}async _createAnalysisViewPromise(e,s){let i=this._analysisModule;if(i==null){const r=await this._loadAnalysisModule();this._analysisModule=r,i=r}const l=new i.default({analysis:e,view:this.view,parent:this});if(await l.when(),m(s))throw l.destroy(),w();return l}_loadAnalysisModule(){return v(()=>import("./DimensionAnalysisView3D-cc2e9f9b.js"),["assets/DimensionAnalysisView3D-cc2e9f9b.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/AnalysisView3D-3b0b8c91.js","assets/LengthDimension-61f692da.js","assets/Cyclical-4c223a04.js","assets/getDefaultUnitForView-d1ffbf16.js","assets/unitFormatUtils-67047561.js","assets/dehydratedPoint-5a1dfed5.js","assets/hydratedFeatures-2365c307.js","assets/Segment-fd60ac10.js","assets/VisualElement-187372ae.js","assets/viewUtils-9f810d02.js","assets/elevationInfoUtils-be36d866.js","assets/jsxFactory-92036771.js","assets/uuid-709b6c67.js","assets/TextOverlayItem-7f83875e.js","assets/projectVectorToVector-56c29b20.js","assets/euclideanLengthMeasurementUtils-aa8fca96.js","assets/measurementUtils-3881da59.js","assets/manipulatorUtils-9334c98f.js","assets/interfaces-0421c5e6.js","assets/ElevationProvider-abb53936.js","assets/ray-8da55042.js","assets/RenderGeometry-5dbc1699.js","assets/vec3f32-bac7ea57.js","assets/DefaultTechniqueConfiguration-b4dbe32f.js","assets/requestImageUtils-b142708c.js","assets/enums-bdecffa2.js","assets/Texture-bcb6d63f.js","assets/contextUtils-81fda295.js","assets/interfaces-8918b36f.js","assets/Material-5f4156ac.js","assets/ViewingMode-5d7d590b.js","assets/FramebufferObject-123b7c8d.js","assets/ShaderTechniqueConfiguration-2502462e.js","assets/weather-2eb64924.js","assets/RenderState-1d6218ee.js","assets/NestedMap-1b5db22e.js","assets/frustum-f9d53cdf.js","assets/VertexElementDescriptor-2925c6af.js","assets/VertexArrayObject-d19dab8d.js","assets/Octree-7cea9440.js","assets/InterleavedLayout-d76b0d59.js","assets/types-1305598a.js","assets/OrderIndependentTransparency-755f7dcc.js","assets/floatRGBA-ca990bbb.js","assets/Intersector-2e1d9db3.js","assets/Intersector-fa865806.js","assets/boundedPlane-1da2f094.js","assets/verticalOffsetUtils-e5214af9.js","assets/orientedBoundingBox-67c5cd22.js","assets/glUtil-ce5ee52b.js","assets/Scheduler-ff5943a4.js","assets/signal-51ed66f5.js","assets/debugFlags-9a30f077.js","assets/ColorMaterial-bdf1f62a.js","assets/VerticalOffset.glsl-5743f98e.js","assets/dragEventPipeline3D-4663cd2c.js","assets/InteractiveToolBase-ddd44c70.js","assets/interfaces-1a80c8eb.js","assets/drawUtils-bd7471ac.js","assets/ImageMaterial-10c9471b.js","assets/memoize-3e55df82.js","assets/UpdatingHandles-7949a657.js","assets/Factory-829a6ea7.js","assets/SnappingVisualizer3D-493bdb16.js","assets/ExtendedLineVisualElement-451ab04d.js","assets/vec4f32-0d1b2306.js","assets/EngineVisualElement-43f3e8cb.js","assets/LaserlineVisualElement-c0026af2.js","assets/PointVisualElement-11117df9.js","assets/Object3DVisualElement-459b9b9c.js","assets/RightAngleQuadVisualElement-95156bc2.js","assets/snappingUtils-93e84fbe.js","assets/Query-071039d7.js","assets/FullTextSearch-12e0754c.js","assets/QuantizationParameters-f983cf8d.js","assets/screenUtils-8dc4a7f9.js","assets/SnappingContext-90969376.js","assets/PointSnappingHint-671c9f09.js","assets/LineVisualElement-e3bb1937.js","assets/lineStippleUtils-0688e06c.js","assets/VerticesVisualElement-efafb673.js","assets/EditGeometryOperations-c2e73f2d.js","assets/geometry2dUtils-a99dcf3d.js","assets/SceneSnappingManagerPool-2ede5e56.js","assets/SnappingManager-aa70fdd4.js","assets/FeatureFilter-55dd341e.js","assets/floorFilterUtils-080a7cd2.js","assets/SnappingDragPipelineStep-e275580d.js","assets/dehydratedFeatureComparison-7855b188.js","assets/SnappingOperation-4a4ee09b.js","assets/AnalysisToolBase-71ee6ca9.js","assets/quantityFormatUtils-e5b1c45f.js","assets/ElevationQuery-a3eaf0a0.js","assets/vec2f32-eaf29605.js","assets/dehydratedFeatures-2a3f0608.js","assets/quantizationUtils-17105106.js","assets/featureConversionUtils-09cf00ff.js","assets/OptimizedFeature-e90b69df.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/OptimizedGeometry-196224d4.js","assets/edgeUtils-6e4a97fb.js","assets/SnappingCandidate-970faec6.js","assets/objectResourceUtils-003803db.js","assets/devEnvironmentUtils-4eab2a99.js","assets/DefaultMaterial_COLOR_GAMMA-101ea40c.js","assets/Version-1f969b2a.js","assets/resourceUtils-1d03d2fe.js","assets/mat3f32-6c416b1c.js","assets/symbolColorUtils-3ca646c8.js","assets/callExpressionWithFeature-36423058.js","assets/projectVectorToDehydratedPoint-e30a7ff8.js","assets/webStyleSymbolUtils-4761c8f2.js","assets/Intersector-a291e778.js","assets/fontUtils-56b88a2f.js","assets/analysisViewUtils-9b921032.js"])}};a([t()],n.prototype,"type",void 0),a([t()],n.prototype,"analysisView",void 0),a([t()],n.prototype,"_createAnalysisViewTask",void 0),n=a([y("esri.views.3d.layers.DimensionLayerView3D")],n);const P=n;export{P as default};
