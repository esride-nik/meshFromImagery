var uz=Object.defineProperty;var hz=(e,t,n)=>t in e?uz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ae=(e,t,n)=>(hz(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const fz={remove:()=>{}};function It(e){return e?{remove(){e&&(e(),e=void 0)}}:fz}function dz(e){e.forEach(t=>t==null?void 0:t.remove())}function x2(e){return It(()=>dz(e))}function F1e(e){return It(()=>{var t;return(t=e())==null?void 0:t.remove()})}function j1e(e){return It(()=>e==null?void 0:e.abort())}function pz(e){return It(e!=null?()=>e.destroy():void 0)}function mz(e){return{setTimeout:(t,n)=>{const r=e.setTimeout(t,n);return It(()=>e.clearTimeout(r))}}}const gz=mz(globalThis);let Oh=class Sl{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Sl._m}getInt(){return this._seed=(Sl._a*this._seed+Sl._c)%Sl._m,this._seed}getFloat(){return this.getInt()/(Sl._m-1)}getIntRange(t,n){return Math.round(this.getFloatRange(t,n))}getFloatRange(t,n){const r=n-t;return t+this.getInt()/Sl._m*r}};Oh._m=2147483647,Oh._a=48271,Oh._c=0;const yz=1.5,z1e=1/yz,B1e=.5;function U1e(e,t){if(!t)return e;for(const n of t)e.push(n);return e}function V1e(e){if(!e)return;const t=e.length;return t>0?e[t-1]:void 0}function MO(e){return e}function bz(e,t=MO){if(!e||e.length===0)return;let n=e[0],r=t(n);for(let i=1;i<e.length;++i){const s=e[i],o=Number(t(s));o>r&&(r=o,n=s)}return n}function G1e(e,t=MO){return bz(e,n=>-t(n))}function W1e(e,t){return t?e.filter((n,r,i)=>i.findIndex(t.bind(null,n))===r):Array.from(new Set(e))}function Hc(e,t,n){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(n){for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function H1e(e,t){let n=e.length!==t.length;n&&(e.length=t.length);for(let r=0;r<t.length;++r)e[r]!==t[r]&&(e[r]=t[r],n=!0);return n}function q1e(e,t,n){let r,i;return n?(r=t.filter(s=>!e.some(o=>n(o,s))),i=e.filter(s=>!t.some(o=>n(o,s)))):(r=t.filter(s=>!e.includes(s)),i=e.filter(s=>!t.includes(s))),{added:r,removed:i}}function J1e(e){return e&&typeof e.length=="number"}function Z1e(e,t){const n=e.length;if(n===0)return[];const r=[];for(let i=0;i<n;i+=t)r.push(e.slice(i,i+t));return r}const wz=!!Array.prototype.fill;function vz(e,t){if(wz)return new Array(e).fill(t);const n=new Array(e);for(let r=0;r<e;r++)n[r]=t;return n}function Y1e(e,t){t===void 0&&(t=e,e=0);const n=new Array(t-e);for(let r=e;r<t;r++)n[r-e]=r;return n}function K1e(e,t,n){const r=e.length;let i=0,s=r-1;for(;i<s;){const a=i+Math.floor((s-i)/2);t>e[a]?i=a+1:s=a}const o=e[i];return n?t>=e[r-1]?-1:o===t?i:i-1:o===t?i:-1}function X1e(e,t,n){if(!e||e.length===0)return;const r=e.length-1,i=e[0];if(t<=n(i))return i;const s=e[r];if(t>=n(s))return s;let o=0,a=0,l=r;for(;o<l;){a=o+Math.floor((l-o)/2);const c=e[a],u=n(c);if(u===t)return c;if(t<u){if(a>0){const h=e[a-1],f=n(h);if(t>f)return t-f>=u-t?c:h}l=a}else{if(a<r){const h=e[a+1],f=n(h);if(t<f)return t-u>=f-t?h:c}o=a+1}}return e[a]}let $O=class{constructor(){this.last=0}};const TO=new $O;function Ev(e,t,n,r){r=r||TO;const i=Math.max(0,r.last-10);for(let o=i;o<n;++o)if(e[o]===t)return r.last=o,o;const s=Math.min(i,n);for(let o=0;o<s;++o)if(e[o]===t)return r.last=o,o;return-1}function e2e(e,t,n,r){const i=n??e.length,s=Ev(e,t,i,r);if(s!==-1)return e[s]=e[i-1],n==null&&e.pop(),t}const ci=new Set;function xz(e,t,n=e.length,r=t.length,i,s){if(r===0||n===0)return n;ci.clear();for(let a=0;a<r;++a)ci.add(t[a]);i=i||TO;const o=Math.max(0,i.last-10);for(let a=o;a<n;++a)if(ci.has(e[a])&&(s==null||s.push(e[a]),ci.delete(e[a]),e[a]=e[n-1],--n,--a,ci.size===0||n===0))return ci.clear(),n;for(let a=0;a<o;++a)if(ci.has(e[a])&&(s==null||s.push(e[a]),ci.delete(e[a]),e[a]=e[n-1],--n,--a,ci.size===0||n===0))return ci.clear(),n;return ci.clear(),n}function t2e(e,t){let n=0;for(let r=0;r<e.length;++r){const i=e[r];t(i,r)&&(e[n]=i,n++)}e.length=n}function Sz(e){return e?(q4.seed=e,()=>q4.getFloat()):Math.random}function n2e(e,t){const n=Sz(t);for(let r=e.length-1;r>0;r--){const i=Math.floor(n()*(r+1)),s=e[r];e[r]=e[i],e[i]=s}return e}const q4=new Oh;function _z(e,t){const n=e.indexOf(t);return n!==-1?(e.splice(n,1),t):null}function r2e(e,t){const n=new Map,r=e.length;for(let i=0;i<r;i++){const s=e[i],o=t(s,i,e),a=n.get(o);a?a.push(s):n.set(o,[s])}return n}function ja(e,t){return e!=null}const i2e=[];function AO(e){return 32+e.length}function W5(){return 16}function s2e(e){if(!e)return 0;let t=kO;for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];switch(typeof r){case"string":t+=AO(r);break;case"number":t+=W5();break;case"boolean":t+=4}}return t}function Mz(e){if(!e)return 0;if(Array.isArray(e))return $z(e);let t=kO;for(const n in e)e.hasOwnProperty(n)&&(t+=IO(e[n]));return t}function $z(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let n=EO;for(let r=0;r<t;r++)n+=IO(e[r]);return n}function IO(e){switch(typeof e){case"object":return Mz(e);case"string":return AO(e);case"number":return W5();case"boolean":return 4;default:return 8}}function Tz(e,t){return EO+e.length*t}const kO=32,EO=32;let wa;function X(e){return typeof wa[e]=="function"?wa[e]=wa[e](globalThis):wa[e]}var mO,gO,yO,bO;wa=(mO=globalThis.dojoConfig)!=null&&mO.has||(gO=globalThis.esriConfig)!=null&&gO.has?{...(yO=globalThis.dojoConfig)==null?void 0:yO.has,...(bO=globalThis.esriConfig)==null?void 0:bO.has}:{},X.add=(e,t,n,r)=>((r||wa[e]===void 0)&&(wa[e]=t),n&&X(e)),X.cache=wa,X.add("big-integer-warning-enabled",!0),X.add("esri-deprecation-warnings",!0),X.add("esri-tests-disable-screenshots",!1),X.add("esri-tests-use-full-window",!1),X.add("esri-tests-post-to-influx",!0),(()=>{var t;X.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(X.add("host-browser",e),X.add("host-node",typeof globalThis.process=="object"&&((t=globalThis.process.versions)==null?void 0:t.node)&&globalThis.process.versions.v8),X.add("dom",e),X("host-browser")){const n=navigator,r=n.userAgent,i=n.appVersion,s=parseFloat(i);if(X.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),X.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),X.add("khtml",i.includes("Konqueror")?s:void 0),X.add("edge",parseFloat(r.split("Edge/")[1])||void 0),X.add("opr",parseFloat(r.split("OPR/")[1])||void 0),X.add("webkit",!X("wp")&&!X("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),X.add("chrome",!X("edge")&&!X("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),X.add("android",!X("wp")&&parseFloat(r.split("Android ")[1])||void 0),X.add("safari",!i.includes("Safari")||X("wp")||X("chrome")||X("android")||X("edge")||X("opr")?void 0:parseFloat(i.split("Version/")[1])),X.add("mac",i.includes("Macintosh")),!X("wp")&&/(iPhone|iPod|iPad)/.test(r)){const o=RegExp.$1.replace(/P/,"p"),a=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replaceAll("_",""));X.add(o,l),X.add("ios",l)}X("webkit")||(!r.includes("Gecko")||X("wp")||X("khtml")||X("edge")||X.add("mozilla",s),X("mozilla")&&X.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),n=/iPhone/i.test(e);t&&X.add("esri-mobile",t),n&&X.add("esri-iPhone",n),X.add("esri-geolocation",!!navigator.geolocation)}X.add("esri-wasm","WebAssembly"in globalThis),X.add("esri-performance-mode-frames-between-render",20),X.add("esri-force-performance-mode",!1),X.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),X.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),X.add("esri-atomics","Atomics"in globalThis),X.add("esri-workers","Worker"in globalThis),X.add("web-feat:cache","caches"in globalThis),X.add("esri-workers-arraybuffer-transfer",!X("safari")||Number(X("safari"))>=12),X.add("workers-pool-size",8),X.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),X.add("featurelayer-simplify-payload-size-factors",[1,1,4]),X.add("featurelayer-animation-enabled",!0),X.add("featurelayer-snapshot-enabled",!0),X.add("featurelayer-snapshot-point-min-threshold",8e4),X.add("featurelayer-snapshot-point-max-threshold",4e5),X.add("featurelayer-snapshot-point-coverage",.1),X.add("featurelayer-advanced-symbols",!1),X.add("featurelayer-pbf",!0),X.add("featurelayer-pbf-statistics",!1),X.add("feature-layers-workers",!0),X.add("feature-polyline-generalization-factor",1),X.add("mapview-transitions-duration",200),X.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),X.add("mapserver-pbf-version-support",10.81),X.add("mapservice-popup-identify-max-tolerance",20),X.add("heatmap-allow-raster-fallback",!1),X.add("heatmap-force-raster",!1),X("host-webworker")||X("host-browser")&&(X.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),X.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{X.add("esri-image-decode",!0,!0,!0)}).catch(()=>{X.add("esri-image-decode",!1,!0,!0)})}return!1}),X.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();function o2e(e){return e instanceof ArrayBuffer}function H5(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int8Array"}function CO(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8Array"}function OO(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint8ClampedArray"}function q5(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int16Array"}function J5(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint16Array"}function Z5(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Int32Array"}function PO(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Uint32Array"}function S2(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float32Array"}function _2(e){var t;return((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="Float64Array"}function Jh(e){return!("buffer"in e)}function Az(...e){return e.reduce((t,n)=>t+(n?Jh(n)?Tz(n,W5()):n.byteLength+Iz:0),0)}const Iz=145,xs=1024;function a2e(e){return _2(e)||S2(e)||Z5(e)||q5(e)||H5(e)}function l2e(e){return _2(e)||S2(e)}function c2e(e){return _2(e)?179769e303:S2(e)?3402823e32:PO(e)?4294967295:J5(e)?65535:CO(e)||OO(e)?255:Z5(e)?2147483647:q5(e)?32767:H5(e)?127:256}function RO(e,t){let n;if(t)for(n in e)e.hasOwnProperty(n)&&(e[n]===void 0?delete e[n]:e[n]instanceof Object&&RO(e[n],!0));else for(n in e)e.hasOwnProperty(n)&&e[n]===void 0&&delete e[n];return e}function J(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=FO(e);if(t!=null)return t;if(NO(e))return e.clone();if(DO(e))return e.map(J);if(LO(e))return e.clone();const n={};for(const r of Object.getOwnPropertyNames(e))n[r]=J(e[r]);return n}function Cv(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=FO(e);if(t!=null)return t;if(DO(e)){let n=!0;const r=e.map(i=>{const s=Cv(i);return i!=null&&s==null&&(n=!1),s});return n?r:null}if(NO(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!LO(e)){const n=new(Object.getPrototypeOf(e)).constructor;for(const r of Object.getOwnPropertyNames(e)){const i=e[r],s=Cv(i);if(i!=null&&s==null)return null;n[r]=s}return n}return null}function NO(e){return typeof e.clone=="function"}function DO(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function LO(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function J4(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function FO(e){if(H5(e)||CO(e)||OO(e)||q5(e)||J5(e)||Z5(e)||PO(e)||S2(e)||_2(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[n,r]of e)t.set(n,J(r));return t}if(e instanceof Set){const t=new Set;for(const n of e)t.add(J(n));return t}return null}function Y5(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e==null?void 0:e.getTime)=="function"&&typeof(t==null?void 0:t.getTime)=="function"&&e.getTime()===t.getTime()||!1}function kz(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&Hc(e,t):e instanceof Set?t instanceof Set&&Cz(e,t):e instanceof Map?t instanceof Map&&Oz(e,t):!!J4(e)&&J4(t)&&Ez(e,t))}function Ez(e,t){if(e===null||t===null)return!1;const n=Object.keys(e);if(t===null||Object.keys(t).length!==n.length)return!1;for(const r of n)if(e[r]!==t[r]||!Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function Cz(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Oz(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e){const i=t.get(n);if(i!==r||i===void 0&&!t.has(n))return!1}return!0}function K5(e,t,n=!1){return zO(e,t,n)}function M2(e,t){if(t!=null)return t[e]||jO(e.split("."),!1,t)}function bu(e,t,n){const r=e.split("."),i=r.pop(),s=jO(r,!0,n);s&&i&&(s[i]=t)}function jO(e,t,n){let r=n;for(const i of e){if(r==null)return;if(!(i in r)){if(!t)return;r[i]={}}r=r[i]}return r}function zO(e,t,n){return t?Object.keys(t).reduce((r,i)=>{let s=r[i],o=t[i];return s===o?r:s===void 0?(r[i]=J(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[i]=s.concat():r[i]=[s]:r[i]=[],o&&(Array.isArray(o)||(o=[o]),n?o.forEach(a=>{s.includes(a)||s.push(a)}):r[i]=o.concat())):o&&typeof o=="object"?r[i]=zO(s,o,n):r.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(r[i]=o),r)},e||{}):e}var wO;const ze={apiKey:void 0,applicationName:"",applicationUrl:(wO=globalThis.location)==null?void 0:wO.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(K5(ze,globalThis.esriConfig,!0),delete ze.has),!ze.assetsPath){{const e="4.28";ze.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}ze.defaultAssetsPath=ze.assetsPath}const u2e=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"})),Pz=/\{([^\}]+)\}/g;function Z4(e){return e??""}function X5(e,t){return t?e.replaceAll(Pz,typeof t=="object"?(n,r)=>Z4(M2(r,t)):(n,r)=>Z4(t(r))):e}function h2e(e,t){return e.replaceAll(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,n=>t&&t.includes(n)?n:`\\${n}`)}function BO(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}function f2e(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}function d2e(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const Y4={info:0,warn:1,error:2,none:3};let ie=class In{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,In._loggers.set(this.module,this);const n=this.module.lastIndexOf(".");n!==-1&&(this._parent=In.getLogger(this.module.slice(0,n)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(t=new Map){const n=In._loggers;return In._loggers=t,n},set throttlingDisabled(t){In._throttlingDisabled=t}}}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,In._loggers.get(t)||new In({module:t})}_log(t,n,...r){if(this._matchLevel(t)){if(n!=="always"&&!In._throttlingDisabled){const i=this._argsToKey(r),s=this._loggedMessages[t].get(i);if(n==="once"&&s!=null||n==="oncePerTick"&&s&&s>=In._tickCounter)return;this._loggedMessages[t].set(i,In._tickCounter),In._scheduleTickCounterIncrement()}for(const i of ze.log.interceptors)if(i(t,this.module,...r))return;this._inheritedWriter()(t,this.module,...r)}}_parentWithMember(t,n){let r=this;for(;r!=null;){const i=r[t];if(i!=null)return i;r=r.parent}return n}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,n,...r){console[t](`[${n}]`,...r)}_matchLevel(t){const n=ze.log.level||"warn";return Y4[this._parentWithMember("level",n)]<=Y4[t]}_argsToKey(...t){return BO(JSON.stringify(t,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}static _scheduleTickCounterIncrement(){In._tickCounterScheduled||(In._tickCounterScheduled=!0,Promise.resolve().then(()=>{In._tickCounter++,In._tickCounterScheduled=!1}))}};ie._loggers=new Map,ie._tickCounter=0,ie._tickCounterScheduled=!1,ie._throttlingDisabled=!1;function Rz(e,t){return e.replaceAll(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(n,r)=>r===""?"$":(M2(r,t)??"").toString())}let UO=class{constructor(t,n,r){this.name=t,this.details=r,this.message=(n&&Rz(n,r))??""}toString(){return"["+this.name+"]: "+this.message}},Y=class VO extends UO{constructor(t,n,r){super(t,n,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,n)=>{if(n&&typeof n=="object"&&typeof n.toJSON=="function")return n;try{return J(n)}catch{return"[object]"}}))}}catch(t){throw ie.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new VO(t.name,t.message,t.details)}};Y.prototype.type="error";function Q5(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function $2(e,t,n){if(!Q5(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,n);if(Array.isArray(t)){const r=t.slice();for(const i of r)e.addEventListener(i,n);return It(()=>{for(const i of r)e.removeEventListener(i,n)})}return e.addEventListener(t,n),It(()=>e.removeEventListener(t,n))}function GO(e,t,n){if(!Q5(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,n);const r=$2(e,t,i=>{r.remove(),n.call(e,i)});return r}function m2e(e,t,n){let r=!1;const i=$2(e,t,s=>{r||n.call(e,s)});return{resume(){r=!1},pause(){r=!0},remove(){i.remove()}}}const Nz={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function g2e({key:e}){return Nz[e]||e}function Ph(e,t){if(e==null)throw new Error(t??"value is None")}function mp(e){return e==null||e.destroy(),null}function y2e(e){return e==null||e.dispose(),null}function Ci(e){return e==null||e.remove(),null}function WO(e){return e==null||e.abort(),null}function b2e(e){return e==null||e.release(),null}function Dz(e,t,n){return e!=null&&t!=null?n!=null?n(e,t):e.equals(t):e===t}function w2e(e,t){return e==null?void 0:e[t]}function v2e(e,t){let n;return e.some((r,i)=>(n=t(r,i),n!=null)),n??void 0}function Ot(e="Aborted"){return new Y("AbortError",e)}function Hn(e,t="Aborted"){if(ri(e))throw Ot(t)}function T2(e){return e!=null?"aborted"in e?e:e.signal:e}function ri(e){const t=T2(e);return t!=null&&t.aborted}function hs(e){if(wr(e))throw e}function x2e(e){if(!wr(e))throw e}function po(e,t){const n=T2(e);if(n!=null){if(!n.aborted)return GO(n,"abort",()=>t());t()}}function HO(e,t){const n=T2(e);if(n!=null)return Hn(n),GO(n,"abort",()=>t(Ot()))}function qO(e,t){return T2(t)==null?e:new Promise((n,r)=>{let i=po(t,()=>r(Ot()));const s=()=>{i=Ci(i)};e.then(s,s),e.then(n,r)})}function wr(e){return(e==null?void 0:e.name)==="AbortError"}async function Ov(e){try{return await e}catch(t){if(!wr(t))throw t;return}}async function S2e(e,t=ie.getLogger("esri")){try{return await e}catch(n){wr(n)||t.error(n)}}async function Sf(e){if(!e)return;if(typeof e.forEach!="function"){const n=Object.keys(e),r=n.map(o=>e[o]),i=await Sf(r),s={};return n.map((o,a)=>s[o]=i[a]),s}const t=e;return Promise.allSettled(t).then(n=>Array.from(t,(r,i)=>{const s=n[i];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function _2e(e){return(await Sf(e)).filter(t=>!!t.value).map(t=>t.value)}async function Lz(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function M2e(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function Fz(e,t=void 0,n){const r=new AbortController;return po(n,()=>r.abort()),new Promise((i,s)=>{let o=setTimeout(()=>{o=0,i(t)},e);po(r,()=>{o&&(clearTimeout(o),s(Ot()))})})}function k0(e){return e&&typeof e.then=="function"}function K4(e){return k0(e)?e:Promise.resolve(e)}function eM(e,t=-1){let n,r,i,s,o=null;const a=(...l)=>{if(n){r=l,s&&s.reject(Ot()),s=qc();const f=s.promise;if(o){const d=o;o=null,d.abort()}return f}if(i=s||qc(),s=null,t>0){const f=new AbortController;n=K4(e(...l,f.signal));const d=n;Fz(t).then(()=>{n===d&&(s?f.abort():o=f)})}else n=1,n=K4(e(...l));const c=()=>{const f=r;r=i=n=o=null,f!=null&&a(...f)},u=n,h=i;return u.then(c,c),u.then(h.resolve,h.reject),h.promise};return a}function qc(){let e,t;const n=new Promise((i,s)=>{e=i,t=s}),r=i=>{e(i)};return r.resolve=i=>e(i),r.reject=i=>t(i),r.timeout=(i,s)=>gz.setTimeout(()=>r.reject(s),i),r.promise=n,r}function $2e(e,t){return e.then(t,t)}async function X4(e){await Promise.resolve(),Hn(e)}function p(e,t,n,r){var i,s=arguments.length,o=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function T2e(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function A2e(e,t){for(const[n,r]of e)if(t(r,n))return!0;return!1}function I2e(e,t){for(const[n,r]of e)if(t(r,n))return r;return null}function jz(e,t,n){const r=e.get(t);if(r!==void 0)return r;const i=n();return e.set(t,i),i}const Rh=ie.getLogger("esri.core.accessorSupport.ensureTypes");function zz(e){return e==null?e:new Date(e)}function Bz(e){return e==null?e:!!e}function A2(e){return e==null?e:e.toString()}function I2(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function tM(e){return e==null?e:Math.round(parseFloat(e))}function JO(e){return(e==null?void 0:e.constructor)&&e.constructor.__accessorMetadata__!==void 0}function Qy(e,t){return t!=null&&e&&!(t instanceof e)}function ZO(e){return e&&"isCollection"in e}function Q4(e){return e!=null&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Uz(e,t){if(!(t!=null&&t.constructor)||!ZO(t.constructor))return Pv(e,t)?t:new e(t);const n=Q4(e.prototype.itemType),r=Q4(t.constructor.prototype.itemType);return n?r?n===r?t:n.prototype.isPrototypeOf(r.prototype)?new e(t):(Pv(e,t),t):new e(t):t}function Pv(e,t){return!!JO(t)&&(Rh.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+k2(e)+"'"),!0)}function za(e,t){return t==null?t:ZO(e)?Uz(e,t):Qy(e,t)?Pv(e,t)?t:new e(t):t}function k2(e){var t;return((t=e==null?void 0:e.prototype)==null?void 0:t.declaredClass)||"unknown"}const Vz=new WeakMap;function Gz(e){switch(e){case Number:return I2;case Be:return tM;case Boolean:return Bz;case String:return A2;case Date:return zz;default:return jz(Vz,e,()=>za.bind(null,e))}}function vr(e,t){const n=Gz(e);return arguments.length===1?n:n(t)}function Jp(e,t,n){return arguments.length===1?Jp.bind(null,e):t&&(Array.isArray(t)?t.map(r=>e(r,n)):[e(t,n)])}function Wz(e,t){return arguments.length===1?Jp(n=>vr(e,n)):Jp(n=>vr(e,n),t)}function YO(e,t,n){return t!==0&&Array.isArray(n)?n.map(r=>YO(e,t-1,r)):e(n)}function e1(e,t,n){if(arguments.length===2)return s=>e1(e,t,s);if(!n)return n;n=YO(e,t,n);let r=t,i=n;for(;r>0&&Array.isArray(i);)r--,i=i[0];if(i!==void 0)for(let s=0;s<r;s++)n=[n];return n}function Hz(e,t,n){return arguments.length===2?e1(r=>vr(e,r),t):e1(r=>vr(e,r),t,n)}function KO(e){return!!Array.isArray(e)&&!e.some(t=>{const n=typeof t;return!(n==="string"||n==="number"||n==="function"&&e.length>1)})}function Rv(e,t){if(arguments.length===2)return Rv(e).call(null,t);const n=new Set,r=e.filter(a=>typeof a!="function"),i=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||n.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,u=c==="string"||c==="number";return u&&(n.has(a)||i.some(h=>c==="string"&&h===String||c==="number"&&h===Number))||c==="object"&&i.some(h=>!Qy(a,h))?a:(u&&r.length?(s||(s=r.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),Rh.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&i.length?(o||(o=i.map(h=>k2(h)).join(", ")),Rh.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Rh.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Jc(e,t){if(arguments.length===2)return Jc(e).call(null,t);const n={},r=[],i=[];for(const l in e.typeMap){const c=e.typeMap[l];n[l]=vr(c),r.push(k2(c)),i.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${i.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!Qy(e.base,l)||l==null)return l;const c=a(l)||e.defaultKeyValue,u=n[c];if(!u)return Rh.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Qy(e.typeMap[c],l))return l;if(typeof e.key=="string"&&!JO(l)){const h={};for(const f in l)f!==e.key&&(h[f]=l[f]);return u(h)}return u(l)}}let Be=class{};const Ff={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function qz(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function XO(e){switch(e.type){case"native":return vr(e.value);case"array":return Jp(XO(e.value));case"one-of":return Jz(e);default:return null}}function Jz(e){let t=null;return(n,r)=>Dv(n,e)?n:(t==null&&(t=Nv(e)),Rh.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),r&&(r.valid=!1),null)}function Nv(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Be:return"integer";case Date:return"date";default:return k2(e.value)}case"array":return`array of ${Nv(e.value)}`;case"one-of":{const t=e.values.map(n=>Nv(n));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function Dv(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case Be:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(n=>!Dv(n,t.value));case"one-of":return t.values.some(n=>Dv(e,n))}}function xr(e){return e.__accessor__??null}function Zz(e,t){var n;return((n=e==null?void 0:e.metadatas)==null?void 0:n[t])!=null}function Lg(e,t,n){return n?t1(e,t,{policy:n,path:""}):t1(e,t,null)}function t1(e,t,n){return t?Object.keys(t).reduce((r,i)=>{const s=i;let o=null,a="merge";if(n&&(o=n.path?`${n.path}.${i}`:i,a=n.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=t[s],r;if(r[s]===void 0)return r[s]=J(t[s]),r;let l=r[s],c=t[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.concat():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(u=>{l.includes(u)||l.push(u)}));else if(c&&typeof c=="object")if(n){const u=n.path;n.path=o,r[s]=t1(l,c,n),n.path=u}else r[s]=t1(l,c,null);else r.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(r[s]=c);return r},e||{}):e}function QO(e){return Array.isArray(e)?e:e.split(".")}function eT(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Yz(e){if(Array.isArray(e)){const t=[];for(const n of e)t.push(...eT(n));return t}return eT(e)}function eP(e,t,n,r){const i=Yz(t);if(i.length!==1){const s=i.map(o=>r(e,o,n));return x2(s)}return r(e,i[0],n)}function tP(e,t){const n=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const i=parseInt(n,10);if(!isNaN(i))return Array.isArray(t)?t[i]:t.at(i)}const r=xr(t);return Zz(r,n)?r.get(n):t[n]}function nP(e,t,n){if(e==null)return e;const r=tP(t[n],e);return!r&&n<t.length-1?void 0:n===t.length-1?r:nP(r,t,n+1)}function E0(e,t,n=0){return typeof t!="string"||t.includes(".")?nP(e,QO(t),n):tP(t,e)}function Ba(e,t){return E0(e,t)}function tT(e,t){return E0(t,e)!==void 0}function C0(e){let t=e.constructor.__accessorMetadata__;const n=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!n){t=Object.create(t);for(const r in t)t[r]=J(t[r]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function E2(e,t){const n=C0(e);let r=n[t];return r||(r=n[t]={}),r}function Kz(e,t){return Lg(e,t,Qz)}const Xz=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Qz(e){return Xz.test(e)?"replace":"merge"}function n1(e,t,n){if(e&&t)if(typeof t=="object")for(const r of Object.getOwnPropertyNames(t))n1(e,r,t[r]);else{if(t.includes(".")){const i=t.split("."),s=i.splice(-1,1)[0];return void n1(Ba(e,i),s,n)}const r=e.__accessor__;r!=null&&eB(t,r),e[t]=n}}function eB(e,t){if(X("esri-unknown-property-errors")&&!tB(e,t))throw new Y("set:unknown-property",nB(e,t))}function tB(e,t){return t.metadatas[e]!=null}function nB(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}function b(e={}){return(t,n)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${n}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(t,n),i=E2(t,n);r&&(r.get||r.set?(i.get=r.get||i.get,i.set=r.set||i.set):"value"in r&&("value"in e&&ie.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${n}" on "${t.constructor.name}" already defined in the metadata`,e),i.value=e.value=r.value)),e.readOnly!=null&&(i.readOnly=e.readOnly);const s=e.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let u;i.dependsOn=[l],i.get=function(){let h=Ba(this,l);if(typeof h=="function"){u||(u=l.split(".").slice(0,-1).join("."));const f=Ba(this,u);f&&(h=h.bind(f))}return h},i.readOnly||(i.set=c?function(h){this._override(n,h)}:function(h){n1(this,l,h)})}const o=e.type,a=e.types;i.cast||(o?i.cast=rB(o):a&&(Array.isArray(a)?i.cast=Jp(Jc(a[0])):i.cast=Jc(a))),Kz(i,e),e.range&&(i.cast=iB(i.cast,e.range))}}function rP(e,t,n){const r=E2(e,n);r.json||(r.json={});let i=r.json;return t!==void 0&&(i.origins||(i.origins={}),i.origins[t]||(i.origins[t]={}),i=i.origins[t]),i}function rB(e){let t=0,n=e;if(qz(e))return XO(e);for(;Array.isArray(n)&&n.length===1&&typeof n[0]!="string"&&typeof n[0]!="number";)n=n[0],t++;const r=n;if(KO(r))return t===0?Rv(r):e1(Rv(r),t);if(t===1)return Wz(r);if(t>1)return Hz(r,t);const i=e;return i.from?i.from:vr(i)}function iB(e,t){return n=>{let r=+e(n);return t.step!=null&&(r=Math.round(r/t.step)*t.step),t.min!=null&&(r=Math.max(t.min,r)),t.max!=null&&(r=Math.min(t.max,r)),r}}const iP=Symbol("Accessor-beforeDestroy");var Qs;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED"})(Qs||(Qs={}));var Xe;(function(e){e[e.Dirty=1]="Dirty",e[e.Overriden=2]="Overriden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(Xe||(Xe={}));const r1={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},dd=[];let gp=r1;function _e(e){gp.onObservableAccessed(e)}let Fg=!1,jg=!1;function Ua(e,t,n){if(Fg)return nM(e,t,n);sP(e);const r=t.call(n);return oP(),r}function sB(e,t){return Ua(r1,e,t)}function nM(e,t,n){const r=Fg;Fg=!0,sP(e);let i=null;try{i=t.call(n)}catch(s){jg&&ie.getLogger("esri.core.accessorSupport.tracking").error(s)}return oP(),Fg=r,i}function sP(e){gp=e,dd.push(e)}function oP(){const e=dd.length;if(e>1){const t=dd.pop();gp=dd[e-2],t.onTrackingEnd()}else if(e===1){const t=dd.pop();gp=r1,t.onTrackingEnd()}else gp=r1}function aP(e,t){if(t.flags&Xe.DepTrackingInitialized)return;const n=jg;jg=!1,t.flags&Xe.AutoTracked?nM(t,t.metadata.get,e):lP(e,t),jg=n}const oB=[];function lP(e,t){t.flags&Xe.ExplicitlyTracking||(t.flags|=Xe.ExplicitlyTracking,nM(t,()=>{const n=t.metadata.dependsOn||oB;for(const r of n)if(typeof r!="string"||r.includes(".")){const i=QO(r);for(let s=0,o=e;s<i.length&&o!=null&&typeof o=="object";++s)o=nT(o,i[s],s!==i.length-1)}else nT(e,r,!1)}),t.flags&=~Xe.ExplicitlyTracking)}function nT(e,t,n){const r=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}const i=xr(e);if(i){const s=i.propertiesByName.get(r);s&&(_e(s),aP(e,s))}return n?e[r]:void 0}function aB(e){if(e.json&&e.json.origins){const t=e.json.origins,n={"web-document":["web-scene","web-map"]};for(const r in n)if(t[r]){const i=t[r];n[r].forEach(s=>{t[s]=i}),delete t[r]}}}let Zc=class extends UO{constructor(t,n,r){super(t,n,r)}};Zc.prototype.type="warning";function cP(e){var t;return!!e&&((t=e.prototype)==null?void 0:t.declaredClass)&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const Lv=ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function rT(e,t,n){var r,i;e&&(!n&&!t.read||(r=t.read)!=null&&r.reader||((i=t.read)==null?void 0:i.enabled)===!1||uB(e)&&bu("read.reader",rM(e),t))}function rM(e){var n,r;const t=e.ndimArray??0;if(t>1)return cB(e);if(t===1)return iT(e);if("type"in e&&hP(e.type)){const i=(r=(n=e.type.prototype)==null?void 0:n.itemType)==null?void 0:r.Type,s=iT(typeof i=="function"?{type:i}:{types:i});return(o,a,l)=>{const c=s(o,a,l);return c&&new e.type(c)}}return iM(e)}function iM(e){return"type"in e?lB(e.type):hB(e.types)}function lB(e){return e.prototype.read?(t,n,r)=>{if(t==null)return t;const i=typeof t;if(i!=="object")return void Lv.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${i}'`);const s=new e;return s.read(t,r),s}:e.fromJSON}function uP(e,t,n,r){return r!==0&&Array.isArray(t)?t.map(i=>uP(e,i,n,r-1)):e(t,void 0,n)}function cB(e){const t=iM(e),n=uP.bind(null,t),r=e.ndimArray??0;return(i,s,o)=>{if(i==null)return i;i=n(i,o,r);let a=r,l=i;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)i=[i];return i}}function iT(e){const t=iM(e);return(n,r,i)=>{if(n==null)return n;if(Array.isArray(n)){const o=[];for(const a of n){const l=t(a,void 0,i);l!==void 0&&o.push(l)}return o}const s=t(n,void 0,i);return s!==void 0?[s]:void 0}}function hP(e){if(!cP(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?sM(t.Type):fP(t.Type))}function uB(e){return"types"in e?fP(e.types):sM(e.type)}function sM(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||hP(e))}function fP(e){for(const t in e.typeMap)if(!sM(e.typeMap[t]))return!1;return!0}function hB(e){let t=null;const n=e.errorContext??"type",r=e.validate;return(i,s,o)=>{if(i==null)return i;const a=typeof i;if(a!=="object")return void Lv.error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=fB(e));const l=e.key;if(typeof l!="string")return;const c=i[l],u=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!u){const f=`Type '${c||"unknown"}' is not supported`;return o!=null&&o.messages&&i&&o.messages.push(new Zc(`${n}:unsupported`,f,{definition:i,context:o})),void Lv.error(f)}const h=new u;return h.read(i,o),r?r(h):h}}function fB(e){var n,r;const t={};for(const i in e.typeMap){const s=e.typeMap[i],o=C0(s.prototype);if(typeof e.key=="function")continue;const a=o[e.key];if(!a)continue;(n=a.json)!=null&&n.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(t[a.json.type[0]]=s);const l=(r=a.json)==null?void 0:r.write;if(!(l!=null&&l.writer)){t[i]=s;continue}const c=l.target,u=typeof c=="string"?c:e.key,h={};l.writer(i,h,u),h[u]&&(t[h[u]]=s)}return t}function dB(e){if(e.json||(e.json={}),oT(e.json),aT(e.json),sT(e.json),e.json.origins)for(const t in e.json.origins)oT(e.json.origins[t]),aT(e.json.origins[t]),sT(e.json.origins[t]);return!0}function sT(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function oT(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function aT(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function lT(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const n=(e==null?void 0:e.ndimArray)??0;e&&(n===1||"type"in e&&cP(e.type))?t.write.writer=yB:n>1?t.write.writer=bB(n):t.types?Array.isArray(t.types)?t.write.writer=mB(t.types[0]):t.write.writer=pB(t.types):t.write.writer=Zp}function pB(e){return(t,n,r,i)=>t?dP(t,e,i)?Zp(t,n,r,i):void 0:Zp(t,n,r,i)}function dP(e,t,n){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(n!=null&&n.messages){const r=t.errorContext??"type",i=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;n&&n.messages&&e&&n.messages.push(new Y(`${r}:unsupported`,i,{definition:e,context:n})),ie.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(i)}return!1}function mB(e){return(t,n,r,i)=>!t||!Array.isArray(t)?Zp(t,n,r,i):Zp(t.filter(s=>dP(s,e,i)),n,r,i)}function Zp(e,t,n,r){bu(n,i1(e,r),t)}function i1(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?gB(e):e}function gB(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function yB(e,t,n,r){let i;e===null?i=null:e&&typeof e.map=="function"?(i=e.map(s=>i1(s,r)),typeof i.toArray=="function"&&(i=i.toArray())):i=[i1(e,r)],bu(n,i,t)}function pP(e,t,n){return n!==0&&Array.isArray(e)?e.map(r=>pP(r,t,n-1)):i1(e,t)}function bB(e){return(t,n,r,i)=>{let s;if(t===null)s=null;else{s=pP(t,i,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}bu(r,s,n)}}function wB(e,t){return oM(e,"any",t==null?void 0:t.origin)}function Fv(e,t){return oM(e,"read",t==null?void 0:t.origin)}function mP(e,t){return oM(e,"write",t==null?void 0:t.origin)}function oM(e,t,n){let r=e==null?void 0:e.json;if(r!=null&&r.origins&&n){let i;i=n==="link-chart"?r.origins[n]&&(t==="any"||t in r.origins[n])?r.origins[n]:r.origins["web-map"]:r.origins[n],i&&(t==="any"||t in i)&&(r=i)}return r}function vB(e){const t=xB(e);if(e.json.origins)for(const n in e.json.origins){const r=e.json.origins[n],i=r.types?SB(r):t;rT(i,r,!1),r.types&&!r.write&&e.json.write&&e.json.write.enabled&&(r.write={...e.json.write}),lT(i,r)}rT(t,e.json,!0),lT(t,e.json)}function xB(e){return e.json.types?jv(e.json):e.type?gP(e):jv(e)}function SB(e){return e.type?gP(e):jv(e)}function gP(e){if(!e.type)return;let t=0,n=e.type;for(;Array.isArray(n)&&!KO(n);)n=n[0],t++;return{type:n,ndimArray:t}}function jv(e){if(!e.types)return;let t=0,n=e.types;for(;Array.isArray(n);)n=n[0],t++;return{types:n,ndimArray:t}}function _B(e){dB(e)&&(aB(e),vB(e))}const uw=new Set,hw=new Set;function L(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,$B(t);const n=[],r=[];let i=t.prototype;for(;i;)i.hasOwnProperty("initialize")&&!uw.has(i.initialize)&&(uw.add(i.initialize),n.push(i.initialize)),i.hasOwnProperty("destroy")&&!hw.has(i.destroy)&&(hw.add(i.destroy),r.push(i.destroy)),i=Object.getPrototypeOf(i);uw.clear(),hw.clear();const s=class extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(n.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=n.length-1;l>=0;l--)n[l].call(this)}}),r.length){let l=!1;const c=this[iP];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,c.call(this);for(let u=0;u<r.length;u++)r[u].call(this)}}})}this.postscript(...a)}}};s.__accessorMetadata__=C0(t.prototype),s.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function MB(e,t){return t.get==null?function(){const n=this.__accessor__,r=n.propertiesByName.get(e);if(r===void 0)return;_e(r);const i=n.store;return i.has(e)?i.get(e):r.metadata.value}:function(){const n=this.__accessor__,r=n.propertiesByName.get(e);if(r!==void 0)return r.getComputed(n)}}function $B(e){const t=e.prototype,n=C0(t),r={};for(const i of Object.getOwnPropertyNames(n)){const s=n[i];_B(s),r[i]={enumerable:!0,configurable:!0,get:MB(i,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${i}' of ${this.declaredClass}`);if(a.lifecycle===Qs.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${i}' of ${this.declaredClass}`);a.set(i,o)}}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,r)}const cT=new Set;function TB(e,t,n=!1){n&&cT.has(t)||(n&&cT.add(t),e.warn(`ðŸ›‘ DEPRECATED - ${t}`))}function AB(e,t,n={}){if(X("esri-deprecation-warnings")){const{moduleName:r}=n;o1(e,`Function: ${(r?r+"::":"")+t+"()"}`,n)}}function s1(e,t,n={}){if(X("esri-deprecation-warnings")){const{moduleName:r}=n;o1(e,`Property: ${(r?r+"::":"")+t}`,n)}}function o1(e,t,n={}){if(X("esri-deprecation-warnings")){const{replacement:r,version:i,see:s,warnOnce:o}=n;let a=t;r&&(a+=`
	ðŸ› ï¸ Replacement: ${r}`),i&&(a+=`
	âš™ï¸ Version: ${i}`),s&&(a+=`
	ðŸ”— See ${s} for more details.`),TB(e,a,o)}}function C2e(e){const t=[];return function*(){yield*t;for(const n of e)t.push(n),yield n}}function O2e(e,t){for(const n of e)if(n!=null&&t(n))return n}function uT(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let IB=class zv{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(n=>{t+=n.length}),t}add(t,n){if(uT(t)){const r=this._getOrCreateGroup(n);for(const i of t)this._isHandle(i)&&r.push(i)}else this._isHandle(t)&&this._getOrCreateGroup(n).push(t);return this}forEach(t,n){if(typeof t=="function")this._groups.forEach(r=>r.forEach(t));else{const r=this._getGroup(t);r&&n&&r.forEach(n)}}has(t){return this._groups.has(this._ensureGroupKey(t))}remove(t){if(typeof t!="string"&&uT(t)){for(const n of t)this.remove(n);return this}return this.has(t)?(this._removeAllFromGroup(this._getGroup(t)),this._groups.delete(this._ensureGroupKey(t)),this):this}removeAll(){return this._groups.forEach(t=>this._removeAllFromGroup(t)),this._groups.clear(),this}_isHandle(t){return t&&(!!t.remove||t instanceof zv)}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const n=[];return this._groups.set(this._ensureGroupKey(t),n),n}_getGroup(t){return this._groups.get(this._ensureGroupKey(t))}_ensureGroupKey(t){return t||"_default_"}_removeAllFromGroup(t){for(const n of t)n instanceof zv?n.removeAll():n.remove()}};function kB(e){return(e==null?void 0:e.release)&&typeof e.release=="function"}function EB(e){return(e==null?void 0:e.acquire)&&typeof e.acquire=="function"}let O0=class Bv{constructor(t,n,r,i=1,s=0){if(this._ctor=t,this._acquireFunction=n,this._releaseFunction=r,this.allocationSize=i,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...t){let n;if(Bv.test.disabled)n=new this._ctor;else{if(this._pool.length===0){const r=this.allocationSize;for(let i=0;i<r;i++)this._pool[i]=new this._ctor}n=this._pool.pop()}return this._acquireFunction?this._acquireFunction(n,...t):EB(n)&&n.acquire(...t),n}release(t){t&&!Bv.test.disabled&&(this._releaseFunction?this._releaseFunction(t):kB(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let n=t;n<this._pool.length;++n){const r=this._pool[n];this._dispose(r)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};O0.test={disabled:!1};let CB=class{constructor(t,n){this._observers=t,this._observer=n}remove(){_z(this._observers,this._observer)}},yP=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return OB;this._observers==null&&(this._observers=[]);const n=this._observers;let r=!1,i=!1;const s=n.length;for(let o=0;o<s;++o){const a=n[o];if(a.destroyed)i=!0;else if(a===t){r=!0;break}}return r||(n.push(t),i&&this._removeDestroyedObservers()),new CB(n,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const n=t.length;let r=0;for(let i=0;i<n;++i){for(;i+r<n&&t[i+r].destroyed;)++r;if(r>0){if(!(i+r<n))break;t[i]=t[i+r]}}t.length=n-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const n of t)n.onCommitted();this._observers=null}}};const OB=It();var Re;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(Re||(Re={}));const Uv=Re.USER+1;function va(e){switch(e){case"defaults":return Re.DEFAULTS;case"service":return Re.SERVICE;case"portal-item":return Re.PORTAL_ITEM;case"web-scene":return Re.WEB_SCENE;case"web-map":return Re.WEB_MAP;case"link-chart":return Re.LINK_CHART;case"user":return Re.USER;default:return null}}function a1(e){switch(e){case Re.DEFAULTS:return"defaults";case Re.SERVICE:return"service";case Re.PORTAL_ITEM:return"portal-item";case Re.WEB_SCENE:return"web-scene";case Re.WEB_MAP:return"web-map";case Re.LINK_CHART:return"link-chart";case Re.USER:return"user"}}function PB(e){return a1(e)}let hT=class extends yP{constructor(t,n){super(),this.propertyName=t,this.metadata=n,this._accessed=null,this._handles=null,this.flags=0,this.flags=Xe.Dirty|(n.nonNullable?Xe.NonNullable:0)|(n.hasOwnProperty("value")?Xe.HasDefaultValue:0)|(n.get===void 0?Xe.DepTrackingInitialized:0)|(n.dependsOn===void 0?Xe.AutoTracked:0)}destroy(){this.flags&Xe.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(t){_e(this);const n=t.store,r=this.propertyName,i=this.flags,s=n.get(r);if(i&Xe.Computing||~i&Xe.Dirty&&n.has(r))return s;this.flags|=Xe.Computing;const o=t.host;let a;i&Xe.AutoTracked?a=Ua(this,this.metadata.get,o):(lP(o,this),a=this.metadata.get.call(o)),n.set(r,a,Re.COMPUTED);const l=n.get(r);return l===s?this.flags&=~Xe.Dirty:sB(this.commit,this),this.flags&=~Xe.Computing,l}onObservableAccessed(t){if(t===this)return;let n=this._accessed;if(n==null)n=[],this._accessed=n;else if(n.includes(t))return;n.push(t)}onTrackingEnd(){this._clearObservationHandles(),this.flags|=Xe.DepTrackingInitialized;const t=this._accessed;if(t==null||t.length===0)return;let n=this._handles;n==null&&(n=[],this._handles=n);for(let r=0;r<t.length;++r)n.push(t[r].observe(this));t.length=0}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Xe.Dirty,this.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let n=0;n<t.length;++n)t[n].remove();t.length=0}}onInvalidated(){~this.flags&Xe.Overriden&&(this.flags|=Xe.Dirty);const t=this._observers;if(t&&t.length>0)for(const n of t)n.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const n=t.slice();for(const r of n)r.onCommitted()}}},RB=class bP{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const n=new bP;return this._values.forEach((r,i)=>{t&&t.has(i)||n.set(i,J(r))}),n}get(t){return this._values.get(t)}originOf(){return Re.USER}keys(){return[...this._values.keys()]}set(t,n){this._values.set(t,n)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function dm(e,t,n){return e!==void 0}function fT(e,t,n,r){return e!==void 0&&(!(n==null&&e.flags&Xe.NonNullable)||(r.lifecycle,Qs.INITIALIZING,!1))}function NB(e){return e&&typeof e.destroy=="function"}ie.getLogger("esri.core.accessorSupport.Properties");let DB=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Qs.INITIALIZING,this.store=new RB,this._origin=Re.USER;const n=this.host.constructor.__accessorMetadata__;for(const r in n){const i=new hT(r,n[r]);this.propertiesByName.set(r,i)}this.metadatas=n}initialize(){this.lifecycle=Qs.CONSTRUCTING}constructed(){this.lifecycle=Qs.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[t,n]of this.propertiesByName){if(n.metadata.autoDestroy){const r=this.internalGet(t);r&&NB(r)&&(r.destroy(),~n.flags&Xe.NonNullable&&this._internalSet(n,null))}n.destroy()}}get initialized(){return this.lifecycle!==Qs.INITIALIZING}get(t){const n=this.propertiesByName.get(t);if(n.metadata.get)return n.getComputed(this);_e(n);const r=this.store;return r.has(t)?r.get(t):n.metadata.value}originOf(t){const n=this.store.originOf(t);if(n===void 0){const r=this.propertiesByName.get(t);if(r!==void 0&&r.flags&Xe.HasDefaultValue)return"defaults"}return a1(n)}has(t){return!!this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const n=this.propertiesByName.get(t);if(dm(n))return this.store.has(t)?this.store.get(t):n.metadata.value}internalSet(t,n){const r=this.propertiesByName.get(t);dm(r)&&this._internalSet(r,n)}getDependsInfo(t,n,r){const i=this.propertiesByName.get(n);if(!dm(i))return"";const s=new Set,o=Ua({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=i.metadata.get)==null?void 0:l.call(t)});let a=`${r}${t.declaredClass.split(".").pop()}.${n}: ${o}
`;if(s.size===0)return a;r+="  ";for(const l of s)l instanceof hT&&(a+=`${r}${l.propertyName}: undefined
`);return a}setAtOrigin(t,n,r){const i=this.propertiesByName.get(t);if(dm(i))return this._setAtOrigin(i,n,r)}isOverridden(t){const n=this.propertiesByName.get(t);return n!==void 0&&!!(n.flags&Xe.Overriden)}clearOverride(t){const n=this.propertiesByName.get(t);n&&n.flags&Xe.Overriden&&(n.flags&=~Xe.Overriden,n.notifyChange())}override(t,n){const r=this.propertiesByName.get(t);if(!fT(r,t,n,this))return;const i=r.metadata.cast;if(i){const s=this._cast(i,n),{valid:o,value:a}=s;if(fw.release(s),!o)return;n=a}r.flags|=Xe.Overriden,this._internalSet(r,n)}set(t,n){const r=this.propertiesByName.get(t);if(!fT(r,t,n,this))return;const i=r.metadata.cast;if(i){const o=this._cast(i,n),{valid:a,value:l}=o;if(fw.release(o),!a)return;n=l}const s=r.metadata.set;s?s.call(this.host,n):this._internalSet(r,n)}setDefaultOrigin(t){this._origin=va(t)}getDefaultOrigin(){return a1(this._origin)}notifyChange(t){const n=this.propertiesByName.get(t);n!==void 0&&n.notifyChange()}invalidate(t){const n=this.propertiesByName.get(t);n!==void 0&&n.invalidate()}commit(t){const n=this.propertiesByName.get(t);n!==void 0&&n.commit()}_internalSet(t,n){const r=this.lifecycle!==Qs.INITIALIZING?this._origin:Re.DEFAULTS;this._setAtOrigin(t,n,r)}_setAtOrigin(t,n,r){const i=this.store,s=t.propertyName;i.has(s,r)&&Y5(n,i.get(s))&&~t.flags&Xe.Overriden&&r===i.originOf(s)||(t.invalidate(),i.set(s,n,r),t.commit(),aP(this.host,t))}_cast(t,n){const r=fw.acquire();return r.valid=!0,r.value=n,t&&(r.value=t.call(this.host,n,r)),r}},LB=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const fw=new O0(LB);let FB;function jB(){return FB}var dT;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(dT||(dT={}));function zB(e){e.length=0}let ua=class{constructor(t=50,n=50){this._pool=new O0(Array,void 0,zB,n,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return dw.acquire()}static release(t){return dw.release(t)}static prune(){dw.prune()}};const dw=new ua(100);let BB=class extends O0{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const n=super.acquire(...t);return this._set.delete(n),n}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const pm=[];function Zh(e){pm.push(e),pm.length===1&&queueMicrotask(()=>{const t=pm.slice();pm.length=0;for(const n of t)n()})}let wP=class{constructor(t,n=30){this.name=t,this._counter=0,this._samples=new Array(n)}record(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,n)=>t-n)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,n)=>t+n,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var Vv;(function(e){const t=(s,o,a,l)=>{let c=o,u=o;const h=a>>>1,f=s[c-1];for(;u<=h;){u=c<<1,u<a&&l(s[u-1],s[u])<0&&++u;const d=s[u-1];if(l(d,f)<=0)break;s[c-1]=d,c=u}s[c-1]=f},n=(s,o)=>s<o?-1:s>o?1:0;function r(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=n);for(let u=a>>>1;u>o;u--)t(s,u,a,l);const c=o+1;for(let u=a-1;u>o;u--){const h=s[o];s[o]=s[u],s[u]=h,t(s,c,u,l)}}function*i(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=n);for(let u=a>>>1;u>o;u--)t(s,u,a,l),yield;const c=o+1;for(let u=a-1;u>o;u--){const h=s[o];s[o]=s[u],s[u]=h,t(s,c,u,l),yield}}e.sort=r,e.iterableSort=i})(Vv||(Vv={}));const pT=Vv,UB=1.5,VB=1.1;let Yh=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new $O,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>mT(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const n=new Array;for(let r=0;r<this._length;r++){const i=this.data[r];t(i)&&n.push(i)}return n}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,n){const r=this.data.indexOf(t,n);return r!==-1&&r<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let n=t;n<this._length;++n)this.data[n]=this._deallocator(this.data[n]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,n=t.length){for(let r=0;r<n;r++)this.data[this._length++]=t[r]}fill(t,n){for(let r=0;r<n;r++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,mT(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const n=Ev(this.data,t,this.length,this._hint);if(n!==-1)return this.data.splice(n,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(Ev(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,n=t.length,r){this.length=xz(this.data,t,this.length,n,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,n){if(t>=this.length||n>=this.length||t===n)return;const r=this.data[t];this.data[t]=this.data[n],this.data[n]=r}sort(t){pT.sort(this.data,0,this.length,t)}iterableSort(t){return pT.iterableSort(this.data,0,this.length,t)}some(t,n){for(let r=0;r<this.length;++r)if(t.call(n,this.data[r],r,this.data))return!0;return!1}find(t,n){for(let r=0;r<this.length;++r){const i=this.data[r];if(t.call(n,i,r))return i}}filterInPlace(t,n){let r=0;for(let i=0;i<this._length;++i){const s=this.data[i];t.call(n,s,i,this.data)&&(this.data[i]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let i=r;i<this._length;i++)this.data[i]=this._deallocator(this.data[i]);return this._length=r,this._shrink(),this}forAll(t,n){const r=this.length,i=this.data;for(let s=0;s<r;++s)t.call(n,i[s],s,i)}forEach(t,n){for(let r=0;r<this.length;++r)t.call(n,this.data[r],r,this.data)}map(t,n){const r=new Array(this.length);for(let i=0;i<this.length;++i)r[i]=t.call(n,this.data[i],i,this.data);return r}reduce(t,n){let r=n;for(let i=0;i<this.length;++i)r=t(r,this.data[i],i,this.data);return r}has(t){const n=this.length,r=this.data;for(let i=0;i<n;++i)if(r[i]===t)return!0;return!1}};function mT(e){e.data.length>UB*e.length&&(e.data.length=Math.floor(e.length*VB))}function U2e(e){return e}function V2e(e){return 1e3*e}function G2e(e){return e}function W2e(e){return .001*e}let GB=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},WB=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},Gv=0,Wv=0;const jf={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},Hv=["prepare","preRender","render","postRender","update","finish"],qv=[],Yc=new Yh;let HB=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const l1={frameTasks:Yc,willDispatch:!1,clearFrameTasks:qB,dispatch:_P,executeFrameTasks:JB};function vP(e){const t=new WB(e);return qv.push(t),l1.willDispatch||(l1.willDispatch=!0,Zh(_P)),t}function Z2e(e){const t=new GB(e);return Yc.push(t),c1==null&&(Gv=performance.now(),c1=requestAnimationFrame(xP)),new HB(t)}let c1=null;function qB(e=!1){Yc.forAll(t=>{t.removed=!0}),e&&SP()}function Y2e(e){Wv=Math.max(0,e)}function xP(){const e=performance.now();c1=null,c1=Yc.length>0?requestAnimationFrame(xP):null,l1.executeFrameTasks(e)}function JB(e){const t=e-Gv;Gv=e;const n=Wv>0?Wv:1e3/60,r=Math.max(0,t-n);jf.time=e,jf.frameDuration=n-r;for(let i=0;i<Hv.length;i++){const s=performance.now(),o=Hv[i];Yc.forAll(a=>{var l;a.paused||a.removed||(i===0&&a.ticks++,a.phases[o]&&(jf.elapsedFrameTime=performance.now()-e,jf.deltaTime=a.ticks===0?0:t,(l=a.phases[o])==null||l.call(a,jf)))}),YB[i].record(performance.now()-s)}SP(),KB.record(performance.now()-e)}const mm=new Yh;function SP(){Yc.forAll(e=>{e.removed&&mm.push(e)}),Yc.removeUnorderedMany(mm.data,mm.length),mm.clear()}function _P(){for(;qv.length;){const e=qv.shift();e.isActive&&e.callback()}l1.willDispatch=!1}function ZB(e=1,t){const n=qc(),r=()=>{ri(t)?n.reject(Ot()):e===0?n():(--e,Zh(()=>r()))};return r(),n.promise}const YB=Hv.map(e=>new wP(e)),KB=new wP("total");function XB(e,t){for(const n of e.entries())if(t(n[0]))return!0;return!1}function gT(e,t){if(!t)return e;for(const n of t)e.add(n);return e}function QB(e,t){const n=new Set;return gT(n,e),gT(n,t),n}function K2e(e,t){const n=new Set;for(const r of t)e.has(r)&&n.add(r);return n}function X2e(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const n of e)if(!t.has(n))return!1;return!0}function Q2e(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ebe(e,t){const n=new Set(e);for(const r of t)n.delete(r);return n}function tbe(e){let t;for(t of e);return t}let eU=0;const nbe=0;function Oc(){return++eU}let aM=class{constructor(t){this._accessed=[],this._handles=[],this._observerObject=new tU(t),yT.register(this,new WeakRef(this._observerObject),this)}destroy(){var t;yT.unregister(this._observerObject),this._accessed.length=0,(t=this._observerObject)==null||t.destroy(),this.clear()}onObservableAccessed(t){const n=this._accessed;n.includes(t)||n.push(t)}onTrackingEnd(){const t=this._handles,n=this._accessed,r=this._observerObject;for(let i=0;i<n.length;++i)t.push(n[i].observe(r));n.length=0}clear(){const t=this._handles;for(let n=0;n<t.length;++n)t[n].remove();t.length=0}},tU=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=nU}};const yT=new FinalizationRegistry(e=>{var t;(t=e.deref())==null||t.destroy()});function nU(){}let Nh=!1;const u1=[];function MP(e,t){let n=new aM(s),r=null,i=!1;function s(){if(!n||i)return;if(Nh)return void AP(s);const a=r;n.clear(),Nh=!0,i=!0,r=Ua(n,e),i=!1,Nh=!1,t(r,a),IP()}function o(){n&&(n.destroy(),n=null,r=null)}return i=!0,r=Ua(n,e),i=!1,It(o)}function $P(e,t){let n=new aM(i),r=null;function i(){t(r,o)}function s(){n&&(n.destroy(),n=null),r=null}function o(){return n?(n.clear(),r=Ua(n,e),r):null}return o(),It(s)}function TP(e){let t=new aM(r),n=!1;function r(){t&&!n&&(Nh?AP(r):(t.clear(),Nh=!0,n=!0,Ua(t,e),n=!1,Nh=!1,IP()))}function i(){t&&(t.destroy(),t=null)}return n=!0,Ua(t,e),n=!1,It(i)}function AP(e){u1.includes(e)||u1.unshift(e)}function IP(){for(;u1.length;)u1.pop()()}var yp;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(yp||(yp={}));let Yp=class{constructor(){this.uid=Oc(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,n,r,i,s){return this.pool.acquire(yp.Untracked,t,n,r,i,s,Y5)}static acquireTracked(t,n,r,i){return this.pool.acquire(yp.Tracked,t,n,r,null,null,i)}notify(t,n){this.type===yp.Untracked?this.callback.call(this.target,t,n,this.path,this.target):this.callback.call(null,t,n,void 0,void 0)}acquire(t,n,r,i,s,o,a){this.uid=Oc(),this.removed=!1,this.type=t,this.oldValue=n,this.callback=r,this.getValue=i,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Oc(),this.removed=!0}};Yp.pool=new BB(Yp);const zg=new ua,ao=new Set;let h1;function f1(e){ao.delete(e),ao.add(e),h1||(h1=vP(sU))}function rU(e){if(e.removed)return;const t=e.oldValue,n=e.getValue();e.equals(t,n)||(e.oldValue=n,e.notify(n,t))}function iU(e){for(const t of ao.values())t.target===e&&(t.removed=!0)}function sU(){let e=10;for(;h1&&e--;){h1=null;const t=oU(),n=zg.acquire();for(const r of t){const i=r.uid;rU(r),i===r.uid&&r.removed&&n.push(r)}for(const r of ao)r.removed&&(n.push(r),ao.delete(r));for(const r of n)Yp.pool.release(r);zg.release(n),zg.release(t),Jv.forEach(r=>r())}}function oU(){const e=zg.acquire();e.length=ao.size;let t=0;for(const n of ao)e[t]=n,++t;return ao.clear(),e}const Jv=new Set;function obe(e){return Jv.add(e),It(()=>Jv.delete(e))}function aU(e,t,n){let r=eP(e,t,n,(i,s,o)=>{let a,l,c=$P(()=>E0(i,s),(u,h)=>{i.__accessor__.destroyed||a&&a.uid!==l?r.remove():(a||(a=Yp.acquireUntracked(u,o,h,i,s),l=a.uid),f1(a))});return It(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,f1(a)),a=null),r=c=null})});return r}function lU(e,t,n){const r=eP(e,t,n,(i,s,o)=>{let a=!1;return MP(()=>E0(i,s),(l,c)=>{i.__accessor__.destroyed?r.remove():a||(a=!0,Y5(c,l)||o.call(i,l,c,s,i),a=!1)})});return r}function cU(e,t,n,r=!1){return!e.__accessor__||e.__accessor__.destroyed?It():r?lU(e,t,n):aU(e,t,n)}function uU(e,t,n){let r,i,s=$P(e,(o,a)=>{r&&r.uid!==i?s.remove():(r||(r=Yp.acquireTracked(o,t,a,n),i=r.uid),f1(r))});return It(()=>{s.remove(),r&&(r.uid!==i||r.removed||(r.removed=!0,f1(r)),r=null),s=null})}function hU(e,t,n){let r=!1;return MP(e,(i,s)=>{r||(r=!0,n(s,i)||t(i,s),r=!1)})}function fU(e,t,n=!1,r=kz){return n?hU(e,t,r):uU(e,t,r)}function abe(e){return XB(ao,t=>t.oldValue===e)}var kP,EP;function dU(e){var t;if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(t=e.constructor)!=null&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const Uo=Symbol("Accessor-Handles"),Zv=Symbol("Accessor-Initialized");let Yt=class CP{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:n,declaredClass:r,constructor:i}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,i&&i.apply(this,l)}}C0(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...c){const u=this.inherited;let h;this.inherited=function(...f){if(s.prototype[a])return s.prototype[a].apply(this,f)};try{h=l.apply(this,c)}catch(f){throw this.inherited=u,f}return this.inherited=u,h}:t[a]}for(const a in n){const l=dU(n[a]);b(l)(o.prototype,a)}return L(r)(o)}constructor(...t){if(this[kP]=null,this[EP]=!1,this.constructor===CP)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const n=new DB(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:n}),t.length>0&&this.normalizeCtorArgs&&(n.ctorArgs=this.normalizeCtorArgs.apply(this,t))}postscript(t){const n=this.__accessor__,r=n.ctorArgs||t;n.initialize(),r&&(this.set(r),n.ctorArgs=null),n.constructed(),this.initialize(),this[Zv]=!0}initialize(){}[iP](){this[Uo]=mp(this[Uo])}destroy(){var t;this.destroyed||(iU(this),this.__accessor__.destroy(),(t=jB())==null||t.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Zv]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){Ba(this,t)}get(t){return AB(ie.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Ba(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,n){return n1(this,t,n),this}watch(t,n,r){return cU(this,t,n,r)}addHandles(t,n){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const s of i)s.remove();return}let r=this[Uo];r==null&&(r=this[Uo]=new IB),r.add(t,n)}removeHandles(t){const n=this[Uo];n!=null&&n.remove(t)}removeAllHandles(){const t=this[Uo];t!=null&&t.removeAll()}hasHandles(t){const n=this[Uo];return n!=null&&n.has(t)}_override(t,n){n===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,n)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,n){n==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,n)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,n){return this.__accessor__.internalSet(t,n),this}};kP=Uo,EP=Zv;let pU=class OP{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const n=new OP;return this._values.forEach((r,i)=>{t&&t.has(i)||n.set(i,J(r.value),r.origin)}),n}get(t,n){n=this._normalizeOrigin(n);const r=this._values.get(t);return n==null||(r==null?void 0:r.origin)===n?r==null?void 0:r.value:void 0}originOf(t){var n;return((n=this._values.get(t))==null?void 0:n.origin)??Re.USER}keys(t){t=this._normalizeOrigin(t);const n=[...this._values.keys()];return t==null?n:n.filter(r=>{var i;return((i=this._values.get(r))==null?void 0:i.origin)===t})}set(t,n,r){if((r=this._normalizeOrigin(r))===Re.DEFAULTS){const i=this._values.get(t);if((i==null?void 0:i.origin)!=null&&i.origin>r)return}this._values.set(t,new mU(n,r))}delete(t,n){var r;(n=this._normalizeOrigin(n))!=null&&((r=this._values.get(t))==null?void 0:r.origin)!==n||this._values.delete(t)}has(t,n){var r;return(n=this._normalizeOrigin(n))!=null?((r=this._values.get(t))==null?void 0:r.origin)===n:this._values.has(t)}forEach(t){this._values.forEach(({value:n},r)=>t(n,r))}_normalizeOrigin(t){if(t!=null)return t===Re.DEFAULTS?t:Re.USER}},mU=class{constructor(t,n){this.value=t,this.origin=n}};function PP(e,t,n){t.keys().forEach(i=>{n.set(i,t.get(i),Re.DEFAULTS)});const r=e.metadatas;Object.keys(r).forEach(i=>{e.internalGet(i)&&n.set(i,e.internalGet(i),Re.DEFAULTS)})}function gU(e,t,n){if(!(e!=null&&e.read)||e.read.enabled===!1||!e.read.source)return!1;const r=e.read.source;if(typeof r=="string"){if(r===t||r.includes(".")&&r.indexOf(t)===0&&tT(r,n))return!0}else for(const i of r)if(i===t||i.includes(".")&&i.indexOf(t)===0&&tT(i,n))return!0;return!1}function yU(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function bU(e,t,n,r,i){let s=Fv(t[n],i);yU(s)&&(e[n]=!0);for(const o of Object.getOwnPropertyNames(t))s=Fv(t[o],i),gU(s,n,r)&&(e[o]=!0)}function wU(e,t,n,r){const i=n.metadatas,s=wB(i[t],r),o=s==null?void 0:s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,r):o;a!==void 0&&n.set(t,a)}const RP={origin:"service"};function NP(e,t,n=RP){if(!t||typeof t!="object")return;const r=xr(e),i=r.metadatas,s={};for(const o of Object.getOwnPropertyNames(t))bU(s,i,o,t,n);r.setDefaultOrigin(n.origin);for(const o of Object.getOwnPropertyNames(s)){const a=Fv(i[o],n).read,l=a==null?void 0:a.source;let c;c=l&&typeof l=="string"?E0(t,l):t[o],a!=null&&a.reader&&(c=a.reader.call(e,c,t,n)),c!==void 0&&r.set(o,c)}if(!n||!n.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(i))s[o]||wU(e,o,r,n)}r.setDefaultOrigin("user")}function vU(e,t,n,r=RP){var s;const i={...r,messages:[]};n(i),(s=i.messages)==null||s.forEach(o=>{o.type!=="warning"||e.loaded?r!=null&&r.messages&&r.messages.push(o):e.loadWarnings.push(o)})}function xU(e,t,n,r,i){var o,a;const s={};return(a=(o=t.write)==null?void 0:o.writer)==null||a.call(e,r,s,n,i),s}function DP(e,t,n,r,i,s){if(!(r!=null&&r.write))return!1;const o=Ba(e,n);if(!i&&r.write.overridePolicy){const a=r.write.overridePolicy.call(e,o,n,s??void 0);a!==void 0&&(i=a)}if(i||(i=r.write),!i||i.enabled===!1||i.layerContainerTypes&&(s!=null&&s.layerContainerType)&&!i.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!i.allowNull&&!i.writerEnsuresNonNull||o===void 0)&&i.isRequired){const a=new Y("web-document-write:property-required",`Missing value for required property '${n}' on '${e.declaredClass}'`,{propertyName:n,target:e});return a&&(s!=null&&s.messages)?s.messages.push(a):a&&!s&&ie.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(n)===Re.DEFAULTS)&&SU(e,n,s,r,o)||!i.ignoreOrigin&&(s!=null&&s.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(n)<va(s.origin))}function SU(e,t,n,r,i){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(i);if(typeof s=="function"){if(Array.isArray(i)){const o=s.call(e,t,n??void 0);return Hc(o,i)}return!1}return s===i}function _U(e,t,n,r){const i=xr(e),s=i.metadatas,o=mP(s[t],r);return!!o&&DP(e,i,t,o,n,r)}function LP(e,t,n){var s,o;if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return Lg(t,e.toJSON(n));const r=xr(e),i=r.metadatas;for(const a in i){const l=mP(i[a],n);if(!DP(e,r,a,l,void 0,n))continue;const c=Ba(e,a),u=xU(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,c,n);Object.keys(u).length>0&&(t=Lg(t,u),(o=(s=n==null?void 0:n.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&n.resources.pendingOperations.push(Promise.all(n.resources.pendingOperations).then(()=>Lg(t,u,()=>"replace-arrays"))),n!=null&&n.writtenProperties&&n.writtenProperties.push({target:e,propName:a,oldOrigin:PB(r.store.originOf(a)),newOrigin:n.origin}))}return t}const lM=e=>{let t=class extends e{constructor(...n){super(...n);const r=xr(this),i=r.store,s=new pU;r.store=s,PP(r,i,s)}read(n,r){NP(this,n,r)}write(n,r){return LP(this,n??{},r)}toJSON(n){return this.write({},n)}static fromJSON(n,r){return MU.call(this,n,r)}};return t=p([L("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function MU(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const n=new this;return n.read(e,t),n}function d1(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let re=class extends lM(Yt){};re=p([L("esri.core.JSONSupport")],re);function ge(e,t,n){let r,i;return t===void 0||Array.isArray(t)?(i=e,n=t,r=[void 0]):(i=t,r=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const c=rP(s,l,i);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],n&&(c.read.source=(c.read.source||[]).concat(n))})}}let Ne=class{constructor(t,n={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=n,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(t),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,i,s)=>{const o=this.toJSON(r);o!==void 0&&bu(s,o,i)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const n=this._apiToJSON[t];return this._options.useNumericKeys?+n:n}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}_invertMap(t){const n={};for(const r in t)n[t[r]]=r;return n}_getKeysSorted(t){const n=[];for(const r in t)n.push(r);return n.sort(),n}};function yn(){return function(e,t){return new Ne(e,{ignoreUnknown:!0,...t})}}let cM=class{constructor(t,n,r,i){this.semiMajorAxis=t,this.flattening=n,this.outerAtmosphereRimWidth=r;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=i||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const ft=new cM(6378137,1/298.257223563,3e5,.006694379990137799),lo=new cM(3396190,1/169.8944472236118,23e4),Va=new cM(1737400,0,0),$U="modulepreload",TU=function(e){return"/"+e},bT={},ne=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=TU(s),s in bT)return;bT[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":$U,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},AU=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,IU={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function wT(e){const t=e==null?void 0:e.match(AU);if(!t)return null;const[,n,r,i]=t;if(!n)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:u}=IU;if(r)if(s=n,i)switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=u);else switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function kU(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function FP(e){const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}function EU(e){const t=new Uint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}const CU=ie.getLogger("esri.core.urlUtils"),_f=ze.request,vT="esri/config: esriConfig.request.proxyUrl is not set.",jP=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,zP=/^\s*http:/i,OU=/^\s*https:/i,PU=/^\s*file:/i,RU=/:\d+$/,NU=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,DU=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),LU=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let Pc=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let n=this.uri.match(DU);this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),this.authority!=null&&(n=this.authority.match(LU),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}toString(){return this.uri}};const gm={},FU=new Pc(ze.applicationUrl);let jn=FU;const jU=zU();let uM=jU;const hM=()=>jn,dbe=()=>uM;function zU(){const e=jn.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${jn.scheme}://${jn.host}${jn.port!=null?`:${jn.port}`:""}`}${t}`}function _r(e){if(!e)return null;const t={path:null,query:null},n=new Pc(e),r=e.indexOf("?");return n.query===null?t.path=e:(t.path=e.substring(0,r),t.query=fM(n.query)),n.fragment&&(t.hash=n.fragment,n.query===null&&(t.path=t.path.substring(0,t.path.length-(n.fragment.length+1)))),t}function fM(e){const t=e.split("&"),n={};for(const r of t){if(!r)continue;const i=r.indexOf("=");let s,o;i<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,i)),o=decodeURIComponent(r.slice(i+1)));let a=n[s];typeof a=="string"&&(a=n[s]=[a]),Array.isArray(a)?a.push(o):n[s]=o}return n}function Kh(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(n=>encodeURIComponent(n)+"="+encodeURIComponent(t(n,e[n]))).join("&"):Object.keys(e).map(n=>{const r=e[n];if(r==null)return"";const i=encodeURIComponent(n)+"=",s=t==null?void 0:t[n];return s?i+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>d1(o)?i+encodeURIComponent(JSON.stringify(o)):i+encodeURIComponent(o)).join("&"):d1(r)?i+encodeURIComponent(JSON.stringify(r)):i+encodeURIComponent(r)}).filter(n=>n).join("&"):""}function BU(e=!1){let t,n=_f.proxyUrl;if(typeof e=="string"){t=JU(e);const r=C2(e);r&&(n=r.proxyUrl)}else t=!!e;if(!n)throw CU.warn(vT),new Y("urlutils:proxy-not-set",vT);return t&&Yv()&&(n=gM(n)),_r(n)}function pbe(e){const t=C2(e);let n,r;if(t){const i=dM(t.proxyUrl);n=i.path,r=i.query?fM(i.query):null}if(n){const i=_r(e);e=n+"?"+i.path;const s=Kh({...r,...i.query});s&&(e=`${e}?${s}`)}return e}const zf={path:"",query:""};function dM(e){const t=e.indexOf("?");return t!==-1?(zf.path=e.slice(0,t),zf.query=e.slice(t+1)):(zf.path=e,zf.query=null),zf}function BP(e){return e=(e=m1(e=QU(e=dM(e).path),!0)).toLowerCase()}function UU(e){const t={proxyUrl:e.proxyUrl,urlPrefix:BP(e.urlPrefix)},n=_f.proxyRules,r=t.urlPrefix;let i=n.length;for(let s=0;s<n.length;s++){const o=n[s].urlPrefix;if(r.indexOf(o)===0){if(r.length===o.length)return-1;i=s;break}o.indexOf(r)===0&&(i=s+1)}return n.splice(i,0,t),i}function C2(e){const t=_f.proxyRules,n=BP(e);for(let r=0;r<t.length;r++)if(n.indexOf(t[r].urlPrefix)===0)return t[r]}function VU(e,t){if(!e||!t)return!1;e=p1(e),t=p1(t);const n=wT(e),r=wT(t);return n!=null&&r!=null?n.portalHostname===r.portalHostname:n==null&&r==null&&Xh(e,t,!0)}function UP(e,t){return e=p1(e),t=p1(t),m1(e)===m1(t)}function p1(e){const t=(e=Oi(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function VP(e){const t=r=>r==null||r instanceof RegExp&&r.test(e)||typeof r=="string"&&e.startsWith(r),n=_f.interceptors;if(n){for(const r of n)if(Array.isArray(r.urls)){if(r.urls.some(t))return r}else if(t(r.urls))return r}return null}function Xh(e,t,n=!1){if(!e||!t)return!1;const r=Xv(e),i=Xv(t);return!(!n&&r.scheme!==i.scheme)&&r.host!=null&&i.host!=null&&r.host.toLowerCase()===i.host.toLowerCase()&&r.port===i.port}function pM(e){if(typeof e=="string"){if(!Nr(e))return!0;e=Xv(e)}if(Xh(e,jn))return!0;const t=_f.trustedServers||[];for(let n=0;n<t.length;n++){const r=GU(t[n]);for(let i=0;i<r.length;i++)if(Xh(e,r[i]))return!0}return!1}function GU(e){return gm[e]||(mM(e)||nl(e)?gm[e]=[new Pc(Xr(e))]:gm[e]=[new Pc(`http://${e}`),new Pc(`https://${e}`)]),gm[e]}function Xr(e,t=uM,n){return nl(e)?n&&n.preserveProtocolRelative?e:jn.scheme==="http"&&jn.authority===Pi(e).slice(2)?`http:${e}`:`https:${e}`:mM(e)?e:P2(e[0]==="/"?XU(t):t,e)}function O2(e,t=uM,n){if(e==null||!Nr(e))return e;const r=Oi(e),i=r.toLowerCase(),s=Oi(t).toLowerCase().replace(/\/+$/,""),o=n?Oi(n).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(h,f,d)=>(d=h.indexOf(f,d))===-1?h.length:d;let l=a(i,"/",i.indexOf("//")+2),c=-1;for(;i.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==i.length);)l=a(i,"/",l+1);if(c===-1||o&&c<o.length)return e;e=r.slice(c);const u=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(u>0)for(let h=0;h<u;h++)e=`../${e}`;else e=`./${e}`;return e}function Oi(e){return e=nV(e=tV(e=eV(e=Xr(e=e.trim()))))}function P2(...e){const t=e.filter(ja);if(!(t!=null&&t.length))return;const n=[];if(Nr(t[0])){const i=t[0],s=i.indexOf("//");s!==-1&&(n.push(i.slice(0,s+1)),YU(t[0])&&(n[0]+="/"),t[0]=i.slice(s+2))}else t[0][0]==="/"&&n.push("");const r=t.reduce((i,s)=>s?i.concat(s.split("/")):i,[]);for(let i=0;i<r.length;i++){const s=r[i];s===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():(!s&&i===r.length-1||s&&(s!=="."||n.length===0))&&n.push(s)}return n.join("/")}function Pi(e,t=!1){if(e==null||R2(e)||wu(e))return null;let n=e.indexOf("://");if(n===-1&&nl(e))n=2;else{if(n===-1)return null;n+=3}const r=e.indexOf("/",n);return r!==-1&&(e=e.slice(0,r)),t&&(e=m1(e,!0)),e}function Nr(e){return nl(e)||mM(e)}function R2(e){return e!=null&&e.slice(0,5)==="blob:"}function wu(e){return e!=null&&e.slice(0,5)==="data:"}function WU(e){const t=Qh(e);return t&&t.isBase64?FP(t.data):null}function mbe(e){return EU(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const HU=/^data:(.*?)(;base64)?,(.*)$/;function Qh(e){const t=e.match(HU);if(!t)return null;const[,n,r,i]=t;return{mediaType:n,isBase64:!!r,data:i}}function GP(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function gbe(e){return(await fetch(e)).blob()}function ybe(e){const t=WU(e);if(!t)return null;const n=Qh(e);return new Blob([t],{type:n.mediaType})}function bbe(e,t){qU(e,t)}function qU(e,t){if(!e)return!1;const n=document.createElement("a");if(!("download"in n))return!1;const r=URL.createObjectURL(e);return n.download=t,n.href=r,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),!0}function nl(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function mM(e){return e!=null&&jP.test(e)}function JU(e){return e!=null&&OU.test(e)||jn.scheme==="https"&&nl(e)}function ZU(e){return e!=null&&zP.test(e)||jn.scheme==="http"&&nl(e)}function YU(e){return e!=null&&PU.test(e)}function gM(e){return nl(e)?`https:${e}`:e.replace(zP,"https:")}function KU(){return jn.scheme==="http"}function Yv(){return jn.scheme==="https"}function m1(e,t=!1){return nl(e)?e.slice(2):(e=e.replace(jP,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function XU(e){const t=e.indexOf("//"),n=e.indexOf("/",t+2);return n===-1?e:e.slice(0,n)}function WP(e){let t=0;if(Nr(e)){const r=e.indexOf("//");r!==-1&&(t=r+2)}const n=e.lastIndexOf("/");return n<t?e:e.slice(0,n+1)}function wbe(e,t){if(!e)return"";const n=_r(e).path.replace(/\/+$/,""),r=n.substring(n.lastIndexOf("/")+1);if(!(t!=null&&t.length))return r;const i=new RegExp(`.(${t.join("|")})$`,"ig");return r.replace(i,"")}function QU(e){return e.endsWith("/")?e:`${e}/`}function HP(e){return e.replace(/\/+$/,"")}function eV(e){if(/^https?:\/\//i.test(e)){const t=dM(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function tV(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function nV(e){const t=_f.httpsDomains;if(!ZU(e))return e;const n=e.indexOf("/",7);let r;if(r=n===-1?e:e.slice(0,n),r=r.toLowerCase().slice(7),RU.test(r)){if(!r.endsWith(":80"))return e;r=r.slice(0,-3),e=e.replace(":80","")}return KU()&&r===jn.authority&&!NU.test(e)||(Yv()&&r===jn.authority||t&&t.some(i=>r===i||r.endsWith(`.${i}`))||Yv()&&!C2(e))&&(e=gM(e)),e}function Kv(e,t,n){if(!(t&&n&&e&&Nr(e)))return e;const r=e.indexOf("//"),i=e.indexOf("/",r+2),s=e.indexOf(":",r+2),o=Math.min(i<0?e.length:i,s<0?e.length:s);return e.slice(r+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,r+2)}${n}${e.slice(o)}`}function Xv(e){return typeof e=="string"?new Pc(Xr(e)):(e.scheme||(e.scheme=jn.scheme),e)}function vbe(e){return rV.test(e)}function qP(e,t){const n=_r(e),r=Object.keys(n.query||{});return r.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function JP(e,t,n){const r=_r(e),i=r.query||{};return i[t]=String(n),`${r.path}?${Kh(i)}`}function pw(e,t){if(!t)return e;const n=_r(e),r=n.query||{};for(const[s,o]of Object.entries(t))o!=null&&(r[s]=o);const i=Kh(r);return i?`${n.path}?${i}`:n.path}function xbe(e){if(e==null)return null;const t=e.match(ZP);return t?t[2]:null}function xT(e){if(e==null)return null;const t=e.match(ZP);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function Sbe(e){return typeof e=="string"?Qh(e)??{data:e}:new Promise((t,n)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(Qh(r.result)),r.onerror=i=>n(i)})}const ZP=/([^.]*)\.([^\/]*)$/,rV=/(^data:image\/svg|\.svg$)/i,YP="20231109",KP="bd3f0f31f667aa883ebe3002833f813cc4a75869";Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose"));const iV="4.28";let Le,yM=iV;yM="4.28.9";function _be(e){Le=e}function Mbe(e){const t=Le==null?void 0:Le.findCredential(e);return t!=null&&t.token?JP(e,"token",t.token):e}X("host-webworker");const sV=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function bM(e){const t=Pi(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!sV.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function oV(e,t,n=!1,r){return new Promise((i,s)=>{if(ri(r))return void s(ST());let o=()=>{c(),s(new Error(`Unable to load ${t}`))},a=()=>{const u=e;c(),i(u)},l=()=>{if(!e)return;const u=e;c(),u.src="",s(ST())};const c=()=>{X("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,r!=null&&r.removeEventListener("abort",l),l=null,n&&URL.revokeObjectURL(t)};r!=null&&r.addEventListener("abort",l),X("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function ST(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const XP="Timeout exceeded";function aV(){return new Error(XP)}function $be(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===XP}function lV(e){ze.request.crossOriginNoCorsDomains||(ze.request.crossOriginNoCorsDomains={});const t=ze.request.crossOriginNoCorsDomains;for(let n of e)n=n.toLowerCase(),/^https?:\/\//.test(n)?t[Pi(n)??""]=0:(t[Pi("http://"+n)??""]=0,t[Pi("https://"+n)??""]=0)}function cV(e){const t=ze.request.crossOriginNoCorsDomains;if(t){let n=Pi(e);if(n)return n=n.toLowerCase(),!Xh(n,hM())&&t[n]<Date.now()-36e5}return!1}async function uV(e){var i;const t=ze.request.crossOriginNoCorsDomains,n=Pi(e);t&&n&&(t[n.toLowerCase()]=Date.now());const r=_r(e);e=r.path,((i=r.query)==null?void 0:i.f)==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function He(e,t){var c;e instanceof URL&&(e=e.toString()),(t==null?void 0:t.query)instanceof URLSearchParams&&(t.query=fM(t.query.toString().replaceAll("+"," ")));const n=wu(e),r=R2(e);r||n||(e=Oi(e));const i={url:e,requestOptions:{...t}};let s=VP(e);if(s){const u=await bV(s,i);if(u!=null)return{data:u,getHeader:wM,httpStatus:200,requestOptions:i.requestOptions,url:i.url};s.after||s.error||(s=null)}if(e=i.url,(t=i.requestOptions).responseType==="image"&&(X("host-webworker")||X("host-node")))throw ys("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),i);if(t.method==="head"){if(t.body)throw ys("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),i);if(n||r)throw ys("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),i)}if(await mV(),g1)return g1.execute(e,t);const o=new AbortController;po(t,()=>o.abort());const a={controller:o,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:s,params:i,redoRequest:!1,useIdentity:Mi.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await vV(a);return(c=s==null?void 0:s.after)==null||c.call(s,l),l}let g1;const Mi=ze.request,QP="FormData"in globalThis,hV=new Set([499,498,403,401]),fV=new Set(["COM_0056","COM_0057","SB_0008"]),dV=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],wM=()=>null,y1=Symbol();function pV(e){const t=Pi(e);t&&!He._corsServers.includes(t)&&He._corsServers.push(t)}function _T(e){const t=Pi(e);return!t||t.endsWith(".arcgis.com")||He._corsServers.includes(t)||pM(t)}function ys(e,t,n,r){let i="Error";const s={url:n.url,requestOptions:n.requestOptions,getHeader:wM,ssl:!1};if(t instanceof Y)return t.details?(t.details=J(t.details),t.details.url=n.url,t.details.requestOptions=n.requestOptions):t.details=s,t;if(t){const o=r&&(c=>r.headers.get(c)),a=r==null?void 0:r.status,l=t.message;l&&(i=l),o&&(s.getHeader=o),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=y1 in t?t[y1]:t}return wr(t)?Ot():new Y(e,i,s)}async function mV(){X("host-webworker")?g1||(g1=await ne(()=>import("./request-e535f045.js"),[])):He._abortableFetch||(He._abortableFetch=globalThis.fetch.bind(globalThis))}async function Qv(){Le||await ne(()=>import("./IdentityManager-113f191a.js"),["assets/IdentityManager-113f191a.js","assets/jsxFactory-92036771.js","assets/uuid-709b6c67.js","assets/widget-826a6ea9.js"])}async function gV(e){var a;const t=e.params.url,n=e.params.requestOptions,r=e.controller.signal,i=n.body;let s=null,o=null;if(QP&&"HTMLFormElement"in globalThis&&(i instanceof FormData?s=i:i instanceof HTMLFormElement&&(s=new FormData(i))),typeof i=="string"&&(o=i),e.fetchOptions={cache:n.cacheBust&&!("polyfill"in He._abortableFetch)?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},method:n.method==="head"?"HEAD":"GET",mode:"cors",priority:Mi.priority,redirect:"follow",signal:r},(s||o)&&(e.fetchOptions.body=s||o),n.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||(a=n.query)!=null&&a.token||s!=null&&s.get("token")),!e.hasToken&&ze.apiKey&&bM(t)&&(n.query||(n.query={}),n.query.token=ze.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!e6(t)&&!ri(r)){let l;n.authMode==="immediate"?(await Qv(),l=await Le.getCredential(t,{signal:r}),e.credential=l):n.authMode==="no-prompt"?(await Qv(),l=await Le.getCredential(t,{prompt:!1,signal:r}).catch(()=>{}),e.credential=l):Le&&(l=Le.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function e6(e){return dV.some(t=>t.test(e))}async function yV(e){let t=e.params.url;const n=e.params.requestOptions,r=e.fetchOptions??{},i=R2(t)||wu(t),s=n.responseType||"json",o=i?0:n.timeout!=null?n.timeout:Mi.timeout;let a=!1;if(!i){e.useSSL&&(t=gM(t)),n.cacheBust&&r.cache==="default"&&(t=JP(t,"request.preventCache",Date.now()));let f={...n.query};e.credentialToken&&(f.token=e.credentialToken);let d=Kh(f);X("esri-url-encodes-apostrophe")&&(d=d.replaceAll("'","%27"));const g=t.length+1+d.length;let y;a=n.method==="delete"||n.method==="post"||n.method==="put"||!!n.body||g>Mi.maxUrlLength;const w=n.useProxy||!!C2(t);if(w){const v=BU(t);y=v.path,!a&&y.length+1+g>Mi.maxUrlLength&&(a=!0),v.query&&(f={...v.query,...f})}if(r.method==="HEAD"&&(a||w)){if(a)throw g>Mi.maxUrlLength?ys("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ys("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw ys("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(r.method=n.method==="delete"?"DELETE":n.method==="put"?"PUT":"POST",n.body?t=pw(t,f):(r.body=Kh(f),r.headers||(r.headers={}),r.headers["Content-Type"]="application/x-www-form-urlencoded")):t=pw(t,f),w&&(e.useProxy=!0,t=`${y}?${t}`),f.token&&QP&&r.body instanceof FormData&&!kU(t)&&r.body.set("token",f.token),n.hasOwnProperty("withCredentials"))e.withCredentials=n.withCredentials;else if(!Xh(t,hM())){if(pM(t))e.withCredentials=!0;else if(Le){const v=Le.findServerInfo(t);v!=null&&v.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(r.credentials="include",cV(t)&&await uV(a?pw(t,f):t))}let l,c,u=0,h=!1;o>0&&(u=setTimeout(()=>{h=!0,e.controller.abort()},o));try{if(n.responseType==="native-request-init")c=r,c.url=t;else if(n.responseType!=="image"||r.cache!=="default"||r.method!=="GET"||a||wV(n.headers)||!i&&!e.useProxy&&Mi.proxyUrl&&!_T(t)){if(l=await He._abortableFetch(t,r),e.useProxy||pV(t),n.responseType==="native")c=l;else if(r.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(u&&(clearTimeout(u),u=0),s==="json"||s==="xml"||s==="document")if(c)switch(s){case"json":c=JSON.parse(c);break;case"xml":c=MT(c,"application/xml");break;case"document":c=MT(c,"text/html")}else c=null;if(c){if(s==="array-buffer"||s==="blob"){const f=l.headers.get("Content-Type");if(f&&/application\/json|text\/plain/i.test(f)&&c[s==="blob"?"size":"byteLength"]<=750)try{const d=await new Response(c).json();d.error&&(c=d)}catch{}}s==="image"&&c instanceof Blob&&(c=await $T(URL.createObjectURL(c),e,!0))}}else{c=await l.text();try{c=JSON.parse(c)}catch{}}}else c=await $T(t,e)}catch(f){if(f.name==="AbortError")throw h?aV():Ot("Request canceled");if(!(!l&&f instanceof TypeError&&Mi.proxyUrl)||n.body||n.method==="delete"||n.method==="head"||n.method==="post"||n.method==="put"||e.useProxy||_T(t))throw f;e.redoRequest=!0,UU({proxyUrl:Mi.proxyUrl,urlPrefix:Pi(t)??""})}finally{u&&clearTimeout(u)}return[l,c]}async function bV(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let n,r;try{r=await e.before(t)}catch(i){n=ys("request:interceptor",i,t)}if((r instanceof Error||r instanceof Y)&&(n=ys("request:interceptor",r,t)),n)throw e.error&&e.error(n),n;return r}}function wV(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function MT(e,t){let n;try{n=new DOMParser().parseFromString(e,t)}catch{}if(!n||n.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return n}async function vV(e){var s,o;let t,n;await gV(e);try{do[t,n]=await yV(e);while(!await xV(e,t,n))}catch(a){const l=ys("request:server",a,e.params,t);throw l.details.ssl=e.useSSL,(s=e.interceptor)!=null&&s.error&&e.interceptor.error(l),l}const r=e.params.url;if(n&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!e.hasToken&&!e.credentialToken&&((o=n.user)!=null&&o.username)&&!pM(r)){const a=Pi(r,!0);a&&Mi.trustedServers.push(a)}Array.isArray(n.authorizedCrossOriginNoCorsDomains)&&lV(n.authorizedCrossOriginNoCorsDomains)}const i=e.credential;if(i&&Le){const a=Le.findServerInfo(i.server);let l=a==null?void 0:a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const c=Le.findCredential(l,i.userId);c&&Le._getIdenticalSvcIdx(l,c)===-1&&c.resources.unshift(l)}}return{data:n,getHeader:t?a=>t==null?void 0:t.headers.get(a):wM,httpStatus:(t==null?void 0:t.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function xV(e,t,n){var c;if(e.redoRequest)return e.redoRequest=!1,!1;const r=e.params.requestOptions;if(!t||r.responseType==="native"||r.responseType==="native-request-init")return!0;let i,s;if(n&&(n.error?i=n.error:n.status==="error"&&Array.isArray(n.messages)&&(i={...n},i[y1]=n,i.details=n.messages)),!i&&!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[y1]=n,i;let o,a=null;i&&(s=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,o=i.messageCode,o=o==null?void 0:o.toUpperCase());const l=r.authMode;if(s===403&&(a===4||(c=i.message)!=null&&c.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&hV.has(s)&&!e6(e.params.url)&&(s!==403||(!o||!fV.has(o))&&(a==null||a===2&&e.credentialToken))){await Qv();try{const u=await Le.getCredential(e.params.url,{error:ys("request:server",i,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=u,e.credentialToken=u.token,e.useSSL=e.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;i=u}}if(i)throw i;return!0}function $T(e,t,n=!1){const r=t.controller.signal,i=new Image;return t.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.fetchPriority=Mi.priority,i.src=e,oV(i,e,n,r)}He._abortableFetch=null,He._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const SV=ie.getLogger("esri.assets");function Tbe(e,t){return He(vu(e),t)}function vu(e){if(!ze.assetsPath)throw SV.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Y("assets:path-not-set","config.assetsPath is not set");return P2(ze.assetsPath,e)}let mw,H=null;function t6(){return!!H}function _V(){return!!X("esri-wasm")}function n6(){return mw||(mw=ne(()=>import("./pe-wasm-c59fcfd8.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>vu(`esri/geometry/support/${t}`)})).then(e=>{i6(e)}),mw)}var Kp,je,Or;(function(e){function t(s,o,a){H.ensureCache.prepare();const l=dc(a),c=a===l,u=H.ensureFloat64(l),h=H._pe_geog_to_proj(H.getPointer(s),o,u);return h&&ga(a,o,u,c),h}function n(s,o,a,l){switch(l){case je.PE_TRANSFORM_P_TO_G:return r(s,o,a);case je.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function r(s,o,a){return i(s,o,a,0)}function i(s,o,a,l){H.ensureCache.prepare();const c=dc(a),u=a===c,h=H.ensureFloat64(c),f=H._pe_proj_to_geog_center(H.getPointer(s),o,h,l);return f&&ga(a,o,h,u),f}e.geogToProj=t,e.projGeog=n,e.projToGeog=r,e.projToGeogCenter=i})(Kp||(Kp={})),function(e){function t(){e.PE_BUFFER_MAX=H.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=H.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=H.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=H.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=H.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=H.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=H.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=H.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=H.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=H.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=H.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=H.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=H.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=H.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=H.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=H.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=H.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=H.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=H.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=H.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=H.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=H.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=H.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=H.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=H.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=H.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=H.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=H.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=H.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=H.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=H.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=H.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(je||(je={})),function(e){const t={},n={},r=d=>{if(d){const g=d.getType();switch(g){case je.PE_TYPE_GEOGCS:d=H.castObject(d,H.PeGeogcs);break;case je.PE_TYPE_PROJCS:d=H.castObject(d,H.PeProjcs);break;case je.PE_TYPE_GEOGTRAN:d=H.castObject(d,H.PeGeogtran);break;default:g&je.PE_TYPE_UNIT&&(d=H.castObject(d,H.PeUnit))}}return d};function i(){H.PeFactory.prototype.initialize(null)}function s(d){return o(je.PE_TYPE_COORDSYS,d)}function o(d,g){let y=null,w=t[d];if(w||(w={},t[d]=w),w.hasOwnProperty(String(g)))y=w[g];else{const v=H.PeFactory.prototype.factoryByType(d,g);H.compare(v,H.NULL)||(y=v,w[g]=y)}return y=r(y),y}function a(d,g){let y=null,w=n[d];if(w||(w={},n[d]=w),w.hasOwnProperty(g))y=w[g];else{const v=H.PeFactory.prototype.fromString(d,g);H.compare(v,H.NULL)||(y=v,w[g]=y)}return y=r(y),y}function l(d){return o(je.PE_TYPE_GEOGCS,d)}function c(d){return o(je.PE_TYPE_GEOGTRAN,d)}function u(d){return H.PeFactory.prototype.getCode(d)}function h(d){return o(je.PE_TYPE_PROJCS,d)}function f(d){return o(je.PE_TYPE_UNIT,d)}e.initialize=i,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=c,e.getCode=u,e.projcs=h,e.unit=f}(Or||(Or={}));let r6=null;var b1,ex,w1,tx,v1,nx,x1,Xp,rx;function i6(e){function t(s,o,a){s[o]=a(s[o])}H=e,je.init(),b1.init(),v1.init(),x1.init(),Xp.init(),r6=class extends H.PeGCSExtent{destroy(){H.destroy(this)}};const n=[H.PeDatum,H.PeGeogcs,H.PeGeogtran,H.PeObject,H.PeParameter,H.PePrimem,H.PeProjcs,H.PeSpheroid,H.PeUnit];for(const s of n)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(je.PE_NAME_MAX))});for(const s of[H.PeGeogtran,H.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(je.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const u=H.getValue(l,"*");a[c]=u?H.wrapPointer(u,H.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(H.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return ga(a,o,s.call(this)),a}),t(H.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=H._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!H.compare(l,H.NULL)){a=[l];const c=this.getSteps();if(c>1){const u=H.getPointer(l);for(let h=1;h<c;h++)a.push(H.wrapPointer(u+o*h,H.PeGTlistExtendedGTs))}}return a}});const r=H._pe_getPeHorizonSize(),i=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!H.compare(l,H.NULL)){a=[l];const c=l.getNump();if(c>1){const u=H.getPointer(l);for(let h=1;h<c;h++)a.push(H.wrapPointer(u+r*h,H.PeHorizon))}}return o.set(s,a),a};t(H.PeProjcs.prototype,"horizonGcsGenerate",i),t(H.PeProjcs.prototype,"horizonPcsGenerate",i),H.PeObject.prototype.toString=function(s=je.PE_STR_OPTS_NONE){H.ensureCache.prepare();const o=H.getPointer(this),a=H.ensureInt8(new Array(je.PE_BUFFER_MAX));return H.UTF8ToString(H._pe_object_to_string_ext(o,s,a))}}function Os(e){if(!e)return;const t=H.getClass(e);if(!t)return;const n=H.getCache(t);if(!n)return;const r=H.getPointer(e);r&&delete n[r]}function ym(e,t){const n=[],r=new Array(t);for(let i=0;i<e;i++)n.push(H.ensureInt8(r));return n}function dc(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(n=>{t.push(n[0],n[1])})):t=e,t}function ga(e,t,n,r=!1){if(r)for(let i=0;i<2*t;i++)e[i]=H.getValue(n+i*Float64Array.BYTES_PER_ELEMENT,"double");else{const i=e.length===0;for(let s=0;s<t;s++)i&&(e[s]=new Array(2)),e[s][0]=H.getValue(n,"double"),e[s][1]=H.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function n(){e.PE_GTLIST_OPTS_COMMON=H.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=H._pe_getPeGTlistExtendedEntrySize()}function r(i,s,o,a,l,c){let u=null;const h=new H.PeInteger(c);try{const f=H.PeGTlistExtended.prototype.getGTlist(i,s,o,a,l,h);if((c=h.val)&&(u=[f],c>1)){const d=H.getPointer(f);for(let g=1;g<c;g++)u.push(H.wrapPointer(d+t*g,H.PeGTlistExtendedEntry))}}finally{H.destroy(h)}return u}e.init=n,e.getGTlist=r})(b1||(b1={})),function(e){function t(n){if(n!=null&&n.length){for(const r of n)Os(r),r.getEntries().forEach(i=>{Os(i);const s=i.getGeogtran();Os(s),s.getParameters().forEach(Os),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{Os(o);const a=o.getDatum();Os(a),Os(a.getSpheroid()),Os(o.getPrimem()),Os(o.getUnit())})});H.PeGTlistExtendedEntry.prototype.Delete(n[0])}}e.destroy=t}(ex||(ex={})),function(e){function t(n,r,i,s,o){H.ensureCache.prepare();const a=dc(i),l=i===a,c=H.ensureFloat64(a);let u=0;s&&(u=H.ensureFloat64(s));const h=H._pe_geog_to_geog(H.getPointer(n),r,c,u,o);return h&&ga(i,r,c,l),h}e.geogToGeog=t}(w1||(w1={})),function(e){const t=(c,u,h,f,d,g)=>{let y,w;switch(H.ensureCache.prepare(),c){case"dd":y=H._pe_geog_to_dd,w=je.PE_DD_MAX;break;case"ddm":y=H._pe_geog_to_ddm,w=je.PE_DDM_MAX;break;case"dms":y=H._pe_geog_to_dms,w=je.PE_DMS_MAX}let v=0;u&&(v=H.getPointer(u));const x=dc(f),S=H.ensureFloat64(x),_=ym(h,w),M=y(v,h,S,d,H.ensureInt32(_));if(M)for(let $=0;$<h;$++)g[$]=H.UTF8ToString(_[$]);return M},n=(c,u,h,f,d)=>{let g;switch(H.ensureCache.prepare(),c){case"dd":g=H._pe_dd_to_geog;break;case"ddm":g=H._pe_ddm_to_geog;break;case"dms":g=H._pe_dms_to_geog}let y=0;u&&(y=H.getPointer(u));const w=f.map(_=>H.ensureString(_)),v=H.ensureInt32(w),x=H.ensureFloat64(new Array(2*h)),S=g(y,h,v,x);return S&&ga(d,h,x),S};function r(c,u,h,f,d){return t("dms",c,u,h,f,d)}function i(c,u,h,f){return n("dms",c,u,h,f)}function s(c,u,h,f,d){return t("ddm",c,u,h,f,d)}function o(c,u,h,f){return n("ddm",c,u,h,f)}function a(c,u,h,f,d){return t("dd",c,u,h,f,d)}function l(c,u,h,f){return n("dd",c,u,h,f)}e.geogToDms=r,e.dmsToGeog=i,e.geogToDdm=s,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(tx||(tx={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=H.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=H.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=H.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=H.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=H.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function n(i,s,o,a,l,c,u){H.ensureCache.prepare();let h=0;i&&(h=H.getPointer(i));const f=dc(o),d=H.ensureFloat64(f),g=ym(s,je.PE_MGRS_MAX),y=H.ensureInt32(g),w=H._pe_geog_to_mgrs_extended(h,s,d,a,l,c,y);if(w)for(let v=0;v<s;v++)u[v]=H.UTF8ToString(g[v]);return w}function r(i,s,o,a,l){H.ensureCache.prepare();let c=0;i&&(c=H.getPointer(i));const u=o.map(g=>H.ensureString(g)),h=H.ensureInt32(u),f=H.ensureFloat64(new Array(2*s)),d=H._pe_mgrs_to_geog_extended(c,s,h,a,f);return d&&ga(l,s,f),d}e.init=t,e.geogToMgrsExtended=n,e.mgrsToGeogExtended=r}(v1||(v1={})),function(e){function t(r,i,s,o,a,l,c){H.ensureCache.prepare();let u=0;r&&(u=H.getPointer(r));const h=dc(s),f=H.ensureFloat64(h),d=ym(i,je.PE_MGRS_MAX),g=H.ensureInt32(d),y=H._pe_geog_to_usng(u,i,f,o,a,l,g);if(y)for(let w=0;w<i;w++)c[w]=H.UTF8ToString(d[w]);return y}function n(r,i,s,o){H.ensureCache.prepare();let a=0;r&&(a=H.getPointer(r));const l=s.map(f=>H.ensureString(f)),c=H.ensureInt32(l),u=H.ensureFloat64(new Array(2*i)),h=H._pe_usng_to_geog(a,i,c,u);return h&&ga(o,i,u),h}e.geogToUsng=t,e.usngToGeog=n}(nx||(nx={})),function(e){function t(){e.PE_UTM_OPTS_NONE=H.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=H.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=H.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function n(i,s,o,a,l){H.ensureCache.prepare();let c=0;i&&(c=H.getPointer(i));const u=dc(o),h=H.ensureFloat64(u),f=ym(s,je.PE_UTM_MAX),d=H.ensureInt32(f),g=H._pe_geog_to_utm(c,s,h,a,d);if(g)for(let y=0;y<s;y++)l[y]=H.UTF8ToString(f[y]);return g}function r(i,s,o,a,l){H.ensureCache.prepare();let c=0;i&&(c=H.getPointer(i));const u=o.map(g=>H.ensureString(g)),h=H.ensureInt32(u),f=H.ensureFloat64(new Array(2*s)),d=H._pe_utm_to_geog(c,s,h,a,f);return d&&ga(l,s,f),d}e.init=t,e.geogToUtm=n,e.utmToGeog=r}(x1||(x1={})),function(e){const t=new Map;function n(){e.PE_PCSINFO_OPTION_NONE=H.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=H.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=H.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=H.PePCSInfo.prototype.PE_POLE_POINT}function r(i,s=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(i)&&(a=t.get(i),a[s]&&(o=a[s])),o||(o=H.PePCSInfo.prototype.generate(i,s),a||(a=[],t.set(i,a)),a[s]=o),o}e.init=n,e.generate=r}(Xp||(Xp={})),function(e){function t(){return H.PeVersion.prototype.version_string()}e.versionString=t}(rx||(rx={}));const MV=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return Kp},get PeDefs(){return je},get PeFactory(){return Or},get PeGCSExtent(){return r6},get PeGTTransformations(){return w1},get PeGTlistExtended(){return b1},get PeGTlistExtendedEntry(){return ex},get PeNotationDms(){return tx},get PeNotationMgrs(){return v1},get PeNotationUsng(){return nx},get PeNotationUtm(){return x1},get PePCSInfo(){return Xp},get PeVersion(){return rx},_init:i6,get _pe(){return H},isLoaded:t6,isSupported:_V,load:n6},Symbol.toStringTag,{value:"Module"}));var Kc;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(Kc||(Kc={}));let m;const k={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(m=2e3;m<=2045;m++)k[m]=0;for(m=2056;m<=2065;m++)k[m]=0;for(m=2067;m<=2135;m++)k[m]=0;for(m=2137;m<=2154;m++)k[m]=0;for(m=2161;m<=2170;m++)k[m]=0;for(m=2172;m<=2193;m++)k[m]=0;for(m=2195;m<=2198;m++)k[m]=0;for(m=2200;m<=2203;m++)k[m]=0;for(m=2205;m<=2217;m++)k[m]=0;for(m=2222;m<=2224;m++)k[m]=1;for(m=2225;m<=2250;m++)k[m]=2;for(m=2251;m<=2253;m++)k[m]=1;for(m=2257;m<=2264;m++)k[m]=2;for(m=2274;m<=2279;m++)k[m]=2;for(m=2280;m<=2282;m++)k[m]=1;for(m=2283;m<=2289;m++)k[m]=2;for(m=2290;m<=2292;m++)k[m]=0;for(m=2308;m<=2313;m++)k[m]=0;for(m=2315;m<=2491;m++)k[m]=0;for(m=2494;m<=2866;m++)k[m]=0;for(m=2867;m<=2869;m++)k[m]=1;for(m=2870;m<=2888;m++)k[m]=2;for(m=2891;m<=2895;m++)k[m]=2;for(m=2896;m<=2898;m++)k[m]=1;for(m=2902;m<=2908;m++)k[m]=2;for(m=2915;m<=2920;m++)k[m]=2;for(m=2921;m<=2923;m++)k[m]=1;for(m=2924;m<=2930;m++)k[m]=2;for(m=2931;m<=2962;m++)k[m]=0;for(m=2964;m<=2968;m++)k[m]=2;for(m=2969;m<=2973;m++)k[m]=0;for(m=2975;m<=2991;m++)k[m]=0;for(m=2995;m<=3051;m++)k[m]=0;for(m=3054;m<=3079;m++)k[m]=0;for(m=3081;m<=3088;m++)k[m]=0;for(m=3092;m<=3101;m++)k[m]=0;for(m=3106;m<=3138;m++)k[m]=0;for(m=3146;m<=3151;m++)k[m]=0;for(m=3153;m<=3166;m++)k[m]=0;for(m=3168;m<=3172;m++)k[m]=0;for(m=3174;m<=3203;m++)k[m]=0;for(m=3294;m<=3358;m++)k[m]=0;for(m=3367;m<=3403;m++)k[m]=0;for(m=3408;m<=3416;m++)k[m]=0;for(m=3417;m<=3438;m++)k[m]=2;for(m=3441;m<=3446;m++)k[m]=2;for(m=3447;m<=3450;m++)k[m]=0;for(m=3451;m<=3459;m++)k[m]=2;for(m=3460;m<=3478;m++)k[m]=0;for(m=3554;m<=3559;m++)k[m]=0;for(m=3560;m<=3570;m++)k[m]=2;for(m=3571;m<=3581;m++)k[m]=0;for(m=3594;m<=3597;m++)k[m]=0;for(m=3601;m<=3604;m++)k[m]=0;for(m=3637;m<=3639;m++)k[m]=0;for(m=3665;m<=3667;m++)k[m]=0;for(m=3693;m<=3695;m++)k[m]=0;for(m=3701;m<=3727;m++)k[m]=0;for(m=3728;m<=3739;m++)k[m]=2;for(m=3740;m<=3751;m++)k[m]=0;for(m=3753;m<=3760;m++)k[m]=2;for(m=3761;m<=3773;m++)k[m]=0;for(m=3775;m<=3777;m++)k[m]=0;for(m=3779;m<=3781;m++)k[m]=0;for(m=3783;m<=3785;m++)k[m]=0;for(m=3788;m<=3791;m++)k[m]=0;for(m=3797;m<=3802;m++)k[m]=0;for(m=3814;m<=3816;m++)k[m]=0;for(m=3825;m<=3829;m++)k[m]=0;for(m=3832;m<=3841;m++)k[m]=0;for(m=3844;m<=3852;m++)k[m]=0;for(m=3873;m<=3885;m++)k[m]=0;for(m=3890;m<=3893;m++)k[m]=0;for(m=3907;m<=3912;m++)k[m]=0;for(m=3942;m<=3950;m++)k[m]=0;for(m=3968;m<=3970;m++)k[m]=0;for(m=3973;m<=3976;m++)k[m]=0;for(m=3986;m<=3989;m++)k[m]=0;for(m=3994;m<=3997;m++)k[m]=0;for(m=4048;m<=4051;m++)k[m]=0;for(m=4056;m<=4063;m++)k[m]=0;for(m=4093;m<=4096;m++)k[m]=0;for(m=4390;m<=4398;m++)k[m]=0;for(m=4399;m<=4413;m++)k[m]=2;for(m=4418;m<=4433;m++)k[m]=2;for(m=4455;m<=4457;m++)k[m]=2;for(m=4484;m<=4489;m++)k[m]=0;for(m=4491;m<=4554;m++)k[m]=0;for(m=4568;m<=4589;m++)k[m]=0;for(m=4652;m<=4656;m++)k[m]=0;for(m=4766;m<=4800;m++)k[m]=0;for(m=5014;m<=5016;m++)k[m]=0;for(m=5069;m<=5072;m++)k[m]=0;for(m=5105;m<=5130;m++)k[m]=0;for(m=5167;m<=5188;m++)k[m]=0;for(m=5253;m<=5259;m++)k[m]=0;for(m=5269;m<=5275;m++)k[m]=0;for(m=5292;m<=5311;m++)k[m]=0;for(m=5329;m<=5331;m++)k[m]=0;for(m=5343;m<=5349;m++)k[m]=0;for(m=5355;m<=5357;m++)k[m]=0;for(m=5387;m<=5389;m++)k[m]=0;for(m=5459;m<=5463;m++)k[m]=0;for(m=5479;m<=5482;m++)k[m]=0;for(m=5518;m<=5520;m++)k[m]=0;for(m=5530;m<=5539;m++)k[m]=0;for(m=5550;m<=5552;m++)k[m]=0;for(m=5562;m<=5583;m++)k[m]=0;for(m=5623;m<=5625;m++)k[m]=2;for(m=5631;m<=5639;m++)k[m]=0;for(m=5649;m<=5653;m++)k[m]=0;for(m=5663;m<=5680;m++)k[m]=0;for(m=5682;m<=5685;m++)k[m]=0;for(m=5875;m<=5877;m++)k[m]=0;for(m=5896;m<=5899;m++)k[m]=0;for(m=5921;m<=5940;m++)k[m]=0;for(m=6050;m<=6125;m++)k[m]=0;for(m=6244;m<=6275;m++)k[m]=0;for(m=6328;m<=6348;m++)k[m]=0;for(m=6350;m<=6356;m++)k[m]=0;for(m=6366;m<=6372;m++)k[m]=0;for(m=6381;m<=6387;m++)k[m]=0;for(m=6393;m<=6404;m++)k[m]=0;for(m=6480;m<=6483;m++)k[m]=0;for(m=6511;m<=6514;m++)k[m]=0;for(m=6579;m<=6581;m++)k[m]=0;for(m=6619;m<=6624;m++)k[m]=0;for(m=6625;m<=6627;m++)k[m]=2;for(m=6628;m<=6632;m++)k[m]=0;for(m=6634;m<=6637;m++)k[m]=0;for(m=6669;m<=6692;m++)k[m]=0;for(m=6707;m<=6709;m++)k[m]=0;for(m=6720;m<=6723;m++)k[m]=0;for(m=6732;m<=6738;m++)k[m]=0;for(m=6931;m<=6933;m++)k[m]=0;for(m=6956;m<=6959;m++)k[m]=0;for(m=7005;m<=7007;m++)k[m]=0;for(m=7057;m<=7070;m++)k[m]=2;for(m=7074;m<=7082;m++)k[m]=0;for(m=7109;m<=7118;m++)k[m]=0;for(m=7119;m<=7127;m++)k[m]=1;for(m=7374;m<=7376;m++)k[m]=0;for(m=7528;m<=7586;m++)k[m]=0;for(m=7587;m<=7645;m++)k[m]=2;for(m=7692;m<=7696;m++)k[m]=0;for(m=7755;m<=7787;m++)k[m]=0;for(m=7791;m<=7795;m++)k[m]=0;for(m=7799;m<=7801;m++)k[m]=0;for(m=7803;m<=7805;m++)k[m]=0;for(m=7825;m<=7831;m++)k[m]=0;for(m=7845;m<=7859;m++)k[m]=0;for(m=8013;m<=8032;m++)k[m]=0;for(m=8065;m<=8068;m++)k[m]=1;for(m=8518;m<=8529;m++)k[m]=2;for(m=8533;m<=8536;m++)k[m]=2;for(m=8538;m<=8540;m++)k[m]=2;for(m=8677;m<=8679;m++)k[m]=0;for(m=8836;m<=8840;m++)k[m]=0;for(m=8857;m<=8859;m++)k[m]=0;for(m=8908;m<=8910;m++)k[m]=0;for(m=9154;m<=9159;m++)k[m]=0;for(m=9205;m<=9218;m++)k[m]=0;for(m=9271;m<=9273;m++)k[m]=0;for(m=9295;m<=9297;m++)k[m]=0;for(m=9356;m<=9360;m++)k[m]=0;for(m=9404;m<=9407;m++)k[m]=0;for(m=9476;m<=9482;m++)k[m]=0;for(m=9487;m<=9494;m++)k[m]=0;for(m=9697;m<=9699;m++)k[m]=0;for(m=9821;m<=9865;m++)k[m]=0;for(m=10285;m<=10291;m++)k[m]=0;for(m=10314;m<=10317;m++)k[m]=0;for(m=10448;m<=10465;m++)k[m]=0;for(m=11114;m<=11118;m++)k[m]=0;for(m=20004;m<=20032;m++)k[m]=0;for(m=20047;m<=20049;m++)k[m]=0;for(m=20062;m<=20092;m++)k[m]=0;for(m=20135;m<=20138;m++)k[m]=0;for(m=20248;m<=20258;m++)k[m]=0;for(m=20348;m<=20358;m++)k[m]=0;for(m=20436;m<=20440;m++)k[m]=0;for(m=20822;m<=20824;m++)k[m]=0;for(m=20904;m<=20932;m++)k[m]=0;for(m=20934;m<=20936;m++)k[m]=0;for(m=21004;m<=21032;m++)k[m]=0;for(m=21035;m<=21037;m++)k[m]=0;for(m=21095;m<=21097;m++)k[m]=0;for(m=21148;m<=21150;m++)k[m]=0;for(m=21207;m<=21264;m++)k[m]=0;for(m=21307;m<=21364;m++)k[m]=0;for(m=21413;m<=21423;m++)k[m]=0;for(m=21453;m<=21463;m++)k[m]=0;for(m=21473;m<=21483;m++)k[m]=0;for(m=21780;m<=21782;m++)k[m]=0;for(m=21891;m<=21894;m++)k[m]=0;for(m=21896;m<=21899;m++)k[m]=0;for(m=22171;m<=22177;m++)k[m]=0;for(m=22181;m<=22187;m++)k[m]=0;for(m=22191;m<=22197;m++)k[m]=0;for(m=22207;m<=22222;m++)k[m]=0;for(m=22229;m<=22232;m++)k[m]=0;for(m=22234;m<=22236;m++)k[m]=0;for(m=22243;m<=22250;m++)k[m]=0;for(m=22262;m<=22265;m++)k[m]=0;for(m=22307;m<=22322;m++)k[m]=0;for(m=22348;m<=22357;m++)k[m]=0;for(m=22407;m<=22422;m++)k[m]=0;for(m=22462;m<=22465;m++)k[m]=0;for(m=22521;m<=22525;m++)k[m]=0;for(m=22607;m<=22622;m++)k[m]=0;for(m=22641;m<=22646;m++)k[m]=0;for(m=22648;m<=22657;m++)k[m]=0;for(m=22707;m<=22722;m++)k[m]=0;for(m=22762;m<=22765;m++)k[m]=0;for(m=22807;m<=22822;m++)k[m]=0;for(m=22991;m<=22994;m++)k[m]=0;for(m=23028;m<=23038;m++)k[m]=0;for(m=23301;m<=23333;m++)k[m]=2;for(m=23830;m<=23853;m++)k[m]=0;for(m=23866;m<=23872;m++)k[m]=0;for(m=23877;m<=23884;m++)k[m]=0;for(m=23886;m<=23894;m++)k[m]=0;for(m=23946;m<=23948;m++)k[m]=0;for(m=24311;m<=24313;m++)k[m]=0;for(m=24342;m<=24347;m++)k[m]=0;for(m=24370;m<=24374;m++)k[m]=10;for(m=24375;m<=24381;m++)k[m]=0;for(m=24718;m<=24721;m++)k[m]=0;for(m=24817;m<=24821;m++)k[m]=0;for(m=24877;m<=24882;m++)k[m]=0;for(m=24891;m<=24893;m++)k[m]=0;for(m=25391;m<=25395;m++)k[m]=0;for(m=25828;m<=25838;m++)k[m]=0;for(m=26191;m<=26195;m++)k[m]=0;for(m=26391;m<=26393;m++)k[m]=0;for(m=26701;m<=26722;m++)k[m]=0;for(m=26729;m<=26799;m++)k[m]=2;for(m=26801;m<=26803;m++)k[m]=2;for(m=26811;m<=26813;m++)k[m]=2;for(m=26847;m<=26870;m++)k[m]=2;for(m=26891;m<=26899;m++)k[m]=0;for(m=26901;m<=26923;m++)k[m]=0;for(m=26929;m<=26946;m++)k[m]=0;for(m=26948;m<=26998;m++)k[m]=0;for(m=27037;m<=27040;m++)k[m]=0;for(m=27205;m<=27232;m++)k[m]=0;for(m=27258;m<=27260;m++)k[m]=0;for(m=27391;m<=27398;m++)k[m]=0;for(m=27561;m<=27564;m++)k[m]=0;for(m=27571;m<=27574;m++)k[m]=0;for(m=27581;m<=27584;m++)k[m]=0;for(m=27591;m<=27594;m++)k[m]=0;for(m=28191;m<=28193;m++)k[m]=0;for(m=28348;m<=28358;m++)k[m]=0;for(m=28402;m<=28432;m++)k[m]=0;for(m=28462;m<=28492;m++)k[m]=0;for(m=29118;m<=29122;m++)k[m]=0;for(m=29168;m<=29172;m++)k[m]=0;for(m=29177;m<=29185;m++)k[m]=0;for(m=29187;m<=29195;m++)k[m]=0;for(m=29900;m<=29903;m++)k[m]=0;for(m=30161;m<=30179;m++)k[m]=0;for(m=30491;m<=30494;m++)k[m]=0;for(m=30729;m<=30732;m++)k[m]=0;for(m=31251;m<=31259;m++)k[m]=0;for(m=31265;m<=31268;m++)k[m]=0;for(m=31275;m<=31279;m++)k[m]=0;for(m=31281;m<=31297;m++)k[m]=0;for(m=31461;m<=31469;m++)k[m]=0;for(m=31491;m<=31495;m++)k[m]=0;for(m=31917;m<=31922;m++)k[m]=0;for(m=31965;m<=32e3;m++)k[m]=0;for(m=32001;m<=32003;m++)k[m]=2;for(m=32005;m<=32031;m++)k[m]=2;for(m=32033;m<=32060;m++)k[m]=2;for(m=32064;m<=32067;m++)k[m]=2;for(m=32074;m<=32077;m++)k[m]=2;for(m=32081;m<=32086;m++)k[m]=0;for(m=32107;m<=32130;m++)k[m]=0;for(m=32133;m<=32159;m++)k[m]=0;for(m=32164;m<=32167;m++)k[m]=2;for(m=32180;m<=32199;m++)k[m]=0;for(m=32201;m<=32260;m++)k[m]=0;for(m=32301;m<=32360;m++)k[m]=0;for(m=32401;m<=32460;m++)k[m]=0;for(m=32501;m<=32560;m++)k[m]=0;for(m=32601;m<=32662;m++)k[m]=0;for(m=32664;m<=32667;m++)k[m]=2;for(m=32701;m<=32761;m++)k[m]=0;for(m=53001;m<=53004;m++)k[m]=0;for(m=53008;m<=53019;m++)k[m]=0;for(m=53021;m<=53032;m++)k[m]=0;for(m=53034;m<=53037;m++)k[m]=0;for(m=53042;m<=53046;m++)k[m]=0;for(m=53074;m<=53080;m++)k[m]=0;for(m=54001;m<=54004;m++)k[m]=0;for(m=54008;m<=54019;m++)k[m]=0;for(m=54021;m<=54032;m++)k[m]=0;for(m=54034;m<=54037;m++)k[m]=0;for(m=54042;m<=54046;m++)k[m]=0;for(m=54048;m<=54053;m++)k[m]=0;for(m=54074;m<=54080;m++)k[m]=0;for(m=54098;m<=54101;m++)k[m]=0;for(m=102001;m<=102040;m++)k[m]=0;for(m=102042;m<=102063;m++)k[m]=0;for(m=102065;m<=102067;m++)k[m]=0;for(m=102070;m<=102117;m++)k[m]=0;for(m=102122;m<=102216;m++)k[m]=0;for(m=102221;m<=102377;m++)k[m]=0;for(m=102382;m<=102388;m++)k[m]=0;for(m=102389;m<=102398;m++)k[m]=2;for(m=102399;m<=102444;m++)k[m]=0;for(m=102445;m<=102447;m++)k[m]=2;for(m=102448;m<=102458;m++)k[m]=0;for(m=102459;m<=102468;m++)k[m]=2;for(m=102469;m<=102499;m++)k[m]=0;for(m=102500;m<=102519;m++)k[m]=1;for(m=102520;m<=102524;m++)k[m]=0;for(m=102525;m<=102529;m++)k[m]=2;for(m=102530;m<=102588;m++)k[m]=0;for(m=102590;m<=102598;m++)k[m]=0;for(m=102601;m<=102603;m++)k[m]=0;for(m=102605;m<=102628;m++)k[m]=0;for(m=102629;m<=102646;m++)k[m]=2;for(m=102648;m<=102700;m++)k[m]=2;for(m=102701;m<=102703;m++)k[m]=0;for(m=102707;m<=102730;m++)k[m]=2;for(m=102733;m<=102758;m++)k[m]=2;for(m=102767;m<=102900;m++)k[m]=0;for(m=102901;m<=102933;m++)k[m]=2;for(m=102934;m<=102950;m++)k[m]=13;for(m=102951;m<=102955;m++)k[m]=0;for(m=102961;m<=102963;m++)k[m]=0;for(m=102965;m<=102969;m++)k[m]=0;for(m=102971;m<=102973;m++)k[m]=0;for(m=102975;m<=102989;m++)k[m]=0;for(m=102990;m<=102992;m++)k[m]=1;for(m=102997;m<=103002;m++)k[m]=0;for(m=103003;m<=103008;m++)k[m]=2;for(m=103009;m<=103011;m++)k[m]=0;for(m=103012;m<=103014;m++)k[m]=2;for(m=103019;m<=103021;m++)k[m]=0;for(m=103022;m<=103024;m++)k[m]=2;for(m=103029;m<=103031;m++)k[m]=0;for(m=103032;m<=103034;m++)k[m]=2;for(m=103065;m<=103068;m++)k[m]=0;for(m=103074;m<=103076;m++)k[m]=0;for(m=103077;m<=103079;m++)k[m]=1;for(m=103080;m<=103082;m++)k[m]=0;for(m=103083;m<=103085;m++)k[m]=2;for(m=103090;m<=103093;m++)k[m]=0;for(m=103097;m<=103099;m++)k[m]=0;for(m=103100;m<=103102;m++)k[m]=2;for(m=103107;m<=103109;m++)k[m]=0;for(m=103110;m<=103112;m++)k[m]=2;for(m=103113;m<=103116;m++)k[m]=0;for(m=103117;m<=103120;m++)k[m]=2;for(m=103153;m<=103157;m++)k[m]=0;for(m=103158;m<=103162;m++)k[m]=2;for(m=103163;m<=103165;m++)k[m]=0;for(m=103166;m<=103168;m++)k[m]=1;for(m=103169;m<=103171;m++)k[m]=2;for(m=103186;m<=103188;m++)k[m]=0;for(m=103189;m<=103191;m++)k[m]=2;for(m=103192;m<=103195;m++)k[m]=0;for(m=103196;m<=103199;m++)k[m]=2;for(m=103200;m<=103224;m++)k[m]=0;for(m=103225;m<=103227;m++)k[m]=1;for(m=103232;m<=103237;m++)k[m]=0;for(m=103238;m<=103243;m++)k[m]=2;for(m=103244;m<=103246;m++)k[m]=0;for(m=103247;m<=103249;m++)k[m]=2;for(m=103254;m<=103256;m++)k[m]=0;for(m=103257;m<=103259;m++)k[m]=2;for(m=103264;m<=103266;m++)k[m]=0;for(m=103267;m<=103269;m++)k[m]=2;for(m=103300;m<=103375;m++)k[m]=0;for(m=103381;m<=103383;m++)k[m]=0;for(m=103384;m<=103386;m++)k[m]=1;for(m=103387;m<=103389;m++)k[m]=0;for(m=103390;m<=103392;m++)k[m]=2;for(m=103397;m<=103399;m++)k[m]=0;for(m=103400;m<=103471;m++)k[m]=2;for(m=103476;m<=103478;m++)k[m]=0;for(m=103479;m<=103481;m++)k[m]=2;for(m=103486;m<=103488;m++)k[m]=0;for(m=103489;m<=103491;m++)k[m]=2;for(m=103492;m<=103495;m++)k[m]=0;for(m=103496;m<=103499;m++)k[m]=2;for(m=103528;m<=103543;m++)k[m]=0;for(m=103544;m<=103548;m++)k[m]=2;for(m=103549;m<=103551;m++)k[m]=0;for(m=103552;m<=103554;m++)k[m]=1;for(m=103555;m<=103557;m++)k[m]=2;for(m=103558;m<=103560;m++)k[m]=0;for(m=103571;m<=103573;m++)k[m]=0;for(m=103574;m<=103576;m++)k[m]=2;for(m=103577;m<=103580;m++)k[m]=0;for(m=103581;m<=103583;m++)k[m]=2;for(m=103595;m<=103694;m++)k[m]=0;for(m=103696;m<=103699;m++)k[m]=0;for(m=103700;m<=103793;m++)k[m]=2;for(m=103794;m<=103890;m++)k[m]=0;for(m=103891;m<=103896;m++)k[m]=2;for(m=103900;m<=103971;m++)k[m]=2;for(m=103972;m<=103977;m++)k[m]=0;for(m=112e3;m<=112101;m++)k[m]=0;const $V={102113:!0,102100:!0,3857:!0,3785:!0},TV={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},TT='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',bm=[-20037508342788905e-9,20037508342788905e-9],wm=[-20037508342787e-6,20037508342787e-6],s6={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:bm,origin:wm,dx:1e-5},102100:{wkTemplate:TT,valid:bm,origin:wm,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:bm,origin:wm,dx:1e-5},3857:{wkTemplate:TT,valid:bm,origin:wm,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function gn(e,t){if(e===t)return!0;if(e==null||t==null)return!1;if(e.wkid!=null||t.wkid!=null)return e.wkid===t.wkid||Xc(e)&&Xc(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid;const n=e.wkt2??e.wkt,r=t.wkt2??t.wkt;return!(!n||!r)&&n.toUpperCase()===r.toUpperCase()}function yr(e){return Bn(e)&&e.wkid&&s6[e.wkid]||null}function o6(e){if(!e)return;if(e.wkid)return String(e.wkid);const t=e.wkt||e.wkt2;return JSON.stringify(t?{wkt:t}:{})}function vM(e){if(!Bn(e))return!1;if(e.wkid)return k[e.wkid]==null;const t=e.wkt2||e.wkt;return!!t&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(t)}function AV(e){return!(P0(e)||R0(e))}function Qp(e){return Bn(e)&&e.wkid===4326}function IV(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function kV(e){return Bn(e)&&e.wkid===Kc.CGCS2000}function Xc(e){return Bn(e)&&e.wkid!=null&&$V[e.wkid]===!0}function EV(e){return Bn(e)&&e.wkid===32662}function xM(e){return e===Kc.GCSMARS2000||e===Kc.GCSMARS2000_SPHERE}function P0(e){return Bn(e)&&e.wkid!=null&&xM(e.wkid)}function SM(e){return e===Kc.GCSMOON2000}function R0(e){return Bn(e)&&e.wkid!=null&&SM(e.wkid)}function CV(e){return Bn(e)&&e.wkid!=null&&TV[e.wkid]===!0}function Bn(e){return e!=null&&(e.wkid!=null&&e.wkid>=2e3||e.wkt2!=null||e.wkt!=null)}const OV={wkid:4326,wkt:X5(s6[4326].wkTemplate,{Central_Meridian:"0.0"})},PV={wkid:102100,latestWkid:3857},RV={wkid:32662};function _M(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const a6=_M(ft),N2=_M(lo),D2=_M(Va),l6={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${ft.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function NV(e){return e!=null&&(P0(e)||gn(e,N2))?lo:e!=null&&(R0(e)||gn(e,D2))?Va:ft}function Abe(e){return xM(e)?lo:SM(e)?Va:ft}function S1(e){return gn(e,a6)}function Ga(e){return S1(e)||gn(e,N2)||gn(e,D2)}const Ibe=39.37,DV=ft.radius*Math.PI/200,c6=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Rc=k,u6=/UNIT\[([^\]]+)]/i,LV=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),FV=yn()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Ui=e=>e*e,ko=e=>e*e*e,e0={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Ui(.001)},"square-centimeters":{inBaseUnits:Ui(.01)},"square-decimeters":{inBaseUnits:Ui(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Ui(1e3)},"square-inches":{inBaseUnits:Ui(.0254)},"square-feet":{inBaseUnits:Ui(.3048)},"square-yards":{inBaseUnits:Ui(.9144)},"square-miles":{inBaseUnits:Ui(1609.344)},"square-us-feet":{inBaseUnits:Ui(1200/3937)},acres:{inBaseUnits:.0015625*Ui(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*ko(.001)},"cubic-centimeters":{inBaseUnits:1e3*ko(.01)},"cubic-decimeters":{inBaseUnits:1e3*ko(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*ko(1e3)},"cubic-inches":{inBaseUnits:1e3*ko(.0254)},"cubic-feet":{inBaseUnits:1e3*ko(.3048)},"cubic-yards":{inBaseUnits:1e3*ko(.9144)},"cubic-miles":{inBaseUnits:1e3*ko(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},jV=(()=>{const e={};for(const t in e0)for(const n in e0[t].units)e[n]=t;return e})();function zV(e,t,n){return e*e0[n].units[t].inBaseUnits}function BV(e,t,n){return e/e0[n].units[t].inBaseUnits}const kbe=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],h6=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],UV=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function Ebe(e){return e==="imperial"||e==="metric"}function ix(e){const t=jV[e];if(!t)throw new Error("unknown type");return t}function AT(e,t=null){return t=t||ix(e),e0[t].baseUnit===e}function rn(e,t,n){if(t===n)return e;const r=ix(t);if(r!==ix(n))throw new Error("incompatible units");const i=AT(t,r)?e:zV(e,t,r);return AT(n,r)?i:BV(i,n,r)}function VV(e){switch(e){case"metric":return"meters";case"imperial":return"feet";default:return e}}function Cbe(e){return VV(e)}function Obe(e){switch(e){case"metric":return"square-meters";case"imperial":return"square-feet";default:return e}}function Pbe(e,t,n){switch(n){case"metric":return GV(e,t);case"imperial":return HV(e,t);default:return n}}function Rbe(e,t,n){switch(n){case"metric":return WV(e,t);case"imperial":return qV(e,t);default:return n}}function GV(e,t){const n=rn(e,t,"meters");return Math.abs(n)<3e3?"meters":"kilometers"}function WV(e,t){const n=rn(e,t,"meters");return Math.abs(n)<1e5?"meters":"kilometers"}function HV(e,t){const n=rn(e,t,"feet");return Math.abs(n)<1e3?"feet":"miles"}function qV(e,t){const n=rn(e,t,"feet");return Math.abs(n)<1e5?"feet":"miles"}function Nbe(e,t){const n=rn(e,t,"square-meters");return Math.abs(n)<3e6?"square-meters":"square-kilometers"}function Dbe(e,t){const n=rn(e,t,"square-feet");return Math.abs(n)<1e6?"square-feet":"square-miles"}function JV(e,t,n){return rn(e,t,"meters")/(n*Math.PI/180)}function ZV(e){return FV.fromJSON(e.toLowerCase())||null}function sx(e){if(e!=null&&!AV(e))return 1;const t=tr(e);return t>1e5?1:t}function YV(e){return tr(e)>=NV(e).metersPerDegree?"meters":N0(e)}function tr(e,t=ft.metersPerDegree){return KV(e,!0)??t}function KV(e,t=!1){const n=(e==null?void 0:e.wkid)??null,r=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let i=null;if(n){if(xM(n))return lo.metersPerDegree;if(SM(n))return Va.metersPerDegree;i=Rc.values[Rc[n]],!i&&t&&LV.has(n)&&(i=DV)}else r&&(p6(r)?i=IT(c6.exec(r),i):d6(r)&&(i=IT(u6.exec(r),i)));return i}function XV(e){return vM(e)?1:tr(e)}function IT(e,t){return e!=null&&e[1]?f6(e[1]):t}function f6(e){return parseFloat(e.split(",")[1])}function N0(e){const t=(e==null?void 0:e.wkid)??null,n=(e==null?void 0:e.wkt2)??(e==null?void 0:e.wkt)??null;let r=null;if(t)r=Rc.units[Rc[t]];else if(n){const i=p6(n)?c6:d6(n)?u6:null;if(i){const s=i.exec(n);s!=null&&s[1]&&(r=eG(s[1]))}}return r!=null?ZV(r):null}function Lbe(e){const t=N0(e);return t!=null&&h6.includes(t)?t:null}function Fbe(e){const t=YV(e);return t!=null&&h6.includes(t)?t:null}function jbe(e){const t=N0(e);return t==null?null:UV.get(t)}function d6(e){return/^GEOCCS/i.test(e)}function p6(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const QV=1e-7;function eG(e){const t=/[\\"']{1}([^\\"']+)/.exec(e);let n=t==null?void 0:t[1];if(!n||!Rc.units.includes(n)){const r=f6(e);n=null;const i=Rc.values;for(let s=0;s<i.length;++s)if(Math.abs(r-i[s])<QV){n=Rc.units[s];break}}return n}function zbe(e){const t=N0(e);if(t==null)return null;switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const tG={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},nG={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},rG={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},Bbe=yn()(tG),Ube=yn()(nG),Vbe=yn()(rG);function xe(e,t,n){let r,i;return t===void 0?(i=e,r=[void 0]):typeof t!="string"?(i=e,r=[void 0],n=t):(i=t,r=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const c=rP(s,l,i);c.write&&typeof c.write=="object"||(c.write={}),n&&(c.write.target=n),c.write.writer=a[o]}}}var qi;let Ue=qi=class extends re{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return qi.WebMercator;if(e.wkid===4326)return qi.WGS84}const t=new qi;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return Qp(this)}get isWebMercator(){return Xc(this)}get isGeographic(){return vM(this)}get isWrappable(){return CV(this)}get metersPerUnit(){return tr(this)}get unit(){return N0(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===qi.WGS84)return qi.WGS84;if(this===qi.WebMercator)return qi.WebMercator;const e=new qi;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=J(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:n}=e.imageCoordinateSystem,{geodataXform:r}=e.imageCoordinateSystem,i=this.imageCoordinateSystem;return t==null||r?JSON.stringify(i)===JSON.stringify(e.imageCoordinateSystem):n?i.id===t&&i.referenceServiceName===n:i.id===t}return gn(this,e)}toJSON(e){return this.write(void 0,e)}};Ue.GCS_NAD_1927=null,Ue.WGS84=null,Ue.WebMercator=null,Ue.PlateCarree=null,p([b({readOnly:!0})],Ue.prototype,"isWGS84",null),p([b({readOnly:!0})],Ue.prototype,"isWebMercator",null),p([b({readOnly:!0})],Ue.prototype,"isGeographic",null),p([b({readOnly:!0})],Ue.prototype,"isWrappable",null),p([b({type:Be,json:{write:!0}})],Ue.prototype,"latestWkid",void 0),p([b({readOnly:!0})],Ue.prototype,"metersPerUnit",null),p([b({readOnly:!0})],Ue.prototype,"unit",null),p([b({type:Be,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Ue.prototype,"wkid",void 0),p([b({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Ue.prototype,"wkt",void 0),p([xe("wkt"),xe("web-scene","wkt")],Ue.prototype,"writeWkt",null),p([b({type:String,json:{write:!1}})],Ue.prototype,"wkt2",void 0),p([b({type:Be,json:{write:!0}})],Ue.prototype,"vcsWkid",void 0),p([b({type:Be,json:{write:!0}})],Ue.prototype,"latestVcsWkid",void 0),p([b()],Ue.prototype,"imageCoordinateSystem",void 0),Ue=qi=p([L("esri.geometry.SpatialReference")],Ue),Ue.prototype.toJSON.isDefaultToJSON=!0,Ue.GCS_NAD_1927=new Ue({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Ue.WGS84=new Ue(OV),Ue.WebMercator=new Ue(PV),Ue.PlateCarree=new Ue(RV),Object.freeze&&(Object.freeze(Ue.GCS_NAD_1927),Object.freeze(Ue.WGS84),Object.freeze(Ue.WebMercator));const we=Ue;let Ji=class extends re{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=we.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,n){if(t instanceof we)return t;if(t!=null){const r=new we;return r.read(t,n),r}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,n){this.cache[t]=n}};p([b()],Ji.prototype,"type",void 0),p([b({readOnly:!0})],Ji.prototype,"cache",null),p([b({readOnly:!0})],Ji.prototype,"extent",null),p([b({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ji.prototype,"hasM",void 0),p([b({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ji.prototype,"hasZ",void 0),p([b({type:we,json:{write:!0},value:we.WGS84})],Ji.prototype,"spatialReference",void 0),p([ge("spatialReference")],Ji.prototype,"readSpatialReference",null),Ji=p([L("esri.geometry.Geometry")],Ji);const xo=Ji,iG=Object.prototype.toString;function sG(e){const t="__accessorMetadata__"in e?vr(e):e;return function(...n){if(n.push(t),typeof n[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return oG.apply(this,n)}}function oG(e,t,n,r){E2(e,t).cast=r}function aG(e){return(t,n)=>{E2(t,e).cast=t[n]}}function gt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&iG.call(e[0])==="[object Function]"?sG(e[0]):e.length===1&&typeof e[0]=="string"?aG(e[0]):void 0}function lG(e,t){const n=e.x-t.x,r=e.y-t.y,i=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(n*n+r*r+i*i)}const cG=57.29577951308232,uG=.017453292519943;function kT(e){return e*cG}function ET(e){return e*uG}function Wbe(e){return e/ft.radius}function hG(e){return Math.PI/2-2*Math.atan(Math.exp(-e/ft.radius))}function ox(e){return e.wkid!=null||e.wkt!=null}const gw=[0,0];function _1(e,t,n,r,i){const s=e,o=i;if(o.spatialReference=n,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,gw,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,gw,r),[o.xmax,o.ymax]=t(s.xmax,s.ymax,gw,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let u=0;u<a.length;u++){const h=a[u];c=[],l.push(c);for(let f=0;f<h.length;f++)c.push(t(h[f][0],h[f][1],[0,0],r)),h[f].length>2&&c[f].push(h[f][2]),h[f].length>3&&c[f].push(h[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=t(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return i}function Bg(e,t){const n=e&&(ox(e)?e:e.spatialReference),r=t&&(ox(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!n||!r)&&(!!gn(r,n)||Xc(r)&&Qp(n)||Xc(n)&&Qp(r))}function MM(e,t){if(e==null)return null;const n=e.spatialReference,r=t&&(ox(t)?t:t.spatialReference);return Bg(n,r)?gn(n,r)?J(e):Xc(r)?_1(e,bh,we.WebMercator,!1,J(e)):Qp(r)?_1(e,bp,we.WGS84,!1,J(e)):null:null}function bh(e,t,n=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const r=ET(t);return n[0]=ET(e)*ft.radius,n[1]=ft.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),n}function bp(e,t,n=[0,0],r=!1){const i=kT(e/ft.radius);return n[0]=r?i:i-360*Math.floor((i+180)/360),n[1]=kT(Math.PI/2-2*Math.atan(Math.exp(-t/ft.radius))),n}function Dh(e,t=!1,n=J(e)){return _1(e,bh,we.WebMercator,t,n)}function wh(e,t=!1,n=J(e)){return _1(e,bp,we.WGS84,t,n)}var Ug;const Bf=[0,0];function CT(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Yn=Ug=class extends xo{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const n=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(n)?n:n.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,n,r,i){let s;if(Array.isArray(e))s=e,i=t,e=s[0],t=s[1],n=s[2],r=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,n=s.z,r=s.m,(i=s.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new we(i)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)ie.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)ie.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&i&&i.isWebMercator){const a=bh(s.longitude,s.latitude,Bf);e=a[0],t=a[1]}}}else CT(n)?(i=n,n=null):CT(r)&&(i=r,r=null);const o={x:e,y:t};return o.x==null&&o.y!=null?ie.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&ie.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(o.spatialReference=i),n!=null&&(o.z=n),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:n}=this;if(e){if(e.isWebMercator)return bp(t,n,Bf)[1];if(e.isGeographic)return n}return null}set latitude(e){const{spatialReference:t,x:n}=this;e!=null&&t&&(t.isWebMercator?this._set("y",bh(n,e,Bf)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:n}=this;if(n){if(n.isWebMercator)return bp(e,t,Bf)[0];if(n.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:n}=this;e!=null&&n&&(n.isWebMercator?this._set("x",bh(e,t,Bf)[0]):n.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,n){t[n]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new Ug;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return Ug.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:n,z:r,m:i,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:c,spatialReference:u}=e;if(!s.equals(u))if(s.isWebMercator&&u.isWGS84)[l,c]=bh(l,c),u=s;else{if(!s.isWGS84||!u.isWebMercator)return!1;[l,c]=bp(l,c),u=s}return t===l&&n===c&&r===o&&i===a&&s.wkid===u.wkid}offset(e,t,n){return this.x+=e,this.y+=t,n!=null&&(this.z=(this.z??0)+n),this}normalize(){if(!this.spatialReference)return this;const e=yr(this.spatialReference);if(!e)return this;let t=this.x;const[n,r]=e.valid,i=2*r;let s;return t>r?(s=Math.ceil(Math.abs(t-r)/i),t-=s*i):t<n&&(s=Math.ceil(Math.abs(t-n)/i),t+=s*i),this._set("x",t),this}distance(e){return lG(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};p([b({readOnly:!0})],Yn.prototype,"cache",null),p([b({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Yn.prototype,"hasM",null),p([b({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Yn.prototype,"hasZ",null),p([b({type:Number})],Yn.prototype,"latitude",null),p([b({type:Number})],Yn.prototype,"longitude",null),p([b({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),gt(e=>isNaN(e)?e:I2(e))],Yn.prototype,"x",void 0),p([xe("x")],Yn.prototype,"writeX",null),p([ge("x")],Yn.prototype,"readX",null),p([b({type:Number,json:{write:!0}})],Yn.prototype,"y",void 0),p([b({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Yn.prototype,"z",void 0),p([b({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Yn.prototype,"m",void 0),Yn=Ug=p([L("esri.geometry.Point")],Yn),Yn.prototype.toJSON.isDefaultToJSON=!0;const ce=Yn,yw=[0,0];function m6(e,t){return t!=null&&Xn(e,t.x,t.y,t.z)}function Hbe(e,t){if(!t.points||t.points.length)return!1;for(const n of t.points)if(!ef(e,n))return!1;return!0}function fG(e,t){const{xmin:n,ymin:r,zmin:i,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?Xn(e,n,r,i)&&Xn(e,n,o,i)&&Xn(e,s,o,i)&&Xn(e,s,r,i)&&Xn(e,n,r,a)&&Xn(e,n,o,a)&&Xn(e,s,o,a)&&Xn(e,s,r,a):Xn(e,n,r)&&Xn(e,n,o)&&Xn(e,s,o)&&Xn(e,s,r)}function ef(e,t){return Xn(e,t[0],t[1])}function dG(e,t){return Xn(e,t[0],t[1],t[2])}function Xn(e,t,n,r){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax&&(r==null||!e.hasZ||r>=e.zmin&&r<=e.zmax)}function pG(e,t){return yw[1]=t.y,yw[0]=t.x,mG(e,yw)}function mG(e,t){return g6(e.rings,t)}function g6(e,t){if(!e)return!1;if(gG(e))return OT(!1,e,t);let n=!1;for(let r=0,i=e.length;r<i;r++)n=OT(n,e[r],t);return n}function gG(e){return!Array.isArray(e[0][0])}function OT(e,t,n){const[r,i]=n;let s=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[c,u]=t[a],[h,f]=t[o];(u<i&&f>=i||f<i&&u>=i)&&c+(i-u)/(f-u)*(h-c)<r&&(s=!s)}return s}function yG(e,t){return m6(e,t)}function bG(e,t){const n=e.hasZ&&t.hasZ;let r,i,s;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(i=t.ymin,e.ymax<i)return!1}else if(i=e.ymin,t.ymax<i)return!1;if(n&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function wG(e,t){const{points:n,hasZ:r}=t,i=r?dG:ef;for(const s of n)if(i(e,s))return!0;return!1}const Qc=[0,0],eu=[0,0],tu=[0,0],nu=[0,0],vG=[Qc,eu,tu,nu],y6=[[tu,Qc],[Qc,eu],[eu,nu],[nu,tu]];function xG(e,t){return SG(e,t.rings)}function SG(e,t){Qc[0]=e.xmin,Qc[1]=e.ymax,eu[0]=e.xmax,eu[1]=e.ymax,tu[0]=e.xmin,tu[1]=e.ymin,nu[0]=e.xmax,nu[1]=e.ymin;for(const n of vG)if(g6(t,n))return!0;for(const n of t){if(!n.length)continue;let r=n[0];if(ef(e,r))return!0;for(let i=1;i<n.length;i++){const s=n[i];if(ef(e,s)||b6(r,s,y6))return!0;r=s}}return!1}function _G(e,t){Qc[0]=e.xmin,Qc[1]=e.ymax,eu[0]=e.xmax,eu[1]=e.ymax,tu[0]=e.xmin,tu[1]=e.ymin,nu[0]=e.xmax,nu[1]=e.ymin;const n=t.paths;for(const r of n){if(!n.length)continue;let i=r[0];if(ef(e,i))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(ef(e,o)||b6(i,o,y6))return!0;i=o}}return!1}const cn=[0,0];function MG(e){for(let t=0;t<e.length;t++){const n=e[t];for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const c=e[a][l],u=e[a][l+1];if(ax(s,o,c,u,cn)&&!(cn[0]===s[0]&&cn[1]===s[1]||cn[0]===c[0]&&cn[1]===c[1]||cn[0]===o[0]&&cn[1]===o[1]||cn[0]===u[0]&&cn[1]===u[1]))return!0}}const r=n.length;if(!(r<=4))for(let i=0;i<r-3;i++){let s=r-1;i===0&&(s=r-2);const o=n[i],a=n[i+1];for(let l=i+2;l<s;l++){const c=n[l],u=n[l+1];if(ax(o,a,c,u,cn)&&!(cn[0]===o[0]&&cn[1]===o[1]||cn[0]===c[0]&&cn[1]===c[1]||cn[0]===a[0]&&cn[1]===a[1]||cn[0]===u[0]&&cn[1]===u[1]))return!0}}}return!1}function b6(e,t,n){for(let r=0;r<n.length;r++)if(ax(e,t,n[r][0],n[r][1]))return!0;return!1}function ax(e,t,n,r,i){const[s,o]=e,[a,l]=t,[c,u]=n,[h,f]=r,d=h-c,g=s-c,y=a-s,w=f-u,v=o-u,x=l-o,S=w*y-d*x;if(S===0)return!1;const _=(d*v-w*g)/S,M=(y*v-x*g)/S;return _>=0&&_<=1&&M>=0&&M<=1&&(i&&(i[0]=s+_*(a-s),i[1]=o+_*(l-o)),!0)}function $G(e){switch(e){case"esriGeometryEnvelope":case"extent":return bG;case"esriGeometryMultipoint":case"multipoint":return wG;case"esriGeometryPoint":case"point":return yG;case"esriGeometryPolygon":case"polygon":return xG;case"esriGeometryPolyline":case"polyline":return _G}}var Gr;function TG(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Eo(e,t,n){return t==null?n:n==null?t:e(t,n)}let Xt=Gr=class extends xo{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,n,r,i){return TG(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?we.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:n,ymax:r,spatialReference:i??we.WGS84}}static fromBounds(e,t){return new Gr({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Gr({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new ce({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Gr;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&Bg(t,n)&&(e=t.isWebMercator?Dh(e):wh(e,!0)),e.type==="point"?m6(this,e):e.type==="extent"&&fG(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,n=e.spatialReference;return t&&n&&!t.equals(n)&&Bg(t,n)&&(e=t.isWebMercator?Dh(e):wh(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),n=this.width*t,r=this.height*t;if(this.xmin+=n,this.ymin+=r,this.xmax-=n,this.ymax-=r,this.hasZ){const i=(this.zmax-this.zmin)*t;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*t;this.mmin+=i,this.mmax-=i}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,n=e.spatialReference;return t&&n&&!gn(t,n)&&Bg(t,n)&&(e=t.isWebMercator?Dh(e):wh(e,!0)),$G(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,n){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,n!=null&&(this.zmin+=n,this.zmax+=n),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Eo(Math.min,this.zmin,e.zmin),this.zmax=Eo(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Eo(Math.min,this.mmin,e.mmin),this.mmax=Eo(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Eo(Math.max,this.zmin,e.zmin),this.zmax=Eo(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Eo(Math.max,this.mmin,e.mmin),this.mmax=Eo(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=yr(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,n=this._getCM(e);if(n){const r=t.isWebMercator?wh(n):n;this.xmin-=n.x,this.xmax-=n.x,t.isWebMercator||(r.x=this._normalizeX(r.x,e).x),this.spatialReference=new we(X5((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(e){let t=null;const[n,r]=e.valid,i=this.xmin,s=this.xmax;return i>=n&&i<=r&&s>=n&&s<=r||(t=this.center),t}_normalize(e,t,n){const r=this.spatialReference;if(!r)return this;const i=n??yr(r);if(i==null)return this;const s=this._getParts(i).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return e?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(e)return this._shiftCM(i);if(t)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const u=(l.zmax-l.zmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}if(a){const u=(l.mmax-l.mmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}return c}),hasZ:o,hasM:a,spatialReference:r}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:i,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let u;e=e||yr(o);const[h,f]=e.valid;u=this._normalizeX(this.xmin,e);const d=u.x,g=u.frameId;u=this._normalizeX(this.xmax,e);const y=u.x,w=u.frameId,v=d===y&&a>0;if(a>2*f){const x=new Gr(l<c?d:y,i,f,s,o),S=new Gr(h,i,l<c?y:d,s,o),_=new Gr(0,i,f,s,o),M=new Gr(h,i,0,s,o),$=[],T=[];x.contains(_)&&$.push(g),x.contains(M)&&T.push(g),S.contains(_)&&$.push(w),S.contains(M)&&T.push(w);for(let A=g+1;A<w;A++)$.push(A),T.push(A);t.push({extent:x,frameIds:[g]},{extent:S,frameIds:[w]},{extent:_,frameIds:$},{extent:M,frameIds:T})}else d>y||v?t.push({extent:new Gr(d,i,f,s,o),frameIds:[g]},{extent:new Gr(h,i,y,s,o),frameIds:[w]}):t.push({extent:new Gr(d,i,y,s,o),frameIds:[g]});this.cache._parts=t}const n=this.hasZ,r=this.hasM;if(n||r){const i={};n&&(i.zmin=this.zmin,i.zmax=this.zmax),r&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(i)}return t}_normalizeX(e,t){const[n,r]=t.valid,i=2*r;let s,o=0;return e>r?(s=Math.ceil(Math.abs(e-r)/i),e-=s*i,o=s):e<n&&(s=Math.ceil(Math.abs(e-n)/i),e+=s*i,o=-s),{x:e,frameId:o}}};p([b({readOnly:!0})],Xt.prototype,"cache",null),p([b({readOnly:!0})],Xt.prototype,"center",null),p([b({readOnly:!0})],Xt.prototype,"extent",null),p([b({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xt.prototype,"hasM",null),p([b({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Xt.prototype,"hasZ",null),p([b({readOnly:!0})],Xt.prototype,"height",null),p([b({readOnly:!0})],Xt.prototype,"width",null),p([b({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Xt.prototype,"xmin",void 0),p([b({type:Number,json:{write:!0}})],Xt.prototype,"ymin",void 0),p([b({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xt.prototype,"mmin",void 0),p([b({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xt.prototype,"zmin",void 0),p([b({type:Number,json:{write:!0}})],Xt.prototype,"xmax",void 0),p([b({type:Number,json:{write:!0}})],Xt.prototype,"ymax",void 0),p([b({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Xt.prototype,"mmax",void 0),p([b({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Xt.prototype,"zmax",void 0),Xt=Gr=p([L("esri.geometry.Extent")],Xt),Xt.prototype.toJSON.isDefaultToJSON=!0;const Me=Xt;var ha;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(ha||(ha={}));let AG=class{constructor(){this._resolver=qc(),this._status=ha.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=ha.RESOLVED,this._cleanUp()},()=>{this._status=ha.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===ha.RESOLVED}isRejected(){return this._status===ha.REJECTED}isFulfilled(){return this._status!==ha.PENDING}abort(){this._resolver.reject(Ot())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=qc(),n=[...this._resolvingPromises,t.promise],r=this._allPromise=Promise.all(n);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},i=>{this.isFulfilled()||this._allPromise!==r||wr(i)||this._resolver.reject(i)}),t.resolve()}};const $M=e=>{let t=class extends e{constructor(...n){super(...n),this._promiseProps=new AG,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(n,r){return this._promiseProps.promise.then(()=>this).then(n,r)}catch(n){return this.when(null,n)}addResolvingPromise(n){n&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in n?n.when():n)}};return t=p([L("esri.core.Promise")],t),t};let lx=class extends $M(Yt){};lx=p([L("esri.core.Promise")],lx);const IG="not-loaded",kG="loading",EG="failed",PT="loaded",w6=e=>{let t=class extends e{constructor(...n){super(...n),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(r=>{const i=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const c=HO(s,l);this.destroyed&&l(new Y("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{c&&c.remove()})});if(this.loadStatus===IG){this._set("loadStatus",kG);const a=this._loadController=new AbortController;i({signal:a.signal})}return r(),o}})),this.when(()=>{this._set("loadStatus",PT),this._loadController=null},r=>{this._set("loadStatus",EG),this._set("loadError",r),this._loadController=null})}destroy(){this._loadController&&(this._loadController=WO(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===PT}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var n;return this.isFulfilled()||(this._set("loadError",new Y("load:cancelled","Cancelled")),(n=this._loadController)==null||n.abort(),this._promiseProps.abort()),this}};return p([b({readOnly:!0})],t.prototype,"loaded",null),p([b({readOnly:!0})],t.prototype,"loadError",void 0),p([b({clonable:!1})],t.prototype,"loadStatus",void 0),p([b({type:[Zc],readOnly:!0})],t.prototype,"loadWarnings",null),t=p([L("esri.core.Loadable")],t),t};let pd=class extends w6(lx){};pd=p([L("esri.core.Loadable")],pd),function(e){function t(n){return!(!n||!n.load)}e.LoadableMixin=w6,e.isLoadable=t}(pd||(pd={}));const L2=pd;function CG(e,t,n){return Sf(e.map((r,i)=>t.apply(n,[r,i])))}async function Ybe(e,t,n){return(await Sf(e.map((r,i)=>t.apply(n,[r,i])))).map(r=>r.value)}function TM(e){return{ok:!0,value:e}}function AM(e){return{ok:!1,error:e}}function OG(e){return e!=null&&e.ok===!0?e.value:null}function PG(e){return e!=null&&e.ok===!1?e.error:null}async function RG(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return TM(await e)}catch(t){return AM(t)}}async function Kbe(e){try{return TM(await e)}catch(t){return hs(t),AM(t)}}function Xbe(e){if(e.ok===!0)return e.value;throw e.error}function NG(e,t){return new Vo(e,t)}let Vo=class extends Yt{get value(){return OG(this._result)}get error(){return PG(this._result)}get finished(){return this._result!=null}constructor(t,n){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=WO(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=t(r),this.promise.then(i=>{this._result=TM(i),this._cleanup()},i=>{this._result=AM(i),this._cleanup()}),this._abortHandle=po(n,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Ci(this._abortHandle),this._abortController=null}};p([b()],Vo.prototype,"value",null),p([b()],Vo.prototype,"error",null),p([b()],Vo.prototype,"finished",null),p([b()],Vo.prototype,"promise",void 0),p([b()],Vo.prototype,"_result",void 0),Vo=p([L("esri.core.asyncUtils.ReactiveTask")],Vo);let Vg=class v6{constructor(){this._emitter=new v6.EventEmitter(this)}emit(t,n){return this._emitter.emit(t,n)}on(t,n){return this._emitter.on(t,n)}once(t,n){return this._emitter.once(t,n)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(i=null){this._target=i,this._listenersMap=null}clear(){var i;(i=this._listenersMap)==null||i.clear(),this._listenersMap=null}destroy(){this.clear()}emit(i,s){var c;let o=(c=this._listenersMap)==null?void 0:c.get(i);if(!o)return!1;const a=this._target||this;let l=!1;for(const u of o.slice()){const h="deref"in u?u.deref():u;h?h==null||h.call(a,s):l=!0}return l&&(o=o.filter(u=>!("deref"in u)||u.deref()!=null),this._listenersMap.set(i,o)),o.length>0}on(i,s){if(Array.isArray(i)){const a=i.map(l=>this.on(l,s));return x2(a)}if(i.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const o=this._listenersMap.get(i)||[];return o.push(s),this._listenersMap.set(i,o),It(()=>{var c;const a=(c=this._listenersMap)==null?void 0:c.get(i),l=(a==null?void 0:a.indexOf(s))??-1;l>=0&&a.splice(l,1)})}once(i,s){const o=this.on(i,a=>{o.remove();const l="deref"in s?s.deref():s;l==null||l.call(null,a)});return o}hasEventListener(i){var o;const s=(o=this._listenersMap)==null?void 0:o.get(i);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=r=>{let i=class extends r{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return i=p([L("esri.core.Evented")],i),i};let n=class extends Yt{constructor(){super(...arguments),this._emitter=new Vg.EventEmitter(this)}destroy(){this._emitter.clear()}emit(r,i){return this._emitter.emit(r,i)}on(r,i){return this._emitter.on(r,i)}once(r,i){return this._emitter.once(r,i)}hasEventListener(r){return this._emitter.hasEventListener(r)}};n=p([L("esri.core.Evented")],n),e.EventedAccessor=n})(Vg||(Vg={}));const x6=Vg;var Je;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(Je||(Je={}));function S6(e){return(t,n)=>{t[n]=e}}let IM=class extends yP{notify(){const t=this._observers;if(t&&t.length>0){const n=t.slice();for(const r of n)r.onInvalidated(),r.onCommitted()}}};var Ys;let DG=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},LG=class{constructor(t,n,r,i,s){this.target=t,this.added=n,this.removed=r,this.start=i,this.deleteCount=s}};const Br=new O0(DG,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function bw(e){return e?e instanceof pc?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function ww(e){if(e!=null&&e.length)return e[0]}function FG(e,t,n,r){const i=Math.min(e.length-n,t.length-r);let s=0;for(;s<i&&e[n+s]===t[r+s];)s++;return s}function _6(e,t,n,r){t&&t.forEach((i,s,o)=>{e.push(i),_6(e,n.call(r,i,s,o),n,r)})}const Co=new Set,Oo=new Set,Po=new Set,vw=new Map;let jG=0,pc=Ys=class extends x6.EventedAccessor{static isCollection(e){return e!=null&&e instanceof Ys}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new IM,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:jG++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Ys?{items:e}:e:{}}destroy(){this._removeAllRaw()}*[Symbol.iterator](){yield*this.items}get items(){return _e(this._observable),this._items}set items(e){this._emitBeforeChanges(Je.ADD)||(this._splice(0,this.length,bw(e)),this._emitAfterChanges(Je.ADD))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const n=this._chgListeners,r={removed:!1,callback:t};return n.push(r),this._notifications&&this._notifications.push({listeners:n.slice(),items:this._items.slice(),changes:[]}),It(()=>{r.removed=!0,n.splice(n.indexOf(r),1)})}return this._emitter.on(e,t)}once(e,t){const n="deref"in t?()=>t.deref():()=>t,r=this.on(e,i=>{var s;(s=n())==null||s.call(null,i),r.remove()});return r}add(e,t){if(_e(this._observable),this._emitBeforeChanges(Je.ADD))return this;const n=this.getNextIndex(t??null);return this._splice(n,0,[e]),this._emitAfterChanges(Je.ADD),this}addMany(e,t=this._items.length){if(_e(this._observable),!(e!=null&&e.length))return this;if(this._emitBeforeChanges(Je.ADD))return this;const n=this.getNextIndex(t);return this._splice(n,0,bw(e)),this._emitAfterChanges(Je.ADD),this}at(e){if(_e(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(_e(this._observable),!this.length||this._emitBeforeChanges(Je.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(Je.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return _e(this._observable),this._createNewInstance({items:this._items.map(J)})}concat(...e){_e(this._observable);const t=e.map(bw);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(_e(this._observable),!this.length||this._emitBeforeChanges(Je.REMOVE))return;const n=this._splice(0,this.length),r=n.length;for(let i=0;i<r;i++)e.call(t,n[i],i,n);this._emitAfterChanges(Je.REMOVE)}every(e,t){return _e(this._observable),this._items.every(e,t)}filter(e,t){let n;return _e(this._observable),n=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:n})}find(e,t){return _e(this._observable),this._items.find(e,t)}findIndex(e,t){return _e(this._observable),this._items.findIndex(e,t)}flatten(e,t){_e(this._observable);const n=[];return _6(n,this,e,t),new Ys(n)}forEach(e,t){return _e(this._observable),this._items.forEach(e,t)}getItemAt(e){return _e(this._observable),this._items[e]}getNextIndex(e){_e(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return _e(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return _e(this._observable),this._items.indexOf(e,t)}join(e=","){return _e(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return _e(this._observable),this._items.lastIndexOf(e,t)}map(e,t){_e(this._observable);const n=this._items.map(e,t);return new Ys({items:n})}reorder(e,t=this.length-1){_e(this._observable);const n=this.indexOf(e);if(n!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),n!==t){if(this._emitBeforeChanges(Je.MOVE))return e;this._splice(n,1),this._splice(t,0,[e]),this._emitAfterChanges(Je.MOVE)}return e}}pop(){if(_e(this._observable),!this.length||this._emitBeforeChanges(Je.REMOVE))return;const e=ww(this._splice(this.length-1,1));return this._emitAfterChanges(Je.REMOVE),e}push(...e){return _e(this._observable),this._emitBeforeChanges(Je.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(Je.ADD)),this.length}reduce(e,t){_e(this._observable);const n=this._items;return arguments.length===2?n.reduce(e,t):n.reduce(e)}reduceRight(e,t){_e(this._observable);const n=this._items;return arguments.length===2?n.reduceRight(e,t):n.reduceRight(e)}remove(e){return _e(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(_e(this._observable),e<0||e>=this.length||this._emitBeforeChanges(Je.REMOVE))return;const t=ww(this._splice(e,1));return this._emitAfterChanges(Je.REMOVE),t}removeMany(e){if(_e(this._observable),!(e!=null&&e.length)||this._emitBeforeChanges(Je.REMOVE))return[];const t=e instanceof Ys?e.toArray():e,n=this._items,r=[],i=t.length;for(let s=0;s<i;s++){const o=t[s],a=n.indexOf(o);if(a>-1){const l=1+FG(t,n,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&r.push.apply(r,c),s+=l-1}}return this._emitAfterChanges(Je.REMOVE),r}reverse(){if(_e(this._observable),this._emitBeforeChanges(Je.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(Je.MOVE),this}shift(){if(_e(this._observable),!this.length||this._emitBeforeChanges(Je.REMOVE))return;const e=ww(this._splice(0,1));return this._emitAfterChanges(Je.REMOVE),e}slice(e=0,t=this.length){return _e(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return _e(this._observable),this._items.some(e,t)}sort(e){if(_e(this._observable),!this.length||this._emitBeforeChanges(Je.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(Je.MOVE),this}splice(e,t,...n){_e(this._observable);const r=(t?Je.REMOVE:0)|(n.length?Je.ADD:0);if(this._emitBeforeChanges(r))return[];const i=this._splice(e,t,n)||[];return this._emitAfterChanges(r),i}toArray(){return _e(this._observable),this._items.slice()}toJSON(){return _e(this._observable),this.toArray()}toLocaleString(){return _e(this._observable),this._items.toLocaleString()}toString(){return _e(this._observable),this._items.toString()}unshift(...e){return _e(this._observable),!e.length||this._emitBeforeChanges(Je.ADD)||(this._splice(0,0,e),this._emitAfterChanges(Je.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,n){const r=this._items,i=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=vP(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=r.splice(e,t),this.hasEventListener("before-remove")){const a=Br.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(e,0,s),e+=1,l-=1,c-=1);Br.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Br.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);Br.release(a)}}if(n!=null&&n.length){if(i){const u=[];for(const h of n){const f=i.ensureType(h);f==null&&h!=null||u.push(f)}n=u}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=e===this.length;if(a||l){const u=Br.acquire();u.target=this,u.cancellable=!0;const h=Br.acquire();h.target=this,h.cancellable=!1;for(const f of n)a?(u.reset(f),this.emit("before-add",u),u.defaultPrevented||(c?r.push(f):r.splice(e++,0,f),this._set("length",r.length),l&&(h.reset(f),this.emit("after-add",h)))):(c?r.push(f):r.splice(e++,0,f),this._set("length",r.length),h.reset(f),this.emit("after-add",h));Br.release(h),Br.release(u)}else{if(c)for(const u of n)r.push(u);else r.splice(e,0,...n);this._set("length",r.length)}}if((n!=null&&n.length||o!=null&&o.length)&&this._notifyChangeEvent(n,o),this.hasEventListener("after-splice")){const a=new LG(this,n,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const n=Br.acquire();n.target=this,n.cancellable=!0,n.type=e,this.emit("before-changes",n),t=n.defaultPrevented,Br.release(n)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Br.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Br.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const n=t.changes;Co.clear(),Oo.clear(),Po.clear();for(const{added:l,removed:c}of n){if(l)if(Po.size===0&&Oo.size===0)for(const u of l)Co.add(u);else for(const u of l)Oo.has(u)?(Po.add(u),Oo.delete(u)):Po.has(u)||Co.add(u);if(c)if(Po.size===0&&Co.size===0)for(const u of c)Oo.add(u);else for(const u of c)Co.has(u)?Co.delete(u):(Po.delete(u),Oo.add(u))}const r=ua.acquire();Co.forEach(l=>{r.push(l)});const i=ua.acquire();Oo.forEach(l=>{i.push(l)});const s=this._items,o=t.items,a=ua.acquire();if(Po.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),t.listeners&&(r.length||i.length||a.length)){const l={target:this,added:r,removed:i,moved:a},c=t.listeners.length;for(let u=0;u<c;u++){const h=t.listeners[u];h.removed||h.callback.call(this,l)}}ua.release(r),ua.release(i),ua.release(a)}Co.clear(),Oo.clear(),Po.clear()}};pc.ofType=e=>{if(!e)return Ys;if(vw.has(e))return vw.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const i=e.typeMap[r].prototype.declaredClass;t?t+=` | ${i}`:t=i}let n=class extends Ys{};return p([S6({Type:e,ensureType:typeof e=="function"?vr(e):Jc(e)})],n.prototype,"itemType",void 0),n=p([L(`esri.core.Collection<${t}>`)],n),vw.set(e,n),n},p([b()],pc.prototype,"length",void 0),p([b()],pc.prototype,"items",null),pc=Ys=p([L("esri.core.Collection")],pc);const tt=pc;function co(e,t,n={}){return kM(e,t,n,$6)}function zG(e,t,n={}){return kM(e,t,n,T6)}function kM(e,t,n={},r){let i=null;const s=n.once?(o,a)=>{r(o)&&(Ci(i),t(o,a))}:(o,a)=>{r(o)&&t(o,a)};if(i=fU(e,s,n.sync,n.equals),n.initial){const o=e();s(o,o)}return i}function F2(e,t,n,r={}){let i=null,s=null,o=null;function a(){var u;i&&s&&(s.remove(),(u=r.onListenerRemove)==null||u.call(r,i),i=null,s=null)}function l(u){r.once&&r.once&&Ci(o),n(u)}const c=co(e,(u,h)=>{var f;a(),Q5(u)&&(i=u,s=$2(u,t,l),(f=r.onListenerAdd)==null||f.call(r,u))},{sync:r.sync,initial:!0});return o=It(()=>{c.remove(),a()}),o}function BG(e,t){return M6(e,null,t)}function UG(e,t){return M6(e,T6,t)}function M6(e,t,n){if(ri(n))return Promise.reject(Ot());const r=e();if(t!=null&&t(r))return Promise.resolve(r);let i=null;function s(){i=Ci(i)}return new Promise((o,a)=>{i=x2([po(n,()=>{s(),a(Ot())}),kM(e,l=>{s(),o(l)},{sync:!1,once:!0},t??$6)])})}function $6(e){return!0}function T6(e){return!!e}function VG(e,t,n={}){let r=!1;const i=co(e,(s,o)=>{r||t(s,o)},n);return{remove(){i.remove()},pause(){r=!0},resume(){r=!1}}}function A6(e,t){const n=new tt,r=F2(e,"after-splice",({added:i,start:s,deleteCount:o})=>{const a=n.splice(s,o);for(const l of a)l.remove();if(i!=null&&i.length){const l=i.map(t);n.addMany(l,s)}},{sync:!0,onListenerRemove:()=>n.drain(i=>i.remove()),onListenerAdd:i=>n.addMany(i.items.map(t))});return n.addHandles(r),n}function GG(e,t){const n=new tt,r=A6(e,a=>NG(async l=>{const c=await t(a,l);if(ri(l))throw c.remove(),Ot();return c})),i=()=>null,s=async a=>{const l=await a.promise,c=r.indexOf(a);c<0||n.splice(c,1,l)};n.addMany(r.items.map(i));for(const a of r)Ov(s(a));const o=r.on("after-splice",({added:a,start:l,deleteCount:c})=>{const u=n.splice(l,c);for(const h of u)h==null||h.remove();if(a!=null&&a.length){n.addMany(a.map(i),l);for(const h of a)Ov(s(h))}});return n.addHandles([pz(r),o]),n}const I6={sync:!0},k6={initial:!0},WG={sync:!0,initial:!0},rwe=Object.freeze(Object.defineProperty({__proto__:null,autorun:TP,initial:k6,mapCollection:A6,mapCollectionAsync:GG,on:F2,once:BG,pausable:VG,sync:I6,syncAndInitial:WG,watch:co,when:zG,whenOnce:UG},Symbol.toStringTag,{value:"Module"}));function ue(){return[0,0,0]}function Pr(e){return[e[0],e[1],e[2]]}function Fr(e,t,n){return[e,t,n]}function E6(e,t=ue()){const n=Math.min(3,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function C6(e,t){return new Float64Array(e,t,3)}function O6(){return ue()}function P6(){return Fr(1,1,1)}function R6(){return Fr(1,0,0)}function N6(){return Fr(0,1,0)}function D6(){return Fr(0,0,1)}const t0=O6(),L6=P6(),F6=R6(),j6=N6(),z6=D6();Object.freeze(Object.defineProperty({__proto__:null,ONES:L6,UNIT_X:F6,UNIT_Y:j6,UNIT_Z:z6,ZEROS:t0,clone:Pr,create:ue,createView:C6,fromArray:E6,fromValues:Fr,ones:P6,unitX:R6,unitY:N6,unitZ:D6,zeros:O6},Symbol.toStringTag,{value:"Module"}));function iwe(e){const t=[];for(e.reset();e.nextPath();){const n=[];for(;e.nextPoint();)n.push([e.x,e.y]);t.push(n)}return e.reset(),t}function HG(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var Zt;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(Zt||(Zt={}));function swe(e){if(!e)return null;if(Array.isArray(e))return e;const t=e.hasZ,n=e.hasM;if(e.type==="point")return n&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:n?[e.x,e.y,e.m]:[e.x,e.y];if(e.type==="polygon")return e.rings.slice(0);if(e.type==="polyline")return e.paths.slice(0);if(e.type==="multipoint")return e.points.slice(0);if(e.type==="extent"){const r=e.clone().normalize();if(!r)return null;let i=!1,s=!1;return r.forEach(o=>{o.hasZ&&(i=!0),o.hasM&&(s=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})}return null}function j2(e,t){const n=t[0]-e[0],r=t[1]-e[1];if(e.length>2&&t.length>2){const i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}return Math.sqrt(n*n+r*r)}function B6(e,t,n){const r=e[0]+n*(t[0]-e[0]),i=e[1]+n*(t[1]-e[1]);return e.length>2&&t.length>2?[r,i,e[2]+n*(t[2]-e[2])]:[r,i]}function owe(e,t,n,r){return qG(e,t,n[r],n[r+1])}function qG(e,t,n,r){const[i,s]=t,[o,a]=n,[l,c]=r,u=l-o,h=c-a,f=u*u+h*h,d=(i-o)*u+(s-a)*h,g=Math.min(1,Math.max(0,d/f));return e[0]=o+u*g,e[1]=a+h*g,e}function U6(e,t){return B6(e,t,.5)}function awe(e){const t=e.length;let n=0;for(let r=0;r<t-1;++r)n+=j2(e[r],e[r+1]);return n}function lwe(e,t){if(t<=0)return e[0];const n=e.length;let r=0;for(let i=0;i<n-1;++i){const s=j2(e[i],e[i+1]);if(t-r<s){const o=(t-r)/s;return B6(e[i],e[i+1],o)}r+=s}return e[n-1]}function wp(e,t=Zt.X,n=Zt.Y){let r=0;const i=e.length;let s=e[0];for(let o=0;o<i-1;o++){const a=e[o+1];r+=(a[t]-s[t])*(a[n]+s[n]),s=a}return r>=0}function JG(e){const t=e.length;return t>2&&Hc(e[0],e[t-1])}function cwe(e){if("rings"in e&&(ZG(e),e.rings.length>0&&!wp(e.rings[0])))for(const t of e.rings)t.reverse()}function ZG(e){if("rings"in e)for(const t of e.rings)JG(t)||t.push(t[0].slice())}function uwe(e){return e.type!=="polygon"&&e.type!=="polyline"||YG(e.type==="polygon"?e.rings:e.paths,e.spatialReference),e}function YG(e,t){const n=yr(t);if(!n)return;const r=n.valid[0],i=n.valid[1],s=i-r;for(const o of e){let a=1/0,l=-1/0;for(const u of o){const h=KG(u[0],r,i);a=Math.min(a,h),l=Math.max(l,h),u[0]=h}const c=l-a;s-c<c&&o.forEach(u=>{u[0]<0&&(u[0]+=s)})}}function KG(e,t,n){const r=n-t;return e<t?n-(t-e)%r:e>n?t+(e-t)%r:e}function hwe(e,t){if(e===t)return!0;if(e.type!==t.type)return!1;if(e.type==="point"||e.type==="mesh"||e.type==="extent")return!0;if(e.type==="multipoint")return e.points.length===t.points.length;const[n,r]=e.type==="polyline"?[e.paths,t.paths]:[e.rings,t.rings];return n.length===r.length&&n.every((i,s)=>i.length===r[s].length)}function fwe(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function XG(e){return e?QG(e.rings,e.hasZ??!1):null}function QG(e,t){if(!(e!=null&&e.length))return null;const n=[],r=[],i=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=V6(e[s],t,i);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),r.length&&(n[0]=r[0][0],n[1]=r[0][1],t&&(n[2]=r[0][3]),(n[0]<i[0]||n[0]>i[1]||n[1]<i[2]||n[1]>i[3]||t&&(n[2]<i[4]||n[2]>i[5]))&&(n.length=0)),!n.length){const s=e[0]&&e[0].length?eW(e[0],t):null;if(!s)return null;n[0]=s[0],n[1]=s[1],t&&s.length>2&&(n[2]=s[2])}return n}function V6(e,t,n){let r=0,i=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,c=e.length?e[0][1]:0,u=e.length&&t?e[0][2]:0;for(let f=0;f<e.length;f++){const d=e[f],g=e[(f+1)%e.length],[y,w,v]=d,x=y-l,S=w-c,[_,M,$]=g,T=_-l,A=M-c,I=x*A-T*S;if(o+=I,r+=(x+T)*I,i+=(S+A)*I,t&&d.length>2&&g.length>2){const E=v-u,O=$-u,P=x*O-T*E;s+=(E+O)*P,a+=P}y<n[0]&&(n[0]=y),y>n[1]&&(n[1]=y),w<n[2]&&(n[2]=w),w>n[3]&&(n[3]=w),t&&(v<n[4]&&(n[4]=v),v>n[5]&&(n[5]=v))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const h=[r/(6*o)+l,i/(6*o)+c,o];return t&&(n[4]===n[5]||a===0?(h[3]=(n[4]+n[5])/2,h[4]=0):(h[3]=s/(6*a)+u,h[4]=a)),h}function dwe(e,t){let n=0,r=0,i=0;e.nextPoint();const s=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const c=[e.x,e.y],[u,h]=l,f=u-s,d=h-o,[g,y]=c,w=g-s,v=y-o,x=f*v-w*d;i+=x,n+=(f+w)*x,r+=(d+v)*x,u<t[0]&&(t[0]=u),u>t[1]&&(t[1]=u),h<t[2]&&(t[2]=h),h>t[3]&&(t[3]=h)}return i>0&&(i*=-1),i?(i*=.5,[n/(6*i)+s,r/(6*i)+o,i]):null}function eW(e,t){const n=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;for(let l=0,c=e.length;l<c-1;l++){const u=e[l],h=e[l+1];if(u&&h){n[0]=u[0],n[1]=u[1],r[0]=h[0],r[1]=h[1],t&&u.length>2&&h.length>2&&(n[2]=u[2],r[2]=h[2]);const f=j2(n,r);if(f){i+=f;const d=U6(u,h);s+=f*d[0],o+=f*d[1],t&&d.length>2&&(a+=f*d[2])}}}return i>0?t?[s/i,o/i,a/i]:[s/i,o/i]:e.length?e[0]:null}function tW(e){const{hasZ:t,totalSize:n}=e;if(n===0)return null;const r=[],i=[],s=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=V6(HG(e),e.hasZ,s);o&&i.push(o)}if(i.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){e.reset(),e.nextPath();const o=e.pathSize?nW(e):null;if(!o)return null;r[0]=o[0],r[1]=o[1],t&&o.length>2&&(r[2]=o[2])}return r}function nW(e){const{hasZ:t}=e,n=t?[0,0,0]:[0,0],r=t?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;if(e.nextPoint()){let l=e.x,c=e.y,u=e.z;for(;e.nextPoint();){const h=e.x,f=e.y,d=e.z;n[0]=l,n[1]=c,r[0]=h,r[1]=f,t&&(n[2]=u,r[2]=d);const g=j2(n,r);if(g){i+=g;const y=U6(n,r);s+=g*y[0],o+=g*y[1],t&&y.length>2&&(a+=g*y[2])}l=h,c=f,u=d}}return i>0?t?[s/i,o/i,a/i]:[s/i,o/i]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const rW=1e-6;function pwe(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<rW){const i=tW(e);return i?[i[0],i[1]]:null}const n=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const r=[e.x,e.y];for(e.reset();e.nextPath();)sW(n,r,e);return n[0]*=1/t,n[1]*=1/t,n[0]+=r[0],n[1]+=r[1],n}const iW=1/3;function sW(e,t,n){if(!e||!n||n.pathSize<3)return null;n.nextPoint();const r=n.x,i=n.y;n.nextPoint();let s,o=n.x-r,a=n.y-i,l=0,c=0;for(;n.nextPoint();)l=n.x-r,c=n.y-i,s=.5*iW*(l*a-c*o),e[0]+=s*(o+l),e[1]+=s*(a+c),o=l,a=c;const u=n.getCurrentRingArea(),h=[r,i];return h[0]-=t[0],h[1]-=t[1],h[0]*=u,h[1]*=u,e[0]+=h[0],e[1]+=h[1],e}let EM=1e-6;function Zn(){return EM}function oW(e){EM=e}const D0=Math.random,aW=Math.PI/180,lW=180/Math.PI;function cW(e){return e*aW}function uW(e){return e*lW}function hW(e,t){return Math.abs(e-t)<=EM*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:D0,equals:hW,getEpsilon:Zn,setEpsilon:oW,toDegree:uW,toRadian:cW},Symbol.toStringTag,{value:"Module"}));function qn(e){const t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function Sr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function kt(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function ut(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function rt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function G6(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function W6(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function fW(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function dW(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function pW(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function mW(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function gW(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function yW(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function bW(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function nt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function H6(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function z2(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function ru(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function L0(e){const t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function wW(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function vW(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Lt(e,t){const n=t[0],r=t[1],i=t[2];let s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function at(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Wn(e,t,n){const r=t[0],i=t[1],s=t[2],o=n[0],a=n[1],l=n[2];return e[0]=i*l-s*a,e[1]=s*o-r*l,e[2]=r*a-i*o,e}function tf(e,t,n,r){const i=t[0],s=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e}function xW(e,t,n,r,i,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),u=o*(3-2*s);return e[0]=t[0]*a+n[0]*l+r[0]*c+i[0]*u,e[1]=t[1]*a+n[1]*l+r[1]*c+i[1]*u,e[2]=t[2]*a+n[2]*l+r[2]*c+i[2]*u,e}function SW(e,t,n,r,i,s){const o=1-s,a=o*o,l=s*s,c=a*o,u=3*s*a,h=3*l*o,f=l*s;return e[0]=t[0]*c+n[0]*u+r[0]*h+i[0]*f,e[1]=t[1]*c+n[1]*u+r[1]*h+i[1]*f,e[2]=t[2]*c+n[2]*u+r[2]*h+i[2]*f,e}function _W(e,t){t=t||1;const n=D0,r=2*n()*Math.PI,i=2*n()-1,s=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*s,e[1]=Math.sin(r)*s,e[2]=i*t,e}function nf(e,t,n){const r=t[0],i=t[1],s=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12],e[1]=n[1]*r+n[5]*i+n[9]*s+n[13],e[2]=n[2]*r+n[6]*i+n[10]*s+n[14],e}function iu(e,t,n){const r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}function MW(e,t,n){const r=n[0],i=n[1],s=n[2],o=n[3],a=t[0],l=t[1],c=t[2];let u=i*c-s*l,h=s*a-r*c,f=r*l-i*a,d=i*f-s*h,g=s*u-r*f,y=r*h-i*u;const w=2*o;return u*=w,h*=w,f*=w,d*=2,g*=2,y*=2,e[0]=a+u+d,e[1]=l+h+g,e[2]=c+f+y,e}function $W(e,t,n,r){const i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function TW(e,t,n,r){const i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function AW(e,t,n,r){const i=[],s=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function q6(e,t){Sr(vm,e),Sr(xm,t),Lt(vm,vm),Lt(xm,xm);const n=at(vm,xm);return n>1?0:n<-1?Math.PI:Math.acos(n)}const vm=ue(),xm=ue();function IW(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function vp(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function kW(e,t){if(e===t)return!0;const n=e[0],r=e[1],i=e[2],s=t[0],o=t[1],a=t[2],l=Zn();return Math.abs(n-s)<=l*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=l*Math.max(1,Math.abs(i),Math.abs(a))}function EW(e,t,n){const r=n[0]-t[0],i=n[1]-t[1],s=n[2]-t[2];let o=r*r+i*i+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const CW=rt,OW=G6,PW=W6,J6=z2,RW=ru,Z6=qn,NW=L0,mwe=Object.freeze(Object.defineProperty({__proto__:null,abs:pW,add:ut,angle:q6,bezier:SW,ceil:fW,copy:Sr,cross:Wn,direction:EW,dist:J6,distance:z2,div:PW,divide:W6,dot:at,equals:kW,exactEquals:vp,floor:dW,hermite:xW,inverse:vW,len:Z6,length:qn,lerp:tf,max:yW,min:gW,mul:OW,multiply:G6,negate:wW,normalize:Lt,random:_W,rotateX:$W,rotateY:TW,rotateZ:AW,round:bW,scale:nt,scaleAndAdd:H6,set:kt,sign:mW,sqrDist:RW,sqrLen:NW,squaredDistance:ru,squaredLength:L0,str:IW,sub:CW,subtract:rt,transformMat3:iu,transformMat4:nf,transformQuat:MW},Symbol.toStringTag,{value:"Module"}));function n0(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function CM(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function Y6(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function K6(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function X6(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Q6(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function DW(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function LW(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function FW(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function jW(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function zW(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function eR(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function BW(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function tR(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+s*s)}function nR(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return n*n+r*r+i*i+s*s}function OM(e){const t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function PM(e){const t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function UW(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function VW(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function rR(e,t){const n=t[0],r=t[1],i=t[2],s=t[3];let o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=s*o),e}function iR(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function sR(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=t[3];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e[2]=o+r*(n[2]-o),e[3]=a+r*(n[3]-a),e}function GW(e,t){const n=D0;let r,i,s,o,a,l;t=t||1;do r=2*n()-1,i=2*n()-1,a=r*r+i*i;while(a>=1);do s=2*n()-1,o=2*n()-1,l=s*s+o*o;while(l>=1);const c=Math.sqrt((1-a)/l);return e[0]=t*r,e[1]=t*i,e[2]=t*s*c,e[3]=t*o*c,e}function cx(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,e}function WW(e,t,n){const r=t[0],i=t[1],s=t[2],o=n[0],a=n[1],l=n[2],c=n[3],u=c*r+a*s-l*i,h=c*i+l*r-o*s,f=c*s+o*i-a*r,d=-o*r-a*i-l*s;return e[0]=u*c+d*-o+h*-l-f*-a,e[1]=h*c+d*-a+f*-o-u*-l,e[2]=f*c+d*-l+u*-a-h*-o,e[3]=t[3],e}function HW(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function oR(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function F0(e,t){const n=e[0],r=e[1],i=e[2],s=e[3],o=t[0],a=t[1],l=t[2],c=t[3],u=Zn();return Math.abs(n-o)<=u*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=u*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-l)<=u*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=u*Math.max(1,Math.abs(s),Math.abs(c))}const qW=K6,JW=X6,ZW=Q6,YW=tR,KW=nR,XW=OM,QW=PM,gwe=Object.freeze(Object.defineProperty({__proto__:null,add:Y6,ceil:DW,copy:n0,dist:YW,distance:tR,div:ZW,divide:Q6,dot:iR,equals:F0,exactEquals:oR,floor:LW,inverse:VW,len:XW,length:OM,lerp:sR,max:jW,min:FW,mul:JW,multiply:X6,negate:UW,normalize:rR,random:GW,round:zW,scale:eR,scaleAndAdd:BW,set:CM,sqrDist:KW,sqrLen:QW,squaredDistance:nR,squaredLength:PM,str:HW,sub:qW,subtract:K6,transformMat4:cx,transformQuat:WW},Symbol.toStringTag,{value:"Module"})),RT=new Float32Array(1);function eH(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Un(e,t,n){return Math.min(Math.max(e,t),n)}function ywe(e,t){return t===0?0:Math.round(e/t)*t}function bwe(e){return(e&e-1)==0}function wwe(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function vwe(e){return 10**Math.ceil(Math.LOG10E*Math.log(e))}function tH(e,t,n){return e+(t-e)*n}function xwe(e,t,n,r,i){return tH(r,i,(e-t)/(n-t))}function j0(e){return e*Math.PI/180}function aR(e){return 180*e/Math.PI}function Swe(e,t=1e-6){return(e<0?-1:1)/Math.max(Math.abs(e),t)}function B2(e){return Math.acos(Un(e,-1,1))}function lR(e){return Math.asin(Un(e,-1,1))}function xw(e,t,n=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=n}const M1=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function ux(e){return M1.setFloat64(0,e),M1.getBigInt64(0)}function nH(e){return M1.setBigInt64(0,e),M1.getFloat64(0)}const Gg=BigInt("1000000"),rH=cR(1);function cR(e){const t=ux(e=Math.abs(e)),n=nH(t<=Gg?Gg:t-Gg);return Math.abs(e-n)}function _we(e,t,n=rH){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(n!=null&&cR(Math.min(Math.abs(e),Math.abs(t)))<n)return Math.abs(e-t)<=n;const r=ux(e),i=ux(t);return r<0!=i<0?!1:!((r<i?i-r:r-i)>Gg)}function Mwe(e,t,n=1e-6){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;const r=Math.abs(e-t),i=Math.abs(e),s=Math.abs(t);if(e===0||t===0||i<1e-12&&s<1e-12){if(r>.01*n)return!1}else if(r/(i+s)>n)return!1;return!0}function $we(e){return uR(Math.max(-Da,Math.min(e,Da)))}function uR(e){return RT[0]=e,RT[0]}function Twe(e,t,n){const r=Un((n-e)/(t-e),0,1);return r*r*(3-2*r)}function NT(e,t){const n=qn(e),r=lR(e[2]/n),i=Math.atan2(e[1]/n,e[0]/n);return kt(t,n,r,i),t}function Awe(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],r=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(xw(t,1)&&xw(n,1)&&xw(r,1))}function Iwe(e,t){return(e%t+t)%t}const Da=uR(34028234663852886e22);function Wa(e=iH){return[e[0],e[1],e[2],e[3]]}function kwe(e){return[e[0],e[1],e[2],e[3]]}function RM(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function Ewe(e,t,n,r,i=Wa()){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function Cwe(e,t=Wa()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Owe(e,t){return new Me({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function Pwe(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Rwe(e,t,n){if(t!=null)if("length"in t)hx(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case"point":n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y)}else RM(n,e)}function Nwe(e,t,n=e){const r=t.length;let i=e[0],s=e[1],o=e[2],a=e[3];for(let l=0;l<r;l++){const c=t[l];i=Math.min(i,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return n[0]=i,n[1]=s,n[2]=o,n[3]=a,n}function Dwe(e){for(let t=0;t<4;t++)if(!isFinite(e[t]))return!1;return!0}function U2(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function V2(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function Lwe(e){return U2(e)*V2(e)}function Fwe(e){return U2(e)>0&&V2(e)>0}function jwe(e,t=[0,0]){return t[0]=(e[0]+e[2])/2,t[1]=(e[1]+e[3])/2,t}function zwe(e,t){return hR(e,t[0],t[1])}function Bwe(e,t){const n=t[3],r=.5*(e[0]+e[2]),i=Math.abs(t[0]-r),s=.5*(e[2]-e[0]);if(i>n+s)return!1;const o=.5*(e[1]+e[3]),a=.5*(e[3]-e[1]),l=Math.abs(t[1]-o);if(l>n+a)return!1;if(i<s||l<a)return!0;const c=i-s,u=l-a;return c*c+u*u<=n*n}function Uwe(e,t,n){const r=e[0],i=e[1],s=e[2],o=e[3],{x:a,y:l}=t,{x:c,y:u}=n,h=(w,v)=>(u-l)*w+(a-c)*v+(c*l-a*u)<0,f=h(r,o),d=h(s,o),g=h(s,i),y=h(r,i);return!(f===d&&d===g&&g===y&&y===f||a<r&&c<r||a>s&&c>s||l>o&&u>o||l<i&&u<i)}function Vwe(e,t){return hR(e,t.x,t.y)}function hR(e,t,n){return t>=e[0]&&n>=e[1]&&t<=e[2]&&n<=e[3]}function Gwe(e,t,n){return t[0]>=e[0]-n&&t[1]>=e[1]-n&&t[0]<=e[2]+n&&t[1]<=e[3]+n}function Wwe(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Hwe(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function qwe(e,t,n){if(t==null)return RM(n,e);const r=t[0],i=t[1],s=t[2],o=t[3];return n[0]=Un(e[0],r,s),n[1]=Un(e[1],i,o),n[2]=Un(e[2],r,s),n[3]=Un(e[3],i,o),n}function Jwe(e,t){const n=(e[0]+e[2])/2,r=(e[1]+e[3])/2,i=Math.max(Math.abs(t[0]-n)-U2(e)/2,0),s=Math.max(Math.abs(t[1]-r)-V2(e)/2,0);return Math.sqrt(i*i+s*s)}function Zwe(e,t,n,r=e){return r[0]=e[0]+t,r[1]=e[1]+n,r[2]=e[2]+t,r[3]=e[3]+n,r}function Ywe(e){return e?RM(e,DT):Wa(DT)}function hx(e){return e!=null&&e.length===4}function Kwe(e){return!(U2(e)!==0&&isFinite(e[0])||V2(e)!==0&&isFinite(e[1]))}function Xwe(e,t){return hx(e)&&hx(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const Qwe=[-1/0,-1/0,1/0,1/0],DT=[1/0,1/0,-1/0,-1/0],iH=[0,0,0,0];function fR(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function dR(e){return e.points!==void 0}function pR(e){return e.x!==void 0&&e.y!==void 0}function mR(e){return e.paths!==void 0}function gR(e){return e.rings!==void 0}function yR(e){function t(n,r){return n==null?r:r==null?n:e(n,r)}return t}const xa=yR(Math.min),Sa=yR(Math.max);function eve(e,t){return mR(t)?rf(e,t.paths,!1,!1):gR(t)?rf(e,t.rings,!1,!1):dR(t)?NM(e,t.points,!1,!1,!1,!1):fR(t)?bR(e,t):(pR(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function tve(e){let t,n,r,i;for(e.reset(),t=r=1/0,n=i=-1/0;e.nextPath();){const s=sH(e);t=Math.min(s[0],t),r=Math.min(s[1],r),n=Math.max(s[2],n),i=Math.max(s[3],i)}return Wa([t,r,n,i])}function sH(e){let t,n,r,i;for(t=r=1/0,n=i=-1/0;e.nextPoint();)t=Math.min(e.x,t),r=Math.min(e.y,r),n=Math.max(e.x,n),i=Math.max(e.y,i);return Wa([t,r,n,i])}function nve(e,t){return mR(t)?rf(e,t.paths,!0,!1):gR(t)?rf(e,t.rings,!0,!1):dR(t)?NM(e,t.points,!0,!1,!0,!1):fR(t)?bR(e,t,!0,!1,!0,!1):(pR(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function rf(e,t,n,r){const i=n?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[c,u]=t[0][0],[h,f]=t[0][0];for(let d=0;d<t.length;d++){const g=t[d];for(let y=0;y<g.length;y++){const w=g[y],[v,x]=w;if(c=xa(c,v),u=xa(u,x),h=Sa(h,v),f=Sa(f,x),n&&w.length>2){const S=w[2];s=xa(s,S),o=Sa(o,S)}if(r&&w.length>i){const S=w[i];a=xa(s,S),l=Sa(o,S)}}}return n?r?(e[0]=c,e[1]=u,e[2]=s,e[3]=a,e[4]=h,e[5]=f,e[6]=o,e[7]=l,e.length=8,e):(e[0]=c,e[1]=u,e[2]=s,e[3]=h,e[4]=f,e[5]=o,e.length=6,e):r?(e[0]=c,e[1]=u,e[2]=a,e[3]=h,e[4]=f,e[5]=l,e.length=6,e):(e[0]=c,e[1]=u,e[2]=h,e[3]=f,e.length=4,e)}function bR(e,t,n,r,i,s){const o=t.xmin,a=t.xmax,l=t.ymin,c=t.ymax;let u=t.zmin,h=t.zmax,f=t.mmin,d=t.mmax;return i?(u=u||0,h=h||0,s?(f=f||0,d=d||0,e[0]=o,e[1]=l,e[2]=u,e[3]=f,e[4]=a,e[5]=c,e[6]=h,e[7]=d,e):(e[0]=o,e[1]=l,e[2]=u,e[3]=a,e[4]=c,e[5]=h,e)):s?(f=f||0,d=d||0,e[0]=o,e[1]=l,e[2]=f,e[3]=a,e[4]=c,e[5]=d,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=c,e)}function NM(e,t,n,r,i,s){const o=n?3:2,a=r&&s,l=n&&i;if(!t.length||!t[0].length)return null;let c,u,h,f,[d,g]=t[0],[y,w]=t[0];for(let v=0;v<t.length;v++){const x=t[v],[S,_]=x;if(d=xa(d,S),g=xa(g,_),y=Sa(y,S),w=Sa(w,_),l&&x.length>2){const M=x[2];c=xa(c,M),u=Sa(u,M)}if(a&&x.length>o){const M=x[o];h=xa(c,M),f=Sa(u,M)}}return i?(c=c||0,u=u||0,s?(h=h||0,f=f||0,e[0]=d,e[1]=g,e[2]=c,e[3]=h,e[4]=y,e[5]=w,e[6]=u,e[7]=f,e):(e[0]=d,e[1]=g,e[2]=c,e[3]=y,e[4]=w,e[5]=u,e)):s?(h=h||0,f=f||0,e[0]=d,e[1]=g,e[2]=h,e[3]=y,e[4]=w,e[5]=f,e):(e[0]=d,e[1]=g,e[2]=y,e[3]=w,e)}function oH(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function aH(e){return e.points!==void 0}function lH(e){return e.x!==void 0&&e.y!==void 0}function cH(e){return e.paths!==void 0}function uH(e){return e.rings!==void 0}const DM=[];function wR(e,t,n,r){return{xmin:e,ymin:t,xmax:n,ymax:r}}function vR(e,t,n,r,i,s){return{xmin:e,ymin:t,zmin:n,xmax:r,ymax:i,zmax:s}}function xR(e,t,n,r,i,s){return{xmin:e,ymin:t,mmin:n,xmax:r,ymax:i,mmax:s}}function SR(e,t,n,r,i,s,o,a){return{xmin:e,ymin:t,zmin:n,mmin:r,xmax:i,ymax:s,zmax:o,mmax:a}}function LM(e,t=!1,n=!1){return t?n?SR(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):vR(e[0],e[1],e[2],e[3],e[4],e[5]):n?xR(e[0],e[1],e[2],e[3],e[4],e[5]):wR(e[0],e[1],e[2],e[3])}function rve(e){return e?oH(e)?e:lH(e)?fH(e):uH(e)?_R(e):cH(e)?MR(e):aH(e)?hH(e):null:null}function hH(e){const{hasZ:t,hasM:n,points:r}=e;return LM(NM(DM,r,t??!1,n??!1),t,n)}function fH(e){const{x:t,y:n,z:r,m:i}=e,s=i!=null;return r!=null?s?SR(t,n,r,i,t,n,r,i):vR(t,n,r,t,n,r):s?xR(t,n,i,t,n,i):wR(t,n,t,n)}function _R(e){const{hasZ:t,hasM:n,rings:r}=e,i=rf(DM,r,t??!1,n??!1);return i?LM(i,t,n):null}function MR(e){const{hasZ:t,hasM:n,paths:r}=e,i=rf(DM,r,t??!1,n??!1);return i?LM(i,t,n):null}function sf(e,t,n=!1){let{hasM:r,hasZ:i}=e;Array.isArray(t)?t.length!==4||r||i?t.length===3&&n&&!r?(i=!0,r=!1):t.length===3&&r&&i&&(r=!1,i=!1):(r=!0,i=!0):(i=!i&&t.hasZ&&(!r||t.hasM),r=!r&&t.hasM&&(!i||t.hasZ)),e.hasZ=i,e.hasM=r}var Wg;function LT(e){return!Array.isArray(e[0])}let Zi=Wg=class extends xo{static fromExtent(e){const t=e.clone().normalize(),n=e.spatialReference;let r=!1,i=!1;for(const o of t)o.hasZ&&(r=!0),o.hasM&&(i=!0);const s={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(i&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:n};return r&&(s.hasZ=!0),i&&(s.hasM=!0),new Wg(s)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){var o,a;let n,r,i=null,s=null;return e&&!Array.isArray(e)?(i=e.rings??null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),n=e.hasZ,r=e.hasM):i=e,i=i||[],t=t||we.WGS84,i.length&&((o=i[0])==null?void 0:o[0])!=null&&typeof i[0][0]=="number"&&(i=[i]),s=(a=i[0])==null?void 0:a[0],s&&(n===void 0&&r===void 0?(n=s.length>2,r=s.length>3):n===void 0?n=r?s.length>3:s.length>2:r===void 0&&(r=n?s.length>3:s.length>2)),{rings:i,spatialReference:t,hasZ:n,hasM:r}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=XG(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new ce;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=_R(this);if(!t)return null;const n=new Me(t);return n.spatialReference=e,n}get isSelfIntersecting(){return MG(this.rings)}writeRings(e,t){t.rings=J(this.rings)}addRing(e){if(!e)return;const t=this.rings,n=t.length;if(LT(e)){const r=[];for(let i=0,s=e.length;i<s;i++)r[i]=e[i].toArray();t[n]=r}else t[n]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new Wg;return e.spatialReference=this.spatialReference,e.rings=J(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,n=e.spatialReference;if(t!=null!=(n!=null)||t!=null&&n!=null&&!t.equals(n)||this.rings.length!==e.rings.length)return!1;const r=([i,s,o,a],[l,c,u,h])=>i===l&&s===c&&(o==null&&u==null||o===u)&&(a==null&&h==null||a===h);for(let i=0;i<this.rings.length;i++){const s=this.rings[i],o=e.rings[i];if(!Hc(s,o,r))return!1}return!0}contains(e){if(!e)return!1;const t=MM(e,this.spatialReference);return pG(this,t??e)}isClockwise(e){let t;return t=LT(e)?e.map(n=>this.hasZ?this.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]):e,wp(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const n=this.rings[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new ce(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new ce(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new ce(n[0],n[1],n[2],n[3],this.spatialReference):new ce(n[0],n[1],this.spatialReference)}insertPoint(e,t,n){return this._validateInputs(e,t,!0)?(sf(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e].splice(t,0,n),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const n=new ce(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),n}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],n=this.spatialReference,r=t.map(i=>new ce(i,n));return this.notifyChange("rings"),r}setPoint(e,t,n){return this._validateInputs(e,t)?(sf(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[e][t]=n,this.notifyChange("rings"),this):this}_validateInputs(e,t,n=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const r=this.rings[e];if(n&&(t<0||t>r.length)||!n&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};p([b({readOnly:!0})],Zi.prototype,"cache",null),p([b({readOnly:!0})],Zi.prototype,"centroid",null),p([b({readOnly:!0})],Zi.prototype,"extent",null),p([b({readOnly:!0})],Zi.prototype,"isSelfIntersecting",null),p([b({type:[[[Number]]],json:{write:{isRequired:!0}}})],Zi.prototype,"rings",void 0),p([xe("rings")],Zi.prototype,"writeRings",null),Zi=Wg=p([L("esri.geometry.Polygon")],Zi),Zi.prototype.toJSON.isDefaultToJSON=!0;const ii=Zi;function xu(){return[1,0,0,0,1,0,0,0,1]}function dH(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function pH(e,t,n,r,i,s,o,a,l){return[e,t,n,r,i,s,o,a,l]}function $R(e,t){return new Float64Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:dH,create:xu,createView:$R,fromValues:pH},Symbol.toStringTag,{value:"Module"}));function Su(){return[0,0,0,1]}function mH(e){return[e[0],e[1],e[2],e[3]]}function gH(e,t,n,r){return[e,t,n,r]}function TR(e,t){return new Float64Array(e,t,4)}const yH=Su();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:yH,clone:mH,create:Su,createView:TR,fromValues:gH},Symbol.toStringTag,{value:"Module"}));function bH(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function r0(e,t,n){n*=.5;const r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function AR(e,t){const n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>Zn()?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function FM(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+o*a+i*c-s*l,e[1]=i*u+o*l+s*a-r*c,e[2]=s*u+o*c+r*l-i*a,e[3]=o*u-r*a-i*l-s*c,e}function wH(e,t,n){n*=.5;const r=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*a,e[1]=i*l+s*a,e[2]=s*l-i*a,e[3]=o*l-r*a,e}function vH(e,t,n){n*=.5;const r=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=r*l-s*a,e[1]=i*l+o*a,e[2]=s*l+r*a,e[3]=o*l-i*a,e}function xH(e,t,n){n*=.5;const r=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*a,e[1]=i*l-r*a,e[2]=s*l+o*a,e[3]=o*l-s*a,e}function SH(e,t){const n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function Hg(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=t[3];let l,c,u,h,f,d=n[0],g=n[1],y=n[2],w=n[3];return c=i*d+s*g+o*y+a*w,c<0&&(c=-c,d=-d,g=-g,y=-y,w=-w),1-c>Zn()?(l=Math.acos(c),u=Math.sin(l),h=Math.sin((1-r)*l)/u,f=Math.sin(r*l)/u):(h=1-r,f=r),e[0]=h*i+f*d,e[1]=h*s+f*g,e[2]=h*o+f*y,e[3]=h*a+f*w,e}function _H(e){const t=D0,n=t(),r=t(),i=t(),s=Math.sqrt(1-n),o=Math.sqrt(n);return e[0]=s*Math.sin(2*Math.PI*r),e[1]=s*Math.cos(2*Math.PI*r),e[2]=o*Math.sin(2*Math.PI*i),e[3]=o*Math.cos(2*Math.PI*i),e}function MH(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=n*n+r*r+i*i+s*s,a=o?1/o:0;return e[0]=-n*a,e[1]=-r*a,e[2]=-i*a,e[3]=s*a,e}function $H(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function IR(e,t){const n=t[0]+t[4]+t[8];let r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);const s=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*s+s]-t[3*o+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*s+o]-t[3*o+s])*r,e[s]=(t[3*s+i]+t[3*i+s])*r,e[o]=(t[3*o+i]+t[3*i+o])*r}return e}function TH(e,t,n,r){const i=.5*Math.PI/180;t*=i,n*=i,r*=i;const s=Math.sin(t),o=Math.cos(t),a=Math.sin(n),l=Math.cos(n),c=Math.sin(r),u=Math.cos(r);return e[0]=s*l*u-o*a*c,e[1]=o*a*u+s*l*c,e[2]=o*l*c-s*a*u,e[3]=o*l*u+s*a*c,e}function AH(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}const IH=n0,kH=CM,EH=Y6,CH=FM,OH=eR,PH=iR,RH=sR,kR=OM,NH=kR,ER=PM,DH=ER,jM=rR,LH=oR,FH=F0;function jH(e,t,n){const r=at(t,n);return r<-.999999?(Wn(Vi,zH,t),Z6(Vi)<1e-6&&Wn(Vi,BH,t),Lt(Vi,Vi),r0(e,Vi,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Wn(Vi,t,n),e[0]=Vi[0],e[1]=Vi[1],e[2]=Vi[2],e[3]=1+r,jM(e,e))}const Vi=ue(),zH=Fr(1,0,0),BH=Fr(0,1,0);function UH(e,t,n,r,i,s){return Hg(FT,t,i,s),Hg(jT,n,r,s),Hg(e,FT,jT,2*s*(1-s)),e}const FT=Su(),jT=Su();function VH(e,t,n,r){const i=GH;return i[0]=n[0],i[3]=n[1],i[6]=n[2],i[1]=r[0],i[4]=r[1],i[7]=r[2],i[2]=-t[0],i[5]=-t[1],i[8]=-t[2],jM(e,IR(e,i))}const GH=xu();Object.freeze(Object.defineProperty({__proto__:null,add:EH,calculateW:SH,conjugate:$H,copy:IH,dot:PH,equals:FH,exactEquals:LH,fromEuler:TH,fromMat3:IR,getAxisAngle:AR,identity:bH,invert:MH,len:NH,length:kR,lerp:RH,mul:CH,multiply:FM,normalize:jM,random:_H,rotateX:wH,rotateY:vH,rotateZ:xH,rotationTo:jH,scale:OH,set:kH,setAxes:VH,setAxisAngle:r0,slerp:Hg,sqlerp:UH,sqrLen:DH,squaredLength:ER,str:AH},Symbol.toStringTag,{value:"Module"}));function zi(e=CR){return[e[0],e[1],e[2],e[3]]}function qg(e,t,n=zi()){return Sr(n,e),n[3]=t,n}function ive(e,t,n=zi()){return Wn(n,e,t),Lt(n,n),n[3]=-q6(e,t),n}function fx(e,t,n=zi()){return r0(Sm,e,$1(e)),r0(zT,t,$1(t)),FM(Sm,zT,Sm),qH(n,aR(AR(n,Sm)))}function WH(e,t,n,r=zi()){return qg(F6,e,_m),qg(j6,t,BT),qg(z6,n,UT),fx(_m,BT,_m),fx(_m,UT,r),r}function sve(e){return e}function HH(e){return e[3]}function $1(e){return j0(e[3])}function qH(e,t){return e[3]=t,e}const CR=[0,0,1,0],Sm=Su(),zT=Su();zi();const _m=zi(),BT=zi(),UT=zi(),T1={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function OR(e){return!!T1[e]||!!T1[e.toLowerCase()]}function zM(e){return T1[e]??T1[e.toLowerCase()]}function JH(e){return[...zM(e)]}function Sw(e,t,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?e+(t-e)*r:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function PR(e,t,n,r=1){const i=(e%360+360)%360/360,s=n<=.5?n*(t+1):n+t-n*t,o=2*n-s;return[Math.round(255*Sw(o,s,i+1/3)),Math.round(255*Sw(o,s,i)),Math.round(255*Sw(o,s,i-1/3)),r]}function ZH(e){const t=e.length>5,n=t?8:4,r=(1<<n)-1,i=t?1:17,s=t?e.length===9:e.length===5;let o=+("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=n,a[3]=i*l/255),l=o&r,o>>=n,a[2]=i*l,l=o&r,o>>=n,a[1]=i*l,l=o&r,o>>=n,a[0]=i*l,a}function Mm(e){return Un(tM(e),0,255)}function $m(e,t,n){return e=Number(e),isNaN(e)?n:e<t?t:e>n?n:e}function Tm(e,t){const n=e.toString(16).padStart(2,"0");return t?n.substring(0,1):n}let Jg=class Qt{static blendColors(t,n,r,i=new Qt){return i.r=Math.round(t.r+(n.r-t.r)*r),i.g=Math.round(t.g+(n.g-t.g)*r),i.b=Math.round(t.b+(n.b-t.b)*r),i.a=t.a+(n.a-t.a)*r,i._sanitize()}static fromRgb(t,n){const r=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const i=r[2].split(/\s*,\s*/),s=r[1];if(s==="rgb"&&i.length===3||s==="rgba"&&i.length===4){const o=i[0];if(o.charAt(o.length-1)==="%"){const a=i.map(l=>2.56*parseFloat(l));return i.length===4&&(a[3]=parseFloat(i[3])),Qt.fromArray(a,n)}return Qt.fromArray(i.map(a=>parseFloat(a)),n)}if(s==="hsl"&&i.length===3||s==="hsla"&&i.length===4)return Qt.fromArray(PR(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100,parseFloat(i[3])),n)}return null}static fromHex(t,n=new Qt){if(t[0]!=="#"||isNaN(+`0x${t.substring(1)}`))return null;switch(t.length){case 4:case 5:{const r=parseInt(t.substring(1,2),16),i=parseInt(t.substring(2,3),16),s=parseInt(t.substring(3,4),16),o=t.length===5?15:parseInt(t.substring(4),16);return Qt.fromArray([r+16*r,i+16*i,s+16*s,(o+16*o)/255],n)}case 7:case 9:{const r=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),s=parseInt(t.substring(5,7),16),o=t.length===7?255:parseInt(t.substring(7),16);return Qt.fromArray([r,i,s,o/255],n)}default:return null}}static fromArray(t,n=new Qt){return n._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}static fromString(t,n){const r=OR(t)?zM(t):null;return r&&Qt.fromArray(r,n)||Qt.fromRgb(t,n)||Qt.fromHex(t,n)}static fromJSON(t){return t!=null?new Qt([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Qt.fromString(t,this):Array.isArray(t)?Qt.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Qt||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const n=(t==null?void 0:t.capitalize)??!1,r=(t==null?void 0:t.digits)??6,i=r===3||r===4,s=r===4||r===8,o=`#${Tm(this.r,i)}${Tm(this.g,i)}${Tm(this.b,i)}${s?Tm(Math.round(255*this.a),i):""}`;return n?o.toUpperCase():o}toCss(t=!1){const n=this.r+", "+this.g+", "+this.b;return t?`rgba(${n}, ${this.a})`:`rgb(${n})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Qt.AlphaMode.ALWAYS){const n=Mm(this.r),r=Mm(this.g),i=Mm(this.b);return t===Qt.AlphaMode.ALWAYS||this.a!==1?[n,r,i,Mm(255*this.a)]:[n,r,i]}clone(){return new Qt(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round($m(this.r,0,255)),this.g=Math.round($m(this.g,0,255)),this.b=Math.round($m(this.b,0,255)),this.a=$m(this.a,0,1),this}_set(t,n,r,i){this.r=t,this.g=n,this.b=r,this.a=i}};Jg.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(Jg||(Jg={}));const fe=Jg;let Uf=null,A1=!0;function ove(e,t,n){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(A1)try{return new ImageData(e,t)}catch{A1=!1}return RR(e,t,n)}function YH(e,t,n,r){if(!t||!n)throw new Error("Cannot construct image data without dimensions");if(A1)try{return new ImageData(e,t,n)}catch{A1=!1}const i=RR(t,n,r);return i.data.set(e,0),i}function KH(){return Uf||(Uf=document.createElement("canvas"),Uf.width=1,Uf.height=1),Uf}function RR(e,t,n){return n||(n=KH()),n.getContext("2d").createImageData(e,t)}async function XH(e,t){const n=window.URL.createObjectURL(e);try{const{data:r}=await He(n,{...t,responseType:"image"});return r}catch(r){throw wr(r)?r:new Y("invalid-image",`Could not fetch requested image at ${n}`)}finally{window.URL.revokeObjectURL(n)}}async function ave(e,t){const{arrayBuffer:n,mediaType:r}=await QH(e,t),i=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await ne(()=>import("./gif-a396561f.js"),[]);if(s(n))return o(n,t)}if(i){const{isAnimatedPNG:s,parseApng:o}=await ne(()=>import("./apng-3d97201f.js"),[]);if(s(n))return o(n,t)}return XH(new Blob([n],{type:r}),t)}async function QH(e,t){const n=Qh(e);if(n!=null&&n.isBase64)return{arrayBuffer:FP(n.data),mediaType:n.mediaType};const r=await He(e,{responseType:"array-buffer",...t});return{arrayBuffer:r.data,mediaType:r.getHeader("Content-Type")}}function Mf(e,t){var r;const n=(r=t==null?void 0:t.url)==null?void 0:r.path;if(e&&n&&(e=Xr(e,n,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=O2(e,t.portalItem.itemUrl);i!=null&&eq.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return dx(e,t==null?void 0:t.portal)}function su(e,t,n=i0.YES){var i,s;if(e==null)return e;!Nr(e)&&(t!=null&&t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let r=Xr(e);if(t){const o=((i=t.verifyItemRelativeUrls)==null?void 0:i.rootPath)||((s=t.url)==null?void 0:s.path);if(o){const a=dx(o,t.portal),l=dx(r,t.portal);r=O2(l,a,a),r!=null&&r!==l&&r!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=DR(r,t==null?void 0:t.portal),Nr(r)&&(r=Oi(r)),t!=null&&t.resources&&(t!=null&&t.portalItem)&&!Nr(r)&&!wu(r)&&n===i0.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(r),compress:!1}),r}function BM(e,t,n){return Mf(e,n)}function Ha(e,t,n,r){const i=su(e,r);i!==void 0&&(t[n]=i)}const NR=/\/items\/([^\/]+)\/resources\/(.*)/,eq=/^\.\/resources\//;function tq(e){const t=(e==null?void 0:e.match(NR))??null;return(t==null?void 0:t[1])??null}function nq(e){const t=(e==null?void 0:e.match(NR))??null;if(t==null)return null;const n=t[2],r=n.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=xT(n);return{prefix:null,filename:o,extension:a}}const{path:i,extension:s}=xT(n.slice(r+1));return{prefix:n.slice(0,r),filename:i,extension:s}}function DR(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Kv(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function dx(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const n=`${t.urlKey}.${t.customBaseUrl}`,r=hM();return Xh(r,`${r.scheme}://${n}`)?Kv(e,t.portalHostname,n):Kv(e,n,t.portalHostname)}var i0;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(i0||(i0={}));const lve=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return i0},ensureMainOnlineDomain:DR,fromJSON:Mf,itemIdFromResourceUrl:tq,prefixAndFilenameFromResourceUrl:nq,read:BM,toJSON:su,write:Ha},Symbol.toStringTag,{value:"Module"}));var Hu;const _w=new WeakMap;let rq=0,Yi=Hu=class extends re{constructor(e){super(e),this.wrap="repeat"}get url(){return this._get("url")||null}set url(e){this._set("url",e),e&&this._set("data",null)}get data(){return this._get("data")||null}set data(e){this._set("data",e),e&&this._set("url",null)}writeData(e,t,n,r){if(e instanceof HTMLImageElement){const i={type:"image-element",src:su(e.src,r),crossOrigin:e.crossOrigin};t[n]=i}else if(e instanceof HTMLCanvasElement){const i=e.getContext("2d").getImageData(0,0,e.width,e.height),s={type:"canvas-element",imageData:this._encodeImageData(i)};t[n]=s}else if(e instanceof HTMLVideoElement){const i={type:"video-element",src:su(e.src,r),autoplay:e.autoplay,loop:e.loop,muted:e.muted,crossOrigin:e.crossOrigin,preload:e.preload};t[n]=i}else if(e instanceof ImageData){const i={type:"image-data",imageData:this._encodeImageData(e)};t[n]=i}}readData(e){switch(e.type){case"image-element":{const t=new Image;return t.src=e.src,t.crossOrigin=e.crossOrigin,t}case"canvas-element":{const t=this._decodeImageData(e.imageData),n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.getContext("2d").putImageData(t,0,0),n}case"image-data":return this._decodeImageData(e.imageData);case"video-element":{const t=document.createElement("video");return t.src=e.src,t.crossOrigin=e.crossOrigin,t.autoplay=e.autoplay,t.loop=e.loop,t.muted=e.muted,t.preload=e.preload,t}default:return}}get transparent(){const e=this.data,t=this.url;if(e instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(e.getContext("2d").getImageData(0,0,e.width,e.height));if(e instanceof ImageData)return this._imageDataContainsTransparent(e);if(t){const n=t.substr(t.length-4,4).toLowerCase(),r=t.substr(0,15).toLocaleLowerCase();if(n===".png"||r==="data:image/png;")return!0}return!1}set transparent(e){this._overrideIfSome("transparent",e)}get contentHash(){const e=typeof this.wrap=="string"?this.wrap:typeof this.wrap=="object"?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",t=(n="")=>`d:${n},t:${this.transparent},w:${e}`;return this.url!=null?t(this.url):this.data!=null?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?t(this.data.src):(_w.has(this.data)||_w.set(this.data,++rq),t(_w.get(this.data))):t()}get memoryUsage(){let e=0;if(e+=this.url!=null?this.url.length:0,this.data!=null){const t=this.data;"data"in t?e+=t.data.byteLength:t instanceof HTMLImageElement?e+=t.naturalWidth*t.naturalHeight*3:t instanceof HTMLCanvasElement&&(e+=t.width*t.height*3)}return e}clone(){const e={url:this.url,data:this.data,wrap:this._cloneWrap()};return new Hu(e)}cloneWithDeduplication(e){const t=e.get(this);if(t)return t;const n=this.clone();return e.set(this,n),n}_cloneWrap(){return typeof this.wrap=="string"?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(e){let t="";for(let n=0;n<e.data.length;n++)t+=String.fromCharCode(e.data[n]);return{data:btoa(t),width:e.width,height:e.height}}_decodeImageData(e){const t=atob(e.data),n=new Uint8ClampedArray(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return YH(n,e.width,e.height)}_imageDataContainsTransparent(e){for(let t=3;t<e.data.length;t+=4)if(e.data[t]!==255)return!0;return!1}static from(e){return typeof e=="string"?new Hu({url:e}):e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData||e instanceof HTMLVideoElement?new Hu({data:e}):za(Hu,e)}};p([b({type:String,json:{write:Ha}})],Yi.prototype,"url",null),p([b({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),b()],Yi.prototype,"data",null),p([xe("data")],Yi.prototype,"writeData",null),p([ge("data")],Yi.prototype,"readData",null),p([b({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],Yi.prototype,"transparent",null),p([b({json:{write:!0}})],Yi.prototype,"wrap",void 0),p([b({readOnly:!0})],Yi.prototype,"contentHash",null),Yi=Hu=p([L("esri.geometry.support.MeshTexture")],Yi);const xp=Yi,_n=e=>{let t=class extends e{clone(){var l;const n=xr(this);Ph(n,"unable to clone instance of non-accessor class");const r=n.metadatas,i=n.store,s={},o=new Map;for(const c in r){const u=r[c],h=i==null?void 0:i.originOf(c),f=u.clonable;if(u.readOnly||f===!1||h!==Re.USER&&h!==Re.DEFAULTS&&h!==Re.WEB_MAP&&h!==Re.WEB_SCENE)continue;const d=this[c];let g=null;g=typeof f=="function"?f(d):f==="reference"?d:Cv(d),d!=null&&g==null||(h===Re.DEFAULTS?o.set(c,g):s[c]=g)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const c=(l=xr(a))==null?void 0:l.store;if(c)for(const[u,h]of o)c.set(u,h,Re.DEFAULTS)}return a}};return t=p([L("esri.core.Clonable")],t),t};let px=class extends _n(Yt){};px=p([L("esri.core.Clonable")],px);let qu=class extends _n(re){constructor(t){super(t),this.offset=[0,0],this.rotation=0,this.scale=[1,1]}};p([b({type:[Number],nonNullable:!0,json:{write:!0}})],qu.prototype,"offset",void 0),p([b({type:Number,nonNullable:!0,json:{write:!0}})],qu.prototype,"rotation",void 0),p([b({type:[Number],nonNullable:!0,json:{write:!0}})],qu.prototype,"scale",void 0),qu=p([L("esri.geometry.support.MeshTextureTransform")],qu);const Sp=qu;var mx;let di=mx=class extends re{constructor(e){super(e),this.color=null,this.colorTexture=null,this.colorTextureTransform=null,this.normalTexture=void 0,this.normalTextureTransform=void 0,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(e,t){const n=e!=null?e.get(this):null;if(n)return n;const r=new mx(this.clonePropertiesWithDeduplication(t));return e!=null&&e.set(this,r),r}clonePropertiesWithDeduplication(e){var t,n,r,i;return{color:this.color!=null?this.color.clone():null,colorTexture:(t=this.colorTexture)==null?void 0:t.cloneWithDeduplication(e),normalTexture:(n=this.normalTexture)==null?void 0:n.cloneWithDeduplication(e),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:(r=this.colorTextureTransform)==null?void 0:r.clone(),normalTextureTransform:(i=this.normalTextureTransform)==null?void 0:i.clone()}}get memoryUsage(){return this.getMemoryUsage()}getMemoryUsage(){let e=0;return e+=this.color!=null?16:0,this.colorTexture!=null&&(e+=this.colorTexture.memoryUsage),e+=this.colorTextureTransform!=null?20:0,this.normalTexture!=null&&(e+=this.normalTexture.memoryUsage),e+=this.normalTextureTransform!=null?20:0,e}};p([b({type:fe,json:{write:!0}})],di.prototype,"color",void 0),p([b({type:xp,json:{write:!0}})],di.prototype,"colorTexture",void 0),p([b({type:Sp,json:{write:!0}})],di.prototype,"colorTextureTransform",void 0),p([b({type:xp,json:{write:!0}})],di.prototype,"normalTexture",void 0),p([b({type:Sp,json:{write:!0}})],di.prototype,"normalTextureTransform",void 0),p([b({nonNullable:!0,json:{write:!0}})],di.prototype,"alphaMode",void 0),p([b({nonNullable:!0,json:{write:!0}})],di.prototype,"alphaCutoff",void 0),p([b({nonNullable:!0,json:{write:!0}})],di.prototype,"doubleSided",void 0),di=mx=p([L("esri.geometry.support.MeshMaterial")],di);const UM=di;var gx;let Wr=gx=class extends UM{constructor(e){super(e),this.emissiveColor=null,this.emissiveTexture=null,this.emissiveTextureTransform=void 0,this.occlusionTexture=null,this.occlusionTextureTransform=void 0,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null,this.metallicRoughnessTextureTransform=void 0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(e,t){const n=e!=null?e.get(this):null;if(n)return n;const r=new gx(this.clonePropertiesWithDeduplication(t));return e!=null&&e.set(this,r),r}getMemoryUsage(){let e=super.getMemoryUsage();return e+=this.emissiveColor!=null?16:0,this.emissiveTexture!=null&&(e+=this.emissiveTexture.memoryUsage),e+=this.emissiveTextureTransform!=null?20:0,this.occlusionTexture!=null&&(e+=this.occlusionTexture.memoryUsage),e+=this.occlusionTextureTransform!=null?20:0,this.metallicRoughnessTexture!=null&&(e+=this.metallicRoughnessTexture.memoryUsage),e+=this.metallicRoughnessTextureTransform!=null?20:0,e}clonePropertiesWithDeduplication(e){var t,n,r,i,s,o,a;return{...super.clonePropertiesWithDeduplication(e),emissiveColor:(t=this.emissiveColor)==null?void 0:t.clone(),emissiveTexture:(n=this.emissiveTexture)==null?void 0:n.cloneWithDeduplication(e),emissiveTextureTransform:(r=this.emissiveTextureTransform)==null?void 0:r.clone(),occlusionTexture:(i=this.occlusionTexture)==null?void 0:i.cloneWithDeduplication(e),occlusionTextureTransform:(s=this.occlusionTextureTransform)==null?void 0:s.clone(),metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:(o=this.metallicRoughnessTexture)==null?void 0:o.cloneWithDeduplication(e),metallicRoughnessTextureTransform:(a=this.metallicRoughnessTextureTransform)==null?void 0:a.clone()}}};p([b({type:fe,json:{write:!0}})],Wr.prototype,"emissiveColor",void 0),p([b({type:xp,json:{write:!0}})],Wr.prototype,"emissiveTexture",void 0),p([b({type:Sp,json:{write:!0}})],Wr.prototype,"emissiveTextureTransform",void 0),p([b({type:xp,json:{write:!0}})],Wr.prototype,"occlusionTexture",void 0),p([b({type:Sp,json:{write:!0}})],Wr.prototype,"occlusionTextureTransform",void 0),p([b({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],Wr.prototype,"metallic",void 0),p([b({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],Wr.prototype,"roughness",void 0),p([b({type:xp,json:{write:!0}})],Wr.prototype,"metallicRoughnessTexture",void 0),p([b({type:Sp,json:{write:!0}})],Wr.prototype,"metallicRoughnessTextureTransform",void 0),Wr=gx=p([L("esri.geometry.support.MeshMaterialMetallicRoughness")],Wr);const iq=Wr;var Zg;const LR="esri.geometry.support.MeshVertexAttributes",Pu=ie.getLogger(LR);let Dn=Zg=class extends re{constructor(e){super(e),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(e){return Ju(e,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},Pu)}castPosition(e){return e&&e instanceof Float32Array&&Pu.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),Ju(e,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},Pu)}castUv(e){return Ju(e,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},Pu)}castNormal(e){return Ju(e,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},Pu)}castTangent(e){return Ju(e,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},Pu)}clone(){const e={position:J(this.position),uv:J(this.uv),normal:J(this.normal),tangent:J(this.tangent),color:J(this.color)};return new Zg(e)}clonePositional(){const e={position:J(this.position),normal:J(this.normal),tangent:J(this.tangent),uv:this.uv,color:this.color};return new Zg(e)}get memoryUsage(){let e=0;return e+=this.position.byteLength,this.uv!=null&&(e+=this.uv.byteLength),this.normal!=null&&(e+=this.normal.byteLength),this.tangent!=null&&(e+=this.tangent.byteLength),this.color!=null&&(e+=this.color.byteLength),e}};function Mw(e,t,n,r){const{loggerTag:i,stride:s}=t;return e.length%s!=0?(r.error(i,`Invalid array length, expected a multiple of ${s}`),new n([])):e}function Ju(e,t,n,r,i){if(!e)return e;if(e instanceof t)return Mw(e,r,t,i);for(const s of n)if(e instanceof s)return Mw(new t(e),r,t,i);if(Array.isArray(e))return Mw(new t(e),r,t,i);{const s=n.map(o=>`'${o.name}'`);return i.error(`Failed to set property, expected one of ${s}, but got ${e.constructor.name}`),new t([])}}function Vf(e,t,n){t[n]=sq(e)}function sq(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n];return t}p([b({json:{write:Vf}})],Dn.prototype,"color",void 0),p([gt("color")],Dn.prototype,"castColor",null),p([b({nonNullable:!0,json:{write:Vf}})],Dn.prototype,"position",void 0),p([gt("position")],Dn.prototype,"castPosition",null),p([b({json:{write:Vf}})],Dn.prototype,"uv",void 0),p([gt("uv")],Dn.prototype,"castUv",null),p([b({json:{write:Vf}})],Dn.prototype,"normal",void 0),p([gt("normal")],Dn.prototype,"castNormal",null),p([b({json:{write:Vf}})],Dn.prototype,"tangent",void 0),p([gt("tangent")],Dn.prototype,"castTangent",null),Dn=Zg=p([L(LR)],Dn);var md;const FR="esri.geometry.support.MeshComponent",oq=ie.getLogger(FR);let Ki=md=class extends re{static from(e){return za(md,e)}constructor(e){super(e),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1}castFaces(e){return Ju(e,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},oq)}castMaterial(e){return za(e&&typeof e=="object"&&("metallic"in e||"roughness"in e||"metallicRoughnessTexture"in e)?iq:UM,e)}clone(){return new md({faces:J(this.faces),shading:this.shading,material:J(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(e,t){const n={faces:J(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(e,t):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new md(n)}get memoryUsage(){let e=0;return this.faces!=null&&(e+=this.faces.byteLength),this.material!=null&&(e+=this.material.memoryUsage),e}};p([b({json:{write:!0}})],Ki.prototype,"faces",void 0),p([gt("faces")],Ki.prototype,"castFaces",null),p([b({type:UM,json:{write:!0}})],Ki.prototype,"material",void 0),p([gt("material")],Ki.prototype,"castMaterial",null),p([b()],Ki.prototype,"name",void 0),p([b({type:String,json:{write:!0}})],Ki.prototype,"shading",void 0),p([b({type:Boolean})],Ki.prototype,"trustSourceNormals",void 0),Ki=md=p([L(FR)],Ki);const of=Ki;let Gf=class extends Y{constructor(){super("mesh-not-loaded","Mesh must be loaded before applying operations")}},aq=class extends Y{constructor(){super("component-not-found","Provided component is not part of the list of components")}},lq=class extends Y{constructor(){super("invalid-polygon","expected polygon to be a Polygon instance")}},Ru=class extends Y{constructor(){super("invalid-input:location","Expected location to be a Point instance")}},cq=class extends Y{constructor(){super("invalid-input:no-layer","A layer is needed to convert the files")}},uq=class extends Y{constructor(){super("invalid-input:no-model","No supported model found")}},hq=class extends Y{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}};function pe(e,t={}){const n=e instanceof Ne?e:new Ne(e,t),r={type:(t==null?void 0:t.ignoreUnknown)??1?n.apiValues:String,json:{type:n.jsonValues,read:!(t!=null&&t.readOnly)&&{reader:n.read},write:{writer:n.write}}};return(t==null?void 0:t.readOnly)!==void 0&&(r.readOnly=!!t.readOnly),(t==null?void 0:t.default)!==void 0&&(r.json.default=t.default),(t==null?void 0:t.name)!==void 0&&(r.json.name=t.name),(t==null?void 0:t.nonNullable)!==void 0&&(r.nonNullable=t.nonNullable),b(r)}let gd=class extends _n(re){constructor(t){super(t),this.type="georeferenced-relative",this.isRelative=!0,this.isGeoreferenced=!0,this.origin=ue()}getOriginPoint(t){const[n,r,i]=this.origin;return new ce({x:n,y:r,z:i,spatialReference:t})}setOriginFromPoint({x:t,y:n,z:r}){this.origin=Fr(t,n,r??0)}};p([pe({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],gd.prototype,"type",void 0),p([b({type:[Number],nonNullable:!0,json:{write:!0}})],gd.prototype,"origin",void 0),gd=p([L("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],gd);const jR=gd;let Yg=class extends _n(re){constructor(){super({}),this.type="georeferenced",this.isRelative=!1,this.isGeoreferenced=!0}};p([pe({georeferenced:"georeferenced"},{readOnly:!0})],Yg.prototype,"type",void 0),Yg=p([L("esri.geometry.support.MeshGeoreferencedVertexSpace")],Yg);const I1=Yg;let yd=class extends _n(re){constructor(t){super(t),this.type="local",this.isRelative=!0,this.isGeoreferenced=!1,this.origin=ue()}getOriginPoint(t){const[n,r,i]=this.origin;return new ce({x:n,y:r,z:i,spatialReference:t})}setOriginFromPoint({x:t,y:n,z:r}){this.origin=Fr(t,n,r??0)}};p([pe({local:"local"},{readOnly:!0})],yd.prototype,"type",void 0),p([b({type:[Number],nonNullable:!0,json:{write:!0}})],yd.prototype,"origin",void 0),yd=p([L("esri.geometry.support.MeshLocalVertexSpace")],yd);const k1=yd;function fq(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rl(e,t,n,r,i,s,o,a,l,c,u,h,f,d,g,y,w){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=u,e[10]=h,e[11]=f,e[12]=d,e[13]=g,e[14]=y,e[15]=w,e}function z0(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function So(e,t){if(e===t){const n=t[1],r=t[2],i=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function dq(e,t){return G2(e,t)||z0(e),e}function G2(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],d=t[11],g=t[12],y=t[13],w=t[14],v=t[15],x=n*a-r*o,S=n*l-i*o,_=n*c-s*o,M=r*l-i*a,$=r*c-s*a,T=i*c-s*l,A=u*y-h*g,I=u*w-f*g,E=u*v-d*g,O=h*w-f*y,P=h*v-d*y,j=f*v-d*w;let V=x*j-S*P+_*O+M*E-$*I+T*A;return V?(V=1/V,e[0]=(a*j-l*P+c*O)*V,e[1]=(i*P-r*j-s*O)*V,e[2]=(y*T-w*$+v*M)*V,e[3]=(f*$-h*T-d*M)*V,e[4]=(l*E-o*j-c*I)*V,e[5]=(n*j-i*E+s*I)*V,e[6]=(w*_-g*T-v*S)*V,e[7]=(u*T-f*_+d*S)*V,e[8]=(o*P-a*E+c*A)*V,e[9]=(r*E-n*P-s*A)*V,e[10]=(g*$-y*_+v*x)*V,e[11]=(h*_-u*$-d*x)*V,e[12]=(a*I-o*O-l*A)*V,e[13]=(n*O-r*I+i*A)*V,e[14]=(y*S-g*M-w*x)*V,e[15]=(u*M-h*S+f*x)*V,e):null}function pq(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],d=t[11],g=t[12],y=t[13],w=t[14],v=t[15];return e[0]=a*(f*v-d*w)-h*(l*v-c*w)+y*(l*d-c*f),e[1]=-(r*(f*v-d*w)-h*(i*v-s*w)+y*(i*d-s*f)),e[2]=r*(l*v-c*w)-a*(i*v-s*w)+y*(i*c-s*l),e[3]=-(r*(l*d-c*f)-a*(i*d-s*f)+h*(i*c-s*l)),e[4]=-(o*(f*v-d*w)-u*(l*v-c*w)+g*(l*d-c*f)),e[5]=n*(f*v-d*w)-u*(i*v-s*w)+g*(i*d-s*f),e[6]=-(n*(l*v-c*w)-o*(i*v-s*w)+g*(i*c-s*l)),e[7]=n*(l*d-c*f)-o*(i*d-s*f)+u*(i*c-s*l),e[8]=o*(h*v-d*y)-u*(a*v-c*y)+g*(a*d-c*h),e[9]=-(n*(h*v-d*y)-u*(r*v-s*y)+g*(r*d-s*h)),e[10]=n*(a*v-c*y)-o*(r*v-s*y)+g*(r*c-s*a),e[11]=-(n*(a*d-c*h)-o*(r*d-s*h)+u*(r*c-s*a)),e[12]=-(o*(h*w-f*y)-u*(a*w-l*y)+g*(a*f-l*h)),e[13]=n*(h*w-f*y)-u*(r*w-i*y)+g*(r*f-i*h),e[14]=-(n*(a*w-l*y)-o*(r*w-i*y)+g*(r*l-i*a)),e[15]=n*(a*f-l*h)-o*(r*f-i*h)+u*(r*l-i*a),e}function mq(e){const t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11],d=e[12],g=e[13],y=e[14],w=e[15];return(t*o-n*s)*(h*w-f*y)-(t*a-r*s)*(u*w-f*g)+(t*l-i*s)*(u*y-h*g)+(n*a-r*o)*(c*w-f*d)-(n*l-i*o)*(c*y-h*d)+(r*l-i*a)*(c*g-u*d)}function VM(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=t[9],d=t[10],g=t[11],y=t[12],w=t[13],v=t[14],x=t[15];let S=n[0],_=n[1],M=n[2],$=n[3];return e[0]=S*r+_*a+M*h+$*y,e[1]=S*i+_*l+M*f+$*w,e[2]=S*s+_*c+M*d+$*v,e[3]=S*o+_*u+M*g+$*x,S=n[4],_=n[5],M=n[6],$=n[7],e[4]=S*r+_*a+M*h+$*y,e[5]=S*i+_*l+M*f+$*w,e[6]=S*s+_*c+M*d+$*v,e[7]=S*o+_*u+M*g+$*x,S=n[8],_=n[9],M=n[10],$=n[11],e[8]=S*r+_*a+M*h+$*y,e[9]=S*i+_*l+M*f+$*w,e[10]=S*s+_*c+M*d+$*v,e[11]=S*o+_*u+M*g+$*x,S=n[12],_=n[13],M=n[14],$=n[15],e[12]=S*r+_*a+M*h+$*y,e[13]=S*i+_*l+M*f+$*w,e[14]=S*s+_*c+M*d+$*v,e[15]=S*o+_*u+M*g+$*x,e}function gq(e,t,n){const r=n[0],i=n[1],s=n[2];if(t===e)e[12]=t[0]*r+t[4]*i+t[8]*s+t[12],e[13]=t[1]*r+t[5]*i+t[9]*s+t[13],e[14]=t[2]*r+t[6]*i+t[10]*s+t[14],e[15]=t[3]*r+t[7]*i+t[11]*s+t[15];else{const o=t[0],a=t[1],l=t[2],c=t[3],u=t[4],h=t[5],f=t[6],d=t[7],g=t[8],y=t[9],w=t[10],v=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=u,e[5]=h,e[6]=f,e[7]=d,e[8]=g,e[9]=y,e[10]=w,e[11]=v,e[12]=o*r+u*i+g*s+t[12],e[13]=a*r+h*i+y*s+t[13],e[14]=l*r+f*i+w*s+t[14],e[15]=c*r+d*i+v*s+t[15]}return e}function zR(e,t,n){const r=n[0],i=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function yq(e,t,n,r){let i,s,o,a,l,c,u,h,f,d,g,y,w,v,x,S,_,M,$,T,A,I,E,O,P=r[0],j=r[1],V=r[2],U=Math.sqrt(P*P+j*j+V*V);return U<Zn()?null:(U=1/U,P*=U,j*=U,V*=U,i=Math.sin(n),s=Math.cos(n),o=1-s,a=t[0],l=t[1],c=t[2],u=t[3],h=t[4],f=t[5],d=t[6],g=t[7],y=t[8],w=t[9],v=t[10],x=t[11],S=P*P*o+s,_=j*P*o+V*i,M=V*P*o-j*i,$=P*j*o-V*i,T=j*j*o+s,A=V*j*o+P*i,I=P*V*o+j*i,E=j*V*o-P*i,O=V*V*o+s,e[0]=a*S+h*_+y*M,e[1]=l*S+f*_+w*M,e[2]=c*S+d*_+v*M,e[3]=u*S+g*_+x*M,e[4]=a*$+h*T+y*A,e[5]=l*$+f*T+w*A,e[6]=c*$+d*T+v*A,e[7]=u*$+g*T+x*A,e[8]=a*I+h*E+y*O,e[9]=l*I+f*E+w*O,e[10]=c*I+d*E+v*O,e[11]=u*I+g*E+x*O,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function bq(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*r,e[5]=o*i+u*r,e[6]=a*i+h*r,e[7]=l*i+f*r,e[8]=c*i-s*r,e[9]=u*i-o*r,e[10]=h*i-a*r,e[11]=f*i-l*r,e}function wq(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],a=t[2],l=t[3],c=t[8],u=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-c*r,e[1]=o*i-u*r,e[2]=a*i-h*r,e[3]=l*i-f*r,e[8]=s*r+c*i,e[9]=o*r+u*i,e[10]=a*r+h*i,e[11]=l*r+f*i,e}function vq(e,t,n){const r=Math.sin(n),i=Math.cos(n),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],u=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*r,e[1]=o*i+u*r,e[2]=a*i+h*r,e[3]=l*i+f*r,e[4]=c*i-s*r,e[5]=u*i-o*r,e[6]=h*i-a*r,e[7]=f*i-l*r,e}function BR(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function xq(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function GM(e,t,n){if(t===0)return z0(e);let r,i,s,o=n[0],a=n[1],l=n[2],c=Math.sqrt(o*o+a*a+l*l);return c<Zn()?null:(c=1/c,o*=c,a*=c,l*=c,r=Math.sin(t),i=Math.cos(t),s=1-i,e[0]=o*o*s+i,e[1]=a*o*s+l*r,e[2]=l*o*s-a*r,e[3]=0,e[4]=o*a*s-l*r,e[5]=a*a*s+i,e[6]=l*a*s+o*r,e[7]=0,e[8]=o*l*s+a*r,e[9]=a*l*s-o*r,e[10]=l*l*s+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Sq(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _q(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Mq(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function UR(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=r+r,l=i+i,c=s+s,u=r*a,h=r*l,f=r*c,d=i*l,g=i*c,y=s*c,w=o*a,v=o*l,x=o*c;return e[0]=1-(d+y),e[1]=h+x,e[2]=f-v,e[3]=0,e[4]=h-x,e[5]=1-(u+y),e[6]=g+w,e[7]=0,e[8]=f+v,e[9]=g-w,e[10]=1-(u+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function $q(e,t){const n=Tq,r=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=r*r+i*i+s*s+o*o;return h>0?(n[0]=2*(a*o+u*r+l*s-c*i)/h,n[1]=2*(l*o+u*i+c*r-a*s)/h,n[2]=2*(c*o+u*s+a*i-l*r)/h):(n[0]=2*(a*o+u*r+l*s-c*i),n[1]=2*(l*o+u*i+c*r-a*s),n[2]=2*(c*o+u*s+a*i-l*r)),UR(e,t,n),e}const Tq=ue();function Aq(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Iq(e,t){const n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+c*c+u*u),e}function kq(e,t){const n=t[0]+t[5]+t[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function VR(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=t[3],l=i+i,c=s+s,u=o+o,h=i*l,f=i*c,d=i*u,g=s*c,y=s*u,w=o*u,v=a*l,x=a*c,S=a*u,_=r[0],M=r[1],$=r[2];return e[0]=(1-(g+w))*_,e[1]=(f+S)*_,e[2]=(d-x)*_,e[3]=0,e[4]=(f-S)*M,e[5]=(1-(h+w))*M,e[6]=(y+v)*M,e[7]=0,e[8]=(d+x)*$,e[9]=(y-v)*$,e[10]=(1-(h+g))*$,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Eq(e,t,n,r,i){const s=t[0],o=t[1],a=t[2],l=t[3],c=s+s,u=o+o,h=a+a,f=s*c,d=s*u,g=s*h,y=o*u,w=o*h,v=a*h,x=l*c,S=l*u,_=l*h,M=r[0],$=r[1],T=r[2],A=i[0],I=i[1],E=i[2],O=(1-(y+v))*M,P=(d+_)*M,j=(g-S)*M,V=(d-_)*$,U=(1-(f+v))*$,q=(w+x)*$,C=(g+S)*T,R=(w-x)*T,N=(1-(f+y))*T;return e[0]=O,e[1]=P,e[2]=j,e[3]=0,e[4]=V,e[5]=U,e[6]=q,e[7]=0,e[8]=C,e[9]=R,e[10]=N,e[11]=0,e[12]=n[0]+A-(O*A+V*I+C*E),e[13]=n[1]+I-(P*A+U*I+R*E),e[14]=n[2]+E-(j*A+q*I+N*E),e[15]=1,e}function Cq(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,d=i*a,g=i*l,y=s*o,w=s*a,v=s*l;return e[0]=1-h-g,e[1]=u+v,e[2]=f-w,e[3]=0,e[4]=u-v,e[5]=1-c-g,e[6]=d+y,e[7]=0,e[8]=f+w,e[9]=d-y,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Oq(e,t,n,r,i,s,o){const a=1/(n-t),l=1/(i-r),c=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(i+r)*l,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function Pq(e,t,n,r,i){const s=1/Math.tan(t/2);let o;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function Rq(e,t,n,r){const i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(i+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(i-s)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function Nq(e,t,n,r,i,s,o){const a=1/(t-n),l=1/(r-i),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*a,e[13]=(i+r)*l,e[14]=(o+s)*c,e[15]=1,e}function Dq(e,t,n,r){const i=t[0],s=t[1],o=t[2];let a=i-n[0],l=s-n[1],c=o-n[2];const u=Zn();if(Math.abs(a)<u&&Math.abs(l)<u&&Math.abs(c)<u)return void z0(e);let h=1/Math.sqrt(a*a+l*l+c*c);a*=h,l*=h,c*=h;const f=r[0],d=r[1],g=r[2];let y=d*c-g*l,w=g*a-f*c,v=f*l-d*a;h=Math.sqrt(y*y+w*w+v*v),h?(h=1/h,y*=h,w*=h,v*=h):(y=0,w=0,v=0);let x=l*v-c*w,S=c*y-a*v,_=a*w-l*y;h=Math.sqrt(x*x+S*S+_*_),h?(h=1/h,x*=h,S*=h,_*=h):(x=0,S=0,_=0),e[0]=y,e[1]=x,e[2]=a,e[3]=0,e[4]=w,e[5]=S,e[6]=l,e[7]=0,e[8]=v,e[9]=_,e[10]=c,e[11]=0,e[12]=-(y*i+w*s+v*o),e[13]=-(x*i+S*s+_*o),e[14]=-(a*i+l*s+c*o),e[15]=1}function Lq(e,t,n,r){const i=t[0],s=t[1],o=t[2],a=r[0],l=r[1],c=r[2];let u=i-n[0],h=s-n[1],f=o-n[2],d=u*u+h*h+f*f;d>0&&(d=1/Math.sqrt(d),u*=d,h*=d,f*=d);let g=l*f-c*h,y=c*u-a*f,w=a*h-l*u;return d=g*g+y*y+w*w,d>0&&(d=1/Math.sqrt(d),g*=d,y*=d,w*=d),e[0]=g,e[1]=y,e[2]=w,e[3]=0,e[4]=h*w-f*y,e[5]=f*g-u*w,e[6]=u*y-h*g,e[7]=0,e[8]=u,e[9]=h,e[10]=f,e[11]=0,e[12]=i,e[13]=s,e[14]=o,e[15]=1,e}function Fq(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function jq(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function zq(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function GR(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Bq(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Uq(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function WR(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function HR(e,t){if(e===t)return!0;const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],g=e[12],y=e[13],w=e[14],v=e[15],x=t[0],S=t[1],_=t[2],M=t[3],$=t[4],T=t[5],A=t[6],I=t[7],E=t[8],O=t[9],P=t[10],j=t[11],V=t[12],U=t[13],q=t[14],C=t[15],R=Zn();return Math.abs(n-x)<=R*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(r-S)<=R*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(i-_)<=R*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-M)<=R*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-$)<=R*Math.max(1,Math.abs(o),Math.abs($))&&Math.abs(a-T)<=R*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(l-A)<=R*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(c-I)<=R*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(u-E)<=R*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(h-O)<=R*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(f-P)<=R*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(d-j)<=R*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(g-V)<=R*Math.max(1,Math.abs(g),Math.abs(V))&&Math.abs(y-U)<=R*Math.max(1,Math.abs(y),Math.abs(U))&&Math.abs(w-q)<=R*Math.max(1,Math.abs(w),Math.abs(q))&&Math.abs(v-C)<=R*Math.max(1,Math.abs(v),Math.abs(C))}function Vq(e){const t=Zn(),n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return Math.abs(1-(n*n+s*s+l*l))<=t&&Math.abs(1-(r*r+o*o+c*c))<=t&&Math.abs(1-(i*i+a*a+u*u))<=t}function Gq(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const Wq=VM,Hq=GR;Object.freeze(Object.defineProperty({__proto__:null,add:zq,adjoint:pq,copy:fq,determinant:mq,equals:HR,exactEquals:WR,frob:jq,fromQuat:Cq,fromQuat2:$q,fromRotation:GM,fromRotationTranslation:UR,fromRotationTranslationScale:VR,fromRotationTranslationScaleOrigin:Eq,fromScaling:xq,fromTranslation:BR,fromXRotation:Sq,fromYRotation:_q,fromZRotation:Mq,frustum:Oq,getRotation:kq,getScaling:Iq,getTranslation:Aq,hasIdentityRotation:Gq,identity:z0,invert:G2,invertOrIdentity:dq,isOrthoNormal:Vq,lookAt:Dq,mul:Wq,multiply:VM,multiplyScalar:Bq,multiplyScalarAndAdd:Uq,ortho:Nq,perspective:Pq,perspectiveFromFieldOfView:Rq,rotate:yq,rotateX:bq,rotateY:wq,rotateZ:vq,scale:zR,set:rl,str:Fq,sub:Hq,subtract:GR,targetTo:Lq,translate:gq,transpose:So},Symbol.toStringTag,{value:"Module"}));function mo(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function qR(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function qq(e,t,n,r,i,s,o,a,l,c,u,h,f,d,g,y){return[e,t,n,r,i,s,o,a,l,c,u,h,f,d,g,y]}function JR(e,t){return new Float64Array(e,t,16)}const Nc=mo();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Nc,clone:qR,create:mo,createView:JR,fromValues:qq},Symbol.toStringTag,{value:"Module"}));var yx;let Xi=yx=class extends re{constructor(e){super(e),this.translation=ue(),this.rotationAxis=E6(CR),this.rotationAngle=0,this.scale=Fr(1,1,1)}get rotation(){return qg(this.rotationAxis,this.rotationAngle)}set rotation(e){this.rotationAxis=Pr(e),this.rotationAngle=HH(e)}get localMatrix(){const e=mo();return r0(VT,this.rotation,$1(this.rotation)),VR(e,VT,this.translation,this.scale),e}get localMatrixInverse(){return G2(mo(),this.localMatrix)}applyLocal(e,t){return nf(t,e,this.localMatrix)}applyLocalInverse(e,t){return nf(t,e,this.localMatrixInverse)}equals(e){return this===e||e!=null&&WR(this.localMatrix,e.localMatrix)}clone(){const e={translation:Pr(this.translation),rotationAxis:Pr(this.rotationAxis),rotationAngle:this.rotationAngle,scale:Pr(this.scale)};return new yx(e)}};p([b({type:[Number],nonNullable:!0,json:{write:!0}})],Xi.prototype,"translation",void 0),p([b({type:[Number],nonNullable:!0,json:{write:!0}})],Xi.prototype,"rotationAxis",void 0),p([b({type:Number,nonNullable:!0,json:{write:!0}})],Xi.prototype,"rotationAngle",void 0),p([b({type:[Number],nonNullable:!0,json:{write:!0}})],Xi.prototype,"scale",void 0),p([b()],Xi.prototype,"rotation",null),p([b()],Xi.prototype,"localMatrix",null),p([b()],Xi.prototype,"localMatrixInverse",null),Xi=yx=p([L("esri.geometry.support.MeshTransform")],Xi);const VT=Su(),af=Xi;var xve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function WM(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var GT,WT,HT,bx={exports:{}};bx.exports,GT=bx,WT=function(){function e(C,R,N){N=N||2;var D,z,G,W,K,oe,Se,Ee=R&&R.length,Ze=Ee?R[0]*N:C.length,ye=t(C,0,Ze,N,!0),de=[];if(!ye||ye.next===ye.prev)return de;if(Ee&&(ye=l(C,R,ye,N)),C.length>80*N){D=G=C[0],z=W=C[1];for(var $e=N;$e<Ze;$e+=N)(K=C[$e])<D&&(D=K),(oe=C[$e+1])<z&&(z=oe),K>G&&(G=K),oe>W&&(W=oe);Se=(Se=Math.max(G-D,W-z))!==0?1/Se:0}return r(ye,de,N,D,z,Se),de}function t(C,R,N,D,z){var G,W;if(z===q(C,R,N,D)>0)for(G=R;G<N;G+=D)W=j(G,C[G],C[G+1],W);else for(G=N-D;G>=R;G-=D)W=j(G,C[G],C[G+1],W);if(W&&M(W,W.next)){var K=W.next;V(W),W=K}return W}function n(C,R){if(!C)return C;R||(R=C);var N,D=C;do if(N=!1,D.steiner||!M(D,D.next)&&_(D.prev,D,D.next)!==0)D=D.next;else{var z=D.prev;if(V(D),(D=R=z)===D.next)break;N=!0}while(N||D!==R);return R}function r(C,R,N,D,z,G,W){if(C){!W&&G&&g(C,D,z,G);for(var K,oe,Se=C;C.prev!==C.next;)if(K=C.prev,oe=C.next,G?s(C,D,z,G):i(C))R.push(K.i/N),R.push(C.i/N),R.push(oe.i/N),V(C),C=oe.next,Se=oe.next;else if((C=oe)===Se){W?W===1?r(C=o(n(C),R,N),R,N,D,z,G,2):W===2&&a(C,R,N,D,z,G):r(n(C),R,N,D,z,G,1);break}}}function i(C){var R=C.prev,N=C,D=C.next;if(_(R,N,D)>=0)return!1;for(var z=C.next.next;z!==C.prev;){if(x(R.x,R.y,N.x,N.y,D.x,D.y,z.x,z.y)&&_(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function s(C,R,N,D){var z=C.prev,G=C,W=C.next;if(_(z,G,W)>=0)return!1;for(var K=z.x<G.x?z.x<W.x?z.x:W.x:G.x<W.x?G.x:W.x,oe=z.y<G.y?z.y<W.y?z.y:W.y:G.y<W.y?G.y:W.y,Se=z.x>G.x?z.x>W.x?z.x:W.x:G.x>W.x?G.x:W.x,Ee=z.y>G.y?z.y>W.y?z.y:W.y:G.y>W.y?G.y:W.y,Ze=w(K,oe,R,N,D),ye=w(Se,Ee,R,N,D),de=C.prevZ,$e=C.nextZ;de&&de.z>=Ze&&$e&&$e.z<=ye;){if(de!==C.prev&&de!==C.next&&x(z.x,z.y,G.x,G.y,W.x,W.y,de.x,de.y)&&_(de.prev,de,de.next)>=0||(de=de.prevZ,$e!==C.prev&&$e!==C.next&&x(z.x,z.y,G.x,G.y,W.x,W.y,$e.x,$e.y)&&_($e.prev,$e,$e.next)>=0))return!1;$e=$e.nextZ}for(;de&&de.z>=Ze;){if(de!==C.prev&&de!==C.next&&x(z.x,z.y,G.x,G.y,W.x,W.y,de.x,de.y)&&_(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;$e&&$e.z<=ye;){if($e!==C.prev&&$e!==C.next&&x(z.x,z.y,G.x,G.y,W.x,W.y,$e.x,$e.y)&&_($e.prev,$e,$e.next)>=0)return!1;$e=$e.nextZ}return!0}function o(C,R,N){var D=C;do{var z=D.prev,G=D.next.next;!M(z,G)&&$(z,D,D.next,G)&&E(z,G)&&E(G,z)&&(R.push(z.i/N),R.push(D.i/N),R.push(G.i/N),V(D),V(D.next),D=C=G),D=D.next}while(D!==C);return n(D)}function a(C,R,N,D,z,G){var W=C;do{for(var K=W.next.next;K!==W.prev;){if(W.i!==K.i&&S(W,K)){var oe=P(W,K);return W=n(W,W.next),oe=n(oe,oe.next),r(W,R,N,D,z,G),void r(oe,R,N,D,z,G)}K=K.next}W=W.next}while(W!==C)}function l(C,R,N,D){var z,G,W,K=[];for(z=0,G=R.length;z<G;z++)(W=t(C,R[z]*D,z<G-1?R[z+1]*D:C.length,D,!1))===W.next&&(W.steiner=!0),K.push(v(W));for(K.sort(c),z=0;z<K.length;z++)N=n(N=h(K[z],N),N.next);return N}function c(C,R){return C.x-R.x}function u(C){if(C.next.prev===C)return C;let R=C;for(;;){const N=R.next;if(N.prev===R||N===R||N===C)break;R=N}return R}function h(C,R){var N=f(C,R);if(!N)return R;var D=P(N,C),z=n(N,N.next);let G=u(D);return n(G,G.next),z=u(z),u(R===N?z:R)}function f(C,R){var N,D=R,z=C.x,G=C.y,W=-1/0;do{if(G<=D.y&&G>=D.next.y&&D.next.y!==D.y){var K=D.x+(G-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(K<=z&&K>W){if(W=K,K===z){if(G===D.y)return D;if(G===D.next.y)return D.next}N=D.x<D.next.x?D:D.next}}D=D.next}while(D!==R);if(!N)return null;if(z===W)return N;var oe,Se=N,Ee=N.x,Ze=N.y,ye=1/0;D=N;do z>=D.x&&D.x>=Ee&&z!==D.x&&x(G<Ze?z:W,G,Ee,Ze,G<Ze?W:z,G,D.x,D.y)&&(oe=Math.abs(G-D.y)/(z-D.x),E(D,C)&&(oe<ye||oe===ye&&(D.x>N.x||D.x===N.x&&d(N,D)))&&(N=D,ye=oe)),D=D.next;while(D!==Se);return N}function d(C,R){return _(C.prev,C,R.prev)<0&&_(R.next,C,C.next)<0}function g(C,R,N,D){var z=C;do z.z===null&&(z.z=w(z.x,z.y,R,N,D)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==C);z.prevZ.nextZ=null,z.prevZ=null,y(z)}function y(C){var R,N,D,z,G,W,K,oe,Se=1;do{for(N=C,C=null,G=null,W=0;N;){for(W++,D=N,K=0,R=0;R<Se&&(K++,D=D.nextZ);R++);for(oe=Se;K>0||oe>0&&D;)K!==0&&(oe===0||!D||N.z<=D.z)?(z=N,N=N.nextZ,K--):(z=D,D=D.nextZ,oe--),G?G.nextZ=z:C=z,z.prevZ=G,G=z;N=D}G.nextZ=null,Se*=2}while(W>1);return C}function w(C,R,N,D,z){return(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C=32767*(C-N)*z)|C<<8))|C<<4))|C<<2))|C<<1))|(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-D)*z)|R<<8))|R<<4))|R<<2))|R<<1))<<1}function v(C){var R=C,N=C;do(R.x<N.x||R.x===N.x&&R.y<N.y)&&(N=R),R=R.next;while(R!==C);return N}function x(C,R,N,D,z,G,W,K){return(z-W)*(R-K)-(C-W)*(G-K)>=0&&(C-W)*(D-K)-(N-W)*(R-K)>=0&&(N-W)*(G-K)-(z-W)*(D-K)>=0}function S(C,R){return C.next.i!==R.i&&C.prev.i!==R.i&&!I(C,R)&&(E(C,R)&&E(R,C)&&O(C,R)&&(_(C.prev,C,R.prev)||_(C,R.prev,R))||M(C,R)&&_(C.prev,C,C.next)>0&&_(R.prev,R,R.next)>0)}function _(C,R,N){return(R.y-C.y)*(N.x-R.x)-(R.x-C.x)*(N.y-R.y)}function M(C,R){return C.x===R.x&&C.y===R.y}function $(C,R,N,D){var z=A(_(C,R,N)),G=A(_(C,R,D)),W=A(_(N,D,C)),K=A(_(N,D,R));return z!==G&&W!==K||!(z!==0||!T(C,N,R))||!(G!==0||!T(C,D,R))||!(W!==0||!T(N,C,D))||!(K!==0||!T(N,R,D))}function T(C,R,N){return R.x<=Math.max(C.x,N.x)&&R.x>=Math.min(C.x,N.x)&&R.y<=Math.max(C.y,N.y)&&R.y>=Math.min(C.y,N.y)}function A(C){return C>0?1:C<0?-1:0}function I(C,R){var N=C;do{if(N.i!==C.i&&N.next.i!==C.i&&N.i!==R.i&&N.next.i!==R.i&&$(N,N.next,C,R))return!0;N=N.next}while(N!==C);return!1}function E(C,R){return _(C.prev,C,C.next)<0?_(C,R,C.next)>=0&&_(C,C.prev,R)>=0:_(C,R,C.prev)<0||_(C,C.next,R)<0}function O(C,R){var N=C,D=!1,z=(C.x+R.x)/2,G=(C.y+R.y)/2;do N.y>G!=N.next.y>G&&N.next.y!==N.y&&z<(N.next.x-N.x)*(G-N.y)/(N.next.y-N.y)+N.x&&(D=!D),N=N.next;while(N!==C);return D}function P(C,R){var N=new U(C.i,C.x,C.y),D=new U(R.i,R.x,R.y),z=C.next,G=R.prev;return C.next=R,R.prev=C,N.next=z,z.prev=N,D.next=N,N.prev=D,G.next=D,D.prev=G,D}function j(C,R,N,D){var z=new U(C,R,N);return D?(z.next=D.next,z.prev=D,D.next.prev=z,D.next=z):(z.prev=z,z.next=z),z}function V(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function U(C,R,N){this.i=C,this.x=R,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function q(C,R,N,D){for(var z=0,G=R,W=N-D;G<N;G+=D)z+=(C[W]-C[G])*(C[G+1]+C[W+1]),W=G;return z}return e.deviation=function(C,R,N,D){var z=R&&R.length,G=z?R[0]*N:C.length,W=Math.abs(q(C,0,G,N));if(z)for(var K=0,oe=R.length;K<oe;K++){var Se=R[K]*N,Ee=K<oe-1?R[K+1]*N:C.length;W-=Math.abs(q(C,Se,Ee,N))}var Ze=0;for(K=0;K<D.length;K+=3){var ye=D[K]*N,de=D[K+1]*N,$e=D[K+2]*N;Ze+=Math.abs((C[ye]-C[$e])*(C[de+1]-C[ye+1])-(C[ye]-C[de])*(C[$e+1]-C[ye+1]))}return W===0&&Ze===0?0:Math.abs((Ze-W)/W)},e.flatten=function(C){for(var R=C[0][0].length,N={vertices:[],holes:[],dimensions:R},D=0,z=0;z<C.length;z++){for(var G=0;G<C[z].length;G++)for(var W=0;W<R;W++)N.vertices.push(C[z][G][W]);z>0&&(D+=C[z-1].length,N.holes.push(D))}return N},e},(HT=WT())!==void 0&&(GT.exports=HT);const ZR=WM(bx.exports);function E1(e,t=!1){return e<=xs?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function Jq(e){return(Jh(e)?e.length:e.byteLength/8)<=xs?Array.from(e):new Float64Array(e)}function Zq(e,t,n){return Array.isArray(e)?e.slice(t,t+n):e.subarray(t,t+n)}function Yq(e,t){for(let n=0;n<t.length;++n)e[n]=t[n];return e}function Sve(e){return Array.isArray(e)?new Float64Array(e):e}function s0(e){if(Jh(e)){if(e.length<xs)return e}else if(e.length<xs)return Array.from(e);let t=!0,n=!0;return e.some((r,i)=>(t=t&&r===0,n=n&&r===i,!t&&!n)),t?XR(e.length):n?KR(e.length):Jh(e)||e.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?Kq(e):e}function Kq(e){let t=!0;for(const n of e){if(n>=65536)return Jh(e)?new Uint32Array(e):e;n>=256&&(t=!1)}return t?new Uint8Array(e):new Uint16Array(e)}function Xq(e){return e<=xs?new Array(e):e<=65536?new Uint16Array(e):new Uint32Array(e)}function _ve(e){return e<=xs?new Array(e):new Uint32Array(e)}let Nu=(()=>{const e=new Uint32Array(131072);for(let t=0;t<e.length;++t)e[t]=t;return e})();const YR=[0],$w=(()=>{const e=new Uint16Array(65536);for(let t=0;t<e.length;++t)e[t]=t;return e})();function KR(e){if(e===1)return YR;if(e<xs)return Array.from(new Uint16Array($w.buffer,0,e));if(e<$w.length)return new Uint16Array($w.buffer,0,e);if(e>Nu.length){const t=Math.max(2*Nu.length,e);Nu=new Uint32Array(t);for(let n=0;n<Nu.length;n++)Nu[n]=n}return new Uint32Array(Nu.buffer,0,e)}let Am=new Uint8Array(65536);function XR(e){if(e===1)return YR;if(e<xs)return new Array(e).fill(0);if(e>Am.length){const t=Math.max(2*Am.length,e);Am=new Uint8Array(t)}return new Uint8Array(Am.buffer,0,e)}function qT(e,t,n){const r=Array.isArray(e),i=r?e.length/t:e.byteLength/(4*t),s=r?e:new Uint32Array(e,0,i*t),o=(n==null?void 0:n.minReduction)??0,a=(n==null?void 0:n.originalIndices)||null,l=a?a.length:0,c=(n==null?void 0:n.componentOffsets)||null;let u=0;if(c)for(let $=0;$<c.length-1;$++){const T=c[$+1]-c[$];T>u&&(u=T)}else u=i;const h=Math.floor(1.1*u)+1;(Gi==null||Gi.length<2*h)&&(Gi=new Uint32Array(eH(2*h)));for(let $=0;$<2*h;$++)Gi[$]=0;let f=0;const d=!!c&&!!a,g=d?l:i;let y=Xq(i);const w=new Uint32Array(l),v=1.96;let x=o!==0?Math.ceil(4*v*v/(o*o)*o*(1-o)):g,S=1,_=c?c[1]:g;for(let $=0;$<g;$++){if($===x){const P=1-f/$;if(P+v*Math.sqrt(P*(1-P)/$)<o)return null;x*=2}if($===_){for(let P=0;P<2*h;P++)Gi[P]=0;if(a)for(let P=c[S-1];P<c[S];P++)w[P]=y[a[P]];_=c[++S]}const T=d?a[$]:$,A=T*t,I=tJ(s,A,t);let E=I%h,O=f;for(;Gi[2*E+1]!==0;){if(Gi[2*E]===I){const P=Gi[2*E+1]-1;if(Qq(s,A,P*t,t)){O=y[P];break}}E++,E>=h&&(E-=h)}O===f&&(Gi[2*E]=I,Gi[2*E+1]=T+1,f++),y[T]=O}if(o!==0&&1-f/i<o)return null;if(d){for(let $=c[S-1];$<w.length;$++)w[$]=y[a[$]];y=s0(w)}const M=r?new Array(f):new Uint32Array(f*t);f=0;for(let $=0;$<g;$++)y[$]===f&&(eJ(s,(d?a[$]:$)*t,M,f*t,t),f++);if(a&&!d){const $=new Uint32Array(l);for(let T=0;T<$.length;T++)$[T]=y[a[T]];y=s0($)}return{buffer:Array.isArray(M)?M:M.buffer,indices:y,uniqueCount:f}}function Qq(e,t,n,r){for(let i=0;i<r;i++)if(e[t+i]!==e[n+i])return!1;return!0}function eJ(e,t,n,r,i){for(let s=0;s<i;s++)n[r+s]=e[t+s]}function tJ(e,t,n){let r=0;for(let i=0;i<n;i++)r=e[t+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let Gi=null;var wx;function JT(e){return(t,n)=>t==null?n:n==null?t:e(t,n)}function nJ(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Go=wx=class extends xo{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){var i;if(!e&&!t)return{};const n={};Array.isArray(e)?(n.points=e,n.spatialReference=t):nJ(e)?n.spatialReference=e:(e.points&&(n.points=e.points),e.spatialReference&&(n.spatialReference=e.spatialReference),e.hasZ&&(n.hasZ=e.hasZ),e.hasM&&(n.hasM=e.hasM));const r=(i=n.points)==null?void 0:i[0];return r&&(n.hasZ===void 0&&n.hasM===void 0?(n.hasZ=r.length>2,n.hasM=!1):n.hasZ===void 0?n.hasZ=r.length>3:n.hasM===void 0&&(n.hasM=r.length>3)),n}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new Me,n=this.hasZ,r=this.hasM,i=n?3:2,s=e[0],o=JT(Math.min),a=JT(Math.max);let l,c,u,h,[f,d]=s,[g,y]=s;for(let w=0,v=e.length;w<v;w++){const x=e[w],[S,_]=x;if(f=o(f,S),d=o(d,_),g=a(g,S),y=a(y,_),n&&x.length>2){const M=x[2];l=o(l,M),u=a(u,M)}if(r&&x.length>i){const M=x[i];c=o(c,M),h=a(h,M)}}return t.xmin=f,t.ymin=d,t.xmax=g,t.ymax=y,t.spatialReference=this.spatialReference,n?(t.zmin=l,t.zmax=u):(t.zmin=void 0,t.zmax=void 0),r?(t.mmin=c,t.mmax=h):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=J(this.points)}addPoint(e){return sf(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:J(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new wx(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],n={x:t[0],y:t[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(n.z=t[2],r=3),this.hasM&&(n.m=t[r]),new ce(n)}removePoint(e){if(!this._validateInputs(e))return null;const t=new ce(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(sf(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};p([b({readOnly:!0})],Go.prototype,"cache",null),p([b()],Go.prototype,"extent",null),p([b({type:[[Number]],json:{write:{isRequired:!0}}})],Go.prototype,"points",void 0),p([xe("points")],Go.prototype,"writePoints",null),Go=wx=p([L("esri.geometry.Multipoint")],Go),Go.prototype.toJSON.isDefaultToJSON=!0;const W2=Go;var vx;function rJ(e){return!Array.isArray(e[0])}let Wo=vx=class extends xo{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){var o,a;let n,r,i=null,s=null;return e&&!Array.isArray(e)?(i=e.paths??null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),n=e.hasZ,r=e.hasM):i=e,i=i||[],t=t||we.WGS84,i.length&&((o=i[0])==null?void 0:o[0])!=null&&typeof i[0][0]=="number"&&(i=[i]),s=(a=i[0])==null?void 0:a[0],s&&(n===void 0&&r===void 0?(n=s.length>2,r=!1):n===void 0?n=!r&&s.length>3:r===void 0&&(r=!n&&s.length>3)),{paths:i,spatialReference:t,hasZ:n,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=MR(this);if(!t)return null;const n=new Me(t);return n.spatialReference=e,n}writePaths(e,t){t.paths=J(this.paths)}addPath(e){if(!e)return;const t=this.paths,n=t.length;if(rJ(e)){const r=[];for(let i=0,s=e.length;i<s;i++)r[i]=e[i].toArray();t[n]=r}else t[n]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new vx;return e.spatialReference=this.spatialReference,e.paths=J(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const n=this.paths[e][t],r=this.hasZ,i=this.hasM;return r&&!i?new ce(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new ce(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new ce(n[0],n[1],n[2],n[3],this.spatialReference):new ce(n[0],n[1],this.spatialReference)}insertPoint(e,t,n){return this._validateInputs(e,t,!0)?(sf(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e].splice(t,0,n),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],n=this.spatialReference,r=t.map(i=>new ce(i,n));return this.notifyChange("paths"),r}removePoint(e,t){if(!this._validateInputs(e,t))return null;const n=new ce(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),n}setPoint(e,t,n){return this._validateInputs(e,t)?(sf(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[e][t]=n,this.notifyChange("paths"),this):this}_validateInputs(e,t,n=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const r=this.paths[e];if(n&&(t<0||t>r.length)||!n&&(t<0||t>=r.length))return!1}return!0}toJSON(e){return this.write({},e)}};p([b({readOnly:!0})],Wo.prototype,"cache",null),p([b({readOnly:!0})],Wo.prototype,"extent",null),p([b({type:[[[Number]]],json:{write:{isRequired:!0}}})],Wo.prototype,"paths",void 0),p([xe("paths")],Wo.prototype,"writePaths",null),Wo=vx=p([L("esri.geometry.Polyline")],Wo),Wo.prototype.toJSON.isDefaultToJSON=!0;const Ii=Wo,Mve=yn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),$ve=yn()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function QR(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function e8(e){return e.points!==void 0}function t8(e){return e.x!==void 0&&e.y!==void 0}function n8(e){return e.paths!==void 0}function Lh(e){return e.rings!==void 0}function $f(e){return e==null?null:e instanceof xo?e:t8(e)?ce.fromJSON(e):n8(e)?Ii.fromJSON(e):Lh(e)?ii.fromJSON(e):e8(e)?W2.fromJSON(e):QR(e)?Me.fromJSON(e):null}function H2(e){return e?t8(e)?"esriGeometryPoint":n8(e)?"esriGeometryPolyline":Lh(e)?"esriGeometryPolygon":QR(e)?"esriGeometryEnvelope":e8(e)?"esriGeometryMultipoint":null:null}const iJ={esriGeometryPoint:ce,esriGeometryPolyline:Ii,esriGeometryPolygon:ii,esriGeometryEnvelope:Me,esriGeometryMultipoint:W2};function sJ(e){return e&&iJ[e]||null}const q2={base:xo,key:"type",typeMap:{extent:Me,multipoint:W2,point:ce,polyline:Ii,polygon:ii}};Jc(q2);function B0(){return[0,0,0,0]}function oJ(e){return[e[0],e[1],e[2],e[3]]}function _o(e,t,n,r){return[e,t,n,r]}function aJ(e,t=B0()){const n=Math.min(4,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function r8(e,t){return new Float64Array(e,t,4)}function i8(){return B0()}function s8(){return _o(1,1,1,1)}function o8(){return _o(1,0,0,0)}function a8(){return _o(0,1,0,0)}function l8(){return _o(0,0,1,0)}function c8(){return _o(0,0,0,1)}const lJ=i8(),cJ=s8(),uJ=o8(),hJ=a8(),fJ=l8(),dJ=c8();Object.freeze(Object.defineProperty({__proto__:null,ONES:cJ,UNIT_W:dJ,UNIT_X:uJ,UNIT_Y:hJ,UNIT_Z:fJ,ZEROS:lJ,clone:oJ,create:B0,createView:r8,fromArray:aJ,fromValues:_o,ones:s8,unitW:c8,unitX:o8,unitY:a8,unitZ:l8,zeros:i8},Symbol.toStringTag,{value:"Module"}));let J2=class{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return this._itemsPtr===0&&Zh(()=>this._reset()),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*ZT);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,ZT));t++)this._items.push(this._allocator())}};const ZT=1024;var C1;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(C1||(C1={}));function Z2(){return[0,0]}function pJ(e){return[e[0],e[1]]}function Y2(e,t){return[e,t]}function mJ(e,t=Z2()){const n=Math.min(2,e.length);for(let r=0;r<n;++r)t[r]=e[r];return t}function u8(e,t){return new Float64Array(e,t,2)}function h8(){return Z2()}function f8(){return Y2(1,1)}function d8(){return Y2(1,0)}function p8(){return Y2(0,1)}const gJ=h8(),yJ=f8(),bJ=d8(),wJ=p8();Object.freeze(Object.defineProperty({__proto__:null,ONES:yJ,UNIT_X:bJ,UNIT_Y:wJ,ZEROS:gJ,clone:pJ,create:Z2,createView:u8,fromArray:mJ,fromValues:Y2,ones:f8,unitX:d8,unitY:p8,zeros:h8},Symbol.toStringTag,{value:"Module"}));let Tf=class _l{constructor(t,n,r){this._itemByteSize=t,this._itemCreate=n,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(r/this._itemByteSize)}get(){this._itemsPtr===0&&Zh(()=>this._reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const n=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let r=0;r<this._itemsPerBuffer;++r)this._items.push(this._itemCreate(n,r*this._itemByteSize));this._buffers.push(n)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=Du){return new _l(16,u8,t)}static createVec3f64(t=Du){return new _l(24,C6,t)}static createVec4f64(t=Du){return new _l(32,r8,t)}static createMat3f64(t=Du){return new _l(72,$R,t)}static createMat4f64(t=Du){return new _l(128,JR,t)}static createQuatf64(t=Du){return new _l(32,TR,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}};const Du=4*C1.KILOBYTES,Ave=Tf.createVec2f64(),et=Tf.createVec3f64(),vJ=Tf.createVec4f64();Tf.createMat3f64();const xJ=Tf.createMat4f64(),Ive=Tf.createQuatf64();function K2(e){return e?YT(Pr(e.origin),Pr(e.direction)):YT(ue(),ue())}function YT(e,t){return{origin:e,direction:t}}function kve(e,t){return Hc(e.origin,t.origin)&&Hc(e.direction,t.direction)}function Eve(e,t){const n=$J.get();return n.origin=e,n.direction=t,n}function Cve(e,t=K2()){return _J(e.origin,e.direction,t)}function SJ(e,t,n=K2()){return Sr(n.origin,e),rt(n.direction,t,e),n}function _J(e,t,n=K2()){return Sr(n.origin,e),Sr(n.direction,t),n}function Ove(e,t){const n=Wn(et.get(),Lt(et.get(),e.direction),rt(et.get(),t,e.origin));return at(n,n)}function MJ(e,t,n){const r=at(e.direction,rt(n,t,e.origin));return ut(n,e.origin,nt(n,e.direction,r)),n}const $J=new J2(()=>K2());function Pve(e,t,n){const r=at(e,t)/at(e,e);return nt(n,e,r)}function Tw(e,t){return at(e,t)/qn(e)}function TJ(e,t){const n=at(e,t)/(qn(e)*qn(t));return-B2(n)}function Rve(e,t,n){Lt(Im,e),Lt(Aw,t);const r=at(Im,Aw),i=B2(r),s=Wn(Im,Im,Aw);return at(s,n)<0?2*Math.PI-i:i}const Im=ue(),Aw=ue(),AJ=U0();function U0(){return B0()}const IJ=F0,kJ=F0;function m8(e,t=U0()){return n0(t,e)}function EJ(e,t){return _o(e[0],e[1],e[2],t)}function CJ(e){return e}function OJ(e){e[0]=e[1]=e[2]=e[3]=0}function PJ(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e}function X2(e){return e[3]}function RJ(e){return e}function NJ(e,t,n,r){return _o(e,t,n,r)}function DJ(e,t,n){return e!==n&&Sr(n,e),n[3]=e[3]+t,n}function LJ(e,t,n){return ie.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),e===n?n:m8(e,n)}function Q2(e,t,n){if(t==null||!g8(e,t,O1))return!1;let{t0:r,t1:i}=O1;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(n){const{origin:s,direction:o}=t;n[0]=s[0]+o[0]*r,n[1]=s[1]+o[1]*r,n[2]=s[2]+o[2]*r}return!0}function FJ(e,t,n){const r=SJ(t,n);if(!g8(e,r,O1))return[];const{origin:i,direction:s}=r,{t0:o,t1:a}=O1,l=c=>{const u=ue();return H6(u,i,s,c),HM(e,u,u)};return Math.abs(o-a)<Zn()?[l(o)]:[l(o),l(a)]}const O1={t0:0,t1:0};function g8(e,t,n){const{origin:r,direction:i}=t,s=jJ;s[0]=r[0]-e[0],s[1]=r[1]-e[1],s[2]=r[2]-e[2];const o=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(o===0)return!1;const a=2*(i[0]*s[0]+i[1]*s[1]+i[2]*s[2]),l=a*a-4*o*(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]-e[3]*e[3]);if(l<0)return!1;const c=Math.sqrt(l);return n.t0=(-a-c)/(2*o),n.t1=(-a+c)/(2*o),!0}const jJ=ue();function zJ(e,t){return Q2(e,t,null)}function BJ(e,t,n){if(Q2(e,t,n))return n;const r=y8(e,t,et.get());return ut(n,t.origin,nt(et.get(),t.direction,z2(t.origin,r)/qn(t.direction))),n}function y8(e,t,n){const r=et.get(),i=xJ.get();Wn(r,t.origin,t.direction);const s=X2(e);Wn(n,r,t.origin),nt(n,n,1/qn(n)*s);const o=b8(e,t.origin),a=TJ(t.origin,n);return GM(i,a+o,r),nf(n,n,i),n}function UJ(e,t,n){return Q2(e,t,n)?n:(MJ(t,e,n),HM(e,n,n))}function HM(e,t,n){const r=rt(et.get(),t,e),i=nt(et.get(),r,e[3]/qn(r));return ut(n,i,e)}function VJ(e,t){const n=rt(et.get(),t,e),r=L0(n),i=e[3]*e[3];return Math.sqrt(Math.abs(r-i))}function b8(e,t){const n=rt(et.get(),t,e),r=qn(n),i=X2(e),s=i+Math.abs(i-r);return B2(i/s)}const Iw=ue();function w8(e,t,n,r){const i=rt(Iw,t,e);switch(n){case Zt.X:{const s=NT(i,Iw)[2];return kt(r,-Math.sin(s),Math.cos(s),0)}case Zt.Y:{const s=NT(i,Iw),o=s[1],a=s[2],l=Math.sin(o);return kt(r,-l*Math.cos(a),-l*Math.sin(a),Math.cos(o))}case Zt.Z:return Lt(r,i);default:return}}function v8(e,t){const n=rt(xx,t,e);return qn(n)-e[3]}function GJ(e,t,n,r){const i=v8(e,t),s=w8(e,t,Zt.Z,xx),o=nt(xx,s,n-i);return ut(r,t,o)}function WJ(e,t){const n=ru(e,t),r=X2(e);return n<=r*r}function HJ(e,t,n=U0()){const r=z2(e,t),i=e[3],s=t[3];return r+s<i?(n0(n,e),n):r+i<s?(n0(n,t),n):(tf(n,e,t,(r+s-i)/(2*r)),n[3]=(r+i+s)/2,n)}const xx=ue(),qJ=U0(),Nve=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:AJ,altitudeAt:v8,angleToSilhouette:b8,axisAt:w8,clear:OJ,closestPoint:UJ,closestPointOnSilhouette:y8,containsPoint:WJ,copy:m8,create:U0,distanceToSilhouette:VJ,elevate:DJ,equals:kJ,exactEquals:IJ,fromCenterAndRadius:EJ,fromRadius:PJ,fromValues:NJ,getCenter:RJ,getRadius:X2,intersectLine:FJ,intersectRay:Q2,intersectRayClosestSilhouette:BJ,intersectsRay:zJ,projectPoint:HM,setAltitudeAt:GJ,setExtent:LJ,tmpSphere:qJ,union:HJ,wrap:CJ},Symbol.toStringTag,{value:"Module"}));function Dve(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],n=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],r=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}function Lve(e,t){const n=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),r=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),i=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return kt(e,n,r,i),e}function Fve(e,t,n){n=n||e;const r=at(e,t);kt(n,e[0]-r*t[0],e[1]-r*t[1],e[2]-r*t[2]),Lt(n,n)}function JJ(e,t,n){Math.abs(e[0])>Math.abs(e[1])?kt(t,0,1,0):kt(t,1,0,0),Wn(n,e,t),Lt(t,t),Wn(t,n,e),Lt(n,n)}function jve(e,t,n,r,i,s){const o=e+(t-e)*i;return o+(n+(r-n)*i-o)*s}function zve(e,t,n,r=ue()){const i=qn(e),s=qn(t),o=at(e,t)/(i*s);if(o<.9999999999999999){const a=Math.acos(o),l=((1-n)*i+n*s)/Math.sin(a),c=l/i*Math.sin((1-n)*a),u=l/s*Math.sin(n*a);return nt(xc,e,c),nt(Sc,t,u),ut(r,xc,Sc)}return tf(r,e,t,n)}function Bve(e,t,n,r=ue(),i=ue()){const s=qn(e),o=qn(t),a=at(e,t)/(s*o);if(a<.9999999999999999){const l=Math.acos(a),c=Math.sin(l),u=Math.sin(n*l),h=Math.sin((1-n)*l),f=(1-n)*s+n*o;{const d=f/c,g=d/o*u;nt(xc,e,d/s*h),nt(Sc,t,g),ut(r,xc,Sc)}{const d=1/s*(-Math.cos((1-n)*l)*l*f+h*(-s+o));nt(xc,e,d);const g=1/o*(Math.cos(n*l)*l*f+u*(-s+o));nt(Sc,t,g),ut(i,xc,Sc),nt(i,i,1/c)}return i}return tf(r,e,t,n),rt(i,t,e),Lt(i,i),i}function Uve(e,t,n){e=Lt(xc,e),t=Lt(Sc,t);const r=B2(at(e,t));if(n){const i=Wn(ZJ,e,t);if(at(i,n)<0)return-r}return r}function Vve(e){const t=e.length;return n=>{if(n<=e[0][0])return e[0][1];if(n>=e[t-1][0])return e[t-1][1];let r=1;for(;n>e[r][0];)r++;const i=e[r-1][0],s=e[r][0],o=(s-n)/(s-i);return o*e[r-1][1]+(1-o)*e[r][1]}}function Gve(e,t,n,r){rt(KT,t,e),rt(XT,n,e),Wn(r,KT,XT),Lt(r,r),r[3]=-at(e,r)}const KT=ue(),XT=ue(),ZJ=ue(),xc=ue(),Sc=ue();function qM(e=bd){return[e[0],e[1],e[2],e[3]]}function Wve(e=bd[0],t=bd[1],n=bd[2],r=bd[3]){return x8(e,t,n,r,vJ.get())}function YJ(e,t){return x8(t[0],t[1],t[2],t[3],e)}function x8(e,t,n,r,i=qM()){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function Hve(e,t,n){return Sr(n,e),n[3]=t,n}function KJ(e,t,n){const r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[3]=-(n[0]*e[0]+n[1]*e[1]+n[2]*e[2]),n}function XJ(e,t,n,r=qM()){const i=n[0]-t[0],s=n[1]-t[1],o=n[2]-t[2],a=e[0]-t[0],l=e[1]-t[1],c=e[2]-t[2],u=s*c-o*l,h=o*a-i*c,f=i*l-s*a,d=u*u+h*h+f*f,g=Math.abs(d-1)>1e-5&&d>1e-12?1/Math.sqrt(d):1;return r[0]=u*g,r[1]=h*g,r[2]=f*g,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),r}function JM(e,t,n,r=0,i=Math.floor(n*(1/3)),s=Math.floor(n*(2/3))){if(n<3)return!1;t(Wf,r);let o=i,a=!1;for(;o<n-1&&!a;)t(Lu,o),o++,a=!vp(Wf,Lu);if(!a)return!1;for(o=Math.max(o,s),a=!1;o<n&&!a;)t(mc,o),o++,rt(km,Wf,Lu),Lt(km,km),rt(Em,Lu,mc),Lt(Em,Em),a=!vp(Wf,mc)&&!vp(Lu,mc)&&Math.abs(at(km,Em))<QJ;return a?(XJ(Wf,Lu,mc,e),!0):(r!==0||i!==1||s!==2)&&JM(e,t,n,0,1,2)}function qve(e,t,n=!0){const r=t.length/3;return JM(e,(i,s)=>kt(i,t[3*s+0],t[3*s+1],t[3*s+2]),n?r-1:r)}const QJ=.99619469809,Wf=ue(),Lu=ue(),mc=ue(),km=ue(),Em=ue();function Jve(e,t,n){return t!==e&&YJ(e,t),e[3]=-at(e,n),e}function Zve(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Yve(e,t,n,r){return Wn(mc,t,e),KJ(n,mc,r)}function Kve(e,t,n,r){return tb(e,t,rt(et.get(),n,t),tZ,r)}function Xve(e,t,n){return t!=null&&tb(e,t.origin,t.direction,nZ,n)}function Qve(e,t,n){return tb(e,t.origin,t.vector,bs.NONE,n)}function exe(e,t,n){return tb(e,t.origin,t.vector,bs.CLAMP,n)}const txe=(()=>{const e=ue();return(t,n,r)=>{const i=t,s=n;if(Wn(e,i,s),L0(e)<Zn())return!1;Lt(e,e);const[o,a,l]=e,c=r.origin,u=Math.abs(o),h=Math.abs(a),f=Math.abs(l),[d,g,y]=i,[w,v,x]=s,S=t[3],_=n[3];return u>h&&u>f?(c[1]=(_*y-S*x)/o,c[2]=(S*v-_*g)/o):h>f?(c[0]=(S*x-_*y)/a,c[2]=(_*d-S*w)/a):(c[0]=(_*g-S*v)/l,c[1]=(S*w-_*d)/l),Sr(r.direction,e),!0}})();function nxe(e,t){return eb(e,t)>=0}function rxe(e,t){const n=at(e,t.ray.direction),r=-eb(e,t.ray.origin);if(r<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return r>0;if((r<0||n<0)&&!(r<0&&n<0))return!0;const i=r/n;return n>0?i<t.c1&&(t.c1=i):i>t.c0&&(t.c0=i),t.c0<=t.c1}function ixe(e,t){const n=at(e,t.ray.direction),r=-eb(e,t.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;const i=r/n;return n>0?i<t.c1&&(t.c1=i):i>t.c0&&(t.c0=i),t.c0<=t.c1}function sxe(e,t,n){const r=nt(et.get(),e,-e[3]),i=eZ(e,rt(et.get(),t,r),et.get());return ut(n,i,r),n}function oxe(e,t,n,r){const i=e,s=et.get(),o=et.get();JJ(i,s,o);const a=rt(et.get(),n,t),l=Tw(s,a),c=Tw(o,a),u=Tw(i,a);return kt(r,l,c,u)}function eZ(e,t,n){const r=nt(et.get(),e,at(e,t));return rt(n,t,r),n}function axe(e,t){return Math.abs(eb(e,t))}function eb(e,t){return at(e,t)+e[3]}function tb(e,t,n,r,i){const s=at(e,n);if(s===0)return!1;let o=-(at(e,t)+e[3])/s;return r&bs.CLAMP&&(o=Un(o,0,1)),!(!(r&bs.INFINITE_MIN)&&o<0||!(r&bs.INFINITE_MAX)&&o>1)&&(ut(i,t,nt(i,n,o)),!0)}function lxe(e){return e}function cxe(e){return Math.abs(e[2])<Zn()}const bd=[0,0,1,0];var bs;(function(e){e[e.NONE=0]="NONE",e[e.CLAMP=1]="CLAMP",e[e.INFINITE_MIN=4]="INFINITE_MIN",e[e.INFINITE_MAX=8]="INFINITE_MAX"})(bs||(bs={}));const tZ=bs.INFINITE_MIN|bs.INFINITE_MAX,nZ=bs.INFINITE_MAX;let rZ=class{constructor(t,n,r=n){this.data=t,this.size=n,this.stride=r}},gc=class extends rZ{constructor(t,n,r,i=!1,s=r){super(t,r,s),this.indices=n,this.exclusive=i}};var _a;(function(e){e[e.Layer=0]="Layer",e[e.Object=1]="Object",e[e.Mesh=2]="Mesh",e[e.Line=3]="Line",e[e.Point=4]="Point",e[e.Material=5]="Material",e[e.Texture=6]="Texture",e[e.COUNT=7]="COUNT"})(_a||(_a={}));function iZ(e){if(e.length<xs)return Array.from(e);if(Jh(e))return Float64Array.from(e);if(!("BYTES_PER_ELEMENT"in e))return Array.from(e);switch(e.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(e);case 2:return J5(e)?Uint16Array.from(e):Int16Array.from(e);case 4:return Float32Array.from(e);default:return Float64Array.from(e)}}var QT,eA,tA,nA,rA,Sx,iA,sA,oA;(function(e){e[e.None=0]="None",e[e.Front=1]="Front",e[e.Back=2]="Back",e[e.COUNT=3]="COUNT"})(QT||(QT={})),function(e){e[e.Less=0]="Less",e[e.Lequal=1]="Lequal",e[e.COUNT=2]="COUNT"}(eA||(eA={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.UPDATE=1]="UPDATE"}(tA||(tA={})),function(e){e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(nA||(nA={})),function(e){e[e.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",e[e.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(rA||(rA={})),function(e){e[e.Highlight=0]="Highlight",e[e.MaskOccludee=1]="MaskOccludee",e[e.COUNT=2]="COUNT"}(Sx||(Sx={})),function(e){e[e.Blend=0]="Blend",e[e.Opaque=1]="Opaque",e[e.Mask=2]="Mask",e[e.MaskBlend=3]="MaskBlend",e[e.COUNT=4]="COUNT"}(iA||(iA={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(sA||(sA={})),function(e){e.DDS_ENCODING="image/vnd-ms.dds",e.KTX2_ENCODING="image/ktx2",e.BASIS_ENCODING="image/x.basis"}(oA||(oA={}));const An=B0();let sZ=class{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}};function vh(e,t){if(!e){t=t||"Assertion";const n=new Error(t).stack;throw new sZ(`${t} at ${n}`)}}function dxe(e,t){e||(t=t||"",console.warn("Verify failed: "+t+`
`+new Error("verify").stack))}function pxe(e,t,n,r){let i,s=(n[0]-e[0])/t[0],o=(r[0]-e[0])/t[0];s>o&&(i=s,s=o,o=i);let a=(n[1]-e[1])/t[1],l=(r[1]-e[1])/t[1];if(a>l&&(i=a,a=l,l=i),s>l||a>o)return!1;a>s&&(s=a),l<o&&(o=l);let c=(n[2]-e[2])/t[2],u=(r[2]-e[2])/t[2];return c>u&&(i=c,c=u,u=i),!(s>u||c>o)&&(u<o&&(o=u),!(o<0))}function mxe(e,t,n,r,i,s=Z2()){const o=(r[i]-n[i])*(t[0]-e[0])-(r[0]-n[0])*(t[i]-e[i]),a=(r[0]-n[0])*(e[i]-n[i])-(r[i]-n[i])*(e[0]-n[0]);if(o===0)return!1;const l=a/o;return s[0]=e[0]+l*(t[0]-e[0]),s[1]=e[i]+l*(t[i]-e[i]),!0}function gxe(e,t,n,r,i){An[0]=e[0],An[1]=e[1],An[2]=e[2],An[3]=1,cx(An,An,t),i.length>2&&(i[2]=-An[2]),cx(An,An,n),vh(An[3]!==0),i[0]=An[0]/An[3],i[1]=An[1]/An[3],i[2]=An[2]/An[3],i[0]=(.5*i[0]+.5)*r[2]+r[0],i[1]=(.5*i[1]+.5)*r[3]+r[1]}function yxe(e,t){return Math.log(e)/Math.log(t)}function bxe(e,t,n,r){e[12]=t,e[13]=n,e[14]=r}function wxe(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[7]===0&&e[8]===0&&e[9]===0&&e[10]===1&&e[11]===0&&e[15]===1}let oZ=class S8{constructor(t,n,r){this.primitiveIndices=t,this._numIndexPerPrimitive=n,this.position=r,this._children=void 0,vh(t.length>=1),vh(r.size===3||r.size===4);const{data:i,size:s,indices:o}=r;vh(o.length%this._numIndexPerPrimitive==0),vh(o.length>=t.length*this._numIndexPerPrimitive);const a=t.length;let l=s*o[this._numIndexPerPrimitive*t[0]];hl.clear(),hl.push(l);const c=Fr(i[l],i[l+1],i[l+2]),u=Pr(c);for(let d=0;d<a;++d){const g=this._numIndexPerPrimitive*t[d];for(let y=0;y<this._numIndexPerPrimitive;++y){l=s*o[g+y],hl.push(l);let w=i[l];c[0]=Math.min(w,c[0]),u[0]=Math.max(w,u[0]),w=i[l+1],c[1]=Math.min(w,c[1]),u[1]=Math.max(w,u[1]),w=i[l+2],c[2]=Math.min(w,c[2]),u[2]=Math.max(w,u[2])}}this.bbMin=c,this.bbMax=u;const h=tf(ue(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(u[0]-c[0],u[1]-c[1]),u[2]-c[2]);let f=this.radius*this.radius;for(let d=0;d<hl.length;++d){l=hl.at(d);const g=i[l]-h[0],y=i[l+1]-h[1],w=i[l+2]-h[2],v=g*g+y*y+w*w;if(v<=f)continue;const x=Math.sqrt(v),S=.5*(x-this.radius);this.radius=this.radius+S,f=this.radius*this.radius;const _=S/x;h[0]+=g*_,h[1]+=y*_,h[2]+=w*_}this.center=h,hl.clear()}getChildren(){if(this._children||ru(this.bbMin,this.bbMax)<=1)return this._children;const t=tf(ue(),this.bbMin,this.bbMax,.5),n=this.primitiveIndices.length,r=new Uint8Array(n),i=new Array(8);for(let u=0;u<8;++u)i[u]=0;const{data:s,size:o,indices:a}=this.position;for(let u=0;u<n;++u){let h=0;const f=this._numIndexPerPrimitive*this.primitiveIndices[u];let d=o*a[f],g=s[d],y=s[d+1],w=s[d+2];for(let v=1;v<this._numIndexPerPrimitive;++v){d=o*a[f+v];const x=s[d],S=s[d+1],_=s[d+2];x<g&&(g=x),S<y&&(y=S),_<w&&(w=_)}g<t[0]&&(h|=1),y<t[1]&&(h|=2),w<t[2]&&(h|=4),r[u]=h,++i[h]}let l=0;for(let u=0;u<8;++u)i[u]>0&&++l;if(l<2)return;const c=new Array(8);for(let u=0;u<8;++u)c[u]=i[u]>0?new Uint32Array(i[u]):void 0;for(let u=0;u<8;++u)i[u]=0;for(let u=0;u<n;++u){const h=r[u];c[h][i[h]++]=this.primitiveIndices[u]}this._children=new Array;for(let u=0;u<8;++u)c[u]!==void 0&&this._children.push(new S8(c[u],this._numIndexPerPrimitive,this.position));return this._children}static prune(){hl.prune()}};const hl=new Yh({deallocator:null});let aZ=class{constructor(){this.id=Oc()}};function V0(e){return e?{origin:Pr(e.origin),vector:Pr(e.vector)}:{origin:ue(),vector:ue()}}function lZ(e,t){const n=hZ.get();return n.origin=e,n.vector=t,n}function xxe(e,t=V0()){return cZ(e.origin,e.vector,t)}function cZ(e,t,n=V0()){return Sr(n.origin,e),Sr(n.vector,t),n}function Sxe(e,t,n=V0()){return Sr(n.origin,e),rt(n.vector,t,e),n}function _xe(e,t){const n=rt(et.get(),t,e.origin),r=at(e.vector,n),i=at(e.vector,e.vector),s=Un(r/i,0,1),o=rt(et.get(),nt(et.get(),e.vector,s),n);return at(o,o)}function Mxe(e,t,n){return uZ(e,t,0,1,n)}function $xe(e,t,n){return ut(n,e.origin,nt(n,e.vector,t))}function uZ(e,t,n,r,i){const{vector:s,origin:o}=e,a=rt(et.get(),t,o),l=at(s,a)/L0(s);return nt(i,s,Un(l,n,r)),ut(i,i,e.origin)}function Txe(e,t){if(_8(e,lZ(t.origin,t.direction),!1,P1)){const{tA:n,pB:r,distance2:i}=P1;if(n>=0&&n<=1)return i;if(n<0)return ru(e.origin,r);if(n>1)return ru(ut(et.get(),e.origin,e.vector),r)}return null}function Axe(e,t,n){return!!_8(e,t,!0,P1)&&(Sr(n,P1.pA),!0)}function _8(e,t,n,r){const s=e.origin,o=ut(et.get(),s,e.vector),a=t.origin,l=ut(et.get(),a,t.vector),c=et.get(),u=et.get();if(c[0]=s[0]-a[0],c[1]=s[1]-a[1],c[2]=s[2]-a[2],u[0]=l[0]-a[0],u[1]=l[1]-a[1],u[2]=l[2]-a[2],Math.abs(u[0])<1e-6&&Math.abs(u[1])<1e-6&&Math.abs(u[2])<1e-6)return!1;const h=et.get();if(h[0]=o[0]-s[0],h[1]=o[1]-s[1],h[2]=o[2]-s[2],Math.abs(h[0])<1e-6&&Math.abs(h[1])<1e-6&&Math.abs(h[2])<1e-6)return!1;const f=c[0]*u[0]+c[1]*u[1]+c[2]*u[2],d=u[0]*h[0]+u[1]*h[1]+u[2]*h[2],g=c[0]*h[0]+c[1]*h[1]+c[2]*h[2],y=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],w=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*y-d*d;if(Math.abs(w)<1e-6)return!1;let v=(f*d-g*y)/w,x=(f+d*v)/y;n&&(v=Un(v,0,1),x=Un(x,0,1));const S=et.get(),_=et.get();return S[0]=s[0]+v*h[0],S[1]=s[1]+v*h[1],S[2]=s[2]+v*h[2],_[0]=a[0]+x*u[0],_[1]=a[1]+x*u[1],_[2]=a[2]+x*u[2],r.tA=v,r.tB=x,r.pA=S,r.pB=_,r.distance2=ru(S,_),!0}const P1={tA:0,tB:0,pA:ue(),pB:ue(),distance2:0},hZ=new J2(()=>V0());function fZ(e){return e?{p0:Pr(e.p0),p1:Pr(e.p1),p2:Pr(e.p2)}:{p0:ue(),p1:ue(),p2:ue()}}function Ixe(e,t,n){const r=t[0]-e[0],i=t[1]-e[1],s=n[0]-e[0],o=n[1]-e[1];return .5*Math.abs(r*o-i*s)}function dZ(e,t,n){return rt(kw,t,e),rt(aA,n,e),qn(Wn(kw,kw,aA))/2}new J2(V0);new J2(()=>fZ());const kw=ue(),aA=ue();function pZ(e,t){if(!e)return!1;const{size:n,data:r,indices:i}=e;kt(t,0,0,0),kt(Yr,0,0,0);let s=0,o=0;for(let a=0;a<i.length-2;a+=3){const l=i[a]*n,c=i[a+1]*n,u=i[a+2]*n;kt(Ht,r[l],r[l+1],r[l+2]),kt(eo,r[c],r[c+1],r[c+2]),kt(Cm,r[u],r[u+1],r[u+2]);const h=dZ(Ht,eo,Cm);h?(ut(Ht,Ht,eo),ut(Ht,Ht,Cm),nt(Ht,Ht,1/3*h),ut(t,t,Ht),s+=h):(ut(Yr,Yr,Ht),ut(Yr,Yr,eo),ut(Yr,Yr,Cm),o+=3)}return(o!==0||s!==0)&&(s!==0?(nt(t,t,1/s),!0):o!==0&&(nt(t,Yr,1/o),!0))}function mZ(e,t){if(!e)return!1;const{size:n,data:r,indices:i}=e;kt(t,0,0,0);let s=-1,o=0;for(let a=0;a<i.length;a++){const l=i[a]*n;s!==l&&(t[0]+=r[l],t[1]+=r[l+1],t[2]+=r[l+2],o++),s=l}return o>1&&nt(t,t,1/o),o>0}function gZ(e,t,n){if(!e)return!1;kt(n,0,0,0),kt(Yr,0,0,0);let r=0,i=0;const{size:s,data:o,indices:a}=e,l=a.length-1,c=l+(t?2:0);for(let u=0;u<c;u+=2){const h=u<l?u+1:0,f=a[u<l?u:l]*s,d=a[h]*s;Ht[0]=o[f],Ht[1]=o[f+1],Ht[2]=o[f+2],eo[0]=o[d],eo[1]=o[d+1],eo[2]=o[d+2],nt(Ht,ut(Ht,Ht,eo),.5);const g=J6(Ht,eo);g>0?(ut(n,n,nt(Ht,Ht,g)),r+=g):r===0&&(ut(Yr,Yr,Ht),i++)}return r!==0?(nt(n,n,1/r),!0):i!==0&&(nt(n,Yr,1/i),!0)}const Ht=ue(),eo=ue(),Cm=ue(),Yr=ue();let yZ=class{constructor(t){this.channel=t,this.id=Oc()}};var er;function Exe(e){return e===er.POSITION}(function(e){e.POSITION="position",e.NORMAL="normal",e.NORMALCOMPRESSED="normalCompressed",e.UV0="uv0",e.AUXPOS1="auxpos1",e.AUXPOS2="auxpos2",e.COLOR="color",e.SYMBOLCOLOR="symbolColor",e.SIZE="size",e.TANGENT="tangent",e.OFFSET="offset",e.PERSPECTIVEDIVIDE="perspectiveDivide",e.SUBDIVISIONFACTOR="subdivisionFactor",e.COLORFEATUREATTRIBUTE="colorFeatureAttribute",e.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",e.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",e.DISTANCETOSTART="distanceToStart",e.UVMAPSPACE="uvMapSpace",e.BOUNDINGRECT="boundingRect",e.UVREGION="uvRegion",e.PROFILERIGHT="profileRight",e.PROFILEUP="profileUp",e.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",e.FEATUREVALUE="featureValue",e.INSTANCEMODELORIGINHI="instanceModelOriginHi",e.INSTANCEMODELORIGINLO="instanceModelOriginLo",e.INSTANCEMODEL="instanceModel",e.INSTANCEMODELNORMAL="instanceModelNormal",e.INSTANCECOLOR="instanceColor",e.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",e.LOCALTRANSFORM="localTransform",e.GLOBALTRANSFORM="globalTransform",e.BOUNDINGSPHERE="boundingSphere",e.MODELORIGIN="modelOrigin",e.MODELSCALEFACTORS="modelScaleFactors",e.FEATUREATTRIBUTE="featureAttribute",e.STATE="state",e.LODLEVEL="lodLevel",e.POSITION0="position0",e.POSITION1="position1",e.NORMALA="normalA",e.NORMALB="normalB",e.COMPONENTINDEX="componentIndex",e.VARIANTOFFSET="variantOffset",e.VARIANTSTROKE="variantStroke",e.VARIANTEXTENSION="variantExtension",e.SIDENESS="sideness",e.START="start",e.END="end",e.UP="up",e.EXTRUDE="extrude",e.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",e.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})(er||(er={}));function bZ(e,t,n){for(let r=0;r<n;++r)t[2*r]=e[r],t[2*r+1]=e[r]-t[2*r]}function Cxe(e,t){const n=e.length;for(let r=0;r<n;++r)xh[0]=e[r],t[r]=xh[0];return t}function Oxe(e,t){const n=e.length;for(let r=0;r<n;++r)xh[0]=e[r],xh[1]=e[r]-xh[0],t[r]=xh[1];return t}const xh=new Float32Array(2);function wZ(e,t){return e==null&&(e=[]),e.push(t),e}function vZ(e,t){if(e==null)return null;const n=e.filter(r=>r!==t);return n.length===0?null:n}function Pxe(e,t,n,r,i){Om[0]=e.get(t,0),Om[1]=e.get(t,1),Om[2]=e.get(t,2),bZ(Om,fl,3),n.set(i,0,fl[0]),r.set(i,0,fl[1]),n.set(i,1,fl[2]),r.set(i,1,fl[3]),n.set(i,2,fl[4]),r.set(i,2,fl[5])}const Om=ue(),fl=new Float32Array(6);let M8=class $8 extends aZ{constructor(t,n,r=null,i=_a.Mesh,s=null,o=-1){super(),this.material=t,this.mapPositions=r,this.type=i,this.objectAndLayerIdColor=s,this.edgeIndicesLength=o,this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[a,l]of n)this._attributes.set(a,{...l,indices:s0(l.indices)}),a===er.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(a).indices.length:this.edgeIndicesLength)}instantiate(t={}){const n=new $8(t.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach((r,i)=>{r.exclusive=!1,n._attributes.set(i,r)}),n._boundingInfo=this._boundingInfo,n.transformation=t.transformation||this.transformation,n}get attributes(){return this._attributes}getMutableAttribute(t){let n=this._attributes.get(t);return n&&!n.exclusive&&(n={...n,exclusive:!0,data:iZ(n.data)},this._attributes.set(t,n)),n}setAttributeData(t,n){const r=this._attributes.get(t);r&&this._attributes.set(t,{...r,exclusive:!0,data:n})}get indexCount(){const t=this._attributes.values().next().value.indices;return(t==null?void 0:t.length)??0}get faceCount(){return this.indexCount/3}get boundingInfo(){return this._boundingInfo==null&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return!!(this.type===_a.Mesh?this._computeAttachmentOriginTriangles(t):this.type===_a.Line?this._computeAttachmentOriginLines(t):this._computeAttachmentOriginPoints(t))&&(this._transformation!=null&&nf(t,t,this._transformation),!0)}_computeAttachmentOriginTriangles(t){const n=this.attributes.get(er.POSITION);return pZ(n,t)}_computeAttachmentOriginLines(t){const n=this.attributes.get(er.POSITION);return gZ(n,xZ(this.material.parameters,n),t)}_computeAttachmentOriginPoints(t){const n=this.attributes.get(er.POSITION);return mZ(n,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.attributes.get(er.POSITION);if(!t||t.indices.length===0)return null;const n=this.type===_a.Mesh?3:1;vh(t.indices.length%n==0,"Indexing error: "+t.indices.length+" not divisible by "+n);const r=KR(t.indices.length/n);return new oZ(r,n,t)}get transformation(){return this._transformation??Nc}set transformation(t){this._transformation=t&&t!==Nc?qR(t):null}addHighlight(){const t=new yZ(Sx.Highlight);return this.highlights=wZ(this.highlights,t),t}removeHighlight(t){this.highlights=vZ(this.highlights,t)}};function xZ(e,t){return!(!("isClosed"in e)||!e.isClosed)&&t.indices.length>2}function SZ(e,t,n,r){const i=(o=>!Array.isArray(o[0]))(t)?(o,a)=>t[3*o+a]:(o,a)=>t[o][a],s=r?tr(r)/sx(r):1;return JM(e,(o,a)=>kt(o,i(a,0)*s,i(a,1)*s,i(a,2)),n)}function T8(e,t,n){const r=SZ(lA,e,t,n)?lA:[0,0,1];return Math.abs(r[2])>Math.cos(j0(80))?Zt.Z:Math.abs(r[1])>Math.abs(r[0])?Zt.Y:Zt.X}const lA=qM();function Rxe(e,t,n){const r=T8(e,(t.length>0?t[0]:e.length/3)-1,n);if(r!==Zt.Z){e=e.slice();for(let i=0;i<e.length;i+=3)e[i+r]=e[i+2]}return ZR(e,t,3)}function Nxe(e){const t=[[er.POSITION,new gc(e.attributeData.position,e.indices,3,!0)]],n=XR(e.indices.length);return e.attributeData.colorFeature!=null?t.push([er.COLORFEATUREATTRIBUTE,new gc([e.attributeData.colorFeature],n,1,!0)]):e.attributeData.color&&t.push([er.COLOR,new gc(e.attributeData.color,n,4,!0)]),e.attributeData.uvMapSpace&&t.push([er.UVMAPSPACE,new gc(e.attributeData.uvMapSpace,e.indices,4,!0)]),e.attributeData.boundingRect&&t.push([er.BOUNDINGRECT,new gc(e.attributeData.boundingRect,e.indices,9,!0)]),new M8(e.material,t,e.mapPositions,_a.Mesh,e.attributeData.objectAndLayerIdColor)}function Dxe(e,t=null){const n=[[er.POSITION,new gc(e.attributeData.position,e.indices,3,!0)],[er.UV0,new gc(e.attributeData.uv0,e.indices,2,!0)]];return new M8(e.material,n,e.mapPositions,_a.Mesh,t)}function Lxe(e){switch(e.type){case"extent":if(e instanceof Me)return ii.fromExtent(e);break;case"polygon":return e}return null}let Fxe=class{constructor(t,n,r){this.renderData=t,this.layerUid=n,this.graphicUid=r,this.outGeometries=new Array}};function _Z(e){const t=$Z(e.rings,e.hasZ,R1.CCW_IS_HOLE,e.spatialReference),n=new Array;let r=0,i=0;for(const a of t.polygons){const l=a.count,c=a.index,u=Zq(t.position,3*c,3*l),h=a.holeIndices.map(d=>d-c),f=s0(ZR(u,h,3));n.push({position:u,faces:f}),r+=u.length,i+=f.length}const s=MZ(n,r,i),o=Array.isArray(s.position)?qT(s.position,3,{originalIndices:s.faces}):qT(s.position.buffer,6,{originalIndices:s.faces});return s.position=Jq(new Float64Array(o.buffer)),s.faces=o.indices,s}function MZ(e,t,n){if(e.length===1)return e[0];const r=E1(t),i=new Array(n);let s=0,o=0,a=0;for(const l of e){for(let c=0;c<l.position.length;c++)r[s++]=l.position[c];for(const c of l.faces)i[o++]=c+a;a=s/3}return{position:r,faces:s0(i)}}function $Z(e,t,n,r){const i=e.length,s=new Array(i),o=new Array(i),a=new Array(i);let l=0,c=0,u=0,h=0;for(let g=0;g<i;++g)h+=e[g].length;const f=E1(3*h);let d=0;for(let g=i-1;g>=0;g--){const y=e[g],w=n===R1.CCW_IS_HOLE&&TZ(y,t,r);if(w&&i!==1)s[l++]=y;else{let v=y.length;for(let S=0;S<l;++S)v+=s[S].length;const x={index:d,pathLengths:new Array(l+1),count:v,holeIndices:new Array(l)};x.pathLengths[0]=y.length,y.length>0&&(a[u++]={index:d,count:y.length}),d=w?Pm(y,y.length-1,-1,f,d,y.length,t):Pm(y,0,1,f,d,y.length,t);for(let S=0;S<l;++S){const _=s[S];x.holeIndices[S]=d,x.pathLengths[S+1]=_.length,_.length>0&&(a[u++]={index:d,count:_.length}),d=Pm(_,0,1,f,d,_.length,t)}l=0,x.count>0&&(o[c++]=x)}}for(let g=0;g<l;++g){const y=s[g];y.length>0&&(a[u++]={index:d,count:y.length}),d=Pm(y,0,1,f,d,y.length,t)}return o.length=c,a.length=u,{position:f,polygons:o,outlines:a}}function Pm(e,t,n,r,i,s,o){i*=3;for(let a=0;a<s;++a){const l=e[t];r[i++]=l[0],r[i++]=l[1],r[i++]=o?l[2]:0,t+=n}return i/3}function TZ(e,t,n){if(t){const r=e.length-1,i=T8(e,r,n);if(i===Zt.X)return!wp(e,Zt.Y,Zt.Z);if(i===Zt.Y)return!wp(e,Zt.X,Zt.Z)}return!wp(e,Zt.X,Zt.Y)}var R1;(function(e){e[e.NONE=0]="NONE",e[e.CCW_IS_HOLE=1]="CCW_IS_HOLE"})(R1||(R1={}));function o0(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function AZ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function IZ(e,t,n,r,i,s,o,a,l,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e}function kZ(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function _x(e,t){if(e===t){const n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function EZ(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=u*o-a*c,f=-u*s+a*l,d=c*s-o*l;let g=n*h+r*f+i*d;return g?(g=1/g,e[0]=h*g,e[1]=(-u*r+i*c)*g,e[2]=(a*r-i*o)*g,e[3]=f*g,e[4]=(u*n-i*l)*g,e[5]=(-a*n+i*s)*g,e[6]=d*g,e[7]=(-c*n+r*l)*g,e[8]=(o*n-r*s)*g,e):null}function CZ(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return e[0]=o*u-a*c,e[1]=i*c-r*u,e[2]=r*a-i*o,e[3]=a*l-s*u,e[4]=n*u-i*l,e[5]=i*s-n*a,e[6]=s*c-o*l,e[7]=r*l-n*c,e[8]=n*o-r*s,e}function OZ(e){const t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*(c*s-o*l)+n*(-c*i+o*a)+r*(l*i-s*a)}function A8(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=n[0],d=n[1],g=n[2],y=n[3],w=n[4],v=n[5],x=n[6],S=n[7],_=n[8];return e[0]=f*r+d*o+g*c,e[1]=f*i+d*a+g*u,e[2]=f*s+d*l+g*h,e[3]=y*r+w*o+v*c,e[4]=y*i+w*a+v*u,e[5]=y*s+w*l+v*h,e[6]=x*r+S*o+_*c,e[7]=x*i+S*a+_*u,e[8]=x*s+S*l+_*h,e}function PZ(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=f*r+d*o+c,e[7]=f*i+d*a+u,e[8]=f*s+d*l+h,e}function RZ(e,t,n){const r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=t[7],h=t[8],f=Math.sin(n),d=Math.cos(n);return e[0]=d*r+f*o,e[1]=d*i+f*a,e[2]=d*s+f*l,e[3]=d*o-f*r,e[4]=d*a-f*i,e[5]=d*l-f*s,e[6]=c,e[7]=u,e[8]=h,e}function NZ(e,t,n){const r=n[0],i=n[1],s=n[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function DZ(e,t,n){const r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e}function LZ(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function FZ(e,t){const n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function jZ(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function zZ(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function BZ(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,d=i*a,g=i*l,y=s*o,w=s*a,v=s*l;return e[0]=1-h-g,e[3]=u-v,e[6]=f+w,e[1]=u+v,e[4]=1-c-g,e[7]=d-y,e[2]=f-w,e[5]=d+y,e[8]=1-c-h,e}function UZ(e,t){const n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],u=t[10],h=u*o-a*c,f=-u*s+a*l,d=c*s-o*l,g=n*h+r*f+i*d;if(!g)return null;const y=1/g;return e[0]=h*y,e[1]=(-u*r+i*c)*y,e[2]=(a*r-i*o)*y,e[3]=f*y,e[4]=(u*n-i*l)*y,e[5]=(-a*n+i*s)*y,e[6]=d*y,e[7]=(-c*n+r*l)*y,e[8]=(o*n-r*s)*y,e}function G0(e,t){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],d=t[11],g=t[12],y=t[13],w=t[14],v=t[15],x=n*a-r*o,S=n*l-i*o,_=n*c-s*o,M=r*l-i*a,$=r*c-s*a,T=i*c-s*l,A=u*y-h*g,I=u*w-f*g,E=u*v-d*g,O=h*w-f*y,P=h*v-d*y,j=f*v-d*w;let V=x*j-S*P+_*O+M*E-$*I+T*A;return V?(V=1/V,e[0]=(a*j-l*P+c*O)*V,e[1]=(l*E-o*j-c*I)*V,e[2]=(o*P-a*E+c*A)*V,e[3]=(i*P-r*j-s*O)*V,e[4]=(n*j-i*E+s*I)*V,e[5]=(r*E-n*P-s*A)*V,e[6]=(y*T-w*$+v*M)*V,e[7]=(w*_-g*T-v*S)*V,e[8]=(g*$-y*_+v*x)*V,e):null}function VZ(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function GZ(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function WZ(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function HZ(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function I8(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function qZ(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function JZ(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function ZZ(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function YZ(e,t){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=t[0],f=t[1],d=t[2],g=t[3],y=t[4],w=t[5],v=t[6],x=t[7],S=t[8],_=Zn();return Math.abs(n-h)<=_*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=_*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-d)<=_*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-g)<=_*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-y)<=_*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-w)<=_*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-v)<=_*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-x)<=_*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(u-S)<=_*Math.max(1,Math.abs(u),Math.abs(S))}function ZM(e){const t=Zn(),n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return Math.abs(1-(n*n+s*s+l*l))<=t&&Math.abs(1-(r*r+o*o+c*c))<=t&&Math.abs(1-(i*i+a*a+u*u))<=t}const KZ=A8,XZ=I8;Object.freeze(Object.defineProperty({__proto__:null,add:HZ,adjoint:CZ,copy:AZ,determinant:OZ,equals:YZ,exactEquals:ZZ,frob:WZ,fromMat2d:zZ,fromMat4:o0,fromQuat:BZ,fromRotation:FZ,fromScaling:jZ,fromTranslation:LZ,identity:kZ,invert:EZ,isOrthoNormal:ZM,mul:KZ,multiply:A8,multiplyScalar:qZ,multiplyScalarAndAdd:JZ,normalFromMat4:G0,normalFromMat4Legacy:UZ,projection:VZ,rotate:RZ,scale:NZ,scaleByVec2:DZ,set:IZ,str:GZ,sub:XZ,subtract:I8,translate:PZ,transpose:_x},Symbol.toStringTag,{value:"Module"}));const zxe=Math.PI/180,Bxe=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Ro=ft.radius,ui=ft.eccentricitySquared,QZ={a1:Ro*ui,a2:Ro*ui*Ro*ui,a3:Ro*ui*ui/2,a4:Ro*ui*Ro*ui*2.5,a5:Ro*ui+Ro*ui*ui/2,a6:1-ui},Uxe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:ft.radius,f:ft.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Va.radius,f:Va.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:lo.radius,f:lo.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:lo.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var B;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",e[e.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=8]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=10]="GCSMOON2000",e[e.LON_LAT=11]="LON_LAT",e[e.PLATE_CARREE=12]="PLATE_CARREE"})(B||(B={}));const Sh={[B.WGS84]:{[B.CGCS2000]:null,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:Qe,[B.WGS84_COMPARABLE_LON_LAT]:Qe,[B.SPHERICAL_ECEF]:$a,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:lf,[B.PLATE_CARREE]:Ma,[B.WGS84]:Qe,[B.WGS84_ECEF]:Aa},[B.CGCS2000]:{[B.CGCS2000]:Qe,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:Qe,[B.WGS84_COMPARABLE_LON_LAT]:Qe,[B.SPHERICAL_ECEF]:$a,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:Ma,[B.WGS84]:null,[B.WGS84_ECEF]:Aa},[B.GCSMARS2000]:{[B.CGCS2000]:null,[B.GCSMARS2000]:Qe,[B.GCSMOON2000]:null,[B.LON_LAT]:Qe,[B.WGS84_COMPARABLE_LON_LAT]:null,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:$x,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.GCSMOON2000]:{[B.CGCS2000]:null,[B.GCSMARS2000]:null,[B.GCSMOON2000]:Qe,[B.LON_LAT]:Qe,[B.WGS84_COMPARABLE_LON_LAT]:null,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:Mx,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.WEB_MERCATOR]:{[B.CGCS2000]:null,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:Dc,[B.WGS84_COMPARABLE_LON_LAT]:Dc,[B.SPHERICAL_ECEF]:k8,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:Qe,[B.PLATE_CARREE]:C8,[B.WGS84]:Dc,[B.WGS84_ECEF]:E8},[B.WGS84_ECEF]:{[B.CGCS2000]:Ia,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:Ia,[B.WGS84_COMPARABLE_LON_LAT]:Ia,[B.SPHERICAL_ECEF]:R8,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:N8,[B.PLATE_CARREE]:nY,[B.WGS84]:Ia,[B.WGS84_ECEF]:Qe},[B.SPHERICAL_ECEF]:{[B.CGCS2000]:Ta,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:Ta,[B.WGS84_COMPARABLE_LON_LAT]:Ta,[B.SPHERICAL_ECEF]:Qe,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:O8,[B.PLATE_CARREE]:rY,[B.WGS84]:Ta,[B.WGS84_ECEF]:P8},[B.SPHERICAL_MARS_PCPF]:{[B.CGCS2000]:null,[B.GCSMARS2000]:Ax,[B.GCSMOON2000]:null,[B.LON_LAT]:Ax,[B.WGS84_COMPARABLE_LON_LAT]:null,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:Qe,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.SPHERICAL_MOON_PCPF]:{[B.CGCS2000]:null,[B.GCSMARS2000]:null,[B.GCSMOON2000]:Tx,[B.LON_LAT]:Tx,[B.WGS84_COMPARABLE_LON_LAT]:null,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:Qe,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.UNKNOWN]:{[B.CGCS2000]:null,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:null,[B.WGS84_COMPARABLE_LON_LAT]:null,[B.SPHERICAL_ECEF]:null,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:Qe,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:null,[B.WGS84]:null,[B.WGS84_ECEF]:null},[B.LON_LAT]:{[B.CGCS2000]:Qe,[B.GCSMARS2000]:Qe,[B.GCSMOON2000]:Qe,[B.LON_LAT]:Qe,[B.WGS84_COMPARABLE_LON_LAT]:Qe,[B.SPHERICAL_ECEF]:$a,[B.SPHERICAL_MARS_PCPF]:$x,[B.SPHERICAL_MOON_PCPF]:Mx,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:lf,[B.PLATE_CARREE]:Ma,[B.WGS84]:Qe,[B.WGS84_ECEF]:Aa},[B.WGS84_COMPARABLE_LON_LAT]:{[B.CGCS2000]:null,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:Qe,[B.WGS84_COMPARABLE_LON_LAT]:Qe,[B.SPHERICAL_ECEF]:$a,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:null,[B.PLATE_CARREE]:Ma,[B.WGS84]:Qe,[B.WGS84_ECEF]:Aa},[B.PLATE_CARREE]:{[B.CGCS2000]:_c,[B.GCSMARS2000]:null,[B.GCSMOON2000]:null,[B.LON_LAT]:_c,[B.WGS84_COMPARABLE_LON_LAT]:_c,[B.SPHERICAL_ECEF]:iY,[B.SPHERICAL_MARS_PCPF]:null,[B.SPHERICAL_MOON_PCPF]:null,[B.UNKNOWN]:null,[B.WEB_MERCATOR]:sY,[B.PLATE_CARREE]:Qe,[B.WGS84]:_c,[B.WGS84_ECEF]:oY}};function eY(e){const t=a0(e,L8);return Sh[t][B.WGS84_COMPARABLE_LON_LAT]}function YM(e,t,n=D8()){return e==null||t==null?null:lY(e,t,n).projector}function Vxe(e,t){switch(YM(e,t,QM)){case Qe:return"copy3";case $a:return"wgs84ToSphericalECEF";case lf:return"wgs84ToWebMercator";case Ma:return"wgs84ToPlateCarree";case Aa:return"wgs84ToWGS84ECEF";case Dc:return"webMercatorToWGS84";case k8:return"webMercatorToSphericalECEF";case E8:return"webMercatorToWGS84ECEF";case C8:return"webMercatorToPlateCarree";case Ia:return"wgs84ECEFToWGS84";case R8:return"wgs84ECEFToSphericalECEF";case N8:return"wgs84ECEFToWebMercator";case Ta:return"sphericalECEFToWGS84";case O8:return"sphericalECEFToWebMercator";case Ax:return"sphericalMarsPCPFToMars2000";case Tx:return"sphericalMoonPCPFToMoon2000";case P8:return"sphericalECEFToWGS84ECEF";case $x:return"mars2000ToSphericalPCPF";case Mx:return"moon2000ToSphericalPCPF";default:return null}}function a0(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=tr(e,1)),S1(e)?t.spatialReferenceId=B.SPHERICAL_ECEF:Qp(e)?t.spatialReferenceId=B.WGS84:Xc(e)?t.spatialReferenceId=B.WEB_MERCATOR:EV(e)?t.spatialReferenceId=B.PLATE_CARREE:e.wkt===l6.wkt?t.spatialReferenceId=B.WGS84_ECEF:e.wkid===Kc.CGCS2000?t.spatialReferenceId=B.CGCS2000:e.wkt===N2.wkt?t.spatialReferenceId=B.SPHERICAL_MARS_PCPF:e.wkt===D2.wkt?t.spatialReferenceId=B.SPHERICAL_MOON_PCPF:P0(e)?t.spatialReferenceId=B.GCSMARS2000:R0(e)?t.spatialReferenceId=B.GCSMOON2000:t.spatialReferenceId=B.UNKNOWN):B.UNKNOWN}function Qe(e,t,n,r){e!==n&&(n[r++]=e[t++],n[r++]=e[t++],n[r]=e[t])}function Dc(e,t,n,r){n[r++]=uf*(e[t++]/ft.radius),n[r++]=uf*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/ft.radius))),n[r]=e[t]}function k8(e,t,n,r){Dc(e,t,n,r),$a(n,r,n,r)}function E8(e,t,n,r){Dc(e,t,n,r),Aa(n,r,n,r)}function tY(e,t,n,r,i){const s=.4999999*Math.PI,o=Un(cf*e[t+1],-s,s),a=Math.sin(o);n[r++]=cf*e[t]*i.radius,n[r++]=i.halfSemiMajorAxis*Math.log((1+a)/(1-a)),n[r]=e[t+2]}function lf(e,t,n,r){tY(e,t,n,r,ft)}const cA=ft.radius*Math.PI/180,uA=180/(ft.radius*Math.PI);function Ma(e,t,n,r){n[r]=e[t]*cA,n[r+1]=e[t+1]*cA,n[r+2]=e[t+2]}function _c(e,t,n,r){n[r]=e[t]*uA,n[r+1]=e[t+1]*uA,n[r+2]=e[t+2]}function C8(e,t,n,r){Dc(e,t,n,r),Ma(n,r,n,r)}function nY(e,t,n,r){Ia(e,t,n,r),Ma(n,r,n,r)}function rY(e,t,n,r){Ta(e,t,n,r),Ma(n,r,n,r)}function iY(e,t,n,r){_c(e,t,n,r),$a(n,r,n,r)}function sY(e,t,n,r){_c(e,t,n,r),lf(n,r,n,r)}function oY(e,t,n,r){_c(e,t,n,r),Aa(n,r,n,r)}function KM(e,t,n,r,i){const s=i+e[t+2],o=cf*e[t+1],a=cf*e[t],l=Math.cos(o);n[r++]=Math.cos(a)*l*s,n[r++]=Math.sin(a)*l*s,n[r]=Math.sin(o)*s}function Mx(e,t,n,r){KM(e,t,n,r,Va.radius)}function $x(e,t,n,r){KM(e,t,n,r,lo.radius)}function $a(e,t,n,r){KM(e,t,n,r,ft.radius)}function XM(e,t,n,r,i){const s=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(s*s+o*o+a*a),c=lR(a/(l===0?1:l)),u=Math.atan2(o,s);n[r++]=uf*u,n[r++]=uf*c,n[r]=l-i}function Tx(e,t,n,r){XM(e,t,n,r,Va.radius)}function Ax(e,t,n,r){XM(e,t,n,r,lo.radius)}function Ta(e,t,n,r){XM(e,t,n,r,ft.radius)}function O8(e,t,n,r){Ta(e,t,n,r),lf(n,r,n,r)}function P8(e,t,n,r){Ta(e,t,n,r),Aa(n,r,n,r)}function aY(e,t,n,r,i){const s=cf*e[t],o=cf*e[t+1],a=e[t+2],l=Math.sin(o),c=Math.cos(o),u=i.radius/Math.sqrt(1-i.eccentricitySquared*l*l);n[r++]=(u+a)*c*Math.cos(s),n[r++]=(u+a)*c*Math.sin(s),n[r++]=(u*(1-i.eccentricitySquared)+a)*l}function Aa(e,t,n,r){aY(e,t,n,r,ft)}function Ia(e,t,n,r){const i=QZ,s=e[t],o=e[t+1],a=e[t+2];let l,c,u,h,f,d,g,y,w,v,x,S,_,M,$,T,A,I,E,O,P;l=Math.abs(a),c=s*s+o*o,u=Math.sqrt(c),h=c+a*a,f=Math.sqrt(h),O=Math.atan2(o,s),d=a*a/h,g=c/h,M=i.a2/f,$=i.a3-i.a4/f,g>.3?(y=l/f*(1+g*(i.a1+M+d*$)/f),E=Math.asin(y),v=y*y,w=Math.sqrt(1-v)):(w=u/f*(1-d*(i.a5-M-g*$)/f),E=Math.acos(w),v=1-w*w,y=Math.sqrt(v)),x=1-ft.eccentricitySquared*v,S=ft.radius/Math.sqrt(x),_=i.a6*S,M=u-S*w,$=l-_*y,A=w*M+y*$,T=w*$-y*M,I=T/(_/x+A),E+=I,P=A+T*I/2,a<0&&(E=-E),n[r++]=uf*O,n[r++]=uf*E,n[r]=P}function R8(e,t,n,r){Ia(e,t,n,r),$a(n,r,n,r)}function N8(e,t,n,r){Ia(e,t,n,r),lf(n,r,n,r)}function lY(e,t,n){if(e==null||t==null||n.source.spatialReference===e&&n.dest.spatialReference===t)return n;const r=a0(e,n.source),i=a0(t,n.dest);return r===B.UNKNOWN&&i===B.UNKNOWN?gn(e,t)?n.projector=Qe:n.projector=null:n.projector=Sh[r][i],n}function D8(){return{source:{spatialReference:null,spatialReferenceId:B.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:B.UNKNOWN,metersPerUnit:1},projector:Qe}}const L8={spatialReference:null,spatialReferenceId:B.UNKNOWN},cY={spatialReference:null,spatialReferenceId:B.UNKNOWN},QM=D8(),cf=j0(1),uf=aR(1);function Ss(e,t,n,r,i,s,o=1){const a=YM(t,i,QM);if(a==null)return!1;if(a===Qe){if(e===r&&n===s)return!0;const c=n+3*o;for(let u=n,h=s;u<c;u++,h++)r[h]=e[u];return!0}const l=n+3*o;for(let c=n,u=s;c<l;c+=3,u+=3)a(e,c,r,u);return!0}const Gxe=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:Ss},Symbol.toStringTag,{value:"Module"}));function hA(e,t,n,r,i,s){return Rm[0]=e,Rm[1]=t,Rm[2]=n,Ss(Rm,r,0,i,s,0,1)}const Rm=ue();let Nm=0,Ew=class Ix{static fromGE(t){const n=new Ix;return n._wkt=t.wkt,n._wkid=t.wkid,n._isInverse=t.isInverse,n}constructor(t){this.uid=Nm++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Nm++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Nm++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Nm++}getInverse(){const t=new Ix;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},N1=class wd{static cacheKey(t,n){var r,i,s,o,a,l;return[((r=t.wkid)==null?void 0:r.toString())??"-1",((i=t.wkt)==null?void 0:i.toString())??"",((s=t.wkt2)==null?void 0:s.toString())??"",((o=n.wkid)==null?void 0:o.toString())??"-1",((a=n.wkt)==null?void 0:a.toString())??"",((l=n.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(t){const n=new wd;let r="";for(const i of t.steps){const s=Ew.fromGE(i);n.steps.push(s),r+=s.uid.toString()+","}return n._cachedProjection={},n._gtlistentry=null,n._chain=r,n}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t==null?void 0:t.steps)for(const n of t.steps)n instanceof Ew?this.steps.push(n):this.steps.push(new Ew({wkid:n.wkid,wkt:n.wkt,isInverse:n.isInverse}))}getInverse(){const t=new wd;t.steps=[];for(let n=this.steps.length-1;n>=0;n--){const r=this.steps[n];t.steps.push(r.getInverse())}return t}getGTListEntry(){let t="";for(const n of this.steps)t+=n.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,n,r){this._cachedProjection[wd.cacheKey(t,n)]=r}getCachedGeTransformation(t,n){let r="";for(const s of this.steps)r+=s.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);const i=this._cachedProjection[wd.cacheKey(t,n)];return i===void 0?null:i}};function uY(e,t,n){if(t==null||n==null||n.vcsWkid||gn(t,n)||Ga(t)||Ga(n))return null;const r=sx(t)/sx(n);if(r===1)return null;switch(e){case"point":case"esriGeometryPoint":return i=>hY(i,r);case"polyline":case"esriGeometryPolyline":return i=>dY(i,r);case"polygon":case"esriGeometryPolygon":return i=>fY(i,r);case"multipoint":case"esriGeometryMultipoint":return i=>pY(i,r);case"extent":case"esriGeometryEnvelope":return i=>mY(i,r);default:return null}}function hY(e,t){(e==null?void 0:e.z)!=null&&(e.z*=t)}function fY(e,t){if(e)for(const n of e.rings)for(const r of n)r.length>2&&(r[2]*=t)}function dY(e,t){if(e)for(const n of e.paths)for(const r of n)r.length>2&&(r[2]*=t)}function pY(e,t){if(e)for(const n of e.points)n.length>2&&(n[2]*=t)}function mY(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}let Ri=null,qa=null,_p=null,Kg={};const e$=new IM;function _u(){return!!Ri&&t6()}function gY(){return!!_u()||(_e(e$),hf(),!1)}function hf(e){return _p==null&&(_p=Promise.all([n6(),ne(()=>import("./geometryEngineBase-dfbd3a67.js"),[]).then(t=>t.g),ne(()=>import("./hydrated-40effdd0.js"),[])])),_p.then(([,t,{hydratedAdapter:n}])=>{Hn(e),qa=n,Ri=t.default,Ri._enableProjection(MV),e$.notify()})}function $s(e,t,n=null,r=null){return Array.isArray(e)?e.length===0?[]:kx(qa,e,e[0].spatialReference,t,n,r):kx(qa,[e],e.spatialReference,t,n,r)[0]}function kx(e,t,n,r,i=null,s=null){if(n==null||r==null)return t;if(ou(n,r,i))return t.map(o=>Xg(o,n,r));if(i==null&&S1(n))return t.map(o=>Xg(o,n,we.WGS84)).map(o=>l0(o,r));if(i==null&&S1(r))return t.map(o=>l0(o,we.WGS84)).map(o=>Xg(o,we.WGS84,r));if(i==null){const o=N1.cacheKey(n,r);Kg[o]!==void 0?i=Kg[o]:((i=D1(n,r,void 0))==null&&(i=new N1),Kg[o]=i)}if(Ri==null||e==null)throw new nb;return s!=null?Ri._project(e,t,n,r,i,s):Ri._project(e,t,n,r,i)}function yY(e,t){const n=F8([e],t);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function F8(e,t){if(!_u()){for(const n of e)if(n!=null&&!gn(n.spatialReference,t)&&Bn(n.spatialReference)&&Bn(t)&&!ou(n.spatialReference,t))return _e(e$),{pending:hf(),geometries:null}}return{pending:null,geometries:e.map(n=>n==null?null:gn(n.spatialReference,t)?n:Bn(n.spatialReference)&&Bn(t)?l0(n,t):null)}}function D1(e,t,n=null){if(e==null||t==null)return null;if(Ri==null||qa==null)throw new nb;const r=Ri._getTransformation(qa,e,t,n,n==null?void 0:n.spatialReference);return r!==null?N1.fromGE(r):null}function bY(e,t,n=null){if(Ri==null||qa==null)throw new nb;const r=Ri._getTransformationBySuitability(qa,e,t,n,n==null?void 0:n.spatialReference);if(r!==null){const i=[];for(const s of r)i.push(N1.fromGE(s));return i}return[]}let nb=class extends Y{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function wY(){Ri=null,qa=null,_p=null,Kg={}}const vY={get loadPromise(){return _p}};function l0(e,t){try{const n=$s(e,t);if(n==null)return null;"xmin"in e&&"xmin"in n&&(n.zmin=e.zmin,n.zmax=e.zmax);const r=uY(n.type,e.spatialReference,t);return r!=null&&r(n),n}catch(n){if(!(n instanceof nb))throw n;return null}}async function xY(e,t,n){const r=e.spatialReference;return r!=null&&t!=null&&await t$(r,t,null,n),l0(e,t)}function ou(e,t,n){return!n&&(!!gn(e,t)||Bn(e)&&Bn(t)&&!!YM(e,t,QM))}async function t$(e,t,n,r){if(_u())return X4(r);if(Array.isArray(e)){for(const{source:i,dest:s,geographicTransformation:o}of e)if(!ou(i,s,o))return hf(r)}else if(!ou(e,t,n))return hf(r);return X4(r)}function Xg(e,t,n){return e?"x"in e?j8(e,t,new ce,n,0):"xmin"in e?V8(e,t,new Me,n,0):"rings"in e?U8(e,t,new ii,n,0):"paths"in e?B8(e,t,new Ii,n,0):"points"in e?z8(e,t,new W2,n,0):null:null}function SY(e,t,n=t.spatialReference,r=0){return n!=null&&e.spatialReference!=null&&j8(e,e.spatialReference,t,n,r)!=null}function j8(e,t,n,r,i){Fn[0]=e.x,Fn[1]=e.y;const s=e.z;return Fn[2]=s!==void 0?s:i,Ss(Fn,t,0,Fn,r,0,1)?(n.x=Fn[0],n.y=Fn[1],n.spatialReference=r,s!==void 0||Ga(r)?(n.z=Fn[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),e.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=e.m,n.hasM=!0),n):null}function _Y(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&z8(e,e.spatialReference,t,n,r)!=null}function z8(e,t,n,r,i){const{points:s,hasZ:o,hasM:a}=e,l=[],c=s.length,u=[];for(const f of s)u.push(f[0],f[1],o?f[2]:i);if(!Ss(u,t,0,u,r,0,c))return null;const h=o||Ga(r);for(let f=0;f<c;++f){const d=3*f,g=u[d],y=u[d+1];h&&a?l.push([g,y,u[d+2],s[f][3]]):h?l.push([g,y,u[d+2]]):a?l.push([g,y,s[f][2]]):l.push([g,y])}return n.points=l,n.spatialReference=r,n.hasZ=o,n.hasM=a,n}function MY(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&B8(e,e.spatialReference,t,n,r)!=null}function B8(e,t,n,r,i){const{paths:s,hasZ:o,hasM:a}=e,l=[];if(!G8(s,o??!1,a??!1,t,l,r,i))return null;const c=o||Ga(r);return n.paths=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function $Y(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&U8(e,e.spatialReference,t,n,r)!=null}function U8(e,t,n,r,i){const{rings:s,hasZ:o,hasM:a}=e,l=[];if(!G8(s,o??!1,a??!1,t,l,r,i))return null;const c=o||Ga(r);return n.rings=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function TY(e,t,n=t.spatialReference,r=0){return e.spatialReference!=null&&n!=null&&V8(e,e.spatialReference,t,n,r)!=null}function V8(e,t,n,r,i){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:u}=e,h=c?e.zmin:i;if(!hA(s,o,h,t,Fn,r))return null;const f=c||Ga(r);n.xmin=Fn[0],n.ymin=Fn[1],f&&(n.zmin=Fn[2]);const d=c?e.zmax:i;return hA(a,l,d,t,Fn,r)?(n.xmax=Fn[0],n.ymax=Fn[1],f&&(n.zmax=Fn[2]),u&&(n.mmin=e.mmin,n.mmax=e.mmax),n.spatialReference=r,n):null}function G8(e,t,n,r,i,s,o=0){const a=new Array;for(const u of e)for(const h of u)a.push(h[0],h[1],t?h[2]:o);if(!Ss(a,r,0,a,s,0,a.length/3))return!1;let l=0;i.length=0;const c=t||Ga(s);for(const u of e){const h=new Array;for(const f of u)c&&n?h.push([a[l++],a[l++],a[l++],f[3]]):c?h.push([a[l++],a[l++],a[l++]]):n?(h.push([a[l++],a[l++],f[2]]),l++):(h.push([a[l++],a[l++]]),l++);i.push(h)}return!0}function AY(e){return e!=null&&eY(e)!=null}const Fn=ue(),Hxe=Object.freeze(Object.defineProperty({__proto__:null,canProjectToWGS84ComparableLonLat:AY,canProjectWithoutEngine:ou,getTransformation:D1,getTransformations:bY,initializeProjection:t$,isLoaded:_u,isLoadedOrLoad:gY,load:hf,project:$s,projectExtent:TY,projectMany:kx,projectMultipoint:_Y,projectOrLoad:yY,projectOrLoadMany:F8,projectPoint:SY,projectPolygon:$Y,projectPolyline:MY,projectWithZConversion:xY,projectWithoutEngine:Xg,test:vY,tryProjectWithZConversion:l0,unload:wY},Symbol.toStringTag,{value:"Module"})),IY=new we(a6),fA=new we(N2),dA=new we(D2),qxe=new we(l6);function il(e){return e&&(P0(e)||gn(e,fA))?fA:e&&(R0(e)||gn(e,dA))?dA:IY}function W8(e,t,n){const r=Math.sin(e),i=Math.cos(e),s=Math.sin(t),o=Math.cos(t),a=n;return a[0]=-r,a[4]=-s*i,a[8]=o*i,a[12]=0,a[1]=i,a[5]=-s*r,a[9]=o*r,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function kY(e,t,n){return W8(e,t,n),So(n,n),n}function ff(e,t,n,r){if(e==null||r==null)return!1;const i=a0(e,L8),s=a0(r,cY);if(i===s&&!pA(s)&&(i!==B.UNKNOWN||gn(e,r)))return BR(n,t),!0;if(pA(s)){const o=Sh[i][B.LON_LAT],a=Sh[B.LON_LAT][s];return o!=null&&a!=null&&(o(t,0,No,0),a(No,0,Do,0),W8(Dm*No[0],Dm*No[1],n),n[12]=Do[0],n[13]=Do[1],n[14]=Do[2],!0)}if((s===B.WEB_MERCATOR||s===B.PLATE_CARREE)&&(i===B.WGS84||i===B.CGCS2000&&s===B.PLATE_CARREE||i===B.SPHERICAL_ECEF||i===B.WEB_MERCATOR)){const o=Sh[i][B.LON_LAT],a=Sh[B.LON_LAT][s];return o!=null&&a!=null&&(o(t,0,No,0),a(No,0,Do,0),i===B.SPHERICAL_ECEF?kY(Dm*No[0],Dm*No[1],n):z0(n),n[12]=Do[0],n[13]=Do[1],n[14]=Do[2],!0)}return!1}function pA(e){return e===B.SPHERICAL_ECEF||e===B.SPHERICAL_MARS_PCPF||e===B.SPHERICAL_MOON_PCPF}const Dm=j0(1),No=ue(),Do=ue(),H8=ie.getLogger("esri.views.3d.support.buffer.math");function EY(e,t,n){au(e.typedBuffer,t.typedBuffer,n,e.typedBufferStride,t.typedBufferStride)}function au(e,t,n,r=3,i=r){if(e.length/r!==Math.ceil(t.length/i))return H8.error("source and destination buffers need to have the same number of elements"),e;const s=e.length/r,o=n[0],a=n[1],l=n[2],c=n[4],u=n[5],h=n[6],f=n[8],d=n[9],g=n[10],y=n[12],w=n[13],v=n[14];let x=0,S=0;for(let _=0;_<s;_++){const M=t[x],$=t[x+1],T=t[x+2];e[S]=o*M+c*$+f*T+y,e[S+1]=a*M+u*$+d*T+w,e[S+2]=l*M+h*$+g*T+v,x+=i,S+=r}return e}function CY(e,t,n){sl(e.typedBuffer,t.typedBuffer,n,e.typedBufferStride,t.typedBufferStride)}function sl(e,t,n,r=3,i=r){if(e.length/r!==Math.ceil(t.length/i))return void H8.error("source and destination buffers need to have the same number of elements");const s=e.length/r,o=n[0],a=n[1],l=n[2],c=n[3],u=n[4],h=n[5],f=n[6],d=n[7],g=n[8];let y=0,w=0;for(let v=0;v<s;v++){const x=t[y],S=t[y+1],_=t[y+2];e[w]=o*x+c*S+f*_,e[w+1]=a*x+u*S+d*_,e[w+2]=l*x+h*S+g*_,y+=i,w+=r}}function OY(e,t,n){q8(e.typedBuffer,t,n,e.typedBufferStride)}function q8(e,t,n,r=3){const i=Math.min(e.length/r,t.count),s=t.typedBuffer,o=t.typedBufferStride;let a=0,l=0;for(let c=0;c<i;c++)e[l]=n*s[a],e[l+1]=n*s[a+1],e[l+2]=n*s[a+2],a+=o,l+=r}function PY(e,t){rb(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function rb(e,t,n=3,r=n){const i=Math.min(e.length/n,t.length/r);let s=0,o=0;for(let a=0;a<i;a++){const l=t[s],c=t[s+1],u=t[s+2],h=l*l+c*c+u*u;if(h>0){const f=1/Math.sqrt(h);e[o]=f*l,e[o+1]=f*c,e[o+2]=f*u}s+=r,o+=n}}function RY(e,t,n){const r=Math.min(e.count,t.count),i=e.typedBuffer,s=e.typedBufferStride,o=t.typedBuffer,a=t.typedBufferStride;let l=0,c=0;for(let u=0;u<r;u++)i[c]=o[l]>>n,i[c+1]=o[l+1]>>n,i[c+2]=o[l+2]>>n,l+=a,c+=s}Object.freeze(Object.defineProperty({__proto__:null,normalize:rb,normalizeView:PY,scale:q8,scaleView:OY,shiftRight:RY,transformMat3:sl,transformMat3View:CY,transformMat4:au,transformMat4View:EY},Symbol.toStringTag,{value:"Module"}));function Af(e,t){return e.isGeographic||e.isWebMercator&&((t==null?void 0:t.geographic)??!0)}function ib(e,t,n){const r=!e.isGeoreferenced;(n==null?void 0:n.geographic)!=null&&n.geographic!==r&&ie.getLogger(t).warnOnce(`Specifying the 'geographic' parameter (${n.geographic}) for a Mesh vertex space of type "${e.type}" is not supported. This parameter will be ignored.`)}let n$=class{constructor(t,n,r=0,i,s){this.TypedArrayConstructor=t,this.elementCount=9;const o=this.TypedArrayConstructor;i===void 0&&(i=9*o.BYTES_PER_ELEMENT);const a=n.byteLength===0?0:r;this.typedBuffer=s==null?new o(n,a):new o(n,a,(s-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,n,r=this.count-n){const i=this.typedBuffer.byteOffset+n*this.stride;return new t(this.buffer,i,this.stride,i+r*this.stride)}getMat(t,n){let r=t*this.typedBufferStride;for(let i=0;i<9;i++)n[i]=this.typedBuffer[r++];return n}setMat(t,n){let r=t*this.typedBufferStride;for(let i=0;i<9;i++)this.typedBuffer[r++]=n[i]}get(t,n){return this.typedBuffer[t*this.typedBufferStride+n]}set(t,n,r){this.typedBuffer[t*this.typedBufferStride+n]=r}copyFrom(t,n,r){const i=this.typedBuffer,s=n.typedBuffer;let o=t*this.typedBufferStride,a=r*n.typedBufferStride;for(let l=0;l<9;++l)i[o++]=s[a++]}get buffer(){return this.typedBuffer.buffer}};n$.ElementCount=9;let r$=class{constructor(t,n,r=0,i,s){this.TypedArrayConstructor=t,this.elementCount=16;const o=this.TypedArrayConstructor;i===void 0&&(i=16*o.BYTES_PER_ELEMENT);const a=n.byteLength===0?0:r;this.typedBuffer=s==null?new o(n,a):new o(n,a,(s-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,n,r=this.count-n){const i=this.typedBuffer.byteOffset+n*this.stride;return new t(this.buffer,i,this.stride,i+r*this.stride)}getMat(t,n){let r=t*this.typedBufferStride;for(let i=0;i<16;i++)n[i]=this.typedBuffer[r++];return n}setMat(t,n){let r=t*this.typedBufferStride;for(let i=0;i<16;i++)this.typedBuffer[r++]=n[i]}get(t,n){return this.typedBuffer[t*this.typedBufferStride+n]}set(t,n,r){this.typedBuffer[t*this.typedBufferStride+n]=r}copyFrom(t,n,r){const i=this.typedBuffer,s=n.typedBuffer;let o=t*this.typedBufferStride,a=r*n.typedBufferStride;for(let l=0;l<16;++l)i[o++]=s[a++]}get buffer(){return this.typedBuffer.buffer}};r$.ElementCount=16;let Mo=class{constructor(t,n,r=0,i,s){this.TypedArrayConstructor=t,this.elementCount=1;const o=this.TypedArrayConstructor;i===void 0&&(i=o.BYTES_PER_ELEMENT);const a=n.byteLength===0?0:r;this.typedBuffer=s==null?new o(n,a):new o(n,a,(s-r)/o.BYTES_PER_ELEMENT),this.stride=i,this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(t,n,r=this.count-n){const i=this.typedBuffer.byteOffset+n*this.stride;return new t(this.buffer,i,this.stride,i+r*this.stride)}get(t){return this.typedBuffer[t*this.typedBufferStride]}set(t,n){this.typedBuffer[t*this.typedBufferStride]=n}get buffer(){return this.typedBuffer.buffer}};Mo.ElementCount=1;function NY(e,t){return e[0]=t[0],e[1]=t[1],e}function J8(e,t,n){return e[0]=t,e[1]=n,e}function DY(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Z8(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Y8(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function K8(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function LY(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function FY(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function jY(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function zY(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function BY(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function UY(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function VY(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function X8(e,t){const n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function Q8(e,t){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function eN(e){const t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function tN(e){const t=e[0],n=e[1];return t*t+n*n}function GY(e,t){return e[0]=-t[0],e[1]=-t[1],e}function WY(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function HY(e,t){const n=t[0],r=t[1];let i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function qY(e,t){return e[0]*t[0]+e[1]*t[1]}function JY(e,t,n){const r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function ZY(e,t,n,r){const i=t[0],s=t[1];return e[0]=i+r*(n[0]-i),e[1]=s+r*(n[1]-s),e}function YY(e,t){t=t||1;const n=2*D0()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function KY(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function XY(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function QY(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function eK(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function tK(e,t,n,r){const i=t[0]-n[0],s=t[1]-n[1],o=Math.sin(r),a=Math.cos(r);return e[0]=i*a-s*o+n[0],e[1]=i*o+s*a+n[1],e}function nK(e,t){const n=e[0],r=e[1],i=t[0],s=t[1];let o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));let a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));const l=(n*i+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function rK(e){return"vec2("+e[0]+", "+e[1]+")"}function iK(e,t){return e[0]===t[0]&&e[1]===t[1]}function sK(e,t){const n=e[0],r=e[1],i=t[0],s=t[1],o=Zn();return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function oK(e,t,n,r,i){let s=t[0]-n[0],o=t[1]-n[1];const a=(r[0]*s+r[1]*o)*(i-1);return s=r[0]*a,o=r[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const aK=eN,lK=Z8,cK=Y8,uK=K8,hK=X8,fK=Q8,dK=tN;Object.freeze(Object.defineProperty({__proto__:null,add:DY,angle:nK,ceil:LY,copy:NY,cross:JY,dist:hK,distance:X8,div:uK,divide:K8,dot:qY,equals:sK,exactEquals:iK,floor:FY,inverse:WY,len:aK,length:eN,lerp:ZY,max:zY,min:jY,mul:cK,multiply:Y8,negate:GY,normalize:HY,projectAndScale:oK,random:YY,rotate:tK,round:BY,scale:UY,scaleAndAdd:VY,set:J8,sqrDist:fK,sqrLen:dK,squaredDistance:Q8,squaredLength:tN,str:rK,sub:lK,subtract:Z8,transformMat2:KY,transformMat2d:XY,transformMat3:QY,transformMat4:eK},Symbol.toStringTag,{value:"Module"}));let $o=class{constructor(t,n,r=0,i,s){this.TypedArrayConstructor=t,this.elementCount=2;const o=this.TypedArrayConstructor;i===void 0&&(i=2*o.BYTES_PER_ELEMENT);const a=n.byteLength===0?0:r;this.typedBuffer=s==null?new o(n,a):new o(n,a,(s-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,n,r=this.count-n){const i=this.typedBuffer.byteOffset+n*this.stride;return new t(this.buffer,i,this.stride,i+r*this.stride)}getVec(t,n){return t*=this.typedBufferStride,J8(n,this.typedBuffer[t],this.typedBuffer[t+1])}setVec(t,n){t*=this.typedBufferStride,this.typedBuffer[t++]=n[0],this.typedBuffer[t]=n[1]}get(t,n){return this.typedBuffer[t*this.typedBufferStride+n]}set(t,n,r){this.typedBuffer[t*this.typedBufferStride+n]=r}setValues(t,n,r){t*=this.typedBufferStride,this.typedBuffer[t++]=n,this.typedBuffer[t]=r}copyFrom(t,n,r){const i=this.typedBuffer,s=n.typedBuffer;let o=t*this.typedBufferStride,a=r*n.typedBufferStride;i[o++]=s[a++],i[o]=s[a]}get buffer(){return this.typedBuffer.buffer}};$o.ElementCount=2;let To=class{constructor(t,n,r=0,i,s){this.TypedArrayConstructor=t,this.elementCount=3;const o=this.TypedArrayConstructor;i===void 0&&(i=3*o.BYTES_PER_ELEMENT);const a=n.byteLength===0?0:r;this.typedBuffer=s==null?new o(n,a):new o(n,a,(s-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,n,r=this.count-n){const i=this.typedBuffer.byteOffset+n*this.stride;return new t(this.buffer,i,this.stride,i+r*this.stride)}getVec(t,n){return t*=this.typedBufferStride,kt(n,this.typedBuffer[t],this.typedBuffer[t+1],this.typedBuffer[t+2])}setVec(t,n){t*=this.typedBufferStride,this.typedBuffer[t++]=n[0],this.typedBuffer[t++]=n[1],this.typedBuffer[t]=n[2]}get(t,n){return this.typedBuffer[t*this.typedBufferStride+n]}set(t,n,r){this.typedBuffer[t*this.typedBufferStride+n]=r}setValues(t,n,r,i){t*=this.typedBufferStride,this.typedBuffer[t++]=n,this.typedBuffer[t++]=r,this.typedBuffer[t]=i}copyFrom(t,n,r){const i=this.typedBuffer,s=n.typedBuffer;let o=t*this.typedBufferStride,a=r*n.typedBufferStride;i[o++]=s[a++],i[o++]=s[a++],i[o]=s[a]}get buffer(){return this.typedBuffer.buffer}};To.ElementCount=3;let Ao=class{constructor(t,n,r=0,i,s){this.TypedArrayConstructor=t,this.start=r,this.elementCount=4;const o=this.TypedArrayConstructor;i===void 0&&(i=4*o.BYTES_PER_ELEMENT);const a=n.byteLength===0?0:r;this.typedBuffer=s==null?new o(n,a):new o(n,a,(s-r)/o.BYTES_PER_ELEMENT),this.typedBufferStride=i/o.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,n,r=this.count-n){const i=this.typedBuffer.byteOffset+n*this.stride;return new t(this.buffer,i,this.stride,i+r*this.stride)}getVec(t,n){return t*=this.typedBufferStride,CM(n,this.typedBuffer[t++],this.typedBuffer[t++],this.typedBuffer[t++],this.typedBuffer[t])}setVec(t,n){t*=this.typedBufferStride,this.typedBuffer[t++]=n[0],this.typedBuffer[t++]=n[1],this.typedBuffer[t++]=n[2],this.typedBuffer[t]=n[3]}get(t,n){return this.typedBuffer[t*this.typedBufferStride+n]}set(t,n,r){this.typedBuffer[t*this.typedBufferStride+n]=r}setValues(t,n,r,i,s){t*=this.typedBufferStride,this.typedBuffer[t++]=n,this.typedBuffer[t++]=r,this.typedBuffer[t++]=i,this.typedBuffer[t]=s}copyFrom(t,n,r){const i=this.typedBuffer,s=n.typedBuffer;let o=t*this.typedBufferStride,a=r*n.typedBufferStride;i[o++]=s[a++],i[o++]=s[a++],i[o++]=s[a++],i[o]=s[a]}get buffer(){return this.typedBuffer.buffer}};Ao.ElementCount=4;let pK=class nN extends Mo{constructor(t,n=0,r,i){super(Float32Array,t,n,r,i),this.elementType="f32"}static fromTypedArray(t,n){return new nN(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};pK.ElementType="f32";let mK=class Ex extends $o{constructor(t,n=0,r,i){super(Float32Array,t,n,r,i),this.elementType="f32"}slice(t,n){return this.sliceBuffer(Ex,t,n)}static fromTypedArray(t,n){return new Ex(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};mK.ElementType="f32";let go=class Cx extends To{constructor(t,n=0,r,i){super(Float32Array,t,n,r,i),this.elementType="f32"}slice(t,n){return this.sliceBuffer(Cx,t,n)}static fromTypedArray(t,n){return new Cx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};go.ElementType="f32";let gK=class Ox extends Ao{constructor(t,n=0,r,i){super(Float32Array,t,n,r,i),this.elementType="f32"}slice(t,n){return this.sliceBuffer(Ox,t,n)}static fromTypedArray(t,n){return new Ox(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};gK.ElementType="f32";let yK=class Px extends n${constructor(t,n=0,r,i){super(Float32Array,t,n,r,i),this.elementType="f32"}slice(t,n){return this.sliceBuffer(Px,t,n)}static fromTypedArray(t,n){return new Px(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};yK.ElementType="f32";let bK=class Rx extends n${constructor(t,n=0,r,i){super(Float64Array,t,n,r,i),this.elementType="f64"}slice(t,n){return this.sliceBuffer(Rx,t,n)}static fromTypedArray(t,n){return new Rx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};bK.ElementType="f64";let wK=class Nx extends r${constructor(t,n=0,r,i){super(Float32Array,t,n,r,i),this.elementType="f32"}slice(t,n){return this.sliceBuffer(Nx,t,n)}static fromTypedArray(t,n){return new Nx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};wK.ElementType="f32";let vK=class Dx extends r${constructor(t,n=0,r,i){super(Float64Array,t,n,r,i),this.elementType="f64"}slice(t,n){return this.sliceBuffer(Dx,t,n)}static fromTypedArray(t,n){return new Dx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};vK.ElementType="f64";let xK=class Lx extends Mo{constructor(t,n=0,r,i){super(Float64Array,t,n,r,i),this.elementType="f64"}slice(t,n){return this.sliceBuffer(Lx,t,n)}static fromTypedArray(t,n){return new Lx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};xK.ElementType="f64";let SK=class Fx extends $o{constructor(t,n=0,r,i){super(Float64Array,t,n,r,i),this.elementType="f64"}slice(t,n){return this.sliceBuffer(Fx,t,n)}static fromTypedArray(t,n){return new Fx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};SK.ElementType="f64";let yo=class jx extends To{constructor(t,n=0,r,i){super(Float64Array,t,n,r,i),this.elementType="f64"}slice(t,n){return this.sliceBuffer(jx,t,n)}static fromTypedArray(t,n){return new jx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};yo.ElementType="f64";let _K=class zx extends Ao{constructor(t,n=0,r,i){super(Float64Array,t,n,r,i),this.elementType="f64"}slice(t,n){return this.sliceBuffer(zx,t,n)}static fromTypedArray(t,n){return new zx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};_K.ElementType="f64";let MK=class Bx extends Mo{constructor(t,n=0,r,i){super(Uint8Array,t,n,r,i),this.elementType="u8"}slice(t,n){return this.sliceBuffer(Bx,t,n)}static fromTypedArray(t,n){return new Bx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};MK.ElementType="u8";let $K=class Ux extends $o{constructor(t,n=0,r,i){super(Uint8Array,t,n,r,i),this.elementType="u8"}slice(t,n){return this.sliceBuffer(Ux,t,n)}static fromTypedArray(t,n){return new Ux(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};$K.ElementType="u8";let TK=class Vx extends To{constructor(t,n=0,r,i){super(Uint8Array,t,n,r,i),this.elementType="u8"}slice(t,n){return this.sliceBuffer(Vx,t,n)}static fromTypedArray(t,n){return new Vx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};TK.ElementType="u8";let AK=class Gx extends Ao{constructor(t,n=0,r,i){super(Uint8Array,t,n,r,i),this.elementType="u8"}slice(t,n){return this.sliceBuffer(Gx,t,n)}static fromTypedArray(t,n){return new Gx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};AK.ElementType="u8";let IK=class Wx extends Mo{constructor(t,n=0,r,i){super(Uint16Array,t,n,r,i),this.elementType="u16"}slice(t,n){return this.sliceBuffer(Wx,t,n)}static fromTypedArray(t,n){return new Wx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};IK.ElementType="u16";let kK=class Hx extends $o{constructor(t,n=0,r,i){super(Uint16Array,t,n,r,i),this.elementType="u16"}slice(t,n){return this.sliceBuffer(Hx,t,n)}static fromTypedArray(t,n){return new Hx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};kK.ElementType="u16";let EK=class qx extends To{constructor(t,n=0,r,i){super(Uint16Array,t,n,r,i),this.elementType="u16"}slice(t,n){return this.sliceBuffer(qx,t,n)}static fromTypedArray(t,n){return new qx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};EK.ElementType="u16";let CK=class Jx extends Ao{constructor(t,n=0,r,i){super(Uint16Array,t,n,r,i),this.elementType="u16"}slice(t,n){return this.sliceBuffer(Jx,t,n)}static fromTypedArray(t,n){return new Jx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};CK.ElementType="u16";let OK=class Zx extends Mo{constructor(t,n=0,r,i){super(Uint32Array,t,n,r,i),this.elementType="u32"}slice(t,n){return this.sliceBuffer(Zx,t,n)}static fromTypedArray(t,n){return new Zx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};OK.ElementType="u32";let PK=class Yx extends $o{constructor(t,n=0,r,i){super(Uint32Array,t,n,r,i),this.elementType="u32"}slice(t,n){return this.sliceBuffer(Yx,t,n)}static fromTypedArray(t,n){return new Yx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};PK.ElementType="u32";let RK=class Kx extends To{constructor(t,n=0,r,i){super(Uint32Array,t,n,r,i),this.elementType="u32"}slice(t,n){return this.sliceBuffer(Kx,t,n)}static fromTypedArray(t,n){return new Kx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};RK.ElementType="u32";let NK=class Xx extends Ao{constructor(t,n=0,r,i){super(Uint32Array,t,n,r,i),this.elementType="u32"}slice(t,n){return this.sliceBuffer(Xx,t,n)}static fromTypedArray(t,n){return new Xx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};NK.ElementType="u32";let DK=class Qx extends Mo{constructor(t,n=0,r,i){super(Int8Array,t,n,r,i),this.elementType="i8"}slice(t,n){return this.sliceBuffer(Qx,t,n)}static fromTypedArray(t,n){return new Qx(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};DK.ElementType="i8";let LK=class e3 extends $o{constructor(t,n=0,r,i){super(Int8Array,t,n,r,i),this.elementType="i8"}slice(t,n){return this.sliceBuffer(e3,t,n)}static fromTypedArray(t,n){return new e3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};LK.ElementType="i8";let FK=class t3 extends To{constructor(t,n=0,r,i){super(Int8Array,t,n,r,i),this.elementType="i8"}slice(t,n){return this.sliceBuffer(t3,t,n)}static fromTypedArray(t,n){return new t3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};FK.ElementType="i8";let jK=class n3 extends Ao{constructor(t,n=0,r,i){super(Int8Array,t,n,r,i),this.elementType="i8"}slice(t,n){return this.sliceBuffer(n3,t,n)}static fromTypedArray(t,n){return new n3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};jK.ElementType="i8";let zK=class r3 extends Mo{constructor(t,n=0,r,i){super(Int16Array,t,n,r,i),this.elementType="i16"}slice(t,n){return this.sliceBuffer(r3,t,n)}static fromTypedArray(t,n){return new r3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};zK.ElementType="i16";let BK=class i3 extends $o{constructor(t,n=0,r,i){super(Int16Array,t,n,r,i),this.elementType="i16"}slice(t,n){return this.sliceBuffer(i3,t,n)}static fromTypedArray(t,n){return new i3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};BK.ElementType="i16";let UK=class s3 extends To{constructor(t,n=0,r,i){super(Int16Array,t,n,r,i),this.elementType="i16"}slice(t,n){return this.sliceBuffer(s3,t,n)}static fromTypedArray(t,n){return new s3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};UK.ElementType="i16";let VK=class o3 extends Ao{constructor(t,n=0,r,i){super(Int16Array,t,n,r,i),this.elementType="i16"}slice(t,n){return this.sliceBuffer(o3,t,n)}static fromTypedArray(t,n){return new o3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};VK.ElementType="i16";let GK=class a3 extends Mo{constructor(t,n=0,r,i){super(Int32Array,t,n,r,i),this.elementType="i32"}slice(t,n){return this.sliceBuffer(a3,t,n)}static fromTypedArray(t,n){return new a3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};GK.ElementType="i32";let WK=class l3 extends $o{constructor(t,n=0,r,i){super(Int32Array,t,n,r,i),this.elementType="i32"}slice(t,n){return this.sliceBuffer(l3,t,n)}static fromTypedArray(t,n){return new l3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};WK.ElementType="i32";let HK=class c3 extends To{constructor(t,n=0,r,i){super(Int32Array,t,n,r,i),this.elementType="i32"}slice(t,n){return this.sliceBuffer(c3,t,n)}static fromTypedArray(t,n){return new c3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};HK.ElementType="i32";let qK=class u3 extends Ao{constructor(t,n=0,r,i){super(Int32Array,t,n,r,i),this.elementType="i32"}slice(t,n){return this.sliceBuffer(u3,t,n)}static fromTypedArray(t,n){return new u3(t.buffer,t.byteOffset,n,t.byteOffset+t.byteLength)}};qK.ElementType="i32";const sb=ie.getLogger("esri.geometry.support.meshUtils.normalProjection");function ob(e,t,n,r,i){return db(r)?(fb(uo.TO_PCPF,go.fromTypedArray(e),yo.fromTypedArray(t),yo.fromTypedArray(n),r,go.fromTypedArray(i)),i):(sb.error("Cannot convert spatial reference to PCPF"),i)}function ab(e,t,n,r,i){return db(r)?(fb(uo.FROM_PCPF,go.fromTypedArray(e),yo.fromTypedArray(t),yo.fromTypedArray(n),r,go.fromTypedArray(i)),i):(sb.error("Cannot convert to spatial reference from PCPF"),i)}function lb(e,t,n){return Ss(e,t,0,n,il(t),0,e.length/3),n}function cb(e,t,n){return Ss(e,il(n),0,t,n,0,e.length/3),t}function JK(e,t,n){return G0(Wt,n),sl(t,e,Wt),ZM(Wt)||rb(t,t),t}function ZK(e,t,n){if(G0(Wt,n),sl(t,e,Wt,4),ZM(Wt)||rb(t,t,4),e!==t)for(let r=3;r<e.length;r+=4)t[r]=e[r];return t}function ub(e,t,n,r,i){if(!db(r))return sb.error("Cannot convert spatial reference to PCPF"),i;fb(uo.TO_PCPF,go.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT),yo.fromTypedArray(t),yo.fromTypedArray(n),r,go.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT));for(let s=3;s<e.length;s+=4)i[s]=e[s];return i}function hb(e,t,n,r,i){if(!db(r))return sb.error("Cannot convert to spatial reference from PCPF"),i;fb(uo.FROM_PCPF,go.fromTypedArray(e,16),yo.fromTypedArray(t),yo.fromTypedArray(n),r,go.fromTypedArray(i,16));for(let s=3;s<e.length;s+=4)i[s]=e[s];return i}function fb(e,t,n,r,i,s){if(!t)return;const o=n.count,a=il(i);if(rN(i))for(let l=0;l<o;l++)r.getVec(l,Lm),t.getVec(l,Wi),ff(a,Lm,Fm,a),o0(Wt,Fm),e===uo.FROM_PCPF&&_x(Wt,Wt),iu(Wi,Wi,Wt),s.setVec(l,Wi);else for(let l=0;l<o;l++){r.getVec(l,Lm),t.getVec(l,Wi),ff(a,Lm,Fm,a),o0(Wt,Fm);const c=hG(n.get(l,1));let u=Math.cos(c);e===uo.TO_PCPF&&(u=1/u),Wt[0]*=u,Wt[1]*=u,Wt[2]*=u,Wt[3]*=u,Wt[4]*=u,Wt[5]*=u,e===uo.FROM_PCPF&&_x(Wt,Wt),iu(Wi,Wi,Wt),Lt(Wi,Wi),s.setVec(l,Wi)}return s}function db(e){return rN(e)||YK(e)}function rN(e){return e.isWGS84||kV(e)||P0(e)||R0(e)}function YK(e){return e.isWebMercator}var uo;(function(e){e[e.TO_PCPF=0]="TO_PCPF",e[e.FROM_PCPF=1]="FROM_PCPF"})(uo||(uo={}));const Lm=ue(),Wi=ue(),Fm=mo(),Wt=xu();function pb(e,t,n){return Af(t.spatialReference,n)?QK(e,t,n):XK(e,t,n)}function iN(e,t=Nc){const{position:n,normal:r,tangent:i}=e;return{position:au(new Float64Array(n.length),n,t),normal:r!=null?JK(r,new Float32Array(r.length),t):null,tangent:i!=null?ZK(i,new Float32Array(i.length),t):null}}function sN(e,t,n,r){const{position:i,normal:s,tangent:o}=e;return t.isRelative?pb(iN(e,n==null?void 0:n.localMatrix),t.getOriginPoint(r),{geographic:!t.isGeoreferenced}):{position:i,normal:s,tangent:o}}function oN(e,t,n){if(n!=null&&n.useTransform){const{position:r,normal:i,tangent:s}=e,{x:o,y:a,z:l}=t,c=Fr(o,a,l??0);return{vertexAttributes:{position:r,normal:i,tangent:s},vertexSpace:n.geographic??1?new k1({origin:c}):new jR({origin:c}),transform:new af}}return{vertexAttributes:pb(e,t,n),vertexSpace:new I1,transform:null}}function L1(e,t,n){return Af(t.spatialReference,n)?rX(e,t,n):aN(e,t,n)}function KK(e,t,n,r,i){if(!t.isRelative)return L1(e,r,i);const{spatialReference:s}=r,o=sN(e,t,n,s);return r.equals(t.getOriginPoint(s))?aN(o,r,i):L1(o,r,i)}function i$({positions:e,transform:t,vertexSpace:n,inSpatialReference:r,outSpatialReference:i,outPositions:s,localMode:o}){const a=n.isRelative?n.origin:t0,l=n.isRelative?(t==null?void 0:t.localMatrix)??Nc:Nc;if(n.isGeoreferenced){const f=s??E1(e.length);if(HR(l,Nc)?Yq(f,e):au(f,e,l),!vp(a,t0)){const[d,g,y]=a;for(let w=0;w<f.length;w+=3)f[w]+=d,f[w+1]+=g,f[w+2]+=y}return Ss(f,r,0,f,i,0,f.length/3),f}let c=r;const u=il(r);c=i.isWebMercator&&o||!ou(r,u)?c:u,ff(r,a,Mc,c),VM(Mc,Mc,l);const h=s??E1(e.length);return au(h,e,Mc),Ss(h,c,0,h,i,0,h.length/3),h}function XK(e,t,n){const r=new Float64Array(e.position.length),i=e.position,s=t.x,o=t.y,a=t.z??0,l=s$(n?n.unit:null,t.spatialReference);for(let c=0;c<i.length;c+=3)r[c]=i[c]*l+s,r[c+1]=i[c+1]*l+o,r[c+2]=i[c+2]*l+a;return{position:r,normal:e.normal,tangent:e.tangent}}function QK(e,t,n){const r=t.spatialReference,i=lN(t,n,Mc),s=new Float64Array(e.position.length),o=eX(e.position,i,r,s),a=G0(cN,i);return{position:o,normal:tX(o,s,e.normal,a,r),tangent:nX(o,s,e.tangent,a,r)}}function eX(e,t,n,r){au(r,e,t);const i=new Float64Array(e.length);return cb(r,i,n)}function tX(e,t,n,r,i){if(n==null)return null;const s=new Float32Array(n.length);return sl(s,n,r),ab(s,e,t,i,s),s}function nX(e,t,n,r,i){if(n==null)return null;const s=new Float32Array(n.length);sl(s,n,r,4);for(let o=3;o<s.length;o+=4)s[o]=n[o];return hb(s,e,t,i,s),s}function aN(e,t,n){const r=new Float64Array(e.position.length),i=e.position,s=t.x,o=t.y,a=t.z??0,l=s$(n?n.unit:null,t.spatialReference);for(let c=0;c<i.length;c+=3)r[c]=(i[c]-s)/l,r[c+1]=(i[c+1]-o)/l,r[c+2]=(i[c+2]-a)/l;return{position:r,normal:e.normal,tangent:e.tangent}}function rX(e,t,n){const r=t.spatialReference;lN(t,n,Mc);const i=G2(aX,Mc),s=new Float64Array(e.position.length),o=iX(e.position,r,i,s),a=G0(cN,i);return{position:o,normal:sX(e.normal,e.position,s,r,a),tangent:oX(e.tangent,e.position,s,r,a)}}function lN(e,t,n){ff(e.spatialReference,[e.x,e.y,e.z??0],n,il(e.spatialReference));const r=s$(t?t.unit:null,e.spatialReference);return zR(n,n,[r,r,r]),n}function iX(e,t,n,r){const i=lb(e,t,r),s=new Float64Array(i.length);return au(s,i,n),s}function sX(e,t,n,r,i){if(e==null)return null;const s=ob(e,t,n,r,new Float32Array(e.length));return sl(s,s,i),s}function oX(e,t,n,r,i){if(e==null)return null;const s=ub(e,t,n,r,new Float32Array(e.length));return sl(s,s,i,4),s}function s$(e,t){if(e==null)return 1;const n=XV(t);return 1/rn(n,"meters",e)}const Mc=mo(),aX=mo(),cN=xu(),e3e=Object.freeze(Object.defineProperty({__proto__:null,applyTransform:iN,georeference:pb,georeferenceApplyTransform:sN,georeferenceByTransform:oN,project:i$,ungeoreference:L1,ungeoreferenceByTransform:KK},Symbol.toStringTag,{value:"Module"}));function lX({xmin:e,xmax:t,ymin:n,ymax:r,zmin:i,zmax:s},o,a,l){i??(i=0),s??(s=0),mA??(mA=new Float64Array(24));const c=mA;return c[0]=e,c[1]=n,c[2]=i,c[3]=e,c[4]=r,c[5]=i,c[6]=t,c[7]=r,c[8]=i,c[9]=t,c[10]=n,c[11]=i,c[12]=e,c[13]=n,c[14]=s,c[15]=e,c[16]=r,c[17]=s,c[18]=t,c[19]=r,c[20]=s,c[21]=t,c[22]=n,c[23]=s,i$({positions:c,transform:o,vertexSpace:a,inSpatialReference:l,outSpatialReference:l,outPositions:c}),Qg(c,l)}let mA=null;function Qg(e,t){let n=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;const l=e.length;let c=0;for(;c<l;){const u=e[c++],h=e[c++],f=e[c++];n=Math.min(n,u),r=Math.min(r,h),i=Math.min(i,f),s=Math.max(s,u),o=Math.max(o,h),a=Math.max(a,f)}return new Me({xmin:n,ymin:r,zmin:i,xmax:s,ymax:o,zmax:a,spatialReference:t})}function _s(e,t,n,r=0){jm[0]=e.x,jm[1]=e.y;const i=e.z;return jm[2]=i!==void 0?i:r,Ss(jm,e.spatialReference,0,t,n,0,1)}const jm=ue(),c0="esri.geometry.support.meshUtils.centerAt";function cX(e,t,n){var s;if(!((s=e.vertexAttributes)!=null&&s.position))return;const{vertexSpace:r}=e,i=(n==null?void 0:n.origin)??e.origin;r.isRelative?(ib(r,c0,n),uX(e,t,i)):Af(e.spatialReference,n)?hX(e,t,i):fX(e,t,i)}function uX(e,t,n){const{vertexSpace:r}=e;if(!r.isRelative)return;const i=hN,s=uN;if(!_s(t,s,e.spatialReference))return void ie.getLogger(c0).error(`Failed to project centerAt location (wkid:${t.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`);if(!_s(n,i,e.spatialReference)){const l=e.origin;i[0]=l.x,i[1]=l.y,i[2]=l.z,ie.getLogger(c0).error(`Failed to project specified origin (wkid:${n.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}const o=rt(pX,s,i),a=r.origin;r.origin=ut(ue(),a,o)}function hX(e,t,n){const r=L1(e.vertexAttributes,n,{geographic:!0}),{position:i,normal:s,tangent:o}=pb(r,t,{geographic:!0});e.vertexAttributes.position=i,e.vertexAttributes.normal=s,e.vertexAttributes.tangent=o,e.vertexAttributesChanged()}function fX(e,t,n){const r=hN,i=uN;if(_s(t,i,e.spatialReference)){if(!_s(n,r,e.spatialReference)){const s=e.origin;r[0]=s.x,r[1]=s.y,r[2]=s.z,ie.getLogger(c0).error(`Failed to project specified origin (wkid:${n.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}dX(e.vertexAttributes.position,i,r),e.vertexAttributesChanged()}else ie.getLogger(c0).error(`Failed to project centerAt location (wkid:${t.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}function dX(e,t,n){if(e)for(let r=0;r<e.length;r+=3)for(let i=0;i<3;i++)e[r+i]+=t[i]-n[i]}const uN=ue(),hN=ue(),pX=ue();async function mX(e,t,n){const{source:r}=t,{loadGLTFMesh:i}=await qO(ne(()=>import("./loadGLTFMesh-ea31dfa0.js"),["assets/loadGLTFMesh-ea31dfa0.js","assets/DefaultMaterial_COLOR_GAMMA-101ea40c.js","assets/enums-bdecffa2.js","assets/Version-1f969b2a.js","assets/resourceUtils-1d03d2fe.js","assets/types-1305598a.js"]),n),s=await yX(r,n);Hn(n);const o=i(new ce({x:0,y:0,z:0,spatialReference:e.spatialReference}),s.url,{resolveFile:gX(s),requestFile:void 0,useTransform:!0,signal:n==null?void 0:n.signal,expectedType:s.type});o.then(()=>s.dispose(),()=>s.dispose());const{vertexAttributes:a,components:l}=await o;e.vertexAttributes=a,e.components=l}function gX(e){const t=WP(e.url);return n=>{const r=O2(n,t,t),i=r?r.replace(/^ *\.\//,""):null;return(i?e.files.get(i):null)??n}}async function yX(e,t){if(Array.isArray(e)){if(!e.length)throw new Y("mesh-load-external:missing-assets","There must be at least one file to load");return e[0]instanceof File?wX(e):vX(e,t)}return fN(e)}async function bX(e,t){const{parts:n,assetMimeType:r,assetName:i}=e;if(n.length===1)return new F1(n[0].partUrl);const s=await e.toBlob(t);return Hn(t),F1.fromBlob(s,yN(i,r))}function fN(e){return F1.fromBlob(e,yN(e.name,e.type))}function wX(e){return mN(e.map(t=>({name:t.name,mimeType:t.type,source:fN(t)})))}async function vX(e,t){const n=await Lz(e.map(async r=>{const i=await bX(r);return Hn(t),{name:r.assetName,mimeType:r.assetMimeType,source:i}}));if(ri(t))throw n.forEach(r=>r.source.dispose()),Ot();return mN(n)}const dN=/^model\/gltf\+json$/,pN=/^model\/gltf-binary$/,h3=/\.gltf$/i,xX=/\.glb$/i;function mN(e){const t=new Map;let n,r=null;for(const{name:i,mimeType:s,source:o}of e)r===null&&(dN.test(s)||h3.test(i)?(r=o.url,n="gltf"):(pN.test(s)||xX.test(i))&&(r=o.url,n="glb")),t.set(i,o.url),o.files.forEach((a,l)=>t.set(l,a));if(r==null)throw new Y("mesh-load-external:missing-files","Missing files to load external mesh source");return new F1(r,()=>e.forEach(({source:i})=>i.dispose()),t,n)}let F1=class gN{constructor(t,n=()=>{},r=new Map,i){this.url=t,this.dispose=n,this.files=r,this.type=i}static fromBlob(t,n){const r=URL.createObjectURL(t);return new gN(r,()=>URL.revokeObjectURL(r),void 0,n)}};function yN(e,t){return dN.test(t)||h3.test(e)?"gltf":pN.test(t)||h3.test(e)?"glb":void 0}const SX=[["binary","application/octet-stream","bin",""]];function _X(e,t){return xN(t.name,(e==null?void 0:e.supportedFormats)??[])!=null}function MX(e,t){if(!e)return!1;const n=vN(t,e.supportedFormats??[]);return n!=null&&e.editFormats.includes(n)}function t3e(e){return mb((e==null?void 0:e.supportedFormats)??[]).flatMap(_N).map(t=>`.${t}`)}function bN(e,t){return o$(TX(e,t))}function wN(e,t){return o$(xN(e,t))}function n3e(e,t){return SN($X(e,t))}function vN(e,t){return wN(e.name,t)??bN(e.type,t)}function mb(e){return[...SX,...e]}function $X(e,t){return mb(t).find(n=>o$(n)===e)}function TX(e,t){const n=e.toLowerCase();return mb(t).find(r=>SN(r)===n)}function xN(e,t){const n=e.toLowerCase();return mb(t).find(r=>_N(r).some(i=>n.endsWith(i)))}function o$(e){return e==null?void 0:e[0]}function SN(e){return e==null?void 0:e[1].toLowerCase()}function _N(e){return(e==null?void 0:e[2].split(",").map(t=>t.toLowerCase()))??[]}function r3e(e){var t;return(t=e.tables)==null?void 0:t.find(n=>n.role==="assetMaps")}let MN=class{constructor(t,n,r){this.assetName=t,this.assetMimeType=n,this.parts=r}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&Hc(this.parts,t.parts,(n,r)=>n.equals(r))}isOnService(t){return this.parts.every(n=>n.isOnService(t))}makeHash(){let t="";for(const n of this.parts)t+=n.partHash;return t}async toBlob(t){const{parts:n}=this;if(n.length===1)return n[0].toBlob(t);const r=await Promise.all(n.map(i=>i.toBlob(t)));return Hn(t),new Blob(r)}},s3e=class{constructor(t,n){this.partUrl=t,this.partHash=n}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:n}=await He(this.partUrl,{responseType:"blob"});return Hn(t),n}};function gA(e){return AX(e==null?void 0:e.source)}function yA(e){return Array.isArray(e)?e.every(t=>t instanceof MN):!1}const bA=/^(model\/gltf\+json)|(model\/gltf-binary)$/,wA=/\.(gltf|glb)/i;function AX(e){return e?Array.isArray(e)?e.some(vA):vA(e):!1}function vA(e){if(e instanceof File){const{type:t,name:n}=e;return bA.test(t)||wA.test(n)}return bA.test(e.assetMimeType)||wA.test(e.assetName)}function IX(e,t){if(!e)return!1;const{source:n}=e;return EX(n,t)}function kX(e,t){if(e===t)return!0;const{source:n}=e,{source:r}=t;if(n===r)return!0;if(yA(n)&&yA(r)){if(n.length!==r.length)return!1;const i=(a,l)=>a.assetName<l.assetName?-1:a.assetName>l.assetName?1:0,s=[...n].sort(i),o=[...r].sort(i);for(let a=0;a<s.length;++a)if(!s[a].equals(o[a]))return!1;return!0}return!1}function EX(e,t){if(Array.isArray(e)){const n=e;return n.length>0&&n.every(r=>xA(r,t))}return xA(e,t)}function xA(e,t){return e instanceof MN&&e.isOnService(t)}function a3e(e,t){return e instanceof File?vN(e,t):bN(e.assetMimeType,t)??wN(e.assetName,t)}function l3e(e){return Array.isArray(e)?e:[e]}function c3e(e){return!!e.original}let fa=class extends px{constructor(){super(),this.externalSources=new tt,this._explicitDisplaySource=null,this.addHandles(F2(()=>this.externalSources,"after-remove",({item:t})=>{t===this._explicitDisplaySource&&(this._explicitDisplaySource=null)},{sync:!0,onListenerRemove:()=>this._explicitDisplaySource=null}))}get displaySource(){return this._explicitDisplaySource??this._implicitDisplaySource}set displaySource(t){if(t!=null&&!gA(t))throw new Error("Cannot use this source for display: it is not in a supported format.");this._explicitDisplaySource=t,t&&this.externalSources.every(n=>!kX(n,t))&&this.externalSources.add(t)}clearSources(){this.externalSources.removeAll()}getExternalSourcesOnService(t){return this.externalSources.items.filter(n=>IX(n,t))}get _implicitDisplaySource(){return this.externalSources.find(gA)}};p([b()],fa.prototype,"externalSources",void 0),p([b()],fa.prototype,"displaySource",null),p([b()],fa.prototype,"_implicitDisplaySource",null),p([b()],fa.prototype,"_explicitDisplaySource",void 0),fa=p([L("esri.geometry.support.meshUtils.Metadata")],fa);const CX="esri.geometry.support.meshUtils.offset";function OX(e,t,n){var i;if(!((i=e.vertexAttributes)!=null&&i.position))return;const{vertexSpace:r}=e;r.isRelative?(ib(r,CX,n),PX(r,t)):Af(e.spatialReference,n)?RX(e,t):NX(e,t)}function PX(e,t){const n=e.origin;e.origin=ut(ue(),n,t)}function RX(e,t){const n=e.spatialReference,r=e.vertexAttributes.position,i=e.vertexAttributes.normal,s=e.vertexAttributes.tangent,o=new Float64Array(r.length),a=i!=null?new Float32Array(i.length):null,l=s!=null?new Float32Array(s.length):null,c=e.extent.center,u=DX;ff(n,[c.x,c.y,c.z],SA,il(n)),o0(_A,SA),iu(u,t,_A),lb(r,n,o),i!=null&&a!=null&&ob(i,r,o,n,a),s!=null&&l!=null&&ub(s,r,o,n,l),$N(o,u),cb(o,r,n),i!=null&&a!=null&&ab(a,r,o,n,i),s!=null&&l!=null&&hb(l,r,o,n,s),e.vertexAttributesChanged()}function NX(e,t){$N(e.vertexAttributes.position,t),e.vertexAttributesChanged()}function $N(e,t){if(e)for(let n=0;n<e.length;n+=3)for(let r=0;r<3;r++)e[n+r]+=t[r]}const DX=ue(),SA=mo(),_A=xu();function LX(){const{faceDescriptions:e,faceVertexOffsets:t,uvScales:n}=WX,r=4*e.length,i=new Float64Array(3*r),s=new Float32Array(3*r),o=new Float32Array(2*r),a=new Uint32Array(2*e.length*3);let l=0,c=0,u=0,h=0;for(let f=0;f<e.length;f++){const d=e[f],g=l/3;for(const w of t)a[h++]=g+w;const y=d.corners;for(let w=0;w<4;w++){const v=y[w];let x=0;o[u++]=.25*n[w][0]+d.uvOrigin[0],o[u++]=d.uvOrigin[1]-.25*n[w][1];for(let S=0;S<3;S++)d.axis[S]!==0?(i[l++]=.5*d.axis[S],s[c++]=d.axis[S]):(i[l++]=.5*v[x++],s[c++]=0)}}return{position:i,normal:s,uv:o,faces:a}}function FX(e,t){const n=e.components[0],r=n.faces,i=HX[t],s=6*i,o=new Array(6),a=new Array(r.length-6);let l=0,c=0;for(let u=0;u<r.length;u++)u>=s&&u<s+6?o[l++]=r[u]:a[c++]=r[u];if(e.vertexAttributes.uv!=null){const u=new Float32Array(e.vertexAttributes.uv),h=4*i*2,f=[0,1,1,1,1,0,0,0];for(let d=0;d<f.length;d++)u[h+d]=f[d];e.vertexAttributes.uv=u}return e.components=[new of({faces:o,material:n.material}),new of({faces:a})],e}function jX(e=0){const t=Math.round(8*2**e),n=2*t,r=(t-1)*(n+1)+2*n,i=new Float64Array(3*r),s=new Float32Array(3*r),o=new Float32Array(2*r),a=new Uint32Array(3*((t-1)*n*2));let l=0,c=0,u=0,h=0;for(let f=0;f<=t;f++){const d=f/t*Math.PI+.5*Math.PI,g=Math.cos(d),y=Math.sin(d);qt[2]=y;const w=f===0||f===t,v=w?n-1:n;for(let x=0;x<=v;x++){const S=x/v*2*Math.PI;qt[0]=-Math.sin(S)*g,qt[1]=Math.cos(S)*g;for(let _=0;_<3;_++)i[l]=.5*qt[_],s[l]=qt[_],++l;o[c++]=(x+(w?.5:0))/n,o[c++]=f/t,f!==0&&x!==n&&(f!==t&&(a[u++]=h,a[u++]=h+1,a[u++]=h-n),f!==1&&(a[u++]=h,a[u++]=h-n,a[u++]=h-n-1)),h++}}return{position:i,normal:s,uv:o,faces:a}}function zX(e=0){const n=Math.round(16*2**e),r=(5-1)*(n+1)+2*n,i=new Float64Array(3*r),s=new Float32Array(3*r),o=new Float32Array(2*r),a=new Uint32Array(3*(4*n));let l=0,c=0,u=0,h=0,f=0;for(let d=0;d<=5;d++){const g=d===0||d===5,y=d<=1||d>=5-1,w=d===2||d===4,v=g?n-1:n;for(let x=0;x<=v;x++){const S=x/v*2*Math.PI,_=g?0:.5;qt[0]=_*Math.sin(S),qt[1]=_*-Math.cos(S),qt[2]=d<=2?.5:-.5;for(let M=0;M<3;M++)i[l++]=qt[M],s[c++]=y?M===2?d<=1?1:-1:0:M===2?0:qt[M]/_;o[u++]=(x+(g?.5:0))/n,o[u++]=d<=1?1*d/3:d<=3?1*(d-2)/3+1/3:1*(d-4)/3+2/3,w||d===0||x===n||(d!==5&&(a[h++]=f,a[h++]=f+1,a[h++]=f-n),d!==1&&(a[h++]=f,a[h++]=f-n,a[h++]=f-n-1)),f++}}return{position:i,normal:s,uv:o,faces:a}}function BX(e,t){const n=typeof t=="number"?t:t!=null?t.width:1,r=typeof t=="number"?t:t!=null?t.height:1;switch(e){case"up":case"down":return{width:n,depth:r};case"north":case"south":return{width:n,height:r};case"east":case"west":return{depth:n,height:r}}}function UX(e){const t=Hf.facingAxisOrderSwap[e],n=Hf.position,r=Hf.normal,i=new Float64Array(n.length),s=new Float32Array(r.length);let o=0;for(let a=0;a<4;a++){const l=o;for(let c=0;c<3;c++){const u=t[c],h=Math.abs(u)-1,f=u>=0?1:-1;i[o]=n[l+h]*f,s[o]=r[l+h]*f,o++}}return{position:i,normal:s,uv:new Float32Array(Hf.uv),faces:new Uint32Array(Hf.faces),isPlane:!0}}const Fu=1,ju=2,zu=3,Hf={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[zu,Fu,ju],west:[-zu,-Fu,ju],north:[-Fu,zu,ju],south:[Fu,-zu,ju],up:[Fu,ju,zu],down:[Fu,-ju,-zu]}};function zm(e,t,n){e.isPlane||VX(e),GX(e,n==null?void 0:n.size);const{vertexAttributes:r,vertexSpace:i,transform:s}=oN(e,t,n);return{vertexAttributes:new Dn({...r,uv:e.uv}),vertexSpace:i,transform:s,components:[new of({faces:e.faces,material:(n==null?void 0:n.material)||null})],spatialReference:t.spatialReference}}function VX(e){for(let t=0;t<e.position.length;t+=3)e.position[t+2]+=.5}function GX(e,t){if(t==null)return;const n=typeof t=="number"?[t,t,t]:[t.width!=null?t.width:1,t.depth!=null?t.depth:1,t.height!=null?t.height:1];Lo[0]=n[0],Lo[4]=n[1],Lo[8]=n[2];for(let r=0;r<e.position.length;r+=3){for(let i=0;i<3;i++)qt[i]=e.position[r+i];iu(qt,qt,Lo);for(let i=0;i<3;i++)e.position[r+i]=qt[i]}if(n[0]!==n[1]||n[1]!==n[2]){Lo[0]=1/n[0],Lo[4]=1/n[1],Lo[8]=1/n[2];for(let r=0;r<e.normal.length;r+=3){for(let i=0;i<3;i++)qt[i]=e.normal[r+i];iu(qt,qt,Lo),Lt(qt,qt);for(let i=0;i<3;i++)e.normal[r+i]=qt[i]}}}const WX={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},HX={south:0,east:1,north:2,west:3,up:4,down:5},qt=ue(),Lo=xu(),TN="esri.geometry.support.meshUtils.rotate";function qX(e,t,n){var s;if(!((s=e.vertexAttributes)!=null&&s.position)||t[3]===0)return;const{spatialReference:r,vertexSpace:i}=e;if(i.isRelative){ib(i,TN,n);const o=(n==null?void 0:n.origin)??e.origin;e.transform??(e.transform=new af),JX(e.transform,i,t,o)}else{const o=(n==null?void 0:n.origin)??e.origin;Af(r,n)?ZX(e,t,o):YX(e,t,o)}}function JX(e,t,n,r){const i=t.origin,s=kt(_h,r.x,r.y,r.z??0),o=rt(_h,s,i);e.applyLocalInverse(o,MA),e.rotation=fx(e.rotation,n,zi()),e.applyLocalInverse(o,o),rt(o,o,MA),e.translation=ut(ue(),e.translation,o)}function ZX(e,t,n){const r=e.spatialReference,i=il(r),s=AN;_s(n,s,i)||_s(e.origin,s,i);const o=e.vertexAttributes.position,a=e.vertexAttributes.normal,l=e.vertexAttributes.tangent,c=new Float64Array(o.length),u=a!=null?new Float32Array(a.length):null,h=l!=null?new Float32Array(l.length):null;ff(i,s,j1,i),o0(TA,j1);const f=$A;iu($A,t,TA),f[3]=t[3],lb(o,r,c),a!=null&&u!=null&&ob(a,o,c,r,u),l!=null&&h!=null&&ub(l,o,c,r,h),Fh(c,f,3,s),cb(c,o,r),a!=null&&u!=null&&(Fh(u,f,3),ab(u,o,c,r,a)),l!=null&&h!=null&&(Fh(h,f,4),hb(h,o,c,r,l)),e.vertexAttributesChanged()}function YX(e,t,n){const r=AN;if(!_s(n,r,e.spatialReference)){const i=e.origin;r[0]=i.x,r[1]=i.y,r[2]=i.z,ie.getLogger(TN).error(`Failed to project specified origin (wkid:${n.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}Fh(e.vertexAttributes.position,t,3,r),Fh(e.vertexAttributes.normal,t,3),Fh(e.vertexAttributes.tangent,t,4),e.vertexAttributesChanged()}function Fh(e,t,n,r=t0){if(e!=null){GM(j1,$1(t),t);for(let i=0;i<e.length;i+=n){for(let s=0;s<3;s++)_h[s]=e[i+s]-r[s];nf(_h,_h,j1);for(let s=0;s<3;s++)e[i+s]=_h[s]+r[s]}}}const _h=ue(),MA=ue(),$A=zi(),j1=mo(),TA=xu(),AN=ue(),IN="esri.geometry.support.meshUtils.scale";function KX(e,t,n){var s;if(!((s=e.vertexAttributes)!=null&&s.position))return;const{spatialReference:r,vertexSpace:i}=e;if(i.isRelative){ib(i,IN,n);const o=(n==null?void 0:n.origin)??e.origin;e.transform??(e.transform=new af),XX(e.transform,i,t,o)}else{const o=Af(r,n),a=(n==null?void 0:n.origin)??e.origin;o?QX(e,t,a):eQ(e,t,a)}}function XX(e,t,n,r){const i=t.origin,s=kt(Mh,r.x,r.y,r.z),o=rt(Mh,s,i);e.applyLocalInverse(o,AA);const a=nt(ue(),e.scale,n);e.scale=a,e.applyLocalInverse(o,o),rt(o,o,AA),e.translation=ut(ue(),e.translation,o)}function QX(e,t,n){const r=e.spatialReference,i=il(r),s=EN;_s(n,s,i)||_s(e.origin,s,i);const o=e.vertexAttributes.position,a=e.vertexAttributes.normal,l=e.vertexAttributes.tangent,c=new Float64Array(o.length),u=a!=null?new Float32Array(a.length):null,h=l!=null?new Float32Array(l.length):null;lb(o,r,c),a!=null&&u!=null&&ob(a,o,c,r,u),l!=null&&h!=null&&ub(l,o,c,r,h),kN(c,t,s),cb(c,o,r),a!=null&&u!=null&&ab(u,o,c,r,a),l!=null&&h!=null&&hb(h,o,c,r,l),e.vertexAttributesChanged()}function eQ(e,t,n){const r=EN;if(!_s(n,r,e.spatialReference)){const i=e.origin;r[0]=i.x,r[1]=i.y,r[2]=i.z,ie.getLogger(IN).error(`Failed to project specified origin (wkid:${n.spatialReference.wkid}) to mesh spatial reference (wkid:${e.spatialReference.wkid}). Projection may be possible after calling projection.load().`)}kN(e.vertexAttributes.position,t,r),e.vertexAttributesChanged()}function kN(e,t,n=t0){if(e)for(let r=0;r<e.length;r+=3){for(let i=0;i<3;i++)Mh[i]=e[r+i]-n[i];nt(Mh,Mh,t);for(let i=0;i<3;i++)e[r+i]=Mh[i]+n[i]}}const Mh=ue(),AA=ue(),EN=ue();async function tQ(e){const t=[];for(const n of e)n.name.toLowerCase().endsWith(".zip")?t.push(nQ(n)):t.push(Promise.resolve(n));return(await Promise.all(t)).flat()}async function nQ(e){const{BlobReader:t,ZipReader:n,BlobWriter:r}=await ne(()=>import("./zipjs-wrapper-04da1961.js"),[]),i=[];return(await new n(new t(e)).getEntries()).forEach(o=>{var c;if(o.directory||/^__MACOS/i.test(o.filename))return;const a=new r,l=(c=o.getData)==null?void 0:c.call(o,a).then(u=>new File([u],o.filename));l&&i.push(l)}),Promise.all(i)}var sr;const Ho="esri.geometry.Mesh",rQ={base:null,key:"type",defaultKeyValue:"georeferenced",typeMap:{georeferenced:I1,"georeferenced-relative":jR,local:k1}};let kn=sr=class extends L2.LoadableMixin($M(xo)){constructor(e){super(e),this.components=null,this.vertexSpace=new I1,this.transform=null,this.metadata=new fa,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new Dn,this.type="mesh"}initialize(){(this.metadata.externalSources.length===0||this.vertexAttributes.position.length)&&(this.loadStatus="loaded"),this.when(()=>{this.addHandles(co(()=>{var e;return{vertexAttributes:this.vertexAttributes,components:(e=this.components)==null?void 0:e.map(t=>t.clone())}},()=>this._clearSources(),{once:!0,sync:!0}))})}get hasExtent(){var e;return this.loaded?this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0):((e=this.metadata.displaySource)==null?void 0:e.extent)!=null}get _transformedExtent(){const{components:e,spatialReference:t,vertexAttributes:n,vertexSpace:r}=this,i=n.position;if(i.length===0||e&&e.length===0)return new Me({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t});if(r.type==="local"){const{_untransformedExtent:s,transform:o}=this;return lX(s,o,r,t)}if(r.type==="georeferenced-relative"){const{transform:s}=this,o=i$({positions:i,transform:s,vertexSpace:r,inSpatialReference:t,outSpatialReference:t});return Qg(o,t)}return Qg(i,t)}get _untransformedExtent(){return Qg(this.vertexAttributes.position,this.spatialReference)}get anchor(){const{vertexSpace:e}=this;if(e.isRelative)return e.getOriginPoint(this.spatialReference);const{center:t,zmin:n}=this._transformedExtent;return new ce({x:t.x,y:t.y,z:n,spatialReference:this.spatialReference})}get origin(){const{vertexSpace:e}=this;return e.isRelative?e.getOriginPoint(this.spatialReference):this._transformedExtent.center}get extent(){var e,t;return this.loaded||((t=(e=this.metadata)==null?void 0:e.displaySource)==null?void 0:t.extent)==null?this._transformedExtent:this.metadata.displaySource.extent.clone()}addComponent(e){if(!this.loaded)return ie.getLogger(this).error("addComponent()",new Gf().message);this.components||(this.components=[]),this.components.push(of.from(e)),this.notifyChange("components")}removeComponent(e){if(!this.loaded)return ie.getLogger(this).error("removeComponent()",new Gf().message);if(this.components){const t=this.components.indexOf(e);if(t!==-1)return this.components.splice(t,1),void this.notifyChange("components")}ie.getLogger(this).error("removeComponent()",new aq().message)}rotate(e,t,n,r){return WH(e,t,n,IA),qX(this,IA,r),this}offset(e,t,n,r){return this.loaded?(Bm[0]=e,Bm[1]=t,Bm[2]=n,OX(this,Bm,r),this):(ie.getLogger(this).error("offset()",new Gf().message),this)}scale(e,t){return this.loaded?(KX(this,e,t),this):(ie.getLogger(this).error("scale()",new Gf().message),this)}centerAt(e,t){return this.loaded?(cX(this,e,t),this):(ie.getLogger(this).error("centerAt()",new Gf().message),this)}load(e){const{metadata:{displaySource:t}}=this;return t&&this.addResolvingPromise(mX(this,t,e)),Promise.resolve(this)}addExternalSources(e){this.metadata.externalSources.addMany(e)}updateDisplaySource(e){this.metadata.displaySource=e}clone(){return this.cloneWithVertexSpace(this.vertexSpace.clone())}cloneWithVertexSpace(e){var r;let t=null;if(this.components){const i=new Map,s=new Map;t=this.components.map(o=>o.cloneWithDeduplication(i,s))}const n={components:t,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),vertexSpace:e,transform:((r=this.transform)==null?void 0:r.clone())??null,metadata:this.metadata.clone()};return new sr(n)}cloneShallow(){return new sr({components:this.components,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes,vertexSpace:this.vertexSpace.clone(),transform:this.transform,metadata:this.metadata})}vertexAttributesChanged(){this.notifyChange("vertexAttributes")}async toBinaryGLTF(e){const t=ne(()=>import("./gltfexport-37c37d4b.js"),["assets/gltfexport-37c37d4b.js","assets/enums-bdecffa2.js","assets/imageutils-3218f9c4.js","assets/resourceUtils-1d03d2fe.js"]),n=this.load(),r=await Promise.all([t,n]),{toBinaryGLTF:i}=r[0];return i(this,e)}get memoryUsage(){let e=0;if(e+=this.vertexAttributes.memoryUsage,this.components!=null)for(const t of this.components)e+=t.memoryUsage;return e}_clearSources(){this.metadata.clearSources()}static createBox(e,t){if(!(e instanceof ce))return ie.getLogger(Ho).error(".createBox()",new Ru().message),null;const n=new sr(zm(LX(),e,t));return t!=null&&t.imageFace&&t.imageFace!=="all"?FX(n,t.imageFace):n}static createSphere(e,t){return e instanceof ce?new sr(zm(jX((t==null?void 0:t.densificationFactor)||0),e,t)):(ie.getLogger(Ho).error(".createSphere()",new Ru().message),null)}static createCylinder(e,t){return e instanceof ce?new sr(zm(zX((t==null?void 0:t.densificationFactor)||0),e,t)):(ie.getLogger(Ho).error(".createCylinder()",new Ru().message),null)}static createPlane(e,t){if(!(e instanceof ce))return ie.getLogger(Ho).error(".createPlane()",new Ru().message),null;const n=(t==null?void 0:t.facing)??"up",r=BX(n,t==null?void 0:t.size);return new sr(zm(UX(n),e,{...t,size:r}))}static createFromPolygon(e,t){if(!(e instanceof ii))return ie.getLogger(Ho).error(".createFromPolygon()",new lq().message),null;const n=_Z(e);return new sr({vertexAttributes:new Dn({position:n.position}),components:[new of({faces:n.faces,shading:"flat",material:(t==null?void 0:t.material)??null})],spatialReference:e.spatialReference,vertexSpace:new I1})}static async createFromGLTF(e,t,n){if(!(e instanceof ce)){const i=new Ru;throw ie.getLogger(Ho).error(".createfromGLTF()",i.message),i}const{loadGLTFMesh:r}=await qO(ne(()=>import("./loadGLTFMesh-ea31dfa0.js"),["assets/loadGLTFMesh-ea31dfa0.js","assets/DefaultMaterial_COLOR_GAMMA-101ea40c.js","assets/enums-bdecffa2.js","assets/Version-1f969b2a.js","assets/resourceUtils-1d03d2fe.js","assets/types-1305598a.js"]),n);return new sr(await r(e,t,n))}static async createFromFiles(e,t,n){const r=c=>ie.getLogger(Ho).error(".createFromFiles()",c.message);if(!(e instanceof ce)){const c=new Ru;throw r(c),c}const i=n==null?void 0:n.layer;if(!i){const c=new cq;throw r(c),c}const s=await sr.extractAndFilterFiles(t,i),o=s.reduce((c,u)=>MX(i.infoFor3D,u)?c+1:c,0);if(o===0){const c=new uq;throw r(c),c}if(o>1){const c=new hq;throw r(c),c}const a=sr.createWithExternalSource(e,s),[l]=await i.uploadAssets([a],n);return l}static async extractAndFilterFiles(e,t){const n=t==null?void 0:t.infoFor3D;return n?(await tQ(e)).filter(r=>_X(n,r)):e}static createWithExternalSource(e,t,n){var f;const r=(n==null?void 0:n.extent)??null,{x:i,y:s,z:o,spatialReference:a}=e,l=((f=n==null?void 0:n.transform)==null?void 0:f.clone())??new af,c=(n==null?void 0:n.vertexSpace)??new k1({origin:[i,s,o??0]}),u={source:t,extent:r},h=new fa;return h.externalSources.push(u),new sr({metadata:h,transform:l,vertexSpace:c,spatialReference:a})}static createIncomplete(e,t){var c;const{x:n,y:r,z:i,spatialReference:s}=e,o=((c=t==null?void 0:t.transform)==null?void 0:c.clone())??new af,a=(t==null?void 0:t.vertexSpace)??new k1({origin:[n,r,i??0]}),l=new sr({transform:o,vertexSpace:a,spatialReference:s});return l.addResolvingPromise(Promise.reject(new Y("mesh-incomplete","Mesh resources are not complete"))),l}};p([b({type:[of],json:{write:!0}})],kn.prototype,"components",void 0),p([b({nonNullable:!0,types:rQ,constructOnly:!0,json:{write:!0}})],kn.prototype,"vertexSpace",void 0),p([b({type:af,json:{write:!0}})],kn.prototype,"transform",void 0),p([b({constructOnly:!0})],kn.prototype,"metadata",void 0),p([b()],kn.prototype,"hasExtent",null),p([b()],kn.prototype,"_transformedExtent",null),p([b()],kn.prototype,"_untransformedExtent",null),p([b()],kn.prototype,"anchor",null),p([b()],kn.prototype,"origin",null),p([b({readOnly:!0,json:{read:!1}})],kn.prototype,"extent",null),p([b({readOnly:!0,json:{read:!1,write:!0,default:!0}})],kn.prototype,"hasZ",void 0),p([b({readOnly:!0,json:{read:!1,write:!0,default:!1}})],kn.prototype,"hasM",void 0),p([b({type:Dn,nonNullable:!0,json:{write:!0}})],kn.prototype,"vertexAttributes",void 0),kn=sr=p([L(Ho)],kn);const Bm=ue(),IA=zi(),CN=kn,h3e=Object.freeze(Object.defineProperty({__proto__:null,default:CN},Symbol.toStringTag,{value:"Module"}));async function iQ(e,t){const{WhereClause:n}=await ne(()=>import("./WhereClause-41137be1.js").then(r=>r.W),["assets/WhereClause-41137be1.js","assets/TimeOnly-879c5107.js","assets/UnknownTimeZone-a05df022.js"]);return n.create(e,t)}function f3e(e,t){return e!=null?t!=null?`(${e}) AND (${t})`:e:t}function sQ(e){return typeof e=="number"}function fs(e){return typeof e=="string"||e instanceof String}let Mp;var vO,xO;const oQ=((vO=globalThis.esriConfig)==null?void 0:vO.locale)??((xO=globalThis.dojoConfig)==null?void 0:xO.locale);function ON(){var e;return oQ??((e=globalThis.navigator)==null?void 0:e.language)??"en"}function ti(){return Mp===void 0&&(Mp=ON()),Mp}function d3e(e=ti()){const t=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(e);return t==null?void 0:t[1].toLowerCase()}const $p=[];function p3e(e){return $p.push(e),It(()=>$p.splice($p.indexOf(e),1))}const f3=[];function a$(e){return f3.push(e),It(()=>$p.splice(f3.indexOf(e),1))}function aQ(){const e=ON();Mp!==e&&(Mp=e,[...f3].forEach(t=>{t.call(null,e)}),[...$p].forEach(t=>{t.call(null,e)}))}var SO;(SO=globalThis.addEventListener)==null||SO.call(globalThis,"languagechange",aQ);const kA=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class Mu extends Error{}class lQ extends Mu{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class cQ extends Mu{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class uQ extends Mu{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class $h extends Mu{}class PN extends Mu{constructor(t){super(`Invalid unit ${t}`)}}class dr extends Mu{}class Fo extends Mu{constructor(){super("Zone is an abstract class")}}const le="numeric",Di="short",Dr="long",z1={year:le,month:le,day:le},RN={year:le,month:Di,day:le},hQ={year:le,month:Di,day:le,weekday:Di},NN={year:le,month:Dr,day:le},DN={year:le,month:Dr,day:le,weekday:Dr},LN={hour:le,minute:le},FN={hour:le,minute:le,second:le},jN={hour:le,minute:le,second:le,timeZoneName:Di},zN={hour:le,minute:le,second:le,timeZoneName:Dr},BN={hour:le,minute:le,hourCycle:"h23"},UN={hour:le,minute:le,second:le,hourCycle:"h23"},VN={hour:le,minute:le,second:le,hourCycle:"h23",timeZoneName:Di},GN={hour:le,minute:le,second:le,hourCycle:"h23",timeZoneName:Dr},WN={year:le,month:le,day:le,hour:le,minute:le},HN={year:le,month:le,day:le,hour:le,minute:le,second:le},qN={year:le,month:Di,day:le,hour:le,minute:le},JN={year:le,month:Di,day:le,hour:le,minute:le,second:le},fQ={year:le,month:Di,day:le,weekday:Di,hour:le,minute:le},ZN={year:le,month:Dr,day:le,hour:le,minute:le,timeZoneName:Di},YN={year:le,month:Dr,day:le,hour:le,minute:le,second:le,timeZoneName:Di},KN={year:le,month:Dr,day:le,weekday:Dr,hour:le,minute:le,timeZoneName:Dr},XN={year:le,month:Dr,day:le,weekday:Dr,hour:le,minute:le,second:le,timeZoneName:Dr};class W0{get type(){throw new Fo}get name(){throw new Fo}get ianaName(){return this.name}get isUniversal(){throw new Fo}offsetName(t,n){throw new Fo}formatOffset(t,n){throw new Fo}offset(t){throw new Fo}equals(t){throw new Fo}get isValid(){throw new Fo}}let Cw=null;class gb extends W0{static get instance(){return Cw===null&&(Cw=new gb),Cw}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:n,locale:r}){return aD(t,n,r)}formatOffset(t,n){return Tp(this.offset(t),n)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let ey={};function dQ(e){return ey[e]||(ey[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),ey[e]}const pQ={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function mQ(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,l,c,u]=r;return[o,i,s,a,l,c,u]}function gQ(e,t){const n=e.formatToParts(t),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],a=pQ[s];s==="era"?r[a]=o:ke(a)||(r[a]=parseInt(o,10))}return r}let Um={};class Li extends W0{static create(t){return Um[t]||(Um[t]=new Li(t)),Um[t]}static resetCache(){Um={},ey={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Li.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:n,locale:r}){return aD(t,n,r,this.name)}formatOffset(t,n){return Tp(this.offset(t),n)}offset(t){const n=new Date(t);if(isNaN(n))return NaN;const r=dQ(this.name);let[i,s,o,a,l,c,u]=r.formatToParts?gQ(r,n):mQ(r,n);a==="BC"&&(i=-Math.abs(i)+1);const f=bb({year:i,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let d=+n;const g=d%1e3;return d-=g>=0?g:1e3+g,(f-d)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let EA={};function yQ(e,t={}){const n=JSON.stringify([e,t]);let r=EA[n];return r||(r=new Intl.ListFormat(e,t),EA[n]=r),r}let d3={};function p3(e,t={}){const n=JSON.stringify([e,t]);let r=d3[n];return r||(r=new Intl.DateTimeFormat(e,t),d3[n]=r),r}let m3={};function bQ(e,t={}){const n=JSON.stringify([e,t]);let r=m3[n];return r||(r=new Intl.NumberFormat(e,t),m3[n]=r),r}let g3={};function wQ(e,t={}){const{base:n,...r}=t,i=JSON.stringify([e,r]);let s=g3[i];return s||(s=new Intl.RelativeTimeFormat(e,t),g3[i]=s),s}let vd=null;function vQ(){return vd||(vd=new Intl.DateTimeFormat().resolvedOptions().locale,vd)}let CA={};function xQ(e){let t=CA[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,CA[e]=t}return t}function SQ(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(n===-1)return[e];{let r,i;try{r=p3(e).resolvedOptions(),i=e}catch{const l=e.substring(0,n);r=p3(l).resolvedOptions(),i=l}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function _Q(e,t,n){return(n||t)&&(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`)),e}function MQ(e){const t=[];for(let n=1;n<=12;n++){const r=ve.utc(2009,n,1);t.push(e(r))}return t}function $Q(e){const t=[];for(let n=1;n<=7;n++){const r=ve.utc(2016,11,13+n);t.push(e(r))}return t}function Vm(e,t,n,r){const i=e.listingMode();return i==="error"?null:i==="en"?n(t):r(t)}function TQ(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class AQ{constructor(t,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=bQ(t,a)}}format(t){if(this.inf){const n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{const n=this.floor?Math.floor(t):h$(t,3);return Jt(n,this.padTo)}}}class IQ{constructor(t,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Li.create(a).valid?(i=a,this.dt=t):(i="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,i=t.zone.name):(i="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=p3(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class kQ{constructor(t,n,r){this.opts={style:"long",...r},!n&&sD()&&(this.rtf=wQ(t,r))}format(t,n){return this.rtf?this.rtf.format(t,n):ZQ(n,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,n){return this.rtf?this.rtf.formatToParts(t,n):[]}}const EQ={firstDay:1,minimalDays:4,weekend:[6,7]};class ct{static fromOpts(t){return ct.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,n,r,i,s=!1){const o=t||Nt.defaultLocale,a=o||(s?"en-US":vQ()),l=n||Nt.defaultNumberingSystem,c=r||Nt.defaultOutputCalendar,u=y3(i)||Nt.defaultWeekSettings;return new ct(a,l,c,u,o)}static resetCache(){vd=null,d3={},m3={},g3={}}static fromObject({locale:t,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return ct.create(t,n,r,i)}constructor(t,n,r,i,s){const[o,a,l]=SQ(t);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=r||l||null,this.weekSettings=i,this.intl=_Q(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=TQ(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:ct.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,y3(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,n=!1){return Vm(this,t,uD,()=>{const r=n?{month:t,day:"numeric"}:{month:t},i=n?"format":"standalone";return this.monthsCache[i][t]||(this.monthsCache[i][t]=MQ(s=>this.extract(s,r,"month"))),this.monthsCache[i][t]})}weekdays(t,n=!1){return Vm(this,t,dD,()=>{const r=n?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},i=n?"format":"standalone";return this.weekdaysCache[i][t]||(this.weekdaysCache[i][t]=$Q(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][t]})}meridiems(){return Vm(this,void 0,()=>pD,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ve.utc(2016,11,13,9),ve.utc(2016,11,13,19)].map(n=>this.extract(n,t,"dayperiod"))}return this.meridiemCache})}eras(t){return Vm(this,t,mD,()=>{const n={era:t};return this.eraCache[t]||(this.eraCache[t]=[ve.utc(-40,1,1),ve.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[t]})}extract(t,n,r){const i=this.dtFormatter(t,n),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(t={}){return new AQ(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,n={}){return new IQ(t,this.intl,n)}relFormatter(t={}){return new kQ(this.intl,this.isEnglish(),t)}listFormatter(t={}){return yQ(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:oD()?xQ(this.locale):EQ}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let Ow=null;class Sn extends W0{static get utcInstance(){return Ow===null&&(Ow=new Sn(0)),Ow}static instance(t){return t===0?Sn.utcInstance:new Sn(t)}static parseSpecifier(t){if(t){const n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Sn(wb(n[1],n[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Tp(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Tp(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,n){return Tp(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class CQ extends W0{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ya(e,t){if(ke(e)||e===null)return t;if(e instanceof W0)return e;if(RQ(e)){const n=e.toLowerCase();return n==="default"?t:n==="local"||n==="system"?gb.instance:n==="utc"||n==="gmt"?Sn.utcInstance:Sn.parseSpecifier(n)||Li.create(e)}else return Lc(e)?Sn.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new CQ(e)}let OA=()=>Date.now(),PA="system",RA=null,NA=null,DA=null,LA=60,FA,jA=null;class Nt{static get now(){return OA}static set now(t){OA=t}static set defaultZone(t){PA=t}static get defaultZone(){return ya(PA,gb.instance)}static get defaultLocale(){return RA}static set defaultLocale(t){RA=t}static get defaultNumberingSystem(){return NA}static set defaultNumberingSystem(t){NA=t}static get defaultOutputCalendar(){return DA}static set defaultOutputCalendar(t){DA=t}static get defaultWeekSettings(){return jA}static set defaultWeekSettings(t){jA=y3(t)}static get twoDigitCutoffYear(){return LA}static set twoDigitCutoffYear(t){LA=t%100}static get throwOnInvalid(){return FA}static set throwOnInvalid(t){FA=t}static resetCaches(){ct.resetCache(),Li.resetCache()}}class ki{constructor(t,n){this.reason=t,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const QN=[0,31,59,90,120,151,181,212,243,273,304,334],eD=[0,31,60,91,121,152,182,213,244,274,305,335];function Qr(e,t){return new ki("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function l$(e,t,n){const r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function tD(e,t,n){return n+(H0(e)?eD:QN)[t-1]}function nD(e,t){const n=H0(e)?eD:QN,r=n.findIndex(s=>s<t),i=t-n[r];return{month:r+1,day:i}}function c$(e,t){return(e-t+7)%7+1}function B1(e,t=4,n=1){const{year:r,month:i,day:s}=e,o=tD(r,i,s),a=c$(l$(r,i,s),n);let l=Math.floor((o-a+14-t)/7),c;return l<1?(c=r-1,l=u0(c,t,n)):l>u0(r,t,n)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...vb(e)}}function zA(e,t=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=e,o=c$(l$(r,1,t),n),a=jh(r);let l=i*7+s-o-7+t,c;l<1?(c=r-1,l+=jh(c)):l>a?(c=r+1,l-=jh(r)):c=r;const{month:u,day:h}=nD(c,l);return{year:c,month:u,day:h,...vb(e)}}function Pw(e){const{year:t,month:n,day:r}=e,i=tD(t,n,r);return{year:t,ordinal:i,...vb(e)}}function BA(e){const{year:t,ordinal:n}=e,{month:r,day:i}=nD(t,n);return{year:t,month:r,day:i,...vb(e)}}function UA(e,t){if(!ke(e.localWeekday)||!ke(e.localWeekNumber)||!ke(e.localWeekYear)){if(!ke(e.weekday)||!ke(e.weekNumber)||!ke(e.weekYear))throw new $h("Cannot mix locale-based week fields with ISO-based week fields");return ke(e.localWeekday)||(e.weekday=e.localWeekday),ke(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),ke(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function OQ(e,t=4,n=1){const r=yb(e.weekYear),i=ei(e.weekNumber,1,u0(e.weekYear,t,n)),s=ei(e.weekday,1,7);return r?i?s?!1:Qr("weekday",e.weekday):Qr("week",e.weekNumber):Qr("weekYear",e.weekYear)}function PQ(e){const t=yb(e.year),n=ei(e.ordinal,1,jh(e.year));return t?n?!1:Qr("ordinal",e.ordinal):Qr("year",e.year)}function rD(e){const t=yb(e.year),n=ei(e.month,1,12),r=ei(e.day,1,U1(e.year,e.month));return t?n?r?!1:Qr("day",e.day):Qr("month",e.month):Qr("year",e.year)}function iD(e){const{hour:t,minute:n,second:r,millisecond:i}=e,s=ei(t,0,23)||t===24&&n===0&&r===0&&i===0,o=ei(n,0,59),a=ei(r,0,59),l=ei(i,0,999);return s?o?a?l?!1:Qr("millisecond",i):Qr("second",r):Qr("minute",n):Qr("hour",t)}function ke(e){return typeof e>"u"}function Lc(e){return typeof e=="number"}function yb(e){return typeof e=="number"&&e%1===0}function RQ(e){return typeof e=="string"}function NQ(e){return Object.prototype.toString.call(e)==="[object Date]"}function sD(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function oD(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function DQ(e){return Array.isArray(e)?e:[e]}function VA(e,t,n){if(e.length!==0)return e.reduce((r,i)=>{const s=[t(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function LQ(e,t){return t.reduce((n,r)=>(n[r]=e[r],n),{})}function df(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function y3(e){if(e==null)return null;if(typeof e!="object")throw new dr("Week settings must be an object");if(!ei(e.firstDay,1,7)||!ei(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!ei(t,1,7)))throw new dr("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function ei(e,t,n){return yb(e)&&e>=t&&e<=n}function FQ(e,t){return e-t*Math.floor(e/t)}function Jt(e,t=2){const n=e<0;let r;return n?r="-"+(""+-e).padStart(t,"0"):r=(""+e).padStart(t,"0"),r}function da(e){if(!(ke(e)||e===null||e===""))return parseInt(e,10)}function dl(e){if(!(ke(e)||e===null||e===""))return parseFloat(e)}function u$(e){if(!(ke(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function h$(e,t,n=!1){const r=10**t;return(n?Math.trunc:Math.round)(e*r)/r}function H0(e){return e%4===0&&(e%100!==0||e%400===0)}function jh(e){return H0(e)?366:365}function U1(e,t){const n=FQ(t-1,12)+1,r=e+(t-n)/12;return n===2?H0(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function bb(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function GA(e,t,n){return-c$(l$(e,1,t),n)+t-1}function u0(e,t=4,n=1){const r=GA(e,t,n),i=GA(e+1,t,n);return(jh(e)-r+i)/7}function b3(e){return e>99?e:e>Nt.twoDigitCutoffYear?1900+e:2e3+e}function aD(e,t,n,r=null){const i=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function wb(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const r=parseInt(t,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function lD(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new dr(`Invalid unit value ${e}`);return t}function V1(e,t){const n={};for(const r in e)if(df(e,r)){const i=e[r];if(i==null)continue;n[t(r)]=lD(i)}return n}function Tp(e,t){const n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${Jt(n,2)}:${Jt(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Jt(n,2)}${Jt(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function vb(e){return LQ(e,["hour","minute","second","millisecond"])}const jQ=["January","February","March","April","May","June","July","August","September","October","November","December"],cD=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],zQ=["J","F","M","A","M","J","J","A","S","O","N","D"];function uD(e){switch(e){case"narrow":return[...zQ];case"short":return[...cD];case"long":return[...jQ];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const hD=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],fD=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],BQ=["M","T","W","T","F","S","S"];function dD(e){switch(e){case"narrow":return[...BQ];case"short":return[...fD];case"long":return[...hD];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const pD=["AM","PM"],UQ=["Before Christ","Anno Domini"],VQ=["BC","AD"],GQ=["B","A"];function mD(e){switch(e){case"narrow":return[...GQ];case"short":return[...VQ];case"long":return[...UQ];default:return null}}function WQ(e){return pD[e.hour<12?0:1]}function HQ(e,t){return dD(t)[e.weekday-1]}function qQ(e,t){return uD(t)[e.month-1]}function JQ(e,t){return mD(t)[e.year<0?0:1]}function ZQ(e,t,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&s){const h=e==="days";switch(t){case 1:return h?"tomorrow":`next ${i[e][0]}`;case-1:return h?"yesterday":`last ${i[e][0]}`;case 0:return h?"today":`this ${i[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,c=i[e],u=r?l?c[1]:c[2]||c[1]:l?i[e][0]:e;return o?`${a} ${u} ago`:`in ${a} ${u}`}function WA(e,t){let n="";for(const r of e)r.literal?n+=r.val:n+=t(r.val);return n}const YQ={D:z1,DD:RN,DDD:NN,DDDD:DN,t:LN,tt:FN,ttt:jN,tttt:zN,T:BN,TT:UN,TTT:VN,TTTT:GN,f:WN,ff:qN,fff:ZN,ffff:KN,F:HN,FF:JN,FFF:YN,FFFF:XN};class zn{static create(t,n={}){return new zn(t,n)}static parseFormat(t){let n=null,r="",i=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||a===n?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,n=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(t){return YQ[t]}constructor(t,n){this.opts=n,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...n}).format()}dtFormatter(t,n={}){return this.loc.dtFormatter(t,{...this.opts,...n})}formatDateTime(t,n){return this.dtFormatter(t,n).format()}formatDateTimeParts(t,n){return this.dtFormatter(t,n).formatToParts()}formatInterval(t,n){return this.dtFormatter(t.start,n).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,n){return this.dtFormatter(t,n).resolvedOptions()}num(t,n=0){if(this.opts.forceSimple)return Jt(t,n);const r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(t)}formatDateTimeFromString(t,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(d,g)=>this.loc.extract(t,d,g),o=d=>t.isOffsetFixed&&t.offset===0&&d.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,d.format):"",a=()=>r?WQ(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(d,g)=>r?qQ(t,d):s(g?{month:d}:{month:d,day:"numeric"},"month"),c=(d,g)=>r?HQ(t,d):s(g?{weekday:d}:{weekday:d,month:"long",day:"numeric"},"weekday"),u=d=>{const g=zn.macroTokenToFormatOpts(d);return g?this.formatWithSystemDefault(t,g):d},h=d=>r?JQ(t,d):s({era:d},"era"),f=d=>{switch(d){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(t.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(t.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(t.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return u(d)}};return WA(zn.parseFormat(n),f)}formatDurationFromString(t,n){const r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=l=>c=>{const u=r(c);return u?this.num(l.get(u),c.length):c},s=zn.parseFormat(n),o=s.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=t.shiftTo(...o.map(r).filter(l=>l));return WA(s,i(a))}}const gD=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function If(...e){const t=e.reduce((n,r)=>n+r.source,"");return RegExp(`^${t}$`)}function kf(...e){return t=>e.reduce(([n,r,i],s)=>{const[o,a,l]=s(t,i);return[{...n,...o},a||r,l]},[{},null,1]).slice(0,2)}function Ef(e,...t){if(e==null)return[null,null];for(const[n,r]of t){const i=n.exec(e);if(i)return r(i)}return[null,null]}function yD(...e){return(t,n)=>{const r={};let i;for(i=0;i<e.length;i++)r[e[i]]=da(t[n+i]);return[r,null,n+i]}}const bD=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,KQ=`(?:${bD.source}?(?:\\[(${gD.source})\\])?)?`,f$=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,wD=RegExp(`${f$.source}${KQ}`),d$=RegExp(`(?:T${wD.source})?`),XQ=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,QQ=/(\d{4})-?W(\d\d)(?:-?(\d))?/,eee=/(\d{4})-?(\d{3})/,tee=yD("weekYear","weekNumber","weekDay"),nee=yD("year","ordinal"),ree=/(\d{4})-(\d\d)-(\d\d)/,vD=RegExp(`${f$.source} ?(?:${bD.source}|(${gD.source}))?`),iee=RegExp(`(?: ${vD.source})?`);function zh(e,t,n){const r=e[t];return ke(r)?n:da(r)}function see(e,t){return[{year:zh(e,t),month:zh(e,t+1,1),day:zh(e,t+2,1)},null,t+3]}function Cf(e,t){return[{hours:zh(e,t,0),minutes:zh(e,t+1,0),seconds:zh(e,t+2,0),milliseconds:u$(e[t+3])},null,t+4]}function q0(e,t){const n=!e[t]&&!e[t+1],r=wb(e[t+1],e[t+2]),i=n?null:Sn.instance(r);return[{},i,t+3]}function J0(e,t){const n=e[t]?Li.create(e[t]):null;return[{},n,t+1]}const oee=RegExp(`^T?${f$.source}$`),aee=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function lee(e){const[t,n,r,i,s,o,a,l,c]=e,u=t[0]==="-",h=l&&l[0]==="-",f=(d,g=!1)=>d!==void 0&&(g||d&&u)?-d:d;return[{years:f(dl(n)),months:f(dl(r)),weeks:f(dl(i)),days:f(dl(s)),hours:f(dl(o)),minutes:f(dl(a)),seconds:f(dl(l),l==="-0"),milliseconds:f(u$(c),h)}]}const cee={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function p$(e,t,n,r,i,s,o){const a={year:t.length===2?b3(da(t)):da(t),month:cD.indexOf(n)+1,day:da(r),hour:da(i),minute:da(s)};return o&&(a.second=da(o)),e&&(a.weekday=e.length>3?hD.indexOf(e)+1:fD.indexOf(e)+1),a}const uee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function hee(e){const[,t,n,r,i,s,o,a,l,c,u,h]=e,f=p$(t,i,r,n,s,o,a);let d;return l?d=cee[l]:c?d=0:d=wb(u,h),[f,new Sn(d)]}function fee(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const dee=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,pee=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,mee=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function HA(e){const[,t,n,r,i,s,o,a]=e;return[p$(t,i,r,n,s,o,a),Sn.utcInstance]}function gee(e){const[,t,n,r,i,s,o,a]=e;return[p$(t,a,n,r,i,s,o),Sn.utcInstance]}const yee=If(XQ,d$),bee=If(QQ,d$),wee=If(eee,d$),vee=If(wD),xD=kf(see,Cf,q0,J0),xee=kf(tee,Cf,q0,J0),See=kf(nee,Cf,q0,J0),_ee=kf(Cf,q0,J0);function Mee(e){return Ef(e,[yee,xD],[bee,xee],[wee,See],[vee,_ee])}function $ee(e){return Ef(fee(e),[uee,hee])}function Tee(e){return Ef(e,[dee,HA],[pee,HA],[mee,gee])}function Aee(e){return Ef(e,[aee,lee])}const Iee=kf(Cf);function kee(e){return Ef(e,[oee,Iee])}const Eee=If(ree,iee),Cee=If(vD),Oee=kf(Cf,q0,J0);function Pee(e){return Ef(e,[Eee,xD],[Cee,Oee])}const qA="Invalid Duration",SD={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Ree={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...SD},Ur=146097/400,Bu=146097/4800,Nee={years:{quarters:4,months:12,weeks:Ur/7,days:Ur,hours:Ur*24,minutes:Ur*24*60,seconds:Ur*24*60*60,milliseconds:Ur*24*60*60*1e3},quarters:{months:3,weeks:Ur/28,days:Ur/4,hours:Ur*24/4,minutes:Ur*24*60/4,seconds:Ur*24*60*60/4,milliseconds:Ur*24*60*60*1e3/4},months:{weeks:Bu/7,days:Bu,hours:Bu*24,minutes:Bu*24*60,seconds:Bu*24*60*60,milliseconds:Bu*24*60*60*1e3},...SD},$c=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Dee=$c.slice(0).reverse();function jo(e,t,n=!1){const r={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new We(r)}function _D(e,t){let n=t.milliseconds??0;for(const r of Dee.slice(1))t[r]&&(n+=t[r]*e[r].milliseconds);return n}function JA(e,t){const n=_D(e,t)<0?-1:1;$c.reduceRight((r,i)=>{if(ke(t[i]))return r;if(r){const s=t[r]*n,o=e[i][r],a=Math.floor(s/o);t[i]+=a*n,t[r]-=a*o*n}return i},null),$c.reduce((r,i)=>{if(ke(t[i]))return r;if(r){const s=t[r]%1;t[r]-=s,t[i]+=s*e[r][i]}return i},null)}function Lee(e){const t={};for(const[n,r]of Object.entries(e))r!==0&&(t[n]=r);return t}class We{constructor(t){const n=t.conversionAccuracy==="longterm"||!1;let r=n?Nee:Ree;t.matrix&&(r=t.matrix),this.values=t.values,this.loc=t.loc||ct.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(t,n){return We.fromObject({milliseconds:t},n)}static fromObject(t,n={}){if(t==null||typeof t!="object")throw new dr(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new We({values:V1(t,We.normalizeUnit),loc:ct.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(t){if(Lc(t))return We.fromMillis(t);if(We.isDuration(t))return t;if(typeof t=="object")return We.fromObject(t);throw new dr(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,n){const[r]=Aee(t);return r?We.fromObject(r,n):We.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,n){const[r]=kee(t);return r?We.fromObject(r,n):We.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,n=null){if(!t)throw new dr("need to specify a reason the Duration is invalid");const r=t instanceof ki?t:new ki(t,n);if(Nt.throwOnInvalid)throw new uQ(r);return new We({invalid:r})}static normalizeUnit(t){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!n)throw new PN(t);return n}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?zn.create(this.loc,r).formatDurationFromString(this,t):qA}toHuman(t={}){if(!this.isValid)return qA;const n=$c.map(r=>{const i=this.values[r];return ke(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=h$(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},ve.fromMillis(n,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?_D(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const n=We.fromDurationLike(t),r={};for(const i of $c)(df(n.values,i)||df(this.values,i))&&(r[i]=n.get(i)+this.get(i));return jo(this,{values:r},!0)}minus(t){if(!this.isValid)return this;const n=We.fromDurationLike(t);return this.plus(n.negate())}mapUnits(t){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=lD(t(this.values[r],r));return jo(this,{values:n},!0)}get(t){return this[We.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const n={...this.values,...V1(t,We.normalizeUnit)};return jo(this,{values:n})}reconfigure({locale:t,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:n}),matrix:i,conversionAccuracy:r};return jo(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return JA(this.matrix,t),jo(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Lee(this.normalize().shiftToAll().toObject());return jo(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>We.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of $c)if(t.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;Lc(i[o])&&(a+=i[o]);const l=Math.trunc(a);n[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else Lc(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return JA(this.matrix,n),jo(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=this.values[n]===0?0:-this.values[n];return jo(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of $c)if(!n(this.values[r],t.values[r]))return!1;return!0}}const Uu="Invalid Interval";function Fee(e,t){return!e||!e.isValid?At.invalid("missing or invalid start"):!t||!t.isValid?At.invalid("missing or invalid end"):t<e?At.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class At{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,n=null){if(!t)throw new dr("need to specify a reason the Interval is invalid");const r=t instanceof ki?t:new ki(t,n);if(Nt.throwOnInvalid)throw new cQ(r);return new At({invalid:r})}static fromDateTimes(t,n){const r=Jf(t),i=Jf(n),s=Fee(r,i);return s??new At({start:r,end:i})}static after(t,n){const r=We.fromDurationLike(n),i=Jf(t);return At.fromDateTimes(i,i.plus(r))}static before(t,n){const r=We.fromDurationLike(n),i=Jf(t);return At.fromDateTimes(i.minus(r),i)}static fromISO(t,n){const[r,i]=(t||"").split("/",2);if(r&&i){let s,o;try{s=ve.fromISO(r,n),o=s.isValid}catch{o=!1}let a,l;try{a=ve.fromISO(i,n),l=a.isValid}catch{l=!1}if(o&&l)return At.fromDateTimes(s,a);if(o){const c=We.fromISO(i,n);if(c.isValid)return At.after(s,c)}else if(l){const c=We.fromISO(r,n);if(c.isValid)return At.before(a,c)}}return At.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(t,n);let i;return n!=null&&n.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(t,n),Math.floor(i.diff(r,t).get(t))+(i.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:n}={}){return this.isValid?At.fromDateTimes(t||this.s,n||this.e):this}splitAt(...t){if(!this.isValid)return[];const n=t.map(Jf).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;r.push(At.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(t){const n=We.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(n.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(At.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const n=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;return n>=r?null:At.fromDateTimes(n,r)}union(t){if(!this.isValid)return this;const n=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return At.fromDateTimes(n,r)}static merge(t){const[n,r]=t.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(t){let n=null,r=0;const i=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?n=l.time:(n&&+n!=+l.time&&i.push(At.fromDateTimes(n,l.time)),n=null);return At.merge(i)}difference(...t){return At.xor([this].concat(t)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:Uu}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=z1,n={}){return this.isValid?zn.create(this.s.loc.clone(n),t).formatInterval(this):Uu}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:Uu}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Uu}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:Uu}toFormat(t,{separator:n=" â€“ "}={}){return this.isValid?`${this.s.toFormat(t)}${n}${this.e.toFormat(t)}`:Uu}toDuration(t,n){return this.isValid?this.e.diff(this.s,t,n):We.invalid(this.invalidReason)}mapEndpoints(t){return At.fromDateTimes(t(this.s),t(this.e))}}class Gm{static hasDST(t=Nt.defaultZone){const n=ve.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(t){return Li.isValidZone(t)}static normalizeZone(t){return ya(t,Nt.defaultZone)}static getStartOfWeek({locale:t=null,locObj:n=null}={}){return(n||ct.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:n=null}={}){return(n||ct.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:n=null}={}){return(n||ct.create(t)).getWeekendDays().slice()}static months(t="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||ct.create(n,r,s)).months(t)}static monthsFormat(t="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||ct.create(n,r,s)).months(t,!0)}static weekdays(t="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||ct.create(n,r,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||ct.create(n,r,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return ct.create(t).meridiems()}static eras(t="short",{locale:n=null}={}){return ct.create(n,null,"gregory").eras(t)}static features(){return{relative:sD(),localeWeek:oD()}}}function ZA(e,t){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(t)-n(e);return Math.floor(We.fromMillis(r).as("days"))}function jee(e,t,n){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=ZA(l,c);return(u-u%7)/7}],["days",ZA]],i={},s=e;let o,a;for(const[l,c]of r)n.indexOf(l)>=0&&(o=l,i[l]=c(e,t),a=s.plus(i),a>t?(i[l]--,e=s.plus(i),e>t&&(a=e,i[l]--,e=s.plus(i))):e=a);return[e,i,a,o]}function zee(e,t,n,r){let[i,s,o,a]=jee(e,t,n);const l=t-i,c=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<t&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));const u=We.fromObject(s,r);return c.length>0?We.fromMillis(l,r).shiftTo(...c).plus(u):u}const m$={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},YA={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Bee=m$.hanidec.replace(/[\[|\]]/g,"").split("");function Uee(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(e[n].search(m$.hanidec)!==-1)t+=Bee.indexOf(e[n]);else for(const i in YA){const[s,o]=YA[i];r>=s&&r<=o&&(t+=r-s)}}return parseInt(t,10)}else return t}function hi({numberingSystem:e},t=""){return new RegExp(`${m$[e||"latn"]}${t}`)}const Vee="missing Intl.DateTimeFormat.formatToParts support";function Ke(e,t=n=>n){return{regex:e,deser:([n])=>t(Uee(n))}}const Gee=String.fromCharCode(160),MD=`[ ${Gee}]`,$D=new RegExp(MD,"g");function Wee(e){return e.replace(/\./g,"\\.?").replace($D,MD)}function KA(e){return e.replace(/\./g,"").replace($D," ").toLowerCase()}function fi(e,t){return e===null?null:{regex:RegExp(e.map(Wee).join("|")),deser:([n])=>e.findIndex(r=>KA(n)===KA(r))+t}}function XA(e,t){return{regex:e,deser:([,n,r])=>wb(n,r),groups:t}}function Wm(e){return{regex:e,deser:([t])=>t}}function Hee(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function qee(e,t){const n=hi(t),r=hi(t,"{2}"),i=hi(t,"{3}"),s=hi(t,"{4}"),o=hi(t,"{6}"),a=hi(t,"{1,2}"),l=hi(t,"{1,3}"),c=hi(t,"{1,6}"),u=hi(t,"{1,9}"),h=hi(t,"{2,4}"),f=hi(t,"{4,6}"),d=w=>({regex:RegExp(Hee(w.val)),deser:([v])=>v,literal:!0}),y=(w=>{if(e.literal)return d(w);switch(w.val){case"G":return fi(t.eras("short"),0);case"GG":return fi(t.eras("long"),0);case"y":return Ke(c);case"yy":return Ke(h,b3);case"yyyy":return Ke(s);case"yyyyy":return Ke(f);case"yyyyyy":return Ke(o);case"M":return Ke(a);case"MM":return Ke(r);case"MMM":return fi(t.months("short",!0),1);case"MMMM":return fi(t.months("long",!0),1);case"L":return Ke(a);case"LL":return Ke(r);case"LLL":return fi(t.months("short",!1),1);case"LLLL":return fi(t.months("long",!1),1);case"d":return Ke(a);case"dd":return Ke(r);case"o":return Ke(l);case"ooo":return Ke(i);case"HH":return Ke(r);case"H":return Ke(a);case"hh":return Ke(r);case"h":return Ke(a);case"mm":return Ke(r);case"m":return Ke(a);case"q":return Ke(a);case"qq":return Ke(r);case"s":return Ke(a);case"ss":return Ke(r);case"S":return Ke(l);case"SSS":return Ke(i);case"u":return Wm(u);case"uu":return Wm(a);case"uuu":return Ke(n);case"a":return fi(t.meridiems(),0);case"kkkk":return Ke(s);case"kk":return Ke(h,b3);case"W":return Ke(a);case"WW":return Ke(r);case"E":case"c":return Ke(n);case"EEE":return fi(t.weekdays("short",!1),1);case"EEEE":return fi(t.weekdays("long",!1),1);case"ccc":return fi(t.weekdays("short",!0),1);case"cccc":return fi(t.weekdays("long",!0),1);case"Z":case"ZZ":return XA(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return XA(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return Wm(/[a-z_+-/]{1,256}?/i);case" ":return Wm(/[^\S\n\r]/);default:return d(w)}})(e)||{invalidReason:Vee};return y.token=e,y}const Jee={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Zee(e,t,n){const{type:r,value:i}=e;if(r==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const s=t[r];let o=r;r==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=Jee[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function Yee(e){return[`^${e.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,e]}function Kee(e,t,n){const r=e.match(t);if(r){const i={};let s=1;for(const o in n)if(df(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,i]}else return[r,{}]}function Xee(e){const t=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return ke(e.z)||(n=Li.create(e.z)),ke(e.Z)||(n||(n=new Sn(e.Z)),r=e.Z),ke(e.q)||(e.M=(e.q-1)*3+1),ke(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),ke(e.u)||(e.S=u$(e.u)),[Object.keys(e).reduce((s,o)=>{const a=t(o);return a&&(s[a]=e[o]),s},{}),n,r]}let Rw=null;function Qee(){return Rw||(Rw=ve.fromMillis(1555555555555)),Rw}function ete(e,t){if(e.literal)return e;const n=zn.macroTokenToFormatOpts(e.val),r=ID(n,t);return r==null||r.includes(void 0)?e:r}function TD(e,t){return Array.prototype.concat(...e.map(n=>ete(n,t)))}function AD(e,t,n){const r=TD(zn.parseFormat(n),e),i=r.map(o=>qee(o,e)),s=i.find(o=>o.invalidReason);if(s)return{input:t,tokens:r,invalidReason:s.invalidReason};{const[o,a]=Yee(i),l=RegExp(o,"i"),[c,u]=Kee(t,l,a),[h,f,d]=u?Xee(u):[null,null,void 0];if(df(u,"a")&&df(u,"H"))throw new $h("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:l,rawMatches:c,matches:u,result:h,zone:f,specificOffset:d}}}function tte(e,t,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=AD(e,t,n);return[r,i,s,o]}function ID(e,t){if(!e)return null;const r=zn.create(t,e).dtFormatter(Qee()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>Zee(o,e,s))}const Nw="Invalid DateTime",QA=864e13;function Hm(e){return new ki("unsupported zone",`the zone "${e.name}" is not supported`)}function Dw(e){return e.weekData===null&&(e.weekData=B1(e.c)),e.weekData}function Lw(e){return e.localWeekData===null&&(e.localWeekData=B1(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function pl(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new ve({...n,...t,old:n})}function kD(e,t,n){let r=e-t*60*1e3;const i=n.offset(r);if(t===i)return[r,t];r-=(i-t)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[e-Math.min(i,s)*60*1e3,Math.max(i,s)]}function qm(e,t){e+=t*60*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function ty(e,t,n){return kD(bb(e),t,n)}function eI(e,t){const n=e.o,r=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:r,month:i,day:Math.min(e.c.day,U1(r,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=We.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=bb(s);let[l,c]=kD(a,n,e.zone);return o!==0&&(l+=o,c=e.zone.offset(l)),{ts:l,o:c}}function qf(e,t,n,r,i,s){const{setZone:o,zone:a}=n;if(e&&Object.keys(e).length!==0||t){const l=t||a,c=ve.fromObject(e,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return ve.invalid(new ki("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Jm(e,t,n=!0){return e.isValid?zn.create(ct.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Fw(e,t){const n=e.c.year>9999||e.c.year<0;let r="";return n&&e.c.year>=0&&(r+="+"),r+=Jt(e.c.year,n?6:4),t?(r+="-",r+=Jt(e.c.month),r+="-",r+=Jt(e.c.day)):(r+=Jt(e.c.month),r+=Jt(e.c.day)),r}function tI(e,t,n,r,i,s){let o=Jt(e.c.hour);return t?(o+=":",o+=Jt(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=":")):o+=Jt(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!n)&&(o+=Jt(e.c.second),(e.c.millisecond!==0||!r)&&(o+=".",o+=Jt(e.c.millisecond,3))),i&&(e.isOffsetFixed&&e.offset===0&&!s?o+="Z":e.o<0?(o+="-",o+=Jt(Math.trunc(-e.o/60)),o+=":",o+=Jt(Math.trunc(-e.o%60))):(o+="+",o+=Jt(Math.trunc(e.o/60)),o+=":",o+=Jt(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const ED={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},nte={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},rte={ordinal:1,hour:0,minute:0,second:0,millisecond:0},CD=["year","month","day","hour","minute","second","millisecond"],ite=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ste=["year","ordinal","hour","minute","second","millisecond"];function ote(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new PN(e);return t}function nI(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return ote(e)}}function rI(e,t){const n=ya(t.zone,Nt.defaultZone),r=ct.fromObject(t),i=Nt.now();let s,o;if(ke(e.year))s=i;else{for(const c of CD)ke(e[c])&&(e[c]=ED[c]);const a=rD(e)||iD(e);if(a)return ve.invalid(a);const l=n.offset(i);[s,o]=ty(e,l,n)}return new ve({ts:s,zone:n,loc:r,o})}function iI(e,t,n){const r=ke(n.round)?!0:n.round,i=(o,a)=>(o=h$(o,r||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(o,a)),s=o=>n.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(n.unit)return i(s(n.unit),n.unit);for(const o of n.units){const a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(e>t?-0:0,n.units[n.units.length-1])}function sI(e){let t={},n;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],n=Array.from(e).slice(0,e.length-1)):n=Array.from(e),[t,n]}class ve{constructor(t){const n=t.zone||Nt.defaultZone;let r=t.invalid||(Number.isNaN(t.ts)?new ki("invalid input"):null)||(n.isValid?null:Hm(n));this.ts=ke(t.ts)?Nt.now():t.ts;let i=null,s=null;if(!r)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(n))[i,s]=[t.old.c,t.old.o];else{const a=n.offset(this.ts);i=qm(this.ts,a),r=Number.isNaN(i.year)?new ki("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=n,this.loc=t.loc||ct.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new ve({})}static local(){const[t,n]=sI(arguments),[r,i,s,o,a,l,c]=n;return rI({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static utc(){const[t,n]=sI(arguments),[r,i,s,o,a,l,c]=n;return t.zone=Sn.utcInstance,rI({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},t)}static fromJSDate(t,n={}){const r=NQ(t)?t.valueOf():NaN;if(Number.isNaN(r))return ve.invalid("invalid input");const i=ya(n.zone,Nt.defaultZone);return i.isValid?new ve({ts:r,zone:i,loc:ct.fromObject(n)}):ve.invalid(Hm(i))}static fromMillis(t,n={}){if(Lc(t))return t<-QA||t>QA?ve.invalid("Timestamp out of range"):new ve({ts:t,zone:ya(n.zone,Nt.defaultZone),loc:ct.fromObject(n)});throw new dr(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,n={}){if(Lc(t))return new ve({ts:t*1e3,zone:ya(n.zone,Nt.defaultZone),loc:ct.fromObject(n)});throw new dr("fromSeconds requires a numerical input")}static fromObject(t,n={}){t=t||{};const r=ya(n.zone,Nt.defaultZone);if(!r.isValid)return ve.invalid(Hm(r));const i=ct.fromObject(n),s=V1(t,nI),{minDaysInFirstWeek:o,startOfWeek:a}=UA(s,i),l=Nt.now(),c=ke(n.specificOffset)?r.offset(l):n.specificOffset,u=!ke(s.ordinal),h=!ke(s.year),f=!ke(s.month)||!ke(s.day),d=h||f,g=s.weekYear||s.weekNumber;if((d||u)&&g)throw new $h("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&u)throw new $h("Can't mix ordinal dates with month/day");const y=g||s.weekday&&!d;let w,v,x=qm(l,c);y?(w=ite,v=nte,x=B1(x,o,a)):u?(w=ste,v=rte,x=Pw(x)):(w=CD,v=ED);let S=!1;for(const E of w){const O=s[E];ke(O)?S?s[E]=v[E]:s[E]=x[E]:S=!0}const _=y?OQ(s,o,a):u?PQ(s):rD(s),M=_||iD(s);if(M)return ve.invalid(M);const $=y?zA(s,o,a):u?BA(s):s,[T,A]=ty($,c,r),I=new ve({ts:T,zone:r,o:A,loc:i});return s.weekday&&d&&t.weekday!==I.weekday?ve.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${I.toISO()}`):I}static fromISO(t,n={}){const[r,i]=Mee(t);return qf(r,i,n,"ISO 8601",t)}static fromRFC2822(t,n={}){const[r,i]=$ee(t);return qf(r,i,n,"RFC 2822",t)}static fromHTTP(t,n={}){const[r,i]=Tee(t);return qf(r,i,n,"HTTP",n)}static fromFormat(t,n,r={}){if(ke(t)||ke(n))throw new dr("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=ct.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=tte(o,t,n);return u?ve.invalid(u):qf(a,l,r,`format ${n}`,t,c)}static fromString(t,n,r={}){return ve.fromFormat(t,n,r)}static fromSQL(t,n={}){const[r,i]=Pee(t);return qf(r,i,n,"SQL",t)}static invalid(t,n=null){if(!t)throw new dr("need to specify a reason the DateTime is invalid");const r=t instanceof ki?t:new ki(t,n);if(Nt.throwOnInvalid)throw new lQ(r);return new ve({invalid:r})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,n={}){const r=ID(t,ct.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(t,n={}){return TD(zn.parseFormat(t),ct.fromObject(n)).map(i=>i.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Dw(this).weekYear:NaN}get weekNumber(){return this.isValid?Dw(this).weekNumber:NaN}get weekday(){return this.isValid?Dw(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Lw(this).weekday:NaN}get localWeekNumber(){return this.isValid?Lw(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Lw(this).weekYear:NaN}get ordinal(){return this.isValid?Pw(this.c).ordinal:NaN}get monthShort(){return this.isValid?Gm.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Gm.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Gm.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Gm.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,n=6e4,r=bb(this.c),i=this.zone.offset(r-t),s=this.zone.offset(r+t),o=this.zone.offset(r-i*n),a=this.zone.offset(r-s*n);if(o===a)return[this];const l=r-o*n,c=r-a*n,u=qm(l,o),h=qm(c,a);return u.hour===h.hour&&u.minute===h.minute&&u.second===h.second&&u.millisecond===h.millisecond?[pl(this,{ts:l}),pl(this,{ts:c})]:[this]}get isInLeapYear(){return H0(this.year)}get daysInMonth(){return U1(this.year,this.month)}get daysInYear(){return this.isValid?jh(this.year):NaN}get weeksInWeekYear(){return this.isValid?u0(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?u0(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:n,numberingSystem:r,calendar:i}=zn.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(t=0,n={}){return this.setZone(Sn.instance(t),n)}toLocal(){return this.setZone(Nt.defaultZone)}setZone(t,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(t=ya(t,Nt.defaultZone),t.equals(this.zone))return this;if(t.isValid){let i=this.ts;if(n||r){const s=t.offset(this.ts),o=this.toObject();[i]=ty(o,s,t)}return pl(this,{ts:i,zone:t})}else return ve.invalid(Hm(t))}reconfigure({locale:t,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:t,numberingSystem:n,outputCalendar:r});return pl(this,{loc:i})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const n=V1(t,nI),{minDaysInFirstWeek:r,startOfWeek:i}=UA(n,this.loc),s=!ke(n.weekYear)||!ke(n.weekNumber)||!ke(n.weekday),o=!ke(n.ordinal),a=!ke(n.year),l=!ke(n.month)||!ke(n.day),c=a||l,u=n.weekYear||n.weekNumber;if((c||o)&&u)throw new $h("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new $h("Can't mix ordinal dates with month/day");let h;s?h=zA({...B1(this.c,r,i),...n},r,i):ke(n.ordinal)?(h={...this.toObject(),...n},ke(n.day)&&(h.day=Math.min(U1(h.year,h.month),h.day))):h=BA({...Pw(this.c),...n});const[f,d]=ty(h,this.o,this.zone);return pl(this,{ts:f,o:d})}plus(t){if(!this.isValid)return this;const n=We.fromDurationLike(t);return pl(this,eI(this,n))}minus(t){if(!this.isValid)return this;const n=We.fromDurationLike(t).negate();return pl(this,eI(this,n))}startOf(t,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=We.normalizeUnit(t);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(t,n){return this.isValid?this.plus({[t]:1}).startOf(t,n).minus(1):this}toFormat(t,n={}){return this.isValid?zn.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):Nw}toLocaleString(t=z1,n={}){return this.isValid?zn.create(this.loc.clone(n),t).formatDateTime(this):Nw}toLocaleParts(t={}){return this.isValid?zn.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=Fw(this,o);return a+="T",a+=tI(this,o,n,r,i,s),a}toISODate({format:t="extended"}={}){return this.isValid?Fw(this,t==="extended"):null}toISOWeekDate(){return Jm(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+tI(this,o==="extended",n,t,r,s):null}toRFC2822(){return Jm(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Jm(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Fw(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||t)&&(r&&(i+=" "),n?i+="z":t&&(i+="ZZ")),Jm(this,i,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Nw}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const n={...this.c};return t.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,n="milliseconds",r={}){if(!this.isValid||!t.isValid)return We.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=DQ(n).map(We.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,c=zee(a,l,s,i);return o?c.negate():c}diffNow(t="milliseconds",n={}){return this.diff(ve.now(),t,n)}until(t){return this.isValid?At.fromDateTimes(this,t):this}hasSame(t,n,r){if(!this.isValid)return!1;const i=t.valueOf(),s=this.setZone(t.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const n=t.base||ve.fromObject({},{zone:this.zone}),r=t.padding?this<n?-t.padding:t.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(i=t.unit,s=void 0),iI(n,this.plus(r),{...t,numeric:"always",units:i,unit:s})}toRelativeCalendar(t={}){return this.isValid?iI(t.base||ve.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(ve.isDateTime))throw new dr("min requires all arguments be DateTimes");return VA(t,n=>n.valueOf(),Math.min)}static max(...t){if(!t.every(ve.isDateTime))throw new dr("max requires all arguments be DateTimes");return VA(t,n=>n.valueOf(),Math.max)}static fromFormatExplain(t,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=ct.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return AD(o,t,n)}static fromStringExplain(t,n,r={}){return ve.fromFormatExplain(t,n,r)}static get DATE_SHORT(){return z1}static get DATE_MED(){return RN}static get DATE_MED_WITH_WEEKDAY(){return hQ}static get DATE_FULL(){return NN}static get DATE_HUGE(){return DN}static get TIME_SIMPLE(){return LN}static get TIME_WITH_SECONDS(){return FN}static get TIME_WITH_SHORT_OFFSET(){return jN}static get TIME_WITH_LONG_OFFSET(){return zN}static get TIME_24_SIMPLE(){return BN}static get TIME_24_WITH_SECONDS(){return UN}static get TIME_24_WITH_SHORT_OFFSET(){return VN}static get TIME_24_WITH_LONG_OFFSET(){return GN}static get DATETIME_SHORT(){return WN}static get DATETIME_SHORT_WITH_SECONDS(){return HN}static get DATETIME_MED(){return qN}static get DATETIME_MED_WITH_SECONDS(){return JN}static get DATETIME_MED_WITH_WEEKDAY(){return fQ}static get DATETIME_FULL(){return ZN}static get DATETIME_FULL_WITH_SECONDS(){return YN}static get DATETIME_HUGE(){return KN}static get DATETIME_HUGE_WITH_SECONDS(){return XN}}function Jf(e){if(ve.isDateTime(e))return e;if(e&&e.valueOf&&Lc(e.valueOf()))return ve.fromJSDate(e);if(e&&typeof e=="object")return ve.fromObject(e);throw new dr(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Ja="system",OD="unknown",lu="UTC",ate=Intl.DateTimeFormat().resolvedOptions().timeZone,lte="shortOffset";function cte(e){return"timeZoneIANA"in e}function ute(e){return e.startsWith("UTC")}function hte(e,t=!1){return{json:{read:{source:e,reader:(n,r)=>r[e]?fte(r[e]):null},write:!!t&&{allowNull:!0,writer(n,r){r[e]=n?dte(n):null}}}}}function fte(e,t=Ja){return e?cte(e)?e.timeZoneIANA:pte(e,t):t}function dte(e){return{timeZoneIANA:e}}function pte(e,t=Ja){if(!e||!kA.has(e.timeZone))return t;const n=kA.get(e.timeZone);return ute(e.timeZone)||e.respectsDaylightSaving?n:mte(n)}function mte(e){const t=ve.local().setZone(e),n=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return n===0?"Etc/UTC":`Etc/GMT${Sn.instance(-n).formatOffset(0,"narrow")}`}function m3e(e,t,n,r,i){if(t&&i==="date")return{timeZone:lu,timeZoneName:void 0};const s=r.timeStyle||r.hour,o=n===OD;return{timeZone:o?i==="timestamp-offset"?void 0:e??lu:n,timeZoneName:o&&s?lte:void 0}}const gte={year:void 0,month:void 0,day:void 0,weekday:void 0},yte={hour:void 0,minute:void 0,second:void 0},PD={timeZone:lu},Hi={year:"numeric",month:"numeric",day:"numeric"},Zf={year:"numeric",month:"long",day:"numeric"},Yf={year:"numeric",month:"short",day:"numeric"},Kf={year:"numeric",month:"long",weekday:"long",day:"numeric"},pa={hour:"numeric",minute:"numeric"},Ml={...pa,second:"numeric"},RD={hourCycle:"h23"},Xf={...pa,...RD},Qf={...Ml,...RD},ND={"short-date":Hi,"short-date-short-time":{...Hi,...pa},"short-date-short-time-24":{...Hi,...Xf},"short-date-long-time":{...Hi,...Ml},"short-date-long-time-24":{...Hi,...Qf},"short-date-le":Hi,"short-date-le-short-time":{...Hi,...pa},"short-date-le-short-time-24":{...Hi,...Xf},"short-date-le-long-time":{...Hi,...Ml},"short-date-le-long-time-24":{...Hi,...Qf},"long-month-day-year":Zf,"long-month-day-year-short-time":{...Zf,...pa},"long-month-day-year-short-time-24":{...Zf,...Xf},"long-month-day-year-long-time":{...Zf,...Ml},"long-month-day-year-long-time-24":{...Zf,...Qf},"day-short-month-year":Yf,"day-short-month-year-short-time":{...Yf,...pa},"day-short-month-year-short-time-24":{...Yf,...Xf},"day-short-month-year-long-time":{...Yf,...Ml},"day-short-month-year-long-time-24":{...Yf,...Qf},"long-date":Kf,"long-date-short-time":{...Kf,...pa},"long-date-short-time-24":{...Kf,...Xf},"long-date-long-time":{...Kf,...Ml},"long-date-long-time-24":{...Kf,...Qf},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":pa,"long-time":Ml},bte=yn()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),DD={ar:"ar-u-nu-latn-ca-gregory"};let w3=new WeakMap;const xb=ND["short-date-short-time"];function wte(e){let t=w3.get(e);if(!t){const n=ti(),r=DD[n]||n,i=g$(e.timeZone??Ja),s={...e,timeZone:i};t=new Intl.DateTimeFormat(r,s),w3.set(e,t)}return t}function Zm(e){return ND[e]}function Za(e,t=xb){return wte(t).format(e)}function vte(e,t=xb){return Za(new Date(e),{...t,...PD,...yte})}function xte(e,t=xb){return Za(new Date(`1970-01-01T${e}Z`),{...t,...PD,...gte})}function Ste(e,t=xb){if(t.timeZone)return Za(new Date(e),t);const n=ve.fromISO(e,{setZone:!0}),r=ti(),i=DD[r]??r,s=n.offset===0?lu:t.timeZone,o={...t,timeZone:s};return n.toLocaleString(o,{locale:i})}function g$(e){switch(e){case Ja:return ate;case OD:return lu;default:return e}}a$(()=>{w3=new WeakMap});const _te={ar:"ar-u-nu-latn"};let ny=new WeakMap,LD={};function Mte(e){const t=e||LD;if(!ny.has(t)){const n=ti(),r=_te[ti()]||n;ny.set(t,new Intl.NumberFormat(r,e))}return ny.get(t)}function g3e(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function G1(e,t){return Object.is(e,-0)&&(e=0),Mte(t).format(e)}a$(()=>{ny=new WeakMap,LD={}});const FD=ie.getLogger("esri.intl.substitute");function y3e(e,t,n={}){const{format:r={}}=n;return X5(e,i=>$te(i,t,r))}function $te(e,t,n){let r,i;const s=e.indexOf(":");if(s===-1?r=e.trim():(r=e.slice(0,s).trim(),i=e.slice(s+1).trim()),!r)return"";const o=M2(r,t);if(o==null)return"";const a=(i?n==null?void 0:n[i]:null)??(n==null?void 0:n[r]);return a?Tte(o,a):i?Ate(o,i):y$(o)}function Tte(e,t){switch(t.type){case"date":return Za(e,t.intlOptions);case"number":return G1(e,t.intlOptions);default:return FD.warn("missing format descriptor for key {key}"),y$(e)}}function Ate(e,t){switch(t.toLowerCase()){case"dateformat":return Za(e);case"numberformat":return G1(e);default:return FD.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Za(e):/^numberformat/i.test(t)?G1(e):y$(e)}}function y$(e){switch(typeof e){case"string":return e;case"number":return G1(e);case"boolean":return""+e;default:return e instanceof Date?Za(e):""}}const oI=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Ite={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function aI(e){return e in Ite}const xd=[],Bh=new Map;function lI(e){for(const t of Bh.keys())jD(e.pattern,t)&&Bh.delete(t)}function kte(e){return xd.includes(e)||(lI(e),xd.unshift(e)),It(()=>{const t=xd.indexOf(e);t>-1&&(xd.splice(t,1),lI(e))})}async function b3e(e){const t=ti();Bh.has(e)||Bh.set(e,Cte(e,t));const n=Bh.get(e);return n&&await Ote.add(n),n}function Ete(e){if(!oI.test(e))return null;const t=oI.exec(e);if(t===null)return null;const[,n,r]=t,i=n+(r?"-"+r.toUpperCase():"");return aI(i)?i:aI(n)?n:null}async function Cte(e,t){const n=[];for(const r of xd)if(jD(r.pattern,e))try{return await r.fetchMessageBundle(e,t)}catch(i){n.push(i)}throw n.length?new Y("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:n}):new Y("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function jD(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}a$(()=>{Bh.clear()});const Ote=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=qc())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Pte(e,t,n,r){const i=t.exec(n);if(!i)throw new Y("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${t}"`);const s=i[1]?`${i[1]}/`:"",o=i[2],a=Ete(r),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let u;try{u=await cI(e(c))}catch(h){if(c===l)throw new Y("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:h});try{u=await cI(e(l))}catch(f){throw new Y("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:f})}}return u}async function cI(e){if(uI.fetchBundleAsset!=null)return uI.fetchBundleAsset(e);const t=await He(e,{responseType:"text"});return JSON.parse(t.data)}let Rte=class{constructor({base:t="",pattern:n,location:r=new URL(window.location.href)}){let i;i=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof n=="string"?new RegExp(`^${n}`):n,this.getAssetUrl=i,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,n){return Pte(this.getAssetUrl,this.matcher,t,n)}};function Nte(e){return new Rte(e)}const uI={};kte(Nte({pattern:"esri/",location:vu}));const Dte=lu,v3={date:null,time:null,timeZoneOffset:null},v3e=new Map([["hours",3600],["minutes",60],["seconds",1],["deciseconds",.1],["centiseconds",.01],["milliseconds",.001]]),Z0="yyyy-MM-dd",zD="TT";var Uh;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(Uh||(Uh={}));const Lte=[Uh.HMS_MS,Uh.HMS,Uh.HM,zD],Fte="latn",x3e=new Set(["date-only","time-only","timestamp-offset"]),jte=e=>"valueAsDate"in e;function cu(e){return{locale:ti(),numberingSystem:Fte,zone:e??Dte}}function BD(e,t){return e===null?null:ve.fromMillis(e,cu(t))}function zte(e){if(e==null||!fs(e)||e==="")return v3;const t=ve.fromISO(e,{setZone:!0});return{date:t.toFormat(Z0,cu()),time:t.toFormat(Uh.HMS_MS,cu()),timeZoneOffset:t.offset.toString()}}function S3e(e,t){if(e==null||!sQ(e)||isNaN(e))return v3;const n=BD(e,t);return n?{date:n.toFormat(Z0,cu(t)),time:n.toFormat(zD,cu(t))}:v3}function _3e(e){switch(e.type){case"date":default:return Zm("short-date-short-time");case"date-only":return Zm("short-date");case"time-only":return Zm("short-time");case"timestamp-offset":return{...Zm("short-date-short-time"),timeZone:void 0,timeZoneName:"short"}}}function M3e(e,t,n){if(!e||t==null)return null;switch(e.type){case"date":return Za(t,n);case"date-only":return vte(t,n);case"time-only":return xte(t,n);case"timestamp-offset":return Ste(t,n);default:return null}}function $3e(e){const{dateComponent:t,timeComponent:n,timeZoneComponent:r,oldValue:i}=e;if(!(t!=null&&t.value)||!(n!=null&&n.value))return null;const{year:s,month:o,day:a}=ve.fromFormat(t.value,Z0),{hour:l,minute:c,second:u,millisecond:h}=x3(n,lu)??ve.now(),f=zte(i),d=(r==null?void 0:r.value)!=null?parseInt(r.value,10):f.timeZoneOffset!=null?parseInt(f.timeZoneOffset,10):new Date().getTimezoneOffset(),g=Sn.instance(d),y=ve.fromObject({year:s,month:o,day:a,hour:l,minute:c,second:u,millisecond:h},{zone:g});return y.isValid?y.toISO({includeOffset:!0}):null}function T3e(e){const{dateComponent:t,timeComponent:n,timeZone:r,max:i,min:s,oldValue:o}=e,a=x3(t,r);let l=!!e.applyRange;if(!a)return null;let c=null;if((n==null?void 0:n.value)!=null){const h=x3(n,r),f=Date.now(),d=i!=null&&i<f?i:f,g=ve.fromMillis(d,cu(r)),y=a||g,{year:w,month:v,day:x}=y,{hour:S,minute:_,second:M,millisecond:$}=h||g;c=y.set({year:w,month:v,day:x,hour:S,minute:_,second:M,millisecond:$})}else{const h=BD(hI({value:o??Date.now(),max:i,min:s}),r),{year:f,month:d,day:g}=a,{hour:y,minute:w,second:v,millisecond:x}=h;l=!0,c=a.set({year:f,month:d,day:g,hour:y,minute:w,second:v,millisecond:x})}if(!c.isValid)return null;const u=c.toMillis();return l?hI({value:u,max:i,min:s}):u}function x3(e,t){if(!e||e.value==null||Array.isArray(e.value))return null;let n=null;return n=jte(e)?ve.fromFormat(e.value,Z0,cu(t)):Vh(e.value),n!=null&&n.isValid?n:null}function Bte(e){const{max:t,min:n,value:r}=e;return!isNaN(r)&&!(t!=null&&r>t)&&!(n!=null&&r<n)}function hI(e){const{max:t,min:n,value:r}=e;return t!=null&&n!=null?Un(r,n,t):t!=null&&r>t?t:n!=null&&r<n?n:r}function Ute(e){if(!e)return"";const t=e.split(".").at(0);if(!t||t.length<1)throw new Y("invalid time-only field",`Cannot parse valid time-only field value from ${e}`);const n=t.split(":"),r=new Array(3);for(let i=0;i<3;i++){const s=n.at(i)??"";r[i]=s.padStart(2,"0")}return r.join(":")}function A3e(e,t){switch(t){case"date":return e.getTime();case"date-only":return e.toISODate();case"time-only":return Ute(e.toISOTime(!0,!1));case"timestamp-offset":return e.toISOString(!1);default:return null}}function I3e(e){return!!e&&typeof e=="object"&&"getTime"in e&&"toISOString"in e&&"timeZone"in e}function Ap(e){return ve.fromFormat(e,Z0)}function Vh(e){let t=null;return Lte.find(n=>(t=ve.fromFormat(e,n),t.isValid)),t}function Ip(e){return ve.fromISO(e)}function k3e(e){const{type:t,range:n,value:r}=e;if(r==null||!n)return!0;if(t==="date")return Bte({value:r,min:n.min,max:n.max});const{rawMax:i,rawMin:s}=n;if(!fs(i)||!fs(s)||!fs(r))return!0;let o=null,a=null,l=null;switch(t){case"date-only":o=Ap(i),a=Ap(s),l=Ap(r);break;case"time-only":o=Vh(i),a=Vh(s),l=Vh(r);break;case"timestamp-offset":o=Ip(i),a=Ip(s),l=Ip(r)}return!(o!=null&&o.isValid&&(a!=null&&a.isValid)&&(l!=null&&l.isValid))||At.fromDateTimes(a,o).contains(l)||a.valueOf()===l.valueOf()||o.valueOf()===l.valueOf()}var pf;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(pf||(pf={}));const Vte=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function Gte(e){return e!=null&&Vte.has(e.type)}function UD(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function VD(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function GD(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Wte(e,t){const n=e==null?void 0:e.domain;if(!n)return null;switch(n.type){case"range":{const{min:r,max:i}=WD(e);if(r!=null&&+t<r||i!=null&&+t>i)return pf.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(n.codedValues==null||n.codedValues.every(r=>r==null||r.code!==t))return pf.INVALID_CODED_VALUE}return null}function WD(e,t){const n=t??(e==null?void 0:e.domain);if(!n||n.type!=="range")return;const r="range"in n?n.range[0]:n.minValue,i="range"in n?n.range[1]:n.maxValue,s=Gte(e);return UD(e)||GD(e)||VD(e)?{...Hte(e,i,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:i!=null&&typeof i=="number"?i:null,rawMin:r,rawMax:i,isInteger:s}}function Hte(e,t,n){return UD(e)?{min:n!=null&&fs(n)?Ap(n).toMillis():null,max:t!=null&&fs(t)?Ap(t).toMillis():null,rawMin:n,rawMax:t}:GD(e)?{min:n!=null&&fs(n)?Vh(n).toMillis():null,max:t!=null&&fs(t)?Vh(t).toMillis():null,rawMin:n,rawMax:t}:VD(e)?{min:n!=null&&fs(n)?Ip(n).toMillis():null,max:t!=null&&fs(t)?Ip(t).toMillis():null,rawMin:n,rawMax:t}:{max:null,min:null}}const qte=ie.getLogger("esri.support.arcadeOnDemand");let jw;function mf(){return jw||(jw=(async()=>{const e=await ne(()=>import("./arcadeUtils-b244a3e5.js").then(t=>t.aC),["assets/arcadeUtils-b244a3e5.js","assets/TimeOnly-879c5107.js","assets/UnknownTimeZone-a05df022.js","assets/ImmutableArray-ee1d0ce7.js","assets/number-2ab18aee.js","assets/featureConversionUtils-09cf00ff.js","assets/OptimizedFeature-e90b69df.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/OptimizedGeometry-196224d4.js","assets/FieldsIndex-e8db657f.js","assets/hash-6f442295.js"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),jw}const E3e=(e,t,n)=>b$.create(e,t,n,null,["$feature","$view"],[]),C3e=(e,t,n)=>b$.create(e,t,n,null,["$feature","$view"],[]),O3e=(e,t,n,r)=>b$.create(e,t,n,r,["$feature","$view"],[]);let b$=class HD{constructor(t,n,r,i,s,o,a){this.services=null,this.script=t,this.evaluate=i;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=r,this._arcade=n,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=n.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,n,r,i,s,o){const{arcade:a,Feature:l,Dictionary:c}=await mf(),u=we.fromJSON(n);let h;try{h=a.parseScript(t,o)}catch(A){return qte.error(new Y("arcade-bad-expression","Failed to parse arcade script",{script:t,error:A})),null}const f=s.reduce((A,I)=>({...A,[I]:null}),{});let d=null;i!=null&&(d=new c(i),d.immutable=!0,f.$config=null);const g=a.scriptUsesGeometryEngine(h),y=g&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(h)&&a.enableFeatureSetSupport(),v=a.scriptIsAsync(h),x=v&&a.enableAsyncSupport(),S={vars:f,spatialReference:u,useAsync:!!x};await Promise.all([y,w,x]);const _=new Set;await a.loadDependentModules(_,h,null,v,g);const M=new c;M.immutable=!1,M.setField("scale",0);const $=a.compileScript(h,S),T=(A,I)=>{var O;const E=(O=A.$view)==null?void 0:O.timeZone;return"$view"in A&&A.$view&&(M.setField("scale",typeof A.$view=="object"&&"scale"in A.$view?A.$view.scale:void 0),A.$view=M),d&&(A.$config=d),$({vars:A,spatialReference:u,services:I,timeZone:E})};return new HD(t,a,h,T,new l,r,u)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Jte=/^([0-9_])/,Zte=/[^a-z0-9_\u0080-\uffff]+/gi;function P3e(e){return e==null?null:e.trim().replaceAll(Zte,"_").replace(Jte,"F$1")||null}const Yte=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Kte=["field","normalizationField"];function R3e(e,t){if(e!=null&&t!=null){for(const n of Array.isArray(e)?e:[e])if(fI(Yte,n,t),"visualVariables"in n&&n.visualVariables)for(const r of n.visualVariables)fI(Kte,r,t)}}function fI(e,t,n){if(e)for(const r of e){const i=M2(r,t),s=i&&typeof i!="function"&&n.get(i);s&&bu(r,s.name,t)}}function Xte(e,t){var n;if(e!=null&&((n=t==null?void 0:t.fields)!=null&&n.length))if("startField"in e){const r=t.get(e.startField),i=t.get(e.endField);e.startField=(r==null?void 0:r.name)??null,e.endField=(i==null?void 0:i.name)??null}else{const r=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=(r==null?void 0:r.name)??null,e.endTimeField=(i==null?void 0:i.name)??null}}const zw=new Set;function qD(e,t){return e&&t?(zw.clear(),h0(zw,e,t),Array.from(zw).sort()):[]}function h0(e,t,n){var r;if(n)if((r=t==null?void 0:t.fields)!=null&&r.length)if(n.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of n)ni(e,t,i);else{if(n.includes("*"))return e.clear(),void e.add("*");for(const i of n)i!=null&&e.add(i)}}function ni(e,t,n){if(typeof n=="string")if(t){const r=t.get(n);r&&e.add(r.name)}else e.add(n)}function N3e(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(n=>n.name):t}async function Fi(e,t,n){var s;if(!n)return;const{arcadeUtils:r}=await mf(),i=r.extractFieldNames(n,(s=t==null?void 0:t.fields)==null?void 0:s.map(o=>o.name));for(const o of i)ni(e,t,o)}async function JD(e,t,n){if(n&&n!=="1=1"){const r=await iQ(n,t);if(!r.isStandardized)throw new Y("fieldUtils:collectFilterFields","Where clause is not standardized",{where:n});h0(e,t,r.fieldNames)}}function Qte({displayField:e,fields:t}){return e||(t!=null&&t.length?Bw(t,"name-or-title")||Bw(t,"unique-identifier")||Bw(t,"type-or-category")||ene(t):null)}function ene(e){for(const t of e){if(!(t!=null&&t.name))continue;const n=t.name.toLowerCase();if(n.includes("name")||n.includes("title"))return t.name}return null}function Bw(e,t){for(const n of e)if(n!=null&&n.valueType&&n.valueType===t)return n.name;return null}async function D3e(e,t){var r;if(!t)return;const n=(r=t.elevationInfo)==null?void 0:r.featureExpressionInfo;return n?n.collectRequiredFields(e,t.fieldsIndex):void 0}function tne(e,t,n){n.onStatisticExpression?Fi(e,t,n.onStatisticExpression.expression):e.add(n.onStatisticField)}async function L3e(e,t,n){if(!t||!n||!("fields"in n))return;const r=[],i=n.popupTemplate;r.push(nne(e,t,i)),n.fields&&r.push(...n.fields.map(async s=>tne(e,t.fieldsIndex,s))),await Promise.all(r)}async function nne(e,t,n){const r=[];n!=null&&n.expressionInfos&&r.push(...n.expressionInfos.map(s=>Fi(e,t.fieldsIndex,s.expression)));const i=n==null?void 0:n.content;if(Array.isArray(i))for(const s of i)s.type==="expression"&&s.expressionInfo&&r.push(Fi(e,t.fieldsIndex,s.expressionInfo.expression));await Promise.all(r)}async function F3e(e,t,n){t&&(t.timeInfo&&(n!=null&&n.timeExtent)&&h0(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&h0(e,t.fieldsIndex,[t.floorInfo.floorField]),(n==null?void 0:n.where)!=null&&await JD(e,t.fieldsIndex,n.where))}async function j3e(e,t,n){t&&n&&await Promise.all(n.map(r=>rne(e,t,r)))}async function rne(e,t,n){t&&n&&(n.valueExpression?await Fi(e,t.fieldsIndex,n.valueExpression):n.field&&ni(e,t.fieldsIndex,n.field))}function z3e(e){return e?qD(e.fieldsIndex,ZD(e)):[]}function ine(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?qD(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const sne=new Set(["oid","global-id","guid"]),one=new Set(["oid","global-id"]),ane=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i];function lne(e){const t=new Set;YD(e).forEach(r=>t.add(r)),ine(e).forEach(r=>t.add(r.toLowerCase()));const n=e&&"infoFor3D"in e?e.infoFor3D:void 0;return n&&(Object.values(n.assetMapFieldRoles).forEach(r=>t.add(r.toLowerCase())),Object.values(n.transformFieldRoles).forEach(r=>t.add(r.toLowerCase()))),Array.from(t)}function ZD(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:n,creatorField:r,editDateField:i,editorField:s}=t;return[n,r,i,s].filter(Boolean)}function YD(e){return ZD(e).map(t=>t.toLowerCase())}function cne(e,t){var n;return e.editable&&!sne.has(e.type)&&!YD(t).includes(((n=e.name)==null?void 0:n.toLowerCase())??"")}function une(e,t){var r;const n=((r=e.name)==null?void 0:r.toLowerCase())??"";return!((t==null?void 0:t.objectIdField)!=null&&n===t.objectIdField.toLowerCase()||(t==null?void 0:t.globalIdField)!=null&&n===t.globalIdField.toLowerCase()||lne(t).includes(n)||one.has(e.type)||ane.some(i=>i.test(n)))}async function B3e(e,t){const{labelingInfo:n,fieldsIndex:r}=t;n!=null&&n.length&&await Promise.all(n.map(i=>hne(e,r,i)))}async function hne(e,t,n){if(!n)return;const r=n.getLabelExpression(),i=n.where;if(r.type==="arcade")await Fi(e,t,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{ni(e,t,o.slice(1,-1))})}await JD(e,t,i)}function U3e(e){const t=e.defaultValue;return t!==void 0&&QD(e,t)?t:e.nullable?null:void 0}function V3e(e){const t=typeof e=="string"?{type:e}:e;return Sne(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function KD(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function fne(e){return e===null||KD(e)}function dne(e){return e===null||Number.isInteger(e)}function XD(e){return e!=null&&typeof e=="string"}function pne(e){return e===null||XD(e)}function mne(){return!0}function QD(e,t){let n;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":n=e.nullable?dne:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=e.nullable?fne:KD;break;case"string":case"esriFieldTypeString":n=e.nullable?pne:XD;break;default:n=mne}return arguments.length===1?n:n(t)}const gne=["integer","small-integer","big-integer"],yne=["single","double"],bne=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],wne=["esriFieldTypeSingle","esriFieldTypeDouble"],eL=new Set([...gne,...bne]),vne=new Set([...yne,...wne]),xne=QB(eL,vne);function G3e(e){return e!=null&&eL.has(e.type)}function tL(e){return e!=null&&xne.has(e.type)}function Sne(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function W3e(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function H3e(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function q3e(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function J3e(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Z3e(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function Y3e(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function K3e(e,t){return _ne(e,t)===null}var W1,H1;function X3e(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function _ne(e,t){return e==null||e.nullable&&t===null?null:tL(e)&&!Mne(e.type,Number(t))?W1.OUT_OF_RANGE:QD(e,t)?e.domain?Wte(e,t):null:H1.INVALID_TYPE}function Mne(e,t){const n=typeof e=="string"?w$(e):e;if(!n)return!1;const r=n.min,i=n.max;return n.isInteger?Number.isInteger(t)&&t>=r&&t<=i:t>=r&&t<=i}function Q3e(e,t){return WD(e,t)||(tL(e)?w$(e.type):void 0)}function w$(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return $ne;case"esriFieldTypeInteger":case"integer":return Tne;case"esriFieldTypeBigInteger":case"big-integer":return Ane;case"esriFieldTypeSingle":case"single":return Ine;case"esriFieldTypeDouble":case"double":return kne}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(W1||(W1={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(H1||(H1={}));const $ne={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Tne={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Ane={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Ine={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},kne={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function eSe(e,t,n){switch(e){case pf.INVALID_CODED_VALUE:return`Value ${n} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case pf.VALUE_OUT_OF_RANGE:return`Value ${n} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case H1.INVALID_TYPE:return`Value ${n} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case W1.OUT_OF_RANGE:{const{min:r,max:i}=w$(t.type);return`Value ${n} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${r} to ${i}`}}}function tSe(e,t){return!Ene(e,t,null)}function Ene(e,t,n){if(!(t!=null&&t.attributes)||!e){if(n!=null)for(const s of e??[])n.add(s);return!0}const r=new Set(Object.keys(t.attributes));let i=!1;for(const s of e)if(!r.has(s)){if(i=!0,n==null)break;n.add(s)}return i}function Cne(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}let ry=class extends re{constructor(t){super(t),this.type=null}};p([b({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],ry.prototype,"type",void 0),ry=p([L("esri.popup.content.Content")],ry);const ol=ry;var S3;let $l=S3=class extends ol{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new S3({description:this.description,displayType:this.displayType,title:this.title})}};p([b({type:String,json:{write:!0}})],$l.prototype,"description",void 0),p([b({type:["auto","preview","list"],json:{write:!0}})],$l.prototype,"displayType",void 0),p([b({type:String,json:{write:!0}})],$l.prototype,"title",void 0),p([b({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],$l.prototype,"type",void 0),$l=S3=p([L("esri.popup.content.AttachmentsContent")],$l);const f0=$l;var _3;let Tl=_3=class extends ol{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new _3({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?J(this.outFields):null})}};p([b()],Tl.prototype,"creator",void 0),p([b()],Tl.prototype,"destroyer",void 0),p([b()],Tl.prototype,"outFields",void 0),p([b({type:["custom"],readOnly:!0})],Tl.prototype,"type",void 0),Tl=_3=p([L("esri.popup.content.CustomContent")],Tl);const One=Tl;var M3;let Zu=M3=class extends re{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new M3({title:this.title,expression:this.expression})}};p([b({type:String,json:{write:!0}})],Zu.prototype,"title",void 0),p([b({type:String,json:{write:!0}})],Zu.prototype,"expression",void 0),p([b({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Zu.prototype,"returnType",void 0),Zu=M3=p([L("esri.popup.ElementExpressionInfo")],Zu);const Pne=Zu;var $3;let Sd=$3=class extends ol{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new $3({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};p([b({type:Pne,json:{write:!0}})],Sd.prototype,"expressionInfo",void 0),p([b({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Sd.prototype,"type",void 0),Sd=$3=p([L("esri.popup.content.ExpressionContent")],Sd);const v$=Sd;let Yu=class extends _n(re){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};p([pe(bte)],Yu.prototype,"dateFormat",void 0),p([b({type:Boolean,json:{write:!0}})],Yu.prototype,"digitSeparator",void 0),p([b({type:Be,json:{write:!0}})],Yu.prototype,"places",void 0),Yu=p([L("esri.popup.support.FieldInfoFormat")],Yu);const iy=Yu;var T3;let pi=T3=class extends re{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new T3({fieldName:this.fieldName,format:this.format?J(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};p([b({type:String,json:{write:!0}})],pi.prototype,"fieldName",void 0),p([b({type:iy,json:{write:!0}})],pi.prototype,"format",void 0),p([b({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],pi.prototype,"isEditable",void 0),p([b({type:String,json:{write:!0}})],pi.prototype,"label",void 0),p([pe(new Ne({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],pi.prototype,"stringFieldOption",void 0),p([b({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],pi.prototype,"statisticType",void 0),p([b({type:String,json:{write:!0}})],pi.prototype,"tooltip",void 0),p([b({type:Boolean,json:{write:!0}})],pi.prototype,"visible",void 0),pi=T3=p([L("esri.popup.FieldInfo")],pi);const x$=pi;var A3;let Ns=A3=class extends ol{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(n=>n.toJSON())}clone(){return new A3(J({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};p([b({type:Object,json:{write:!0}})],Ns.prototype,"attributes",void 0),p([b({type:String,json:{write:!0}})],Ns.prototype,"description",void 0),p([b({type:[x$]})],Ns.prototype,"fieldInfos",void 0),p([xe("fieldInfos")],Ns.prototype,"writeFieldInfos",null),p([b({type:String,json:{write:!0}})],Ns.prototype,"title",void 0),p([b({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Ns.prototype,"type",void 0),Ns=A3=p([L("esri.popup.content.FieldsContent")],Ns);const d0=Ns;let Al=class extends re{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};p([b({type:String,json:{write:!0}})],Al.prototype,"altText",void 0),p([b({type:String,json:{write:!0}})],Al.prototype,"caption",void 0),p([b({type:String,json:{write:!0}})],Al.prototype,"title",void 0),p([b({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Al.prototype,"type",void 0),Al=p([L("esri.popup.content.mixins.MediaInfo")],Al);const S$=Al;var I3;let Il=I3=class extends Yt{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new I3({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};p([b()],Il.prototype,"color",void 0),p([b()],Il.prototype,"fieldName",void 0),p([b()],Il.prototype,"tooltip",void 0),p([b()],Il.prototype,"value",void 0),Il=I3=p([L("esri.popup.content.support.ChartMediaInfoValueSeries")],Il);const Rne=Il;var k3;let qo=k3=class extends re{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new k3({colors:J(this.colors),fields:J(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};p([b({type:[fe],json:{type:[[Be]],write:!0}})],qo.prototype,"colors",void 0),p([b({type:[String],json:{write:!0}})],qo.prototype,"fields",void 0),p([b({type:String,json:{write:!0}})],qo.prototype,"normalizeField",void 0),p([b({type:[Rne],json:{read:!1}})],qo.prototype,"series",void 0),p([b({type:String,json:{write:!0}})],qo.prototype,"tooltipField",void 0),qo=k3=p([L("esri.popup.content.support.ChartMediaInfoValue")],qo);const Nne=qo;let _d=class extends S${constructor(t){super(t),this.type=null,this.value=null}};p([b({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],_d.prototype,"type",void 0),p([b({type:Nne,json:{write:!0}})],_d.prototype,"value",void 0),_d=p([L("esri.popup.content.mixins.ChartMediaInfo")],_d);const Sb=_d,_b=yn()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var E3;let sy=E3=class extends Sb{constructor(e){super(e),this.type="bar-chart"}clone(){return new E3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};p([b({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:_b.write}})],sy.prototype,"type",void 0),sy=E3=p([L("esri.popup.content.BarChartMediaInfo")],sy);const nL=sy;var C3;let oy=C3=class extends Sb{constructor(e){super(e),this.type="column-chart"}clone(){return new C3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};p([b({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:_b.write}})],oy.prototype,"type",void 0),oy=C3=p([L("esri.popup.content.ColumnChartMediaInfo")],oy);const rL=oy;var O3;let Md=O3=class extends re{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new O3({linkURL:this.linkURL,sourceURL:this.sourceURL})}};p([b({type:String,json:{write:!0}})],Md.prototype,"linkURL",void 0),p([b({type:String,json:{write:!0}})],Md.prototype,"sourceURL",void 0),Md=O3=p([L("esri.popup.content.support.ImageMediaInfoValue")],Md);const Dne=Md;var P3;let Ku=P3=class extends S${constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new P3({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};p([b({type:Number,json:{write:!0}})],Ku.prototype,"refreshInterval",void 0),p([b({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Ku.prototype,"type",void 0),p([b({type:Dne,json:{write:!0}})],Ku.prototype,"value",void 0),Ku=P3=p([L("esri.popup.content.ImageMediaInfo")],Ku);const iL=Ku;var R3;let ay=R3=class extends Sb{constructor(e){super(e),this.type="line-chart"}clone(){return new R3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};p([b({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:_b.write}})],ay.prototype,"type",void 0),ay=R3=p([L("esri.popup.content.LineChartMediaInfo")],ay);const sL=ay;var N3;let ly=N3=class extends Sb{constructor(e){super(e),this.type="pie-chart"}clone(){return new N3({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};p([b({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:_b.write}})],ly.prototype,"type",void 0),ly=N3=p([L("esri.popup.content.PieChartMediaInfo")],ly);const oL=ly,aL={base:S$,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":nL,"column-chart":rL,"line-chart":sL,"pie-chart":oL,image:iL}};var D3;let mi=D3=class extends ol{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?iL.fromJSON(t):t.type==="barchart"?nL.fromJSON(t):t.type==="columnchart"?rL.fromJSON(t):t.type==="linechart"?sL.fromJSON(t):t.type==="piechart"?oL.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(n=>n.toJSON())}clone(){return new D3(J({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};p([b()],mi.prototype,"activeMediaInfoIndex",void 0),p([b({type:Object,json:{write:!0}})],mi.prototype,"attributes",void 0),p([b({type:String,json:{write:!0}})],mi.prototype,"description",void 0),p([b({types:[aL]})],mi.prototype,"mediaInfos",void 0),p([ge("mediaInfos")],mi.prototype,"readMediaInfos",null),p([xe("mediaInfos")],mi.prototype,"writeMediaInfos",null),p([b({type:String,json:{write:!0}})],mi.prototype,"title",void 0),p([b({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],mi.prototype,"type",void 0),mi=D3=p([L("esri.popup.content.MediaContent")],mi);const q1=mi;var L3;let $d=L3=class extends re{constructor(e){super(e),this.field=null,this.order=null}clone(){return new L3({field:this.field,order:this.order})}};p([b({type:String,json:{write:!0}})],$d.prototype,"field",void 0),p([b({type:["asc","desc"],json:{write:!0}})],$d.prototype,"order",void 0),$d=L3=p([L("esri.popup.support.RelatedRecordsInfoFieldOrder")],$d);const lL=$d;let Qi=class extends _n(ol){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};p([b({type:String,json:{write:!0}})],Qi.prototype,"description",void 0),p([b({type:Number,json:{type:Be,write:!0}})],Qi.prototype,"displayCount",void 0),p([b({type:["list"],json:{write:!0}})],Qi.prototype,"displayType",void 0),p([b({type:[lL],json:{write:!0}})],Qi.prototype,"orderByFields",void 0),p([b({type:Number,json:{type:Be,write:!0}})],Qi.prototype,"relationshipId",void 0),p([b({type:String,json:{write:!0}})],Qi.prototype,"title",void 0),p([b({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Qi.prototype,"type",void 0),Qi=p([L("esri.popup.content.RelationshipContent")],Qi);const J1=Qi;var F3;let Td=F3=class extends ol{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new F3({text:this.text})}};p([b({type:String,json:{write:!0}})],Td.prototype,"text",void 0),p([b({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Td.prototype,"type",void 0),Td=F3=p([L("esri.popup.content.TextContent")],Td);const Z1=Td,Lne={base:null,key:"type",typeMap:{attachment:f0,media:q1,text:Z1,expression:v$,field:d0,relationship:J1}};var j3;let kl=j3=class extends re{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new j3({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};p([b({type:String,json:{write:!0}})],kl.prototype,"name",void 0),p([b({type:String,json:{write:!0}})],kl.prototype,"title",void 0),p([b({type:String,json:{write:!0}})],kl.prototype,"expression",void 0),p([b({type:["string","number"],json:{write:!0}})],kl.prototype,"returnType",void 0),kl=j3=p([L("esri.popup.ExpressionInfo")],kl);const Fne=kl;var z3;let Ad=z3=class extends re{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new z3({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};p([b({type:Boolean,json:{write:!0}})],Ad.prototype,"returnTopmostRaster",void 0),p([b({type:Boolean,json:{write:!0}})],Ad.prototype,"showNoDataRecords",void 0),Ad=z3=p([L("esri.popup.LayerOptions")],Ad);const jne=Ad;var B3;let Id=B3=class extends re{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new B3({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?J(this.orderByFields):null})}};p([b({type:Boolean,json:{write:!0}})],Id.prototype,"showRelatedRecords",void 0),p([b({type:[lL],json:{write:!0}})],Id.prototype,"orderByFields",void 0),Id=B3=p([L("esri.popup.RelatedRecordsInfo")],Id);const zne=Id;let cL=0;const _$=e=>{let t=class extends e{constructor(...n){super(...n),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+cL++})}};return t=p([L("esri.core.Identifiable")],t),t},aSe=e=>{let t=class extends e{constructor(...n){super(...n),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:cL++})}};return t=p([L("esri.core.NumericIdentifiable")],t),t};let dI=class extends _$(class{}){};dI=p([L("esri.core.Identifiable")],dI);var U3;let Hr=U3=class extends _$(Yt){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new U3({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};p([b()],Hr.prototype,"active",void 0),p([b()],Hr.prototype,"className",void 0),p([b()],Hr.prototype,"disabled",void 0),p([b()],Hr.prototype,"icon",void 0),p([b()],Hr.prototype,"id",void 0),p([b()],Hr.prototype,"indicator",void 0),p([b()],Hr.prototype,"title",void 0),p([b()],Hr.prototype,"type",void 0),p([b()],Hr.prototype,"visible",void 0),Hr=U3=p([L("esri.support.actions.ActionBase")],Hr);const M$=Hr;var V3;let cy=V3=class extends M${constructor(e){super(e),this.image=null,this.type="button"}clone(){return new V3({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};p([b()],cy.prototype,"image",void 0),cy=V3=p([L("esri.support.Action.ActionButton")],cy);const Bne=cy;var G3;let kd=G3=class extends M${constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new G3({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};p([b()],kd.prototype,"image",void 0),p([b()],kd.prototype,"value",void 0),kd=G3=p([L("esri.support.Action.ActionToggle")],kd);const Une=kd,Vne="esri.PopupTemplate",Gne=ie.getLogger(Vne),ed="relationships/",pI="expression/",Wne=tt.ofType({key:"type",defaultKeyValue:"button",base:M$,typeMap:{button:Bne,toggle:Une}}),Hne={base:ol,key:"type",typeMap:{media:q1,custom:One,text:Z1,attachments:f0,fields:d0,expression:v$,relationship:J1}},qne=new Set(["attachments","fields","media","text","expression","relationship"]);let en=class extends _n(re){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(n=>Jc(Hne,n)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||k0(t)?t:(Gne.error("content error","unsupported content value",{value:t}),null)}readContent(t,n){const{popupElements:r}=n;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(n.description,n.mediaInfos,r):this._readPopupInfo(n)}writeContent(t,n,r,i){typeof t!="string"?Array.isArray(t)&&(n.popupElements=t.filter(s=>qne.has(s.type)).map(s=>s==null?void 0:s.toJSON(i)),n.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(n):s.type==="media"?this._writeMediaContent(s,n):s.type==="text"?this._writeTextContent(s,n):s.type==="relationship"&&this._writeRelationshipContent(s,n)})):n.description=t}writeFieldInfos(t,n,r,i){const{content:s}=this,o=Array.isArray(s)?s:null;if(t){const a=o?o.filter(c=>c.type==="fields"):[],l=a.length&&a.every(c=>{var u;return(u=c.fieldInfos)==null?void 0:u.length});n.fieldInfos=t.filter(Boolean).map(c=>{const u=c.toJSON(i);return l&&(u.visible=!1),u})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,n)}writeLayerOptions(t,n,r,i){n[r]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(i)}writeTitle(t,n){n.title=t||""}async collectRequiredFields(t,n){const r=this.expressionInfos||[];await this._collectExpressionInfoFields(t,n,[...r,...this._getContentExpressionInfos(this.content,r)]),h0(t,n,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const n=new Set;return await this.collectRequiredFields(n,t),[...n].sort()}_writeFieldsContent(t,n){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const r=J(t.fieldInfos);Array.isArray(n.fieldInfos)?r.forEach(i=>{const s=n.fieldInfos.find(o=>o.fieldName.toLowerCase()===i.fieldName.toLowerCase());s?s.visible=!0:n.fieldInfos.push(i)}):n.fieldInfos=r}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,n){var s,o;const r=((s=t.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,t.relationshipId)))||[],i=[...((o=n.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...r];n.relatedRecordsInfo={showRelatedRecords:!0,...(i==null?void 0:i.length)&&{orderByFields:i}}}_writeTextContent(t,n){!n.description&&t.text&&(n.description=t.text)}_writeMediaContent(t,n){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const r=J(t.mediaInfos);Array.isArray(n.mediaInfos)?n.mediaInfos=[...n.mediaInfos,...r]:n.mediaInfos=r}_readPopupInfoElements(t,n,r){const i={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!n||i.mediaInfos||(s.mediaInfos=n,i.mediaInfos=!0),q1.fromJSON(s)):s.type==="text"?(s.text||!t||i.description||(s.text=t,i.description=!0),Z1.fromJSON(s)):s.type==="attachments"?f0.fromJSON(s):s.type==="fields"?d0.fromJSON(s):s.type==="expression"?v$.fromJSON(s):s.type==="relationship"?J1.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:n,order:r}=t;if(!(n!=null&&n.startsWith(ed)))return null;const i=n.replace(ed,"").split("/");if(i.length!==2)return null;const s=parseInt(i[0],10),o=i[1];return typeof s=="number"&&o?J1.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(t,n){const{order:r,field:i}=t;return{field:`${ed}${n}/${i}`,order:r}}_readPopupInfo({description:t,mediaInfos:n,showAttachments:r,relatedRecordsInfo:i={showRelatedRecords:!1}}){const s=[];t?s.push(new Z1({text:t})):s.push(new d0),Array.isArray(n)&&n.length&&s.push(q1.fromJSON({mediaInfos:n})),r&&s.push(f0.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=i;return o&&(a!=null&&a.length)&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:t}_getContentElementFields(t){const n=t==null?void 0:t.type;if(n==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(n==="custom")return t.outFields||[];if(n==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(n==="media"){const r=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...r.reduce((i,s)=>[...i,...this._getMediaInfoFields(s)],[])]}return n==="text"?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){const{caption:n,title:r,value:i}=t,s=i||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:u}=s,h=[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(c),...this._extractFieldNames(u),...o??[]];return a&&h.push(a),l&&h.push(l),h}_getContentExpressionInfos(t,n){return Array.isArray(t)?t.reduce((r,i)=>[...r,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],n):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((n,r)=>[...n,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(t,n,r){r&&await Promise.all(r.map(i=>Fi(t,n,i.expression)))}_getFieldInfoFields(t){return t?t.filter(n=>n.visible===void 0||!!n.visible).map(n=>n.fieldName).filter(n=>!n.startsWith(ed)&&!n.startsWith(pI)):[]}_getActionsFields(t){return t?t.toArray().reduce((n,r)=>[...n,...this._getActionFields(r)],[]):[]}_getActionFields(t){const{className:n,title:r,type:i}=t,s=i==="button"||i==="toggle"?t.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(s)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){if(!t||typeof t!="string")return[];const n=/{[^}]*}/g,r=t.match(n);if(!r)return[];const i=/\{(\w+):.+\}/,s=r.filter(o=>!(o.indexOf(`{${ed}`)===0||o.indexOf(`{${pI}`)===0)).map(o=>o.replace(i,"{$1}"));return s?s.map(o=>o.slice(1,-1)):[]}};p([b({type:Wne})],en.prototype,"actions",void 0),p([b()],en.prototype,"content",void 0),p([gt("content")],en.prototype,"castContent",null),p([ge("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],en.prototype,"readContent",null),p([xe("content",{popupElements:{type:tt.ofType(Lne)},showAttachments:{type:Boolean},mediaInfos:{type:tt.ofType(aL)},description:{type:String},relatedRecordsInfo:{type:zne}})],en.prototype,"writeContent",null),p([b({type:[Fne],json:{write:!0}})],en.prototype,"expressionInfos",void 0),p([b({type:[x$]})],en.prototype,"fieldInfos",void 0),p([xe("fieldInfos")],en.prototype,"writeFieldInfos",null),p([b({type:jne})],en.prototype,"layerOptions",void 0),p([xe("layerOptions")],en.prototype,"writeLayerOptions",null),p([b({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],en.prototype,"lastEditInfoEnabled",void 0),p([b()],en.prototype,"outFields",void 0),p([b()],en.prototype,"overwriteActions",void 0),p([b()],en.prototype,"returnGeometry",void 0),p([b({json:{type:String}})],en.prototype,"title",void 0),p([xe("title")],en.prototype,"writeTitle",null),en=p([L("esri.PopupTemplate")],en);const $$=en,mI=new Ne({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Jne=0,Xu=class extends re{constructor(t){super(t),this.id="sym"+Jne++,this.type=null,this.color=new fe([0,0,0,1])}readColor(t){return(t==null?void 0:t[0])!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,n){}hash(){return JSON.stringify(this.toJSON())}clone(){}};p([b({type:mI.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:mI.write}}})],Xu.prototype,"type",void 0),p([b({type:fe,json:{write:{allowNull:!0}}})],Xu.prototype,"color",void 0),p([ge("color")],Xu.prototype,"readColor",null),Xu=p([L("esri.symbols.Symbol")],Xu);const Mr=Xu;var W3;let Jo=W3=class extends Mr{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){var n;if(((n=this.data)==null?void 0:n.type)==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const i=r.map(s=>{const o=s.valueExpressionInfo;return Fi(e,t,o.expression)});await Promise.all(i)}}}clone(){return new W3({data:J(this.data)})}hash(){return BO(JSON.stringify(this.data)).toString()}};p([b({json:{write:!1}})],Jo.prototype,"color",void 0),p([b({json:{write:!0}})],Jo.prototype,"data",void 0),p([ge("data",["symbol"])],Jo.prototype,"readData",null),p([xe("data",{})],Jo.prototype,"writeData",null),p([pe({CIMSymbolReference:"cim"},{readOnly:!0})],Jo.prototype,"type",void 0),Jo=W3=p([L("esri.symbols.CIMSymbol")],Jo);const Mb=Jo;let Qu=class extends re{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,n,r){t||(n[r]=t)}};p([b({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Qu.prototype,"enabled",void 0),p([xe("enabled")],Qu.prototype,"writeEnabled",null),p([b({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Qu.prototype,"type",void 0),Qu=p([L("esri.symbols.Symbol3DLayer")],Qu);const Ts=Qu,Zne=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,Yne="screenUtils.toPt: input not recognized!",uL=96;function Th(e){return e?e/72*uL:0}function bo(e){return e?72*e/uL:0}function ot(e){if(typeof e=="string"){const t=e.match(Zne);if(t){const n=Number(t[1]),r=t[3]&&t[3].toLowerCase(),i=e.charAt(0)==="-",s=r==="px"?bo(n):n;return i?-s:s}return console.warn(Yne),null}return e}function fSe(e=0,t=0){return{x:e,y:t}}function dSe(e=0,t=0){return[e,t]}function pSe(e=0,t=0){return[e,t]}function mSe(e=0,t=0,n=0){return[e,t,n]}function gSe(e){return e}function ySe(e){return e}function bSe(e){return e}function wSe(e,t){return t?(t[0]=e.x,t[1]=e.y,t.length>2&&(t[2]=0),t):[e.x,e.y]}function hL(e){const t=tM(100*(1-e));return Math.max(0,Math.min(t,100))}function Y1(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function Kne(e,t){const n=t.transparency!=null?Y1(t.transparency):1,r=t.color;return r&&Array.isArray(r)?new fe([r[0]||0,r[1]||0,r[2]||0,n]):null}function Xne(e,t){t.color=e.toJSON().slice(0,3);const n=hL(e.a);n!==0&&(t.transparency=n)}const al={type:fe,json:{type:[Be],default:null,read:{source:["color","transparency"],reader:Kne},write:{target:{color:{type:[Be]},transparency:{type:Be}},writer:Xne}}},Ms={type:Number,cast:ot,json:{write:!0}};let El=class extends re{constructor(t){super(t),this.color=new fe([0,0,0,1]),this.extensionLength=0,this.size=bo(1)}clone(){}cloneProperties(){return{color:J(this.color),size:this.size,extensionLength:this.extensionLength}}};p([b({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],El.prototype,"type",void 0),p([b(al)],El.prototype,"color",void 0),p([b({...Ms,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],El.prototype,"extensionLength",void 0),p([b(Ms)],El.prototype,"size",void 0),El=p([L("esri.symbols.edges.Edges3D")],El);const T$=El;var H3;let uy=H3=class extends T${constructor(e){super(e),this.type="sketch"}clone(){return new H3(this.cloneProperties())}};p([pe({sketch:"sketch"},{readOnly:!0})],uy.prototype,"type",void 0),uy=H3=p([L("esri.symbols.edges.SketchEdges3D")],uy);const Qne=uy;var q3;let hy=q3=class extends T${constructor(e){super(e),this.type="solid"}clone(){return new q3(this.cloneProperties())}};p([pe({solid:"solid"},{readOnly:!0})],hy.prototype,"type",void 0),hy=q3=p([L("esri.symbols.support.SolidEdges3D")],hy);const ere=hy,fL={types:{key:"type",base:T$,typeMap:{solid:ere,sketch:Qne}},json:{write:!0}};var J3;let Lr=J3=class extends re{constructor(e){super(e),this.color=null}clone(){const e={color:this.color!=null?this.color.clone():null};return new J3(e)}};p([b(al)],Lr.prototype,"color",void 0),Lr=J3=p([L("esri.symbols.support.Symbol3DMaterial")],Lr);var Z3;let Zo=Z3=class extends Ts{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Z3({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};p([pe({Extrude:"extrude"},{readOnly:!0})],Zo.prototype,"type",void 0),p([b({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Zo.prototype,"size",void 0),p([b({type:Lr,json:{write:!0}})],Zo.prototype,"material",void 0),p([b({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Zo.prototype,"castShadows",void 0),p([b(fL)],Zo.prototype,"edges",void 0),Zo=Z3=p([L("esri.symbols.ExtrudeSymbol3DLayer")],Zo);const dL=Zo;let Ed=class extends Mr{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};p([pe({esriSLS:"simple-line"},{readOnly:!0})],Ed.prototype,"type",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],Ed.prototype,"width",void 0),Ed=p([L("esri.symbols.LineSymbol")],Ed);const tre=Ed,nre=["begin","end","begin-end"],pL=["arrow","circle","square","diamond","cross","x"];var Y3;let es=Y3=class extends re{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,n,r){t[n]=(r==null?void 0:r.origin)==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return(e==null?void 0:e[0])!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,n,r){(r==null?void 0:r.origin)==="web-map"||(t[n]=e)}clone(){return new Y3({color:J(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};p([b({type:["begin","end","begin-end"],json:{write:!0}})],es.prototype,"placement",void 0),p([pe({"line-marker":"line-marker"},{readOnly:!0}),b({json:{origins:{"web-map":{write:!1}}}})],es.prototype,"type",void 0),p([b({type:pL})],es.prototype,"style",void 0),p([xe("style")],es.prototype,"writeStyle",null),p([b({type:fe,value:null,json:{write:{allowNull:!0}}})],es.prototype,"color",null),p([ge("color")],es.prototype,"readColor",null),p([xe("color")],es.prototype,"writeColor",null),es=Y3=p([L("esri.symbols.LineSymbolMarker")],es);const rre=es;var K3;const Uw=new Ne({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ds=K3=class extends tre{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,n,r,i,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),n!=null&&(o.width=ot(n)),r!=null&&(o.cap=r),i!=null&&(o.join=i),s!=null&&(o.miterLimit=ot(s)),o}clone(){var e;return new K3({color:J(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};p([pe({esriSLS:"simple-line"},{readOnly:!0})],Ds.prototype,"type",void 0),p([b({type:Uw.apiValues,json:{read:Uw.read,write:Uw.write}})],Ds.prototype,"style",void 0),p([b({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,n)=>({enabled:e!=="round"&&(n==null?void 0:n.origin)==null})}}})],Ds.prototype,"cap",void 0),p([b({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,n)=>({enabled:e!=="round"&&(n==null?void 0:n.origin)==null})}}})],Ds.prototype,"join",void 0),p([b({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":rre}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ds.prototype,"marker",void 0),p([b({type:Number,json:{read:!1,write:!1}})],Ds.prototype,"miterLimit",void 0),Ds=K3=p([L("esri.symbols.SimpleLineSymbol")],Ds);const Io=Ds,SSe=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"}));let Cd=class extends Mr{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};p([b({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Io}},json:{default:null,write:!0}})],Cd.prototype,"outline",void 0),p([b({type:["simple-fill","picture-fill"],readOnly:!0})],Cd.prototype,"type",void 0),Cd=p([L("esri.symbols.FillSymbol")],Cd);const mL=Cd;let fy=class extends re{constructor(t){super(t)}clone(){}};p([b({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],fy.prototype,"type",void 0),fy=p([L("esri.symbols.patterns.LinePattern3D")],fy);const gL=fy,ire=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var X3;const sre=yn()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Od=X3=class extends gL{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new X3(e)}};p([b({type:["style"]})],Od.prototype,"type",void 0),p([pe(sre),b({type:ire})],Od.prototype,"style",void 0),Od=X3=p([L("esri.symbols.patterns.LineStylePattern3D")],Od);const A$=Od;let dy=class extends re{constructor(t){super(t)}clone(){}};p([b({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],dy.prototype,"type",void 0),dy=p([L("esri.symbols.patterns.Pattern3D")],dy);const yL=dy,ore=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Q3;let Pd=Q3=class extends yL{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new Q3(e)}};p([b({type:["style"]})],Pd.prototype,"type",void 0),p([b({type:ore,json:{read:!0,write:!0}})],Pd.prototype,"style",void 0),Pd=Q3=p([L("esri.symbols.patterns.StylePattern3D")],Pd);const bL=Pd,are={types:{key:"type",base:yL,typeMap:{style:bL}},json:{write:!0}},wL={types:{key:"type",base:gL,typeMap:{style:A$}},json:{write:!0}},kp=new fe("white");new fe("black");const lre=new fe([255,255,255,0]);function cre(e){return e.r===0&&e.g===0&&e.b===0}var eS;let Ep=eS=class extends Lr{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new eS(e)}};p([pe({multiply:"multiply",replace:"replace",tint:"tint"})],Ep.prototype,"colorMixMode",void 0),Ep=eS=p([L("esri.symbols.support.Symbol3DFillMaterial")],Ep);function I$(e=fre){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function $b(e,t,n,r,i,s,o=I$()){return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function TSe(e,t){const n=isFinite(e[2])||isFinite(e[5]);return new Me(n?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function ASe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function ISe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[3]=Math.max(e[3],t[2]),e[4]=Math.max(e[4],t[3])}function kSe(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function ESe(e,t,n=0,r=t.length/3){let i=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];for(let u=0;u<r;u++)i=Math.min(i,t[n+3*u]),s=Math.min(s,t[n+3*u+1]),o=Math.min(o,t[n+3*u+2]),a=Math.max(a,t[n+3*u]),l=Math.max(l,t[n+3*u+1]),c=Math.max(c,t[n+3*u+2]);e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function CSe(e,t,n){const r=t.length;let i=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];if(n)for(let u=0;u<r;u++){const h=t[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),o=Math.min(o,h[2]),a=Math.max(a,h[0]),l=Math.max(l,h[1]),c=Math.max(c,h[2])}else for(let u=0;u<r;u++){const h=t[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),a=Math.max(a,h[0]),l=Math.max(l,h[1])}e[0]=i,e[1]=s,e[2]=o,e[3]=a,e[4]=l,e[5]=c}function OSe(e){for(let t=0;t<6;t++)if(!isFinite(e[t]))return!1;return!0}function Y0(e){return e[0]>=e[3]?0:e[3]-e[0]}function K0(e){return e[1]>=e[4]?0:e[4]-e[1]}function X0(e){return e[2]>=e[5]?0:e[5]-e[2]}function PSe(e){const t=Y0(e),n=X0(e),r=K0(e);return Math.sqrt(t*t+n*n+r*r)}function RSe(e,t=[0,0,0]){return t[0]=e[0]+Y0(e)/2,t[1]=e[1]+K0(e)/2,t[2]=e[2]+X0(e)/2,t}function NSe(e,t=[0,0,0]){return t[0]=Y0(e),t[1]=K0(e),t[2]=X0(e),t}function DSe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]}function LSe(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]}function ure(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])}function FSe(e,t){return t==null||ure(e,t)}function jSe(e,t,n,r,i=e){return i[0]=e[0]+t,i[1]=e[1]+n,i[2]=e[2]+r,i[3]=e[3]+t,i[4]=e[4]+n,i[5]=e[5]+r,i}function zSe(e,t,n=e){const r=e[0]+Y0(e)/2,i=e[1]+K0(e)/2,s=e[2]+X0(e)/2;return n[0]=r+(e[0]-r)*t,n[1]=i+(e[1]-i)*t,n[2]=s+(e[2]-s)*t,n[3]=r+(e[3]-r)*t,n[4]=i+(e[4]-i)*t,n[5]=s+(e[5]-s)*t,n}function BSe(e,t){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function USe(e,t,n=e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n!==e&&(n[3]=e[3],n[4]=e[4],n[5]=e[5]),n}function VSe(e,t,n=e){return n[3]=t[0],n[4]=t[1],n[5]=t[2],n!==e&&(n[0]=e[0],n[1]=e[1],n[2]=e[2]),e}function hre(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function GSe(e){return e?hre(e,yI):I$(yI)}function WSe(e,t){return t||(t=Wa()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t}function HSe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function qSe(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=Number.NEGATIVE_INFINITY,e[3]=r,e[4]=i,e[5]=Number.POSITIVE_INFINITY,e}function gI(e){return e.length===6}function JSe(e){return Y0(e)===0&&K0(e)===0&&X0(e)===0}function ZSe(e,t,n){if(e==null||t==null)return e===t;if(!gI(e)||!gI(t))return!1;if(n){for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function YSe(e,t,n,r,i,s){return $b(e,t,n,r,i,s,dre)}const KSe=[-1/0,-1/0,-1/0,1/0,1/0,1/0],yI=[1/0,1/0,1/0,-1/0,-1/0,-1/0],fre=[0,0,0,0,0,0],dre=I$();function XSe(e,{isPrimitive:t,width:n,depth:r,height:i}){const s=t?10:1;if(n==null&&i==null&&r==null)return[s*e[0],s*e[1],s*e[2]];const o=Fr(n,r,i);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const pre=$b(-.5,-.5,-.5,.5,.5,.5),mre=$b(-.5,-.5,0,.5,.5,1),gre=$b(-.5,-.5,0,.5,.5,.5);function QSe(e){switch(e){case"sphere":case"cube":case"diamond":return pre;case"cylinder":case"cone":case"inverted-cone":return mre;case"tetrahedron":return gre;default:return}}const k$=["butt","square","round"],yre=[...k$,"none"],vL=["miter","bevel","round"];var tS;let Cl=tS=class extends re{constructor(e){super(e),this.color=new fe([0,0,0,1]),this.size=bo(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new tS(e)}};p([b(al)],Cl.prototype,"color",void 0),p([b(Ms)],Cl.prototype,"size",void 0),p([b(wL)],Cl.prototype,"pattern",void 0),p([b({type:k$,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Cl.prototype,"patternCap",void 0),Cl=tS=p([L("esri.symbols.support.Symbol3DOutline")],Cl);var py;let Ls=py=class extends Ts{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new py(e)}static fromSimpleFillSymbol(e){var r,i,s;const t=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new A$({style:e.outline.style}):null,n={size:((r=e.outline)==null?void 0:r.width)??0,color:(((i=e.outline)==null?void 0:i.color)??kp).clone(),pattern:t};return t&&((s=e.outline)!=null&&s.cap)&&(n.patternCap=e.outline.cap),new py({material:new Ep({color:(e.color??lre).clone()}),pattern:e.style&&e.style!=="solid"?new bL({style:e.style}):null,outline:n})}};p([pe({Fill:"fill"},{readOnly:!0})],Ls.prototype,"type",void 0),p([b({type:Ep,json:{write:!0}})],Ls.prototype,"material",void 0),p([b(are)],Ls.prototype,"pattern",void 0),p([b({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ls.prototype,"castShadows",void 0),p([b({type:Cl,json:{write:!0}})],Ls.prototype,"outline",void 0),p([b(fL)],Ls.prototype,"edges",void 0),Ls=py=p([L("esri.symbols.FillSymbol3DLayer")],Ls);const Q0=Ls,bre=["none","underline","line-through"],wre=["normal","italic","oblique"],vre=["normal","lighter","bold","bolder"],xL={type:Number,cast:e=>{const t=I2(e);return t===0?1:Un(t,.1,4)},nonNullable:!0},xre=["left","right","center"],Sre=["baseline","top","middle","bottom"],SL={type:xre,nonNullable:!0},_L={type:Sre,nonNullable:!0},e_e=8;var nS;let Fs=nS=class extends re{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return ot(e)}clone(){return new nS({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};p([b({type:bre,json:{default:"none",write:!0}})],Fs.prototype,"decoration",void 0),p([b({type:String,json:{write:!0}})],Fs.prototype,"family",void 0),p([b({type:Number,json:{write:{overridePolicy:(e,t,n)=>({enabled:!n||!n.textSymbol3D})}}})],Fs.prototype,"size",void 0),p([gt("size")],Fs.prototype,"castSize",null),p([b({type:wre,json:{default:"normal",write:!0}})],Fs.prototype,"style",void 0),p([b({type:vre,json:{default:"normal",write:!0}})],Fs.prototype,"weight",void 0),Fs=nS=p([L("esri.symbols.Font")],Fs);const Tb=Fs;var rS;const _re=yn()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Ol=rS=class extends re{constructor(e){super(e)}readHref(e,t,n){return e?Mf(e,n):t.dataURI}writeHref(e,t,n,r){e&&(wu(e)?t.dataURI=e:(t.href=su(e,r),Nr(t.href)&&(t.href=Oi(t.href))))}clone(){return new rS({href:this.href,primitive:this.primitive})}};p([b({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Ol.prototype,"href",void 0),p([ge("href")],Ol.prototype,"readHref",null),p([xe("href",{href:{type:String},dataURI:{type:String}})],Ol.prototype,"writeHref",null),p([pe(_re)],Ol.prototype,"primitive",void 0),Ol=rS=p([L("esri.symbols.support.IconSymbol3DLayerResource")],Ol);const t_e="circle";var iS;let Ah=iS=class extends Yt{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new iS({x:this.x,y:this.y})}};p([b({type:Number})],Ah.prototype,"x",void 0),p([b({type:Number})],Ah.prototype,"y",void 0),Ah=iS=p([L("esri.symbols.support.Symbol3DAnchorPosition2D")],Ah);var sS;let Rd=sS=class extends re{constructor(e){super(e),this.color=new fe([0,0,0,1]),this.size=bo(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new sS(e)}};p([b(al)],Rd.prototype,"color",void 0),p([b(Ms)],Rd.prototype,"size",void 0),Rd=sS=p([L("esri.symbols.support.Symbol3DIconOutline")],Rd);var eh;const ML="esri.symbols.IconSymbol3DLayer";let ts=eh=class extends Ts{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new eh({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:this.material!=null?this.material.clone():null,outline:this.outline!=null?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||kp,n=bI(e),r=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||kp).clone()}:null;return new eh({size:e.size,resource:{primitive:$re(e.style)},material:{color:t},outline:r,anchor:n?"relative":void 0,anchorPosition:n})}static fromPictureMarkerSymbol(e){const t=!e.color||cre(e.color)?kp:e.color,n=bI(e);return new eh({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:n?"relative":void 0,anchorPosition:n})}static fromCIMSymbol(e){return new eh({resource:{href:GP({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function bI(e){const t="width"in e?e.width:e.size,n="height"in e?e.height:e.size,r=wI(e.xoffset),i=wI(e.yoffset);return(r||i)&&t&&n?{x:-r/t,y:i/n}:null}function wI(e){return isFinite(e)?e:0}p([b({type:Lr,json:{write:!0}})],ts.prototype,"material",void 0),p([b({type:Ol,json:{write:!0}})],ts.prototype,"resource",void 0),p([pe({Icon:"icon"},{readOnly:!0})],ts.prototype,"type",void 0),p([b(Ms)],ts.prototype,"size",void 0),p([pe({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),b({json:{default:"center"}})],ts.prototype,"anchor",void 0),p([b({type:Ah,json:{type:[Number],read:{reader:e=>new Ah({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ts.prototype,"anchorPosition",void 0),p([b({type:Rd,json:{write:!0}})],ts.prototype,"outline",void 0),ts=eh=p([L(ML)],ts);const Mre={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function $re(e){return Mre[e]||(ie.getLogger(ML).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Tc=ts;function $L(e,t,n=tt){return t||(t=new n),t===e||(t.removeAll(),Tre(e)?t.addMany(e):e&&t.add(e)),t}function TL(e){return e}function Tre(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}let Ym;function Are(e){return Ym&&!Ym.destroyed||(Ym=e()),Ym}var oS;const Ire=new Ne({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let qr=oS=class extends Yt{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new oS({categories:this.categories?J(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let n=[];this.categories&&(n=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=MM(this.extent,we.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let i=this.query;!this.disableExtraQuery&&e.extraQuery&&(i="("+i+")"+e.extraQuery);const s={categories:n,bbox:r,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>Ire.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};p([b()],qr.prototype,"categories",void 0),p([b()],qr.prototype,"disableExtraQuery",void 0),p([b({type:Me})],qr.prototype,"extent",void 0),p([b()],qr.prototype,"filter",void 0),p([b()],qr.prototype,"num",void 0),p([b()],qr.prototype,"query",void 0),p([b()],qr.prototype,"sortField",void 0),p([b()],qr.prototype,"sortOrder",null),p([b()],qr.prototype,"start",void 0),qr=oS=p([L("esri.portal.PortalQueryParams")],qr);const ps=qr;var aS;let zt=aS=class extends re{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){var n;const e=this.url,t=this.thumbnail;return e&&t&&this.portal?(n=this.portal)==null?void 0:n.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const n=t.categorySchema||[];return n.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):n})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new Y("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new aS;return t.sourceJSON=e,t.read(e),t}queryItems(e,t){let n=vr(ps,e);const r=this.portal;return parseFloat(r.currentVersion)>5?(n=n||new ps,r.queryPortal(`/content/groups/${this.id}/search`,n,"PortalItem",t)):(n=n?n.clone():new ps,n.query="group:"+this.id+(n.query?" "+n.query:""),r.queryItems(n,t))}_fetchCategorySchemaSet(e,t){const n=this.portal;return n.fetchSelf(n.authMode,!0,t).then(r=>{const i=r.contentCategorySetsGroupQuery;if(i){const s=new ps;return s.disableExtraQuery=!0,s.num=1,s.query=i,n.queryGroups(s,t)}throw new Y("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const i=r.results[0],s=new ps;return s.num=1,s.query=`typekeywords:"${e}"`,i.queryItems(s,t)}throw new Y("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(i=>{const s=i==null?void 0:i.categorySchema;return s!=null&&s.length?s:[]}):[])}};p([b()],zt.prototype,"access",void 0),p([b({type:Date})],zt.prototype,"created",void 0),p([b()],zt.prototype,"description",void 0),p([b()],zt.prototype,"id",void 0),p([b()],zt.prototype,"isInvitationOnly",void 0),p([b({type:Date})],zt.prototype,"modified",void 0),p([b()],zt.prototype,"owner",void 0),p([b()],zt.prototype,"portal",void 0),p([b()],zt.prototype,"snippet",void 0),p([b()],zt.prototype,"sortField",void 0),p([b()],zt.prototype,"sortOrder",void 0),p([b()],zt.prototype,"sourceJSON",void 0),p([b()],zt.prototype,"tags",void 0),p([b()],zt.prototype,"thumbnail",void 0),p([b({readOnly:!0})],zt.prototype,"thumbnailUrl",null),p([b()],zt.prototype,"title",void 0),p([b({readOnly:!0})],zt.prototype,"url",null),zt=aS=p([L("esri.portal.PortalGroup")],zt);const lS=zt;let Pl=class extends Yt{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};p([b()],Pl.prototype,"nextQueryParams",void 0),p([b()],Pl.prototype,"queryParams",void 0),p([b()],Pl.prototype,"results",void 0),p([b()],Pl.prototype,"total",void 0),Pl=p([L("esri.portal.PortalQueryResult")],Pl);const kre=Pl;let js=class extends re{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){var n;const t=(n=this.portal)==null?void 0:n.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Y("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};p([b({type:Date})],js.prototype,"created",void 0),p([b()],js.prototype,"id",void 0),p([b()],js.prototype,"portal",void 0),p([b()],js.prototype,"title",void 0),p([b({readOnly:!0})],js.prototype,"url",null),p([b()],js.prototype,"username",void 0),js=p([L("esri.portal.PortalFolder")],js);const Ere=js;var cS;let pt=cS=class extends re{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,n=e==null?void 0:e.data,r=e==null?void 0:e.folder,i={method:"post"};t&&(i.query=t.createPostQuery(),n!=null&&(typeof n=="string"?i.query.text=n:typeof n=="object"&&(i.query.text=JSON.stringify(n))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",i).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal.request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",n=e.map(r=>r.id);if(n.length){const r={method:"post",query:{items:n.join(",")}};return this.portal.request(t,r).then(()=>{e.forEach(i=>{i.id=null,i.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let n;return n=t&&t.folders?t.folders.map(r=>{const i=Ere.fromJSON(r);return i.portal=this.portal,i}):[],n})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(n=>{const r=lS.fromJSON(n);return r.portal=this.portal,r}):[],t})}fetchItems(e){const t=e??{};let n,r=this.userContentUrl??"";return t.folder&&(r+="/"+t.folder.id),ne(()=>Promise.resolve().then(()=>u7),void 0).then(({default:i})=>{n=i;const s={folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"};return this.portal.request(r,{query:s})}).then(i=>{let s;return i!=null&&i.items?(s=i.items.map(o=>{const a=n.fromJSON(o);return a.portal=this.portal,a}),Promise.all(s.map(o=>o.load())).catch(o=>o).then(()=>({items:s,nextStart:i.nextStart,total:i.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new lS({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new Y("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new Y("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new cS;return t.sourceJSON=e,t.read(e),t}};p([b()],pt.prototype,"access",void 0),p([b({type:Date})],pt.prototype,"created",void 0),p([b()],pt.prototype,"culture",void 0),p([b()],pt.prototype,"description",void 0),p([b()],pt.prototype,"email",void 0),p([b()],pt.prototype,"favGroupId",void 0),p([b()],pt.prototype,"fullName",void 0),p([b({type:Date})],pt.prototype,"modified",void 0),p([b()],pt.prototype,"orgId",void 0),p([b()],pt.prototype,"portal",void 0),p([b()],pt.prototype,"preferredView",void 0),p([b()],pt.prototype,"privileges",void 0),p([b()],pt.prototype,"region",void 0),p([b()],pt.prototype,"role",void 0),p([b()],pt.prototype,"roleId",void 0),p([b()],pt.prototype,"sourceJSON",void 0),p([b()],pt.prototype,"thumbnail",void 0),p([b({readOnly:!0})],pt.prototype,"thumbnailUrl",null),p([b()],pt.prototype,"units",void 0),p([b({readOnly:!0})],pt.prototype,"userContentUrl",null),p([b({readOnly:!0})],pt.prototype,"url",null),p([b()],pt.prototype,"username",void 0),p([b()],pt.prototype,"userType",void 0),pt=cS=p([L("esri.portal.PortalUser")],pt);const E$=pt;var zs;let Km;const vI={PortalGroup:()=>Promise.resolve({default:lS}),PortalItem:()=>ne(()=>Promise.resolve().then(()=>u7),void 0),PortalUser:()=>Promise.resolve({default:E$})};let se=zs=class extends lM(L2){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=ze.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){xI.unregister(this),this.defaultBasemap=mp(this.defaultBasemap),this.defaultDevBasemap=mp(this.defaultDevBasemap),this.defaultVectorBasemap=mp(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Ci(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)ze.request.trustedServers.includes(t)||ze.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){var n;const e=(n=this.user)==null?void 0:n.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=E$.fromJSON(e),t.portal=this),t}load(e){const t=ne(()=>import("./Basemap-8d62c69e.js").then(n=>n.B),["assets/Basemap-8d62c69e.js","assets/loadAll-5e767cfa.js","assets/writeUtils-e226a8aa.js"]).then(({default:n})=>{Hn(e),Km=n}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(n=>{var r;if(Le){const i=Le;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==zs.AUTH_MODE_AUTO||((r=this._esriIdCredentialCreateHandle)==null||r.remove(),this._esriIdCredentialCreateHandle=i.on("credential-create",Cre(new WeakRef(this))),xI.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await ne(()=>import("./ElevationLayer-08345293.js"),["assets/ElevationLayer-08345293.js","assets/HeightModelInfo-b816d32b.js","assets/ArcGISCachedService-b7d75cf5.js","assets/TileInfoTilemapCache-c19bf120.js","assets/LercDecoder-b49c0e9c.js","assets/WorkerHandle-9433ab9a.js"])).default;return e?e.map(n=>new t({id:n.id,url:n.url})):[]}async fetchBasemaps(e,t){const n=await this._fetchBasemaps(e,t);if((t==null?void 0:t.include3d)===!0&&this.use3dBasemaps!==!1){const r=await this._fetchBasemaps3D(e,t);n.unshift(...r)}return n}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):ri(e)?Promise.reject(Ot()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,n=new ps;if(n.num=100,n.sortField="title",t&&t.length){const r=[];for(const i of t)r.push(`(title:"${i.title}" AND owner:${i.owner})`);return n.query=r.join(" OR "),this.queryGroups(n,e).then(i=>i.results)}return ri(e)?Promise.reject(Ot()):Promise.resolve([])}fetchRegions(e){var n;const t=((n=this.user)==null?void 0:n.culture)||this.culture||ti();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){var n;const t=((n=this.user)==null?void 0:n.culture)||this.culture||ti();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return Are(()=>new zs)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,n){const r=this.restUrl+"/portals/self",i={authMode:e,query:{culture:ti().toLowerCase()},...n};return i.authMode==="auto"&&(i.authMode="no-prompt"),t&&(i.query.default=!0),this.request(r,i)}queryPortal(e,t,n,r){const i=vr(ps,t),s=o=>this.request(this.restUrl+e,{...i.toRequestOptions(this),...r}).then(a=>{const l=i.clone();return l.start=a.nextStart,new kre({nextQueryParams:l,queryParams:i,total:a.total,results:zs._resultsToTypedArray(o,{portal:this},a,r)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(hs(l),a)));return n&&vI[n]?vI[n]().then(({default:o})=>(Hn(r),s(o))):s()}signIn(){if(this.authMode===zs.AUTH_MODE_ANONYMOUS)return Promise.reject(new Y("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(n=>{n&&(this.sourceJSON=n,this.read(n))});return Le?Le.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}normalizeUrl(e){var n;const t=(n=this.credential)==null?void 0:n.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,n){return this.request(e,t).then(r=>{const i=zs._resultsToTypedArray(n,{portal:this},r);return Promise.all(i.map(s=>typeof s.when=="function"?s.when():r)).then(()=>i,()=>i)})}request(e,t={}){const n={f:"json",...t.query},{authMode:r=this.authMode===zs.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:i=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=t,c={authMode:r,body:i,cacheBust:s,method:o,query:n,responseType:a,timeout:0,signal:l};return He(this._normalizeSSL(e),c).then(u=>u.data)}toJSON(){throw new Y("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new zs({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new Y("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const n=new ps;n.query=e||(ze.apiKey&&bM(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),n.disableExtraQuery=!0;const r=await this.queryGroups(n,t);if(!r.total)return[];const i=r.results[0];n.num=100,n.query='type:"Web Map" -type:"Web Application"',n.sortField=i.sortField||"name",n.sortOrder=i.sortOrder||"desc";const s=await i.queryItems(n,t);return s.total?s.results.filter(o=>o.type==="Web Map").map(o=>new Km({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const n=e||this.basemapGalleryGroupQuery3D;if(!n)return[];const r=new ps({query:n,disableExtraQuery:!0}),i=await this.queryGroups(r,t);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Scene"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new Km({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=Km.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,n,r){let i=[];if(n){const s=r!=null?r.signal:null;i=n.listings||n.notifications||n.userInvitations||n.tags||n.items||n.groups||n.comments||n.provisions||n.results||n.relatedItems||n,(e||t)&&(i=i.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else i=[];return i}};se.AUTH_MODE_ANONYMOUS="anonymous",se.AUTH_MODE_AUTO="auto",se.AUTH_MODE_IMMEDIATE="immediate",p([b()],se.prototype,"access",void 0),p([b()],se.prototype,"allSSL",void 0),p([b()],se.prototype,"authMode",void 0),p([b()],se.prototype,"authorizedCrossOriginDomains",void 0),p([ge("authorizedCrossOriginDomains")],se.prototype,"readAuthorizedCrossOriginDomains",null),p([b()],se.prototype,"basemapGalleryGroupQuery",void 0),p([b({json:{name:"3DBasemapGalleryGroupQuery"}})],se.prototype,"basemapGalleryGroupQuery3D",void 0),p([b()],se.prototype,"bingKey",void 0),p([b()],se.prototype,"canListApps",void 0),p([b()],se.prototype,"canListData",void 0),p([b()],se.prototype,"canListPreProvisionedItems",void 0),p([b()],se.prototype,"canProvisionDirectPurchase",void 0),p([b()],se.prototype,"canSearchPublic",void 0),p([b()],se.prototype,"canShareBingPublic",void 0),p([b()],se.prototype,"canSharePublic",void 0),p([b()],se.prototype,"canSignInArcGIS",void 0),p([b()],se.prototype,"canSignInIDP",void 0),p([b()],se.prototype,"colorSetsGroupQuery",void 0),p([b()],se.prototype,"commentsEnabled",void 0),p([b({type:Date})],se.prototype,"created",void 0),p([b()],se.prototype,"credential",void 0),p([b()],se.prototype,"culture",void 0),p([b()],se.prototype,"currentVersion",void 0),p([b()],se.prototype,"customBaseUrl",void 0),p([b()],se.prototype,"defaultBasemap",void 0),p([ge("defaultBasemap")],se.prototype,"readDefaultBasemap",null),p([b()],se.prototype,"defaultDevBasemap",void 0),p([ge("defaultDevBasemap")],se.prototype,"readDefaultDevBasemap",null),p([b({type:Me})],se.prototype,"defaultExtent",void 0),p([b()],se.prototype,"defaultVectorBasemap",void 0),p([ge("defaultVectorBasemap")],se.prototype,"readDefaultVectorBasemap",null),p([b()],se.prototype,"description",void 0),p([b()],se.prototype,"devBasemapGalleryGroupQuery",void 0),p([b()],se.prototype,"eueiEnabled",void 0),p([b({readOnly:!0})],se.prototype,"extraQuery",null),p([b()],se.prototype,"featuredGroups",void 0),p([b()],se.prototype,"featuredItemsGroupQuery",void 0),p([b()],se.prototype,"galleryTemplatesGroupQuery",void 0),p([b()],se.prototype,"livingAtlasGroupQuery",void 0),p([b()],se.prototype,"hasCategorySchema",void 0),p([b()],se.prototype,"helpBase",void 0),p([b()],se.prototype,"helperServices",void 0),p([b()],se.prototype,"helpMap",void 0),p([b()],se.prototype,"homePageFeaturedContent",void 0),p([b()],se.prototype,"homePageFeaturedContentCount",void 0),p([b()],se.prototype,"httpPort",void 0),p([b()],se.prototype,"httpsPort",void 0),p([b()],se.prototype,"id",void 0),p([b()],se.prototype,"ipCntryCode",void 0),p([b({readOnly:!0})],se.prototype,"isOrganization",null),p([b()],se.prototype,"isPortal",void 0),p([b()],se.prototype,"isReadOnly",void 0),p([b({readOnly:!0})],se.prototype,"itemPageUrl",null),p([b()],se.prototype,"layerTemplatesGroupQuery",void 0),p([b()],se.prototype,"maxTokenExpirationMinutes",void 0),p([b({type:Date})],se.prototype,"modified",void 0),p([b()],se.prototype,"name",void 0),p([b()],se.prototype,"portalHostname",void 0),p([b()],se.prototype,"portalMode",void 0),p([b()],se.prototype,"portalProperties",void 0),p([b()],se.prototype,"region",void 0),p([b({readOnly:!0})],se.prototype,"restUrl",null),p([b()],se.prototype,"rotatorPanels",void 0),p([b()],se.prototype,"showHomePageDescription",void 0),p([b()],se.prototype,"sourceJSON",void 0),p([b()],se.prototype,"staticImagesUrl",void 0),p([b({json:{name:"2DStylesGroupQuery"}})],se.prototype,"stylesGroupQuery2d",void 0),p([b({json:{name:"stylesGroupQuery"}})],se.prototype,"stylesGroupQuery3d",void 0),p([b()],se.prototype,"supportsHostedServices",void 0),p([b()],se.prototype,"symbolSetsGroupQuery",void 0),p([b()],se.prototype,"templatesGroupQuery",void 0),p([b()],se.prototype,"thumbnail",void 0),p([b({readOnly:!0})],se.prototype,"thumbnailUrl",null),p([b()],se.prototype,"units",void 0),p([b()],se.prototype,"url",void 0),p([b()],se.prototype,"urlKey",void 0),p([ge("urlKey")],se.prototype,"readUrlKey",null),p([b()],se.prototype,"user",void 0),p([ge("user")],se.prototype,"readUser",null),p([b()],se.prototype,"use3dBasemaps",void 0),p([b()],se.prototype,"useStandardizedQuery",void 0),p([b()],se.prototype,"useVectorBasemaps",void 0),p([b()],se.prototype,"vectorBasemapGalleryGroupQuery",void 0),se=zs=p([L("esri.portal.Portal")],se);const si=se,xI=new FinalizationRegistry(e=>{e.remove()});function Cre(e){const t=Le;return()=>{const n=e.deref();n&&t.findCredential(n.restUrl)&&n.signIn().catch(()=>{})}}let Rl=class extends _n(re){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};p([b({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Rl.prototype,"type",void 0),p([b({type:nre,json:{default:"begin-end",write:!0}})],Rl.prototype,"placement",void 0),p([b({type:pL,json:{default:"arrow",write:!0}})],Rl.prototype,"style",void 0),p([b({type:fe,json:{type:[Be],default:null,write:!0}})],Rl.prototype,"color",void 0),Rl=p([L("esri.symbols.LineStyleMarker3D")],Rl);const uS=Rl;var my;let ns=my=class extends Ts{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=bo(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new my(e)}static fromSimpleLineSymbol(e){var n;const t={enabled:!0,size:e.width??bo(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new A$({style:e.style}):null,material:new Lr({color:(e.color||kp).clone()}),marker:e.marker?new uS({placement:e.marker.placement,style:e.marker.style,color:((n=e.marker.color)==null?void 0:n.clone())??null}):null};return new my(t)}};p([b({type:Lr,json:{write:!0}})],ns.prototype,"material",void 0),p([pe({Line:"line"},{readOnly:!0})],ns.prototype,"type",void 0),p([b({type:vL,json:{write:!0,default:"miter"}})],ns.prototype,"join",void 0),p([b({type:k$,json:{write:!0,default:"butt"}})],ns.prototype,"cap",void 0),p([b(Ms)],ns.prototype,"size",void 0),p([b(wL)],ns.prototype,"pattern",void 0),p([b({types:{key:"type",base:uS,typeMap:{style:uS}},json:{write:!0}})],ns.prototype,"marker",void 0),ns=my=p([L("esri.symbols.LineSymbol3DLayer")],ns);const em=ns;var hS;const Ore=yn()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Nd=hS=class extends re{clone(){return new hS({href:this.href,primitive:this.primitive})}};p([b({type:String,json:{read:BM,write:Ha}})],Nd.prototype,"href",void 0),p([pe(Ore)],Nd.prototype,"primitive",void 0),Nd=hS=p([L("esri.symbols.support.ObjectSymbol3DLayerResource")],Nd);const s_e="sphere";var fS;let yc=fS=class extends Yt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new fS({x:this.x,y:this.y,z:this.z})}};p([b({type:Number})],yc.prototype,"x",void 0),p([b({type:Number})],yc.prototype,"y",void 0),p([b({type:Number})],yc.prototype,"z",void 0),yc=fS=p([L("esri.symbols.support.Symbol3DAnchorPosition3D")],yc);var dS;let En=dS=class extends Ts{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){var e,t,n;return new dS({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:(e=this.anchorPosition)==null?void 0:e.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:((t=this.material)==null?void 0:t.clone())??null,castShadows:this.castShadows,resource:(n=this.resource)==null?void 0:n.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};p([b({type:Lr,json:{write:!0}})],En.prototype,"material",void 0),p([b({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],En.prototype,"castShadows",void 0),p([b({type:Nd,json:{write:!0}})],En.prototype,"resource",void 0),p([pe({Object:"object"},{readOnly:!0})],En.prototype,"type",void 0),p([b({type:Number,json:{write:!0}})],En.prototype,"width",void 0),p([b({type:Number,json:{write:!0}})],En.prototype,"height",void 0),p([b({type:Number,json:{write:!0}})],En.prototype,"depth",void 0),p([pe({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),b({json:{default:"origin"}})],En.prototype,"anchor",void 0),p([b({type:yc,json:{type:[Number],read:{reader:e=>new yc({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],En.prototype,"anchorPosition",void 0),p([b({type:Number,json:{write:!0}})],En.prototype,"heading",void 0),p([b({type:Number,json:{write:!0}})],En.prototype,"tilt",void 0),p([b({type:Number,json:{write:!0}})],En.prototype,"roll",void 0),p([b({readOnly:!0})],En.prototype,"isPrimitive",null),En=dS=p([L("esri.symbols.ObjectSymbol3DLayer")],En);const C$=En;var pS;let Kn=pS=class extends Ts{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new pS({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};p([b({type:Lr,json:{write:!0}})],Kn.prototype,"material",void 0),p([b({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Kn.prototype,"castShadows",void 0),p([pe({Path:"path"},{readOnly:!0})],Kn.prototype,"type",void 0),p([b({type:["circle","quad"],json:{write:!0,default:"circle"}})],Kn.prototype,"profile",void 0),p([b({type:vL,json:{write:!0,default:"miter"}})],Kn.prototype,"join",void 0),p([b({type:yre,json:{write:!0,default:"butt"}})],Kn.prototype,"cap",void 0),p([b({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Kn.prototype,"width",void 0),p([ge("width",["width","size","height"])],Kn.prototype,"readWidth",null),p([b({type:Number,json:{write:!0}})],Kn.prototype,"height",void 0),p([ge("height",["height","size","width"])],Kn.prototype,"readHeight",null),p([b({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Kn.prototype,"anchor",void 0),p([b({type:["heading","all"],json:{write:!0,default:"all"}})],Kn.prototype,"profileRotation",void 0),Kn=pS=p([L("esri.symbols.PathSymbol3DLayer")],Kn);const O$=Kn;var mS;let Ih=mS=class extends re{constructor(){super(...arguments),this.color=new fe([0,0,0,1]),this.size=0}clone(){const e={color:J(this.color),size:this.size};return new mS(e)}};p([b(al)],Ih.prototype,"color",void 0),p([b(Ms)],Ih.prototype,"size",void 0),Ih=mS=p([L("esri.symbols.support.Symbol3DHalo")],Ih);let Cp=class extends _n(re){constructor(t){super(t),this.color=null}};p([b(al)],Cp.prototype,"color",void 0),Cp=p([L("esri.symbols.support.Symbol3DTextBackground")],Cp);var gy;let or=gy=class extends Ts{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,n,r){const i={...r,textSymbol3D:!0};t.font=e.write({},i),delete t.font.size}get size(){var e;return this._userSize!=null?this._userSize:((e=this.font)==null?void 0:e.size)!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new gy({enabled:this.enabled,font:this.font&&J(this.font),halo:this.halo&&J(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:J(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new gy({font:e.font!=null?e.font.clone():new Tb,halo:Pre(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Lr({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new Cp({color:e.backgroundColor.clone()}):null})}};function Pre(e,t){return e&&t!=null&&t>0?new Ih({color:J(e),size:t}):null}p([b({type:Tb,json:{write:!0}})],or.prototype,"font",null),p([xe("font")],or.prototype,"writeFont",null),p([b({type:Ih,json:{write:!0}})],or.prototype,"halo",void 0),p([b({...SL,json:{default:"center",write:!0}})],or.prototype,"horizontalAlignment",void 0),p([b({...xL,json:{default:1,write:!0}})],or.prototype,"lineHeight",void 0),p([b({type:Lr,json:{write:!0}})],or.prototype,"material",void 0),p([b({type:Cp,json:{write:!0}})],or.prototype,"background",void 0),p([b(Ms)],or.prototype,"size",null),p([b({type:String,json:{write:!0}})],or.prototype,"text",void 0),p([pe({Text:"text"},{readOnly:!0})],or.prototype,"type",void 0),p([b({..._L,json:{default:"baseline",write:!0}})],or.prototype,"verticalAlignment",void 0),or=gy=p([L("esri.symbols.TextSymbol3DLayer")],or);const Of=or;var gS;let Yo=gS=class extends Ts{constructor(e){super(e),this.color=yS.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new gS({color:J(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};p([b({type:fe,nonNullable:!0,json:{type:[Be],write:(e,t,n)=>t[n]=e.toArray(fe.AlphaMode.UNLESS_OPAQUE),default:()=>yS.clone(),defaultEquals:e=>e.toCss(!0)===yS.toCss(!0)}})],Yo.prototype,"color",void 0),p([pe({Water:"water"},{readOnly:!0})],Yo.prototype,"type",void 0),p([b({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Yo.prototype,"waterbodySize",void 0),p([b({type:Number,json:{write:!0,default:null}})],Yo.prototype,"waveDirection",void 0),p([b({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Yo.prototype,"waveStrength",void 0),Yo=gS=p([L("esri.symbols.WaterSymbol3DLayer")],Yo);const yS=new fe([0,119,190]),AL=Yo;var bS;let Nl=bS=class extends Yt{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new bS({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};p([b({type:String})],Nl.prototype,"name",void 0),p([b({type:String})],Nl.prototype,"styleUrl",void 0),p([b({type:String})],Nl.prototype,"styleName",void 0),p([b({type:si})],Nl.prototype,"portal",void 0),Nl=bS=p([L("esri.symbols.support.StyleOrigin")],Nl);const wS=Nl;var vS;let Op=vS=class extends Yt{constructor(){super(...arguments),this.url=""}clone(){return new vS({url:this.url})}};p([b({type:String})],Op.prototype,"url",void 0),Op=vS=p([L("esri.symbols.support.Thumbnail")],Op);const IL={icon:Tc,object:C$,line:em,path:O$,fill:Q0,extrude:dL,text:Of,water:AL},Rre=tt.ofType({base:Ts,key:"type",typeMap:IL,errorContext:"symbol-layer"});let rs=class extends Mr{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const n=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=n==null?void 0:n.type,i=r||tt;this._set("symbolLayers",new i)}get color(){return null}set color(t){this.constructed&&ie.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){$L(t,this._get("symbolLayers"))}readStyleOrigin(t,n,r){if(t.styleUrl&&t.name){const i=Mf(t.styleUrl,r);return new wS({styleUrl:i,name:t.name})}if(t.styleName&&t.name)return new wS({portal:(r==null?void 0:r.portal)||si.getDefault(),styleName:t.styleName,name:t.name});r!=null&&r.messages&&r.messages.push(new Zc("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:t}))}writeStyleOrigin(t,n,r,i){if(t.styleUrl&&t.name){let s=su(t.styleUrl,i);Nr(s)&&(s=Oi(s)),n.styleOrigin={styleUrl:s,name:t.name}}else t.styleName&&t.name&&(t.portal&&(i!=null&&i.portal)&&!UP(t.portal.restUrl,i.portal.restUrl)?i!=null&&i.messages&&i.messages.push(new Zc("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):n.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof Ts||t&&IL[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};p([b({json:{read:!1,write:!1}})],rs.prototype,"color",null),p([b({type:Rre,nonNullable:!0,json:{write:!0}}),gt(TL)],rs.prototype,"symbolLayers",null),p([b({type:wS})],rs.prototype,"styleOrigin",void 0),p([ge("styleOrigin")],rs.prototype,"readStyleOrigin",null),p([xe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],rs.prototype,"writeStyleOrigin",null),p([b({type:Op,json:{read:!1}})],rs.prototype,"thumbnail",void 0),p([b({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],rs.prototype,"type",void 0),rs=p([L("esri.symbols.Symbol3D")],rs);const Pf=rs;let Dd=class extends re{constructor(t){super(t),this.visible=!0}clone(){}};p([b({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Dd.prototype,"type",void 0),p([b({readOnly:!0})],Dd.prototype,"visible",void 0),Dd=p([L("esri.symbols.callouts.Callout3D")],Dd);const kL=Dd;var xS;let yy=xS=class extends re{constructor(e){super(e),this.color=new fe("white")}clone(){return new xS({color:J(this.color)})}};p([b(al)],yy.prototype,"color",void 0),yy=xS=p([L("esri.symbols.callouts.LineCallout3DBorder")],yy);const Nre=yy;var SS;let Ko=SS=class extends kL{constructor(e){super(e),this.type="line",this.color=new fe([0,0,0,1]),this.size=bo(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new SS({color:J(this.color),size:this.size,border:J(this.border)})}};p([pe({line:"line"})],Ko.prototype,"type",void 0),p([b(al)],Ko.prototype,"color",void 0),p([b(Ms)],Ko.prototype,"size",void 0),p([b({type:Nre,json:{write:!0}})],Ko.prototype,"border",void 0),p([b({readOnly:!0})],Ko.prototype,"visible",null),Ko=SS=p([L("esri.symbols.callouts.LineCallout3D")],Ko);const EL=Ko;function P$(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function CL(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!P$(e)}function c_e(e){return e.type==="point-3d"||e.type==="label-3d"}function u_e(e){return e.horizontalAlignment==="center"}const OL={types:{key:"type",base:kL,typeMap:{line:EL}},json:{write:!0}};var _S;let th=_S=class extends re{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new _S({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};p([b(Ms)],th.prototype,"screenLength",void 0),p([b({type:Number,nonNullable:!0,json:{write:!0,default:0}})],th.prototype,"minWorldLength",void 0),p([b({type:Number,json:{write:!0}})],th.prototype,"maxWorldLength",void 0),th=_S=p([L("esri.symbols.support.Symbol3DVerticalOffset")],th);const R$=th;var by;const PL=tt.ofType({base:null,key:"type",typeMap:{text:Of}});let Xo=by=class extends Pf{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new PL,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return CL(this)}hasVisibleVerticalOffset(){return P$(this)}clone(){return new by({styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail),callout:J(this.callout),verticalOffset:J(this.verticalOffset)})}static fromTextSymbol(e){return new by({symbolLayers:new tt([Of.fromTextSymbol(e)])})}};p([b({type:R$,json:{write:!0}})],Xo.prototype,"verticalOffset",void 0),p([b(OL)],Xo.prototype,"callout",void 0),p([b({json:{read:!1,write:!1}})],Xo.prototype,"styleOrigin",void 0),p([b({type:PL})],Xo.prototype,"symbolLayers",void 0),p([pe({LabelSymbol3D:"label-3d"},{readOnly:!0})],Xo.prototype,"type",void 0),Xo=by=p([L("esri.symbols.LabelSymbol3D")],Xo);const Ab=Xo;var wy;const RL=tt.ofType({base:null,key:"type",typeMap:{line:em,path:O$}}),Dre=tt.ofType({base:null,key:"type",typeMap:{line:em,path:O$}});let Ld=wy=class extends Pf{constructor(e){super(e),this.symbolLayers=new RL,this.type="line-3d"}clone(){return new wy({styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail)})}static fromSimpleLineSymbol(e){return new wy({symbolLayers:new tt([em.fromSimpleLineSymbol(e)])})}};p([b({type:RL,json:{type:Dre}})],Ld.prototype,"symbolLayers",void 0),p([pe({LineSymbol3D:"line-3d"},{readOnly:!0})],Ld.prototype,"type",void 0),Ld=wy=p([L("esri.symbols.LineSymbol3D")],Ld);const Ib=Ld;let Qo=class extends Mr{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};p([b({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Qo.prototype,"angle",void 0),p([b({type:["simple-marker","picture-marker"],readOnly:!0})],Qo.prototype,"type",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],Qo.prototype,"xoffset",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],Qo.prototype,"yoffset",void 0),p([b({type:Number,cast:e=>e==="auto"?e:ot(e),json:{write:!0}})],Qo.prototype,"size",void 0),Qo=p([L("esri.symbols.MarkerSymbol")],Qo);const NL=Qo;var vy;const DL=tt.ofType({base:null,key:"type",typeMap:{fill:Q0}});let Fd=vy=class extends Pf{constructor(e){super(e),this.symbolLayers=new DL,this.type="mesh-3d"}clone(){return new vy({styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail)})}static fromSimpleFillSymbol(e){return new vy({symbolLayers:new tt([Q0.fromSimpleFillSymbol(e)])})}};p([b({type:DL})],Fd.prototype,"symbolLayers",void 0),p([pe({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Fd.prototype,"type",void 0),Fd=vy=p([L("esri.symbols.MeshSymbol3D")],Fd);const kb=Fd;function Lre(e,t,n){return t.imageData?GP({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):LL(t.url,n)}function LL(e,t){var n;return jre(t)&&!Nr(e)&&((n=t==null?void 0:t.layer)!=null&&n.parsedUrl)?P2(t.layer.parsedUrl.path,"images",e):Mf(e,t)}function Fre(e,t,n,r){if(wu(e)){const i=Qh(e);if(!i)return;t.contentType=i.mediaType,t.imageData=i.data,n&&n.imageData===t.imageData&&n.url&&Ha(n.url,t,"url",r)}else Ha(e,t,"url",r)}const FL={json:{read:{source:["imageData","url"],reader:Lre},write:{writer(e,t,n,r){Fre(e,t,this.source,r)}}}},jL={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,n){const r={};return t.imageData&&(r.imageData=t.imageData),t.contentType&&(r.contentType=t.contentType),t.url&&(r.url=LL(t.url,n)),r}}}};function jre(e){var t,n;return!(e==null||e.origin!=="service"&&e.origin!=="portal-item"||((t=e.layer)==null?void 0:t.type)!=="feature"&&((n=e.layer)==null?void 0:n.type)!=="stream")}var MS;let Jr=MS=class extends mL{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,n,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t&&(i.outline=t),n!=null&&(i.width=ot(n)),r!=null&&(i.height=ot(r)),i}clone(){const e=new MS({color:J(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",J(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};p([pe({esriPFS:"picture-fill"},{readOnly:!0})],Jr.prototype,"type",void 0),p([b(FL)],Jr.prototype,"url",void 0),p([b({type:Number,json:{write:!0}})],Jr.prototype,"xscale",void 0),p([b({type:Number,json:{write:!0}})],Jr.prototype,"yscale",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],Jr.prototype,"width",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],Jr.prototype,"height",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],Jr.prototype,"xoffset",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],Jr.prototype,"yoffset",void 0),p([b(jL)],Jr.prototype,"source",void 0),Jr=MS=p([L("esri.symbols.PictureFillSymbol")],Jr);const zL=Jr;var $S;let gi=$S=class extends NL{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,n){if(e&&typeof e!="string"&&e.imageData==null)return e;const r={};return e&&(r.url=e),t!=null&&(r.width=ot(t)),n!=null&&(r.height=ot(n)),r}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new $S({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",J(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};p([b({json:{write:!1}})],gi.prototype,"color",void 0),p([pe({esriPMS:"picture-marker"},{readOnly:!0})],gi.prototype,"type",void 0),p([b(FL)],gi.prototype,"url",void 0),p([b(jL)],gi.prototype,"source",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],gi.prototype,"height",void 0),p([ge("height",["height","size"])],gi.prototype,"readHeight",null),p([b({type:Number,cast:ot,json:{write:!0}})],gi.prototype,"width",void 0),p([b({json:{write:!1}})],gi.prototype,"size",void 0),gi=$S=p([L("esri.symbols.PictureMarkerSymbol")],gi);const Fc=gi;var Dl;const BL=tt.ofType({base:null,key:"type",typeMap:{icon:Tc,object:C$,text:Of}});let Ll=Dl=class extends Pf{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new BL,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return CL(this)}hasVisibleVerticalOffset(){return P$(this)}clone(){return new Dl({verticalOffset:J(this.verticalOffset),callout:J(this.callout),styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Dl({symbolLayers:new tt([Tc.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Dl({symbolLayers:new tt([Tc.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){var r,i;if(((i=(r=e.data)==null?void 0:r.symbol)==null?void 0:i.type)!=="CIMPointSymbol")return null;const n=e.data.symbol;return new Dl(n!=null&&n.callout?{symbolLayers:new tt([Tc.fromCIMSymbol(e)]),callout:new EL({size:.5,color:new fe([0,0,0])}),verticalOffset:new R$({screenLength:40})}:{symbolLayers:new tt([Tc.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Dl({symbolLayers:new tt([Of.fromTextSymbol(e)])})}};p([b({type:R$,json:{write:!0}})],Ll.prototype,"verticalOffset",void 0),p([b(OL)],Ll.prototype,"callout",void 0),p([b({type:BL,json:{origins:{"web-scene":{write:!0}}}})],Ll.prototype,"symbolLayers",void 0),p([pe({PointSymbol3D:"point-3d"},{readOnly:!0})],Ll.prototype,"type",void 0),Ll=Dl=p([L("esri.symbols.PointSymbol3D")],Ll);const Ac=Ll;var jd;const UL=tt.ofType({base:null,key:"type",typeMap:{extrude:dL,fill:Q0,icon:Tc,line:em,object:C$,text:Of,water:AL}});let zd=jd=class extends Pf{constructor(e){super(e),this.symbolLayers=new UL,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&o1(ie.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&o1(ie.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(F2(()=>this.symbolLayers,"after-add",({item:t})=>e(t),I6))}clone(){return new jd({styleOrigin:J(this.styleOrigin),symbolLayers:J(this.symbolLayers),thumbnail:J(this.thumbnail)})}static fromJSON(e){var n;const t=new jd;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),i=t.symbolLayers.at(1);!i.enabled||(n=e.symbolLayers)!=null&&n[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:i.size,color:i.material!=null?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new jd({symbolLayers:new tt([Q0.fromSimpleFillSymbol(e)])})}};p([b({type:UL,json:{write:!0}})],zd.prototype,"symbolLayers",void 0),p([pe({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],zd.prototype,"type",void 0),zd=jd=p([L("esri.symbols.PolygonSymbol3D")],zd);const tm=zd;var TS;const Vw=new Ne({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Fl=TS=class extends mL{constructor(...e){super(...e),this.color=new fe([0,0,0,.25]),this.outline=new Io,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,n){if(e&&typeof e!="string")return e;const r={};return e&&(r.style=e),t&&(r.outline=t),n&&(r.color=n),r}clone(){return new TS({color:J(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};p([b()],Fl.prototype,"color",void 0),p([b()],Fl.prototype,"outline",void 0),p([pe({esriSFS:"simple-fill"},{readOnly:!0})],Fl.prototype,"type",void 0),p([b({type:Vw.apiValues,json:{read:Vw.read,write:Vw.write}})],Fl.prototype,"style",void 0),Fl=TS=p([L("esri.symbols.SimpleFillSymbol")],Fl);const Eb=Fl,f_e=Object.freeze(Object.defineProperty({__proto__:null,default:Eb},Symbol.toStringTag,{value:"Module"}));var AS;const Gw=new Ne({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let is=AS=class extends NL{constructor(...e){super(...e),this.color=new fe([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Io}normalizeCtorArgs(e,t,n,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t!=null&&(i.size=ot(t)),n&&(i.outline=n),r&&(i.color=r),i}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new AS({angle:this.angle,color:J(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};p([b()],is.prototype,"color",void 0),p([xe("color")],is.prototype,"writeColor",null),p([pe({esriSMS:"simple-marker"},{readOnly:!0})],is.prototype,"type",void 0),p([b()],is.prototype,"size",void 0),p([b({type:Gw.apiValues,json:{read:Gw.read,write:Gw.write}})],is.prototype,"style",void 0),p([b({type:String,json:{write:!0}})],is.prototype,"path",null),p([b({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Io}},json:{default:null,write:!0}})],is.prototype,"outline",void 0),is=AS=p([L("esri.symbols.SimpleMarkerSymbol")],is);const Rf=is,d_e=Object.freeze(Object.defineProperty({__proto__:null,default:Rf},Symbol.toStringTag,{value:"Module"}));var IS;let yt=IS=class extends Mr{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Tb,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,n){if(e&&typeof e!="string")return e;const r={};return e&&(r.text=e),t&&(r.font=t),n&&(r.color=n),r}writeLineWidth(e,t,n,r){r&&typeof r!="string"?r.origin:t[n]=e}castLineWidth(e){return ot(e)}writeLineHeight(e,t,n,r){r&&typeof r!="string"?r.origin:t[n]=e}clone(){return new IS({angle:this.angle,backgroundColor:J(this.backgroundColor),borderLineColor:J(this.borderLineColor),borderLineSize:this.borderLineSize,color:J(this.color),font:this.font&&this.font.clone(),haloColor:J(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e,t,n;return`${(e=this.backgroundColor)==null?void 0:e.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${(n=this.haloColor)==null?void 0:n.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};p([b({type:fe,json:{write:!0}})],yt.prototype,"backgroundColor",void 0),p([b({type:fe,json:{write:!0}})],yt.prototype,"borderLineColor",void 0),p([b({type:Number,json:{write:!0},cast:ot})],yt.prototype,"borderLineSize",void 0),p([b({type:Tb,json:{write:!0}})],yt.prototype,"font",void 0),p([b({...SL,json:{write:!0}})],yt.prototype,"horizontalAlignment",void 0),p([b({type:Boolean,json:{write:!0}})],yt.prototype,"kerning",void 0),p([b({type:fe,json:{write:!0}})],yt.prototype,"haloColor",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],yt.prototype,"haloSize",void 0),p([b({type:Boolean,json:{write:!0}})],yt.prototype,"rightToLeft",void 0),p([b({type:Boolean,json:{write:!0}})],yt.prototype,"rotated",void 0),p([b({type:String,json:{write:!0}})],yt.prototype,"text",void 0),p([pe({esriTS:"text"},{readOnly:!0})],yt.prototype,"type",void 0),p([b({..._L,json:{write:!0}})],yt.prototype,"verticalAlignment",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],yt.prototype,"xoffset",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],yt.prototype,"yoffset",void 0),p([b({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],yt.prototype,"angle",void 0),p([b({type:Number,json:{write:!0}})],yt.prototype,"width",void 0),p([b({type:Number})],yt.prototype,"lineWidth",void 0),p([xe("lineWidth")],yt.prototype,"writeLineWidth",null),p([gt("lineWidth")],yt.prototype,"castLineWidth",null),p([b(xL)],yt.prototype,"lineHeight",void 0),p([xe("lineHeight")],yt.prototype,"writeLineHeight",null),yt=IS=p([L("esri.symbols.TextSymbol")],yt);const nm=yt;var kS;let yi=kS=class extends Mr{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:si.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t==null?void 0:t.portal,super.read(e,t)}clone(){return new kS({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const n=t!=null?t.cache:null,r=n?this._fetchCacheKey:null;if(n!=null){const a=r&&n.get(r);if(a)return a.clone()}const{resolveWebStyleSymbol:i}=await ne(()=>import("./webStyleSymbolUtils-4761c8f2.js"),["assets/webStyleSymbolUtils-4761c8f2.js","assets/devEnvironmentUtils-4eab2a99.js"]);Hn(t);const s=i(this,{portal:this.portal},e,t);s.catch(a=>{ie.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(n!=null&&n.set(r,o.clone()),o):null}};p([b({json:{write:!1}})],yi.prototype,"color",void 0),p([b({type:String,json:{write:!0}})],yi.prototype,"styleName",void 0),p([b({type:si,json:{write:!1}})],yi.prototype,"portal",void 0),p([b({type:String,json:{read:BM,write:Ha}})],yi.prototype,"styleUrl",void 0),p([b({type:Op,json:{read:!1}})],yi.prototype,"thumbnail",void 0),p([b({type:String,json:{write:!0}})],yi.prototype,"name",void 0),p([pe({styleSymbolReference:"web-style"},{readOnly:!0})],yi.prototype,"type",void 0),p([b()],yi.prototype,"_fetchCacheKey",null),yi=kS=p([L("esri.symbols.WebStyleSymbol")],yi);const $u=yi;function Cb(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function uu(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Gh={base:Mr,key:"type",typeMap:{"simple-fill":Eb,"picture-fill":zL,"picture-marker":Fc,"simple-line":Io,"simple-marker":Rf,text:nm,"label-3d":Ab,"line-3d":Ib,"mesh-3d":kb,"point-3d":Ac,"polygon-3d":tm,"web-style":$u,cim:Mb},errorContext:"symbol"},p_e={base:Mr,key:"type",typeMap:{"picture-marker":Fc,"simple-marker":Rf,text:nm,"web-style":$u,cim:Mb},errorContext:"symbol"},zre=rM({types:Gh}),Bre={base:Mr,key:"type",typeMap:{"simple-fill":Eb,"picture-fill":zL,"picture-marker":Fc,"simple-line":Io,"simple-marker":Rf,text:nm,"line-3d":Ib,"mesh-3d":kb,"point-3d":Ac,"polygon-3d":tm,"web-style":$u,cim:Mb},errorContext:"symbol"},m_e={base:Mr,key:"type",typeMap:{text:nm,"label-3d":Ab},errorContext:"symbol"},SI={base:Mr,key:"type",typeMap:{"line-3d":Ib,"mesh-3d":kb,"point-3d":Ac,"polygon-3d":tm,"web-style":$u,cim:Mb},errorContext:"symbol"},g_e={base:Mr,key:"type",typeMap:{"label-3d":Ab},errorContext:"symbol"},VL=Jc(Gh);var ES;function Ure(e){if(!e)return null;const t={};for(const n in e){const r=$f(e[n]);r&&(t[n]=r)}return Object.keys(t).length!==0?t:null}function Vre(e){if(e==null)return null;const t={};for(const n in e){const r=e[n];r&&(t[n]=r.toJSON())}return Object.keys(t).length!==0?t:null}let ar=ES=class extends _n(re){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Oc(),configurable:!0})}normalizeCtorArgs(e,t,n,r){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:n,popupTemplate:r}}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new ES({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&t.defaultPopupTemplate!=null)return t.defaultPopupTemplate}return null}getAttribute(e){var t;return(t=this.attributes)==null?void 0:t[e]}setAttribute(e,t){if(this.attributes){const n=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",n,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){var e;return{aggregateGeometries:Vre(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:d1(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:((e=this.popupTemplate)==null?void 0:e.toJSON())??null}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if((t==null?void 0:t.type)==="mesh"){const n={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",n,n,e.action)}}_notifyLayer(e,t,n,r){if(!this.layer||!("graphicChanged"in this.layer))return;const i={graphic:this,property:e,oldValue:t,newValue:n};e==="origin-transform"&&(i.action=r),e==="attributes"&&(i.attributeName=r),this.layer.graphicChanged(i)}};p([b({value:null,json:{read:Ure}})],ar.prototype,"aggregateGeometries",null),p([b({value:null})],ar.prototype,"attributes",null),p([b({value:null,types:q2,json:{read:$f}})],ar.prototype,"geometry",null),p([b({type:Boolean})],ar.prototype,"isAggregate",void 0),p([b({clonable:"reference"})],ar.prototype,"layer",void 0),p([b({type:$$})],ar.prototype,"popupTemplate",void 0),p([b({clonable:"reference"})],ar.prototype,"sourceLayer",void 0),p([b({value:null,types:Gh})],ar.prototype,"symbol",null),p([b({type:Boolean,value:!0})],ar.prototype,"visible",null),ar=ES=p([L("esri.Graphic")],ar),function(e){e.generateUID=Oc}(ar||(ar={}));const hu=ar;let xy=class extends tt{constructor(t){super(t),this.addHandles([this.on("before-add",n=>{n.item==null&&n.preventDefault()}),this.on("after-add",n=>this._own(n.item)),this.on("after-remove",n=>this._release(n.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(tt.ofType(this.itemType.Type))(t):new tt(t)}};function Gre(e,t){return{type:e,cast:TL,set(n){const r=$L(n,this._get(t),e);r.owner=this,this._set(t,r)}}}p([b()],xy.prototype,"owner",null),xy=p([L("esri.core.support.OwningCollection")],xy);async function Wre(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:n}=await ne(()=>import("./portalLayers-88006a68.js").then(r=>r.p),["assets/portalLayers-88006a68.js","assets/associatedFeatureServiceUtils-158b7391.js","assets/lazyLayerLoader-edff256b.js"]);try{return await n(t)}catch(r){const i=t&&t.portalItem,s=(i==null?void 0:i.id)||"unset",o=i&&i.portal&&i.portal.url||ze.portalUrl;throw ie.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}let Hre=0,Bt=class extends x6.EventedMixin(_$(L2)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Me(-180,-90,180,90,we.WGS84),this.id=Date.now().toString(16)+"-layer-"+Hre++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=we.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(t){const n=typeof t=="string"?{url:t}:t;return(await ne(()=>import("./arcgisLayers-64804d76.js"),["assets/arcgisLayers-64804d76.js","assets/associatedFeatureServiceUtils-158b7391.js","assets/fetchService-9c0aadd1.js","assets/lazyLayerLoader-edff256b.js"])).fromUrl(n)}static fromPortalItem(t){return Wre(t)}initialize(){this.when().catch(t=>{wr(t)||ie.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const n=this;"layers"in t&&t.layers.includes(n)?t.layers.remove(n):"tables"in t&&t.tables.includes(n)?t.tables.remove(n):"baseLayers"in t&&t.baseLayers.includes(n)?t.baseLayers.remove(n):"referenceLayers"in t&&t.referenceLayers.includes(n)&&t.referenceLayers.remove(n),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return _r(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await He(t,{query:{f:"json"},responseType:"json"})).data;throw new Y("layer:no-attribution-data","Layer does not have attribution data")}};p([b({type:String})],Bt.prototype,"attributionDataUrl",void 0),p([b({type:Me})],Bt.prototype,"fullExtent",void 0),p([b({readOnly:!0})],Bt.prototype,"hasAttributionData",null),p([b({type:String,clonable:!1})],Bt.prototype,"id",void 0),p([b({type:Boolean,nonNullable:!0})],Bt.prototype,"legendEnabled",void 0),p([b({type:["show","hide","hide-children"]})],Bt.prototype,"listMode",void 0),p([b({type:Number,range:{min:0,max:1},nonNullable:!0})],Bt.prototype,"opacity",void 0),p([b({clonable:!1})],Bt.prototype,"parent",void 0),p([b({readOnly:!0})],Bt.prototype,"parsedUrl",null),p([b({type:Boolean,readOnly:!0})],Bt.prototype,"persistenceEnabled",void 0),p([b({type:Boolean})],Bt.prototype,"popupEnabled",void 0),p([b({type:Boolean})],Bt.prototype,"attributionVisible",void 0),p([b({type:we})],Bt.prototype,"spatialReference",void 0),p([b({type:String})],Bt.prototype,"title",void 0),p([b({readOnly:!0,json:{read:!1}})],Bt.prototype,"type",void 0),p([b()],Bt.prototype,"url",void 0),p([b({type:Boolean,nonNullable:!0})],Bt.prototype,"visible",void 0),Bt=p([L("esri.layers.Layer")],Bt);const GL=Bt;function Ob(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function qre(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jre(e,t,n,r,i,s,o,a,l,c,u,h,f,d,g,y){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=n,w[3]=r,w[4]=i,w[5]=s,w[6]=o,w[7]=a,w[8]=l,w[9]=c,w[10]=u,w[11]=h,w[12]=f,w[13]=d,w[14]=g,w[15]=y,w}function Zre(e,t){return new Float32Array(e,t,16)}const Yre=Ob();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Yre,clone:qre,create:Ob,createView:Zre,fromValues:Jre},Symbol.toStringTag,{value:"Module"}));const Kre=(e,t)=>{const n=rl(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return So(n,n)},Xre=(e,t)=>{const n=rl(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return So(n,n)},Qre=(e,t)=>{const n=1-t,r=rl(e,.2126+.7874*n,.7152-.7152*n,.0722-.0722*n,0,.2126-.2126*n,.7152+.2848*n,.0722-.0722*n,0,.2126-.2126*n,.7152-.7152*n,.0722+.9278*n,0,0,0,0,1);return So(r,r)},eie=(e,t)=>{const n=Math.sin(t*Math.PI/180),r=Math.cos(t*Math.PI/180),i=rl(e,.213+.787*r-.213*n,.715-.715*r-.715*n,.072-.072*r+.928*n,0,.213-.213*r+.143*n,.715+.285*r+.14*n,.072-.072*r-.283*n,0,.213-.213*r-.787*n,.715-.715*r+.715*n,.072+.928*r+.072*n,0,0,0,0,1);return So(i,i)},tie=(e,t)=>{const n=1-2*t,r=rl(e,n,0,0,t,0,n,0,t,0,0,n,t,0,0,0,1);return So(r,r)},nie=(e,t)=>{const n=rl(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return So(n,n)},rie=(e,t)=>{const n=1-t,r=rl(e,.393+.607*n,.769-.769*n,.189-.189*n,0,.349-.349*n,.686+.314*n,.168-.168*n,0,.272-.272*n,.534-.534*n,.131+.869*n,0,0,0,0,1);return So(r,r)};let WL=class HL{constructor(t,n,r){this.strength=t,this.radius=n,this.threshold=r,this.type="bloom"}interpolate(t,n,r){this.strength=fr(t.strength,n.strength,r),this.radius=fr(t.radius,n.radius,r),this.threshold=fr(t.threshold,n.threshold,r)}clone(){return new HL(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Pp(this.radius),strength:this.strength,threshold:this.threshold}}},qL=class JL{constructor(t){this.radius=t,this.type="blur"}interpolate(t,n,r){this.radius=Math.round(fr(t.radius,n.radius,r))}clone(){return new JL(this.radius)}toJSON(){return{type:"blur",radius:Pp(this.radius)}}},CS=class ZL{constructor(t,n){this.type=t,this.amount=n,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,n,r){this.amount=fr(t.amount,n.amount,r),this._updateMatrix()}clone(){return new ZL(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||Ob();switch(this.type){case"brightness":this._colorMatrix=Kre(t,this.amount);break;case"contrast":this._colorMatrix=Xre(t,this.amount);break;case"grayscale":this._colorMatrix=Qre(t,this.amount);break;case"invert":this._colorMatrix=tie(t,this.amount);break;case"saturate":this._colorMatrix=nie(t,this.amount);break;case"sepia":this._colorMatrix=rie(t,this.amount)}}},YL=class KL{constructor(t,n,r,i){this.offsetX=t,this.offsetY=n,this.blurRadius=r,this.color=i,this.type="drop-shadow"}interpolate(t,n,r){this.offsetX=fr(t.offsetX,n.offsetX,r),this.offsetY=fr(t.offsetY,n.offsetY,r),this.blurRadius=fr(t.blurRadius,n.blurRadius,r),this.color[0]=Math.round(fr(t.color[0],n.color[0],r)),this.color[1]=Math.round(fr(t.color[1],n.color[1],r)),this.color[2]=Math.round(fr(t.color[2],n.color[2],r)),this.color[3]=fr(t.color[3],n.color[3],r)}clone(){return new KL(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Pp(this.offsetX),yoffset:Pp(this.offsetY),blurRadius:Pp(this.blurRadius),color:t}}},XL=class QL{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,n,r){this.angle=fr(t.angle,n.angle,r),this._updateMatrix()}clone(){return new QL(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||Ob();this._colorMatrix=eie(t,this.angle)}},e9=class t9{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,n,r){this.amount=fr(t.amount,n.amount,r)}clone(){return new t9(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function fr(e,t,n){return e+(t-e)*n}function Pp(e){return Math.round(1e3*bo(e))/1e3}function iie(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new CS(e.type,0);case"saturate":case"brightness":case"contrast":return new CS(e.type,1);case"opacity":return new e9(1);case"hue-rotate":return new XL(0);case"blur":return new qL(0);case"drop-shadow":return new YL(0,0,0,[...zM("transparent")]);case"bloom":return new WL(0,0,1)}}function sie(e,t){const n=e.length>t.length?e:t;return(e.length>t.length?t:e).every((r,i)=>r.type===n[i].type)}function oie(e,t){const n=e.length>t.length?e:t,r=e.length>t.length?t:e;for(let i=r.length;i<n.length;i++)r.push(iie(n[i]))}function aie(e){const t=e[0];return!!t&&"type"in t}function w_e(e,t){return JSON.stringify(e??null)===JSON.stringify(t??null)}var _I,MI,OS={exports:{}};OS.exports,MI=function(){function e(i,s){function o(){this.constructor=i}o.prototype=s.prototype,i.prototype=new o}function t(i,s,o,a){var l=Error.call(this,i);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function n(i,s,o){return o=o||" ",i.length>s?i:(s-=i.length,i+(o+=o.repeat(s)).slice(0,s))}function r(i,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,c={start:W4},u=W4,h="none",f=")",d=",",g="(",y="%",w="px",v="cm",x="mm",S="in",_="pt",M="pc",$="deg",T="rad",A="grad",I="turn",E="#",O=".",P="e",j=/^[ \t\n\r]/,V=/^[a-z\-]/,U=/^[0-9a-fA-F]/,q=/^[+\-]/,C=/^[0-9]/,R=Cs("none"),N=an("none",!1),D=an(")",!1),z=an(",",!1),G=Cs("whitespace"),W=Lf([" ","	",`
`,"\r"],!1,!1),K=Cs("function"),oe=an("(",!1),Se=Cs("identifier"),Ee=Lf([["a","z"],"-"],!1,!1),Ze=Cs("percentage"),ye=an("%",!1),de=Cs("length"),$e=an("px",!1),ai=an("cm",!1),lt=an("mm",!1),ul=an("in",!1),Is=an("pt",!1),nr=an("pc",!1),ks=Cs("angle"),Eu=an("deg",!1),Cu=an("rad",!1),li=an("grad",!1),Ou=an("turn",!1),Es=Cs("number"),he=Cs("color"),Ce=an("#",!1),Ye=Lf([["0","9"],["a","f"],["A","F"]],!1,!1),Ft=Lf(["+","-"],!1,!1),St=Lf([["0","9"]],!1,!1),$r=an(".",!1),Kt=an("e",!1),Tn=function(){return[]},ow=function(F,Q){return{type:"function",name:F,parameters:Q||[]}},Ej=function(F,Q){return Q.length>0?cz(F,Q,3):[F]},Cj=function(F){return{type:"quantity",value:F.value,unit:F.unit}},Oj=function(F){return{type:"color",colorType:F.type,value:F.value}},Pj=function(F){return F},Rj=function(){return hm()},Nj=function(F){return{value:F,unit:"%"}},Dj=function(F){return{value:F,unit:"px"}},Lj=function(F){return{value:F,unit:"cm"}},Fj=function(F){return{value:F,unit:"mm"}},jj=function(F){return{value:F,unit:"in"}},zj=function(F){return{value:F,unit:"pt"}},Bj=function(F){return{value:F,unit:"pc"}},Uj=function(F){return{value:F,unit:"deg"}},Vj=function(F){return{value:F,unit:"rad"}},Gj=function(F){return{value:F,unit:"grad"}},Wj=function(F){return{value:F,unit:"turn"}},Hj=function(F){return{value:F,unit:null}},qj=function(){return{type:"hex",value:hm()}},Jj=function(F){return{type:"function",value:F}},Zj=function(){return{type:"named",value:hm()}},Yj=function(){return parseFloat(hm())},Z=0,_t=0,um=[{line:1,column:1}],Bi=0,aw=[],me=0;if("startRule"in s){if(!(s.startRule in c))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');u=c[s.startRule]}function hm(){return i.substring(_t,Z)}function an(F,Q){return{type:"literal",text:F,ignoreCase:Q}}function Lf(F,Q,te){return{type:"class",parts:F,inverted:Q,ignoreCase:te}}function Kj(){return{type:"end"}}function Cs(F){return{type:"other",description:F}}function V4(F){var Q,te=um[F];if(te)return te;for(Q=F-1;!um[Q];)Q--;for(te={line:(te=um[Q]).line,column:te.column};Q<F;)i.charCodeAt(Q)===10?(te.line++,te.column=1):te.column++,Q++;return um[F]=te,te}function G4(F,Q,te){var Pe=V4(F),jt=V4(Q),it={source:l,start:{offset:F,line:Pe.line,column:Pe.column},end:{offset:Q,line:jt.line,column:jt.column}};return te&&l&&typeof l.offset=="function"&&(it.start=l.offset(it.start),it.end=l.offset(it.end)),it}function Ie(F){Z<Bi||(Z>Bi&&(Bi=Z,aw=[]),aw.push(F))}function Xj(F,Q,te){return new t(t.buildMessage(F,Q),F,Q,te)}function W4(){var F;return(F=Qj())===a&&(F=ez()),F}function Qj(){var F,Q;return me++,F=Z,ln(),i.substr(Z,4)===h?(Q=h,Z+=4):(Q=a,me===0&&Ie(N)),Q!==a?(ln(),_t=F,F=Tn()):(Z=F,F=a),me--,F===a&&me===0&&Ie(R),F}function ez(){var F,Q;if(F=[],(Q=lw())!==a)for(;Q!==a;)F.push(Q),Q=lw();else F=a;return F}function lw(){var F,Q,te,Pe;return F=Z,ln(),(Q=nz())!==a?(ln(),(te=tz())===a&&(te=null),ln(),i.charCodeAt(Z)===41?(Pe=f,Z++):(Pe=a,me===0&&Ie(D)),Pe!==a?(ln(),_t=F,F=ow(Q,te)):(Z=F,F=a)):(Z=F,F=a),F}function tz(){var F,Q,te,Pe,jt,it,zr,fm;if(F=Z,(Q=cw())!==a){for(te=[],Pe=Z,jt=ln(),i.charCodeAt(Z)===44?(it=d,Z++):(it=a,me===0&&Ie(z)),it===a&&(it=null),zr=ln(),(fm=cw())!==a?Pe=jt=[jt,it,zr,fm]:(Z=Pe,Pe=a);Pe!==a;)te.push(Pe),Pe=Z,jt=ln(),i.charCodeAt(Z)===44?(it=d,Z++):(it=a,me===0&&Ie(z)),it===a&&(it=null),zr=ln(),(fm=cw())!==a?Pe=jt=[jt,it,zr,fm]:(Z=Pe,Pe=a);_t=F,F=Ej(Q,te)}else Z=F,F=a;return F}function cw(){var F,Q;return F=Z,(Q=rz())===a&&(Q=iz())===a&&(Q=sz())===a&&(Q=oz()),Q!==a&&(_t=F,Q=Cj(Q)),(F=Q)===a&&(F=Z,(Q=az())!==a&&(_t=F,Q=Oj(Q)),F=Q),F}function ln(){var F,Q;for(me++,F=[],j.test(i.charAt(Z))?(Q=i.charAt(Z),Z++):(Q=a,me===0&&Ie(W));Q!==a;)F.push(Q),j.test(i.charAt(Z))?(Q=i.charAt(Z),Z++):(Q=a,me===0&&Ie(W));return me--,Q=a,me===0&&Ie(G),F}function nz(){var F,Q,te;return me++,F=Z,(Q=H4())!==a?(i.charCodeAt(Z)===40?(te=g,Z++):(te=a,me===0&&Ie(oe)),te!==a?(_t=F,F=Pj(Q)):(Z=F,F=a)):(Z=F,F=a),me--,F===a&&(Q=a,me===0&&Ie(K)),F}function H4(){var F,Q,te;if(me++,F=Z,Q=[],V.test(i.charAt(Z))?(te=i.charAt(Z),Z++):(te=a,me===0&&Ie(Ee)),te!==a)for(;te!==a;)Q.push(te),V.test(i.charAt(Z))?(te=i.charAt(Z),Z++):(te=a,me===0&&Ie(Ee));else Q=a;return Q!==a&&(_t=F,Q=Rj()),me--,(F=Q)===a&&(Q=a,me===0&&Ie(Se)),F}function rz(){var F,Q,te;return me++,F=Z,ln(),(Q=jr())!==a?(i.charCodeAt(Z)===37?(te=y,Z++):(te=a,me===0&&Ie(ye)),te!==a?(_t=F,F=Nj(Q)):(Z=F,F=a)):(Z=F,F=a),me--,F===a&&me===0&&Ie(Ze),F}function iz(){var F,Q,te;return me++,F=Z,ln(),(Q=jr())!==a?(i.substr(Z,2)===w?(te=w,Z+=2):(te=a,me===0&&Ie($e)),te!==a?(_t=F,F=Dj(Q)):(Z=F,F=a)):(Z=F,F=a),F===a&&(F=Z,ln(),(Q=jr())!==a?(i.substr(Z,2)===v?(te=v,Z+=2):(te=a,me===0&&Ie(ai)),te!==a?(_t=F,F=Lj(Q)):(Z=F,F=a)):(Z=F,F=a),F===a&&(F=Z,ln(),(Q=jr())!==a?(i.substr(Z,2)===x?(te=x,Z+=2):(te=a,me===0&&Ie(lt)),te!==a?(_t=F,F=Fj(Q)):(Z=F,F=a)):(Z=F,F=a),F===a&&(F=Z,ln(),(Q=jr())!==a?(i.substr(Z,2)===S?(te=S,Z+=2):(te=a,me===0&&Ie(ul)),te!==a?(_t=F,F=jj(Q)):(Z=F,F=a)):(Z=F,F=a),F===a&&(F=Z,ln(),(Q=jr())!==a?(i.substr(Z,2)===_?(te=_,Z+=2):(te=a,me===0&&Ie(Is)),te!==a?(_t=F,F=zj(Q)):(Z=F,F=a)):(Z=F,F=a),F===a&&(F=Z,ln(),(Q=jr())!==a?(i.substr(Z,2)===M?(te=M,Z+=2):(te=a,me===0&&Ie(nr)),te!==a?(_t=F,F=Bj(Q)):(Z=F,F=a)):(Z=F,F=a)))))),me--,F===a&&me===0&&Ie(de),F}function sz(){var F,Q,te;return me++,F=Z,(Q=jr())!==a?(i.substr(Z,3)===$?(te=$,Z+=3):(te=a,me===0&&Ie(Eu)),te!==a?(_t=F,F=Uj(Q)):(Z=F,F=a)):(Z=F,F=a),F===a&&(F=Z,(Q=jr())!==a?(i.substr(Z,3)===T?(te=T,Z+=3):(te=a,me===0&&Ie(Cu)),te!==a?(_t=F,F=Vj(Q)):(Z=F,F=a)):(Z=F,F=a),F===a&&(F=Z,(Q=jr())!==a?(i.substr(Z,4)===A?(te=A,Z+=4):(te=a,me===0&&Ie(li)),te!==a?(_t=F,F=Gj(Q)):(Z=F,F=a)):(Z=F,F=a),F===a&&(F=Z,(Q=jr())!==a?(i.substr(Z,4)===I?(te=I,Z+=4):(te=a,me===0&&Ie(Ou)),te!==a?(_t=F,F=Wj(Q)):(Z=F,F=a)):(Z=F,F=a)))),me--,F===a&&(Q=a,me===0&&Ie(ks)),F}function oz(){var F,Q;return me++,F=Z,ln(),(Q=jr())!==a?(_t=F,F=Hj(Q)):(Z=F,F=a),me--,F===a&&me===0&&Ie(Es),F}function az(){var F,Q,te,Pe;if(me++,F=Z,i.charCodeAt(Z)===35?(Q=E,Z++):(Q=a,me===0&&Ie(Ce)),Q!==a){if(te=[],U.test(i.charAt(Z))?(Pe=i.charAt(Z),Z++):(Pe=a,me===0&&Ie(Ye)),Pe!==a)for(;Pe!==a;)te.push(Pe),U.test(i.charAt(Z))?(Pe=i.charAt(Z),Z++):(Pe=a,me===0&&Ie(Ye));else te=a;te!==a?(_t=F,F=qj()):(Z=F,F=a)}else Z=F,F=a;return F===a&&(F=Z,(Q=lw())!==a&&(_t=F,Q=Jj(Q)),(F=Q)===a&&(F=Z,(Q=H4())!==a&&(_t=F,Q=Zj()),F=Q)),me--,F===a&&(Q=a,me===0&&Ie(he)),F}function jr(){var F,Q,te,Pe,jt,it,zr;for(F=Z,q.test(i.charAt(Z))?(i.charAt(Z),Z++):me===0&&Ie(Ft),Q=Z,te=[],C.test(i.charAt(Z))?(Pe=i.charAt(Z),Z++):(Pe=a,me===0&&Ie(St));Pe!==a;)te.push(Pe),C.test(i.charAt(Z))?(Pe=i.charAt(Z),Z++):(Pe=a,me===0&&Ie(St));if(i.charCodeAt(Z)===46?(Pe=O,Z++):(Pe=a,me===0&&Ie($r)),Pe!==a){if(jt=[],C.test(i.charAt(Z))?(it=i.charAt(Z),Z++):(it=a,me===0&&Ie(St)),it!==a)for(;it!==a;)jt.push(it),C.test(i.charAt(Z))?(it=i.charAt(Z),Z++):(it=a,me===0&&Ie(St));else jt=a;jt!==a?Q=te=[te,Pe,jt]:(Z=Q,Q=a)}else Z=Q,Q=a;if(Q===a)if(Q=[],C.test(i.charAt(Z))?(te=i.charAt(Z),Z++):(te=a,me===0&&Ie(St)),te!==a)for(;te!==a;)Q.push(te),C.test(i.charAt(Z))?(te=i.charAt(Z),Z++):(te=a,me===0&&Ie(St));else Q=a;if(Q!==a){if(te=Z,i.charCodeAt(Z)===101?(Pe=P,Z++):(Pe=a,me===0&&Ie(Kt)),Pe!==a){if(q.test(i.charAt(Z))?(jt=i.charAt(Z),Z++):(jt=a,me===0&&Ie(Ft)),jt===a&&(jt=null),it=[],C.test(i.charAt(Z))?(zr=i.charAt(Z),Z++):(zr=a,me===0&&Ie(St)),zr!==a)for(;zr!==a;)it.push(zr),C.test(i.charAt(Z))?(zr=i.charAt(Z),Z++):(zr=a,me===0&&Ie(St));else it=a;it!==a?te=Pe=[Pe,jt,it]:(Z=te,te=a)}else Z=te,te=a;te===a&&(te=null),_t=F,F=Yj()}else Z=F,F=a;return F}function lz(F,Q){return F.map(function(te){return te[Q]})}function cz(F,Q,te){return[F].concat(lz(Q,te))}if((o=u())!==a&&Z===i.length)return o;throw o!==a&&Z<i.length&&Ie(Kj()),Xj(aw,Bi<i.length?i.charAt(Bi):null,Bi<i.length?G4(Bi,Bi+1):G4(Bi,Bi))}return e(t,Error),t.prototype.format=function(i){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<i.length;o++)if(i[o].source===this.location.source){a=i[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,u=this.location.source+":"+c.line+":"+c.column;if(a){var h=this.location.end,f=n("",c.line.toString().length," "),d=a[l.line-1],g=(l.line===h.line?h.column:d.length+1)-l.column||1;s+=`
 --> `+u+`
`+f+` |
`+c.line+" | "+d+`
`+f+" | "+n("",l.column-1," ")+n("",g,"^")}else s+=`
 at `+u}return s},t.buildMessage=function(i,s){var o={literal:function(d){return'"'+l(d.text)+'"'},class:function(d){var g=d.parts.map(function(y){return Array.isArray(y)?c(y[0])+"-"+c(y[1]):c(y)});return"["+(d.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(d){return d.description}};function a(d){return d.charCodeAt(0).toString(16).toUpperCase()}function l(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function u(d){return o[d.type](d)}function h(d){var g,y,w=d.map(u);if(w.sort(),w.length>0){for(g=1,y=1;g<w.length;g++)w[g-1]!==w[g]&&(w[y]=w[g],y++);w.length=y}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}function f(d){return d?'"'+l(d)+'"':"end of input"}return"Expected "+h(i)+" but "+f(s)+" found."},{SyntaxError:t,parse:r}},(_I=OS).exports&&(_I.exports=MI());var lie=OS.exports;function n9(e){if(!e||e.length===0)return null;if(typeof e=="string"){const n=$I(e);return n&&n.length!==0?n:null}const t=e.map(n=>{if(!Number.isFinite(n.scale)||n.scale<=0)throw new Y("effect:invalid-scale","scale must be finite and greater than 0",{stop:n});return{scale:n.scale,effects:$I(n.value)}});t.sort((n,r)=>r.effects.length-n.effects.length);for(let n=0;n<t.length-1;n++){if(!sie(t[n].effects,t[n+1].effects))throw new Y("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[n].effects,b:t[n+1].effects});oie(t[n].effects,t[n+1].effects)}return t.sort((n,r)=>r.scale-n.scale),t}function $I(e){let t;if(!e)return[];try{t=lie.parse(e)}catch(n){throw new Y("effect:invalid-syntax","Invalid effect syntax",{value:e,error:n})}return t.map(n=>cie(n))}function cie(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return uie(e);case"opacity":return hie(e);case"hue-rotate":return fie(e);case"blur":return die(e);case"drop-shadow":return pie(e);case"bloom":return mie(e)}}catch(t){throw t.details.filter=e,t}throw new Y("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function uie(e){let t=1;return Nf(e.parameters,1),e.parameters.length===1&&(t=$i(e.parameters[0])),new CS(e.name,t)}function hie(e){let t=1;return Nf(e.parameters,1),e.parameters.length===1&&(t=$i(e.parameters[0])),new e9(t)}function fie(e){let t=0;return Nf(e.parameters,1),e.parameters.length===1&&(t=xie(e.parameters[0])),new XL(t)}function die(e){let t=0;return Nf(e.parameters,1),e.parameters.length===1&&(t=L$(e.parameters[0]),rm(t,e.parameters[0])),new qL(t)}function pie(e){const t=[];let n=null;for(const r of e.parameters)if(r.type==="color"){if(t.length&&Object.freeze(t),n)throw new Y("effect:type-error","Accepts only one color",{});n=Sie(r)}else{const i=L$(r);if(Object.isFrozen(t))throw new Y("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(i),t.length===3&&rm(i,r)}if(t.length<2||t.length>3)throw new Y("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new YL(t[0],t[1],t[2]||0,n||r9("black"))}function mie(e){let t=1,n=0,r=0;return Nf(e.parameters,3),e.parameters[0]&&(t=$i(e.parameters[0])),e.parameters[1]&&(n=L$(e.parameters[1]),rm(n,e.parameters[1])),e.parameters[2]&&(r=$i(e.parameters[2])),new WL(t,n,r)}function Nf(e,t){if(e.length>t)throw new Y("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function Pb(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in D$)return"<length>";if(e.unit in N$)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function rm(e,t){if(e<0)throw new Y("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function gie(e){if(e.type!=="quantity"||e.unit!==null)throw new Y("effect:type-error",`Expected <double>, Actual: ${Pb(e)}`,{term:e})}function yie(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new Y("effect:type-error",`Expected <double> or <percentage>, Actual: ${Pb(e)}`,{term:e})}const N$={deg:1,grad:.9,rad:180/Math.PI,turn:360};function bie(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&N$[e.unit]!=null))throw new Y("effect:type-error",`Expected <angle>, Actual: ${Pb(e)}`,{term:e})}const D$={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function wie(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&D$[e.unit]!=null))throw new Y("effect:type-error",`Expected <length>, Actual: ${Pb(e)}`,{term:e})}function $i(e){yie(e);const t=e.value;return rm(t,e),e.unit==="%"?.01*t:t}function vie(e){return gie(e),rm(e.value,e),e.value}function xie(e){return bie(e),e.value*N$[e.unit]||0}function L$(e){return wie(e),e.value*D$[e.unit]||0}function Sie(e){switch(e.colorType){case"hex":return ZH(e.value);case"named":return r9(e.value);case"function":return $ie(e.value)}}function r9(e){if(!OR(e))throw new Y("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return JH(e)}const _ie=/^rgba?/i,Mie=/^hsla?/i;function $ie(e){if(Nf(e.parameters,4),_ie.test(e.name))return[$i(e.parameters[0]),$i(e.parameters[1]),$i(e.parameters[2]),e.parameters[3]?$i(e.parameters[3]):1];if(Mie.test(e.name))return PR(vie(e.parameters[0]),$i(e.parameters[1]),$i(e.parameters[2]),e.parameters[3]?$i(e.parameters[3]):1);throw new Y("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function Tie(e,t,n){var r;try{return kie(e)}catch(i){(r=n==null?void 0:n.messages)==null||r.push(i)}return null}function Aie(e,t,n,r){try{const i=Iie(e);bu(n,i,t)}catch(i){r.messages&&r.messages.push(i)}}function Iie(e){const t=n9(e);return t?aie(t)?t.map(n=>n.toJSON()):t.map(({scale:n,effects:r})=>({scale:n,value:r.map(i=>i.toJSON())})):null}function kie(e){if(!e||e.length===0)return null;if(Eie(e)){const t=[];for(const n of e)t.push({scale:n.scale,value:PS(n.value)});return t}return PS(e)}function Eie(e){const t=e[0];return!!t&&"scale"in t}function PS(e){if(!(e!=null&&e.length))return"";const t=[];for(const n of e){let r=[];switch(n.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":r=[Ps(n,"amount")];break;case"blur":r=[Ps(n,"radius","pt")];break;case"hue-rotate":r=[Ps(n,"angle","deg")];break;case"drop-shadow":r=[Ps(n,"xoffset","pt"),Ps(n,"yoffset","pt"),Ps(n,"blurRadius","pt"),Cie(n,"color")];break;case"bloom":r=[Ps(n,"strength"),Ps(n,"radius","pt"),Ps(n,"threshold")]}const i=`${n.type}(${r.filter(Boolean).join(" ")})`;n9(i),t.push(i)}return t.join(" ")}function Ps(e,t,n){if(e[t]==null)throw new Y("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return n?e[t]+n:""+e[t]}function Cie(e,t){if(e[t]==null)throw new Y("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const n=e[t];return`rgba(${n[0]||0}, ${n[1]||0}, ${n[2]||0}, ${n[3]/255||0})`}const TI={read:{reader:Tie},write:{allowNull:!0,writer:Aie}},i9=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return p([b({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),p([b({json:{read:!1,write:!1,origins:{"web-map":TI,"portal-item":TI}}})],t.prototype,"effect",void 0),t=p([L("esri.layers.mixins.BlendLayer")],t),t},s9=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const n={minScale:this.minScale,maxScale:this.maxScale},r=this.parent;r&&"effectiveScaleRange"in r&&Oie(n,r.effectiveScaleRange);const i=this._get("effectiveScaleRange");return i&&i.minScale===n.minScale&&i.maxScale===n.maxScale?i:n}};return p([b({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),p([b({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),p([b({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=p([L("esri.layers.mixins.ScaleRangeLayer")],t),t};function Oie(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}let Rp=class extends xy{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};p([S6({Type:hu,ensureType:vr(hu)})],Rp.prototype,"itemType",void 0),Rp=p([L("esri.support.GraphicsCollection")],Rp);var RS;let Bd=RS=class extends re{constructor(e){super(e)}async collectRequiredFields(e,t){return Fi(e,t,this.expression)}clone(){return new RS({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};p([b({type:String,json:{write:!0}})],Bd.prototype,"expression",void 0),p([b({type:String,json:{write:!0}})],Bd.prototype,"title",void 0),Bd=RS=p([L("esri.layers.support.FeatureExpressionInfo")],Bd);const AI=Bd,Rb={unknown:1,inches:rn(1,"meters","inches"),feet:rn(1,"meters","feet"),"us-feet":rn(1,"meters","us-feet"),yards:rn(1,"meters","yards"),miles:rn(1,"meters","miles"),"nautical-miles":rn(1,"meters","nautical-miles"),millimeters:rn(1,"meters","millimeters"),centimeters:rn(1,"meters","centimeters"),decimeters:rn(1,"meters","decimeters"),meters:rn(1,"meters","meters"),kilometers:rn(1,"meters","kilometers"),"decimal-degrees":1/JV(1,"meters",ft.radius)};function x_e(e){return!!e&&Rb[e]!=null}function S_e(e){return 1/(Rb[e]||1)}function Pie(){const e=Object.keys(Rb);return e.sort(),e}const Rie=Pie();var NS;const Xm=yn()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),II=new Ne({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Bs=NS=class extends re{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,n,r){t[n]=e.write({},r),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new NS({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&Dz(this.featureExpressionInfo,e.featureExpressionInfo)}};p([b({type:AI,json:{write:!0}})],Bs.prototype,"featureExpressionInfo",void 0),p([ge("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Bs.prototype,"readFeatureExpressionInfo",null),p([xe("featureExpressionInfo",{featureExpressionInfo:{type:AI},"featureExpression.value":{type:[0]}})],Bs.prototype,"writeFeatureExpressionInfo",null),p([b({type:Xm.apiValues,nonNullable:!0,json:{type:Xm.jsonValues,read:Xm.read,write:{writer:Xm.write,isRequired:!0}}})],Bs.prototype,"mode",null),p([b({type:Number,json:{write:!0}})],Bs.prototype,"offset",void 0),p([b({type:Rie,json:{type:String,read:II.read,write:II.write}})],Bs.prototype,"unit",null),Bs=NS=p([L("esri.layers.support.ElevationInfo")],Bs);const o9=Bs;let Us=class extends i9(s9(GL)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new Rp,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,n){return super.on(t,n)}graphicChanged(t){this.emit("graphic-update",t)}};p([b({type:o9})],Us.prototype,"elevationInfo",void 0),p([b(Gre(Rp,"graphics"))],Us.prototype,"graphics",void 0),p([b({type:["show","hide"]})],Us.prototype,"listMode",void 0),p([b()],Us.prototype,"screenSizePerspectiveEnabled",void 0),p([b({readOnly:!0})],Us.prototype,"type",void 0),p([b({constructOnly:!0})],Us.prototype,"internal",void 0),Us=p([L("esri.layers.GraphicsLayer")],Us);const a9=Us,M_e=Object.freeze(Object.defineProperty({__proto__:null,default:a9},Symbol.toStringTag,{value:"Module"}));let Nie=class l9{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(Uv),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const n=new l9,r=this._originStores[Re.DEFAULTS];r&&r.forEach((i,s)=>{n.set(s,J(i),Re.DEFAULTS)});for(let i=Re.SERVICE;i<Uv;i++){const s=this._originStores[i];s&&s.forEach((o,a)=>{t&&t.has(a)||n.set(a,J(o),i)})}return n}get(t,n){const r=n===void 0?this._values:this._originStores[n];return r?r.get(t):void 0}keys(t){const n=t==null?this._values:this._originStores[t];return n?[...n.keys()]:[]}set(t,n,r=Re.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,n),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}return!1}delete(t,n=Re.USER){const r=this._originStores[n];if(!r)return;const i=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===n){this._values.delete(t);for(let s=n-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return i}has(t,n){const r=n===void 0?this._values:this._originStores[n];return!!r&&r.has(t)}revert(t,n){for(;n>0&&!this.has(t,n);)--n;const r=this._originStores[n],i=r==null?void 0:r.get(t),s=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,n),s!==i}originOf(t){return this._propertyOriginMap.get(t)||Re.DEFAULTS}forEach(t){this._values.forEach(t)}};const c9=e=>{let t=class extends e{constructor(...n){super(...n);const r=xr(this),i=r.store,s=new Nie;r.store=s,PP(r,i,s)}read(n,r){NP(this,n,r)}getAtOrigin(n,r){const i=Ww(this),s=va(r);if(typeof n=="string")return i.get(n,s);const o={};return n.forEach(a=>{o[a]=i.get(a,s)}),o}originOf(n){return a1(this.originIdOf(n))}originIdOf(n){return Ww(this).originOf(n)}revert(n,r){const i=Ww(this),s=va(r),o=xr(this);let a;a=typeof n=="string"?n==="*"?i.keys(s):[n]:n,a.forEach(l=>{o.invalidate(l),i.revert(l,s),o.commit(l)})}};return t=p([L("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function Ww(e){return xr(e).store}let kI=class extends c9(Yt){};kI=p([L("esri.core.ReadOnlyMultiOriginJSONSupport")],kI);const Die=e=>{let t=class extends e{constructor(...n){super(...n)}clear(n,r="user"){return Hw(this).delete(n,va(r))}write(n,r){return LP(this,n=n||{},r),n}setAtOrigin(n,r,i){xr(this).setAtOrigin(n,r,va(i))}removeOrigin(n){const r=Hw(this),i=va(n),s=r.keys(i);for(const o of s)r.originOf(o)===i&&r.set(o,r.get(o,i),Re.USER)}updateOrigin(n,r){const i=Hw(this),s=va(r),o=Ba(this,n);for(let a=s+1;a<Uv;++a)i.delete(n,a);i.set(n,o,s)}toJSON(n){return this.write({},n)}};return t=p([L("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Hw(e){return xr(e).store}const u9=e=>{let t=class extends Die(c9(e)){constructor(...n){super(...n)}};return t=p([L("esri.core.MultiOriginJSONSupport")],t),t};let EI=class extends u9(Yt){};EI=p([L("esri.core.MultiOriginJSONSupport")],EI);const h9={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},f9=Object.values(h9),d9=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${f9.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Lie=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${f9.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Fie=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function A_e(e){return!!d9.test(e)}function F$(e){if(e==null)return null;const t=_r(e),n=(t==null?void 0:t.path.match(d9))||(t==null?void 0:t.path.match(Lie));if(!n)return null;const[,r,i,s,o]=n,a=i.indexOf("/");return{title:p9(a!==-1?i.slice(a+1):i),serverType:h9[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function jie(e){const t=_r(e).path.match(Fie);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function p9(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function I_e(e,t){const n=[];if(e){const r=F$(e);r!=null&&r.title&&n.push(r.title)}if(t){const r=p9(t);n.push(r)}if(n.length===2){if(n[0].toLowerCase().includes(n[1].toLowerCase()))return n[0];if(n[1].toLowerCase().includes(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function k_e(e){if(!e)return!1;const t=".arcgis.com/",n="//services",r="//tiles",i="//features",s=(e=e.toLowerCase()).includes(t),o=e.includes(n)||e.includes(r)||e.includes(i);return s&&o}function j$(e,t){return e&&HP(qP(e,t))}function E_e(e){let{url:t}=e;if(!t)return{url:t};t=qP(t,e.logger);const n=_r(t),r=F$(n.path);let i;if(r!=null)r.sublayer!=null&&e.layer.layerId==null&&(i=r.sublayer),t=r.url.path;else if(e.nonStandardUrlAllowed){const s=jie(n.path);s!=null&&(t=s.serviceUrl,i=s.sublayerId)}return{url:HP(t),layerId:i}}function C_e(e,t,n,r,i){Ha(t,r,"url",i),r.url&&e.layerId!=null&&(r.url=P2(r.url,n,e.layerId.toString()))}function O_e(e){if(!e)return!1;const t=e.toLowerCase(),n=t.includes("/services/"),r=t.includes("/mapserver/wmsserver"),i=t.includes("/imageserver/wmsserver"),s=t.includes("/wmsserver");return n&&(r||i||s)}function P_e(e){var r;if(!e)return!1;const t=new Pc(Xr(e)),n=(r=t.authority)==null?void 0:r.toLowerCase();return n==="server.arcgisonline.com"||n==="services.arcgisonline.com"}const zie=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const n=F$(this.url);if(n!=null&&n.title)return n.title}return this._get("title")||""}set title(n){this._set("title",n)}set url(n){this._set("url",j$(n,ie.getLogger(this)))}};return p([b()],t.prototype,"title",null),p([b({type:String})],t.prototype,"url",null),t=p([L("esri.layers.mixins.ArcGISService")],t),t},Bie=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return p([b({type:Object,json:{write:{overridePolicy:n=>({enabled:!!(n&&Object.keys(n).length>0)})}}})],t.prototype,"customParameters",void 0),t=p([L("esri.layers.mixins.CustomParametersMixin")],t),t};var DS;let Ud=DS=class extends re{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new DS({minValue:this.minValue,maxValue:this.maxValue})}};p([b({type:Number,json:{write:!0}})],Ud.prototype,"minValue",void 0),p([b({type:Number,json:{write:!0}})],Ud.prototype,"maxValue",void 0),Ud=DS=p([L("esri.renderer.support.AuthoringInfoClassBreakInfo")],Ud);var LS;let ma=LS=class extends re{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new LS({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:J(this.classBreakInfos)})}};p([b({type:String,json:{write:!0}})],ma.prototype,"field",void 0),p([b({type:String,json:{write:!0}})],ma.prototype,"normalizationField",void 0),p([b({type:String,json:{write:!0}})],ma.prototype,"label",void 0),p([b({type:[Ud],json:{write:!0}})],ma.prototype,"classBreakInfos",void 0),ma=LS=p([L("esri.renderers.support.AuthoringInfoFieldInfo")],ma);var FS;const Qm=new Ne({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),eg=new Ne({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),CI={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},OI=["high-to-low","above-and-below","centered-on","extremes"],PI=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],RI=["seconds","minutes","hours","days","months","years"];let lr=FS=class extends re{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new FS({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};p([b({types:CI,json:{write:!0}})],lr.prototype,"endTime",void 0),p([gt("endTime")],lr.prototype,"castEndTime",null),p([b({type:String,json:{write:!0}})],lr.prototype,"field",void 0),p([b({type:Number,json:{write:!0}})],lr.prototype,"maxSliderValue",void 0),p([b({type:Number,json:{write:!0}})],lr.prototype,"minSliderValue",void 0),p([b({types:CI,json:{write:!0}})],lr.prototype,"startTime",void 0),p([gt("startTime")],lr.prototype,"castStartTime",null),p([b({type:Qm.apiValues,value:null,json:{type:Qm.jsonValues,read:Qm.read,write:Qm.write}})],lr.prototype,"style",null),p([b({type:PI,value:null,json:{type:PI,origins:{"web-scene":{type:OI,write:{writer:(e,t)=>{OI.includes(e)&&(t.theme=e)}}}},write:!0}})],lr.prototype,"theme",null),p([b({type:eg.apiValues,json:{type:eg.jsonValues,read:eg.read,write:eg.write}})],lr.prototype,"type",void 0),p([b({type:RI,json:{type:RI,write:!0}})],lr.prototype,"units",void 0),lr=FS=p([L("esri.renderers.support.AuthoringInfoVisualVariable")],lr);const Uie=lr;let Sy=class extends re{constructor(t){super(t),this.type=null}};p([b({readOnly:!0,json:{read:!1,write:!0}})],Sy.prototype,"type",void 0),Sy=p([L("esri.rest.support.ColorRamp")],Sy);const z$=Sy;var jS;let jl=jS=class extends z${constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new jS({fromColor:J(this.fromColor),toColor:J(this.toColor),algorithm:this.algorithm})}};p([pe({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],jl.prototype,"algorithm",void 0),p([b({type:fe,json:{type:[Be],write:!0}})],jl.prototype,"fromColor",void 0),p([b({type:fe,json:{type:[Be],write:!0}})],jl.prototype,"toColor",void 0),p([b({type:["algorithmic"]})],jl.prototype,"type",void 0),jl=jS=p([L("esri.rest.support.AlgorithmicColorRamp")],jl);const B$=jl;var zS;let Vd=zS=class extends z${constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new zS({colorRamps:J(this.colorRamps)})}};p([b({type:[B$],json:{write:!0}})],Vd.prototype,"colorRamps",void 0),p([b({type:["multipart"]})],Vd.prototype,"type",void 0),Vd=zS=p([L("esri.rest.support.MultipartColorRamp")],Vd);const Nb=Vd,Db={key:"type",base:z$,typeMap:{algorithmic:B$,multipart:Nb}};function Lb(e){return e!=null&&e.type?e.type==="algorithmic"?B$.fromJSON(e):e.type==="multipart"?Nb.fromJSON(e):null:null}var BS;const ml=new Ne({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),tg=new Ne({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),NI=new Ne({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),DI=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Vie=["high-to-low","above-and-below","above","below","90-10"],Gie=["flow-line","wave-front"],Wie=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Tt=BS=class extends re{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?Lb(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){var e;return new BS({classificationMethod:this.classificationMethod,colorRamp:J(this.colorRamp),fadeRatio:J(this.fadeRatio),fields:(e=this.fields)==null?void 0:e.slice(0),field1:J(this.field1),field2:J(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};p([b({type:ml.apiValues,value:null,json:{type:ml.jsonValues,read:ml.read,write:ml.write,origins:{"web-document":{default:"manual",type:ml.jsonValues,read:ml.read,write:ml.write}}}})],Tt.prototype,"classificationMethod",null),p([b({types:Db,json:{write:!0}})],Tt.prototype,"colorRamp",void 0),p([ge("colorRamp")],Tt.prototype,"readColorRamp",null),p([b({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Tt.prototype,"fadeRatio",void 0),p([b({type:[String],value:null,json:{write:!0}})],Tt.prototype,"fields",null),p([b({type:ma,value:null,json:{write:!0}})],Tt.prototype,"field1",null),p([b({type:ma,value:null,json:{write:!0}})],Tt.prototype,"field2",null),p([b({type:Gie,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Tt.prototype,"flowTheme",null),p([b({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Tt.prototype,"focus",null),p([b({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Tt.prototype,"isAutoGenerated",void 0),p([b({type:Number,value:null,json:{type:Be,write:!0}})],Tt.prototype,"numClasses",null),p([b({type:DI,json:{type:DI,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Tt.prototype,"lengthUnit",void 0),p([b({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Tt.prototype,"maxSliderValue",void 0),p([b({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Tt.prototype,"minSliderValue",void 0),p([b({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Tt.prototype,"statistics",null),p([b({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Tt.prototype,"standardDeviationInterval",null),p([b({type:tg.apiValues,value:null,json:{type:tg.jsonValues,read:tg.read,write:tg.write,origins:{"web-scene":{type:NI.jsonValues,write:{writer:NI.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Tt.prototype,"type",null),p([b({type:[Uie],json:{write:!0}})],Tt.prototype,"visualVariables",void 0),p([b({type:Wie,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Tt.prototype,"univariateSymbolStyle",null),p([b({type:Vie,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Tt.prototype,"univariateTheme",null),Tt=BS=p([L("esri.renderers.support.AuthoringInfo")],Tt);const U$=Tt,qw=new Ne({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Gd=class extends re{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const n=new Set;return await this.collectRequiredFields(n,t),Array.from(n).sort()}getSymbol(t,n){}async getSymbolAsync(t,n){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};p([b({type:U$,json:{write:!0}})],Gd.prototype,"authoringInfo",void 0),p([b({type:qw.apiValues,readOnly:!0,json:{type:qw.jsonValues,read:!1,write:{writer:qw.write,ignoreOrigin:!0}}})],Gd.prototype,"type",void 0),Gd=p([L("esri.renderers.Renderer")],Gd);const m9=Gd;function Hie(e){var t,n;return((n=(t=e.match(qie))==null?void 0:t[1])==null?void 0:n.replace(/\\'/g,"'"))??null}const qie=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var US;let jc=US=class extends re{constructor(){super(...arguments),this.title=null}clone(){return new US({title:this.title})}};p([b({type:String,json:{write:!0}})],jc.prototype,"title",void 0),jc=US=p([L("esri.renderers.support.LegendOptions")],jc);var VS;let _y=VS=class extends jc{constructor(){super(...arguments),this.showLegend=null}clone(){return new VS({title:this.title,showLegend:this.showLegend})}};p([b({type:Boolean,json:{write:!0}})],_y.prototype,"showLegend",void 0),_y=VS=p([L("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],_y);const g9=_y,Jw=new Ne({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let bi=class extends re{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(ie.getLogger(this).error(".field: field must be a string value"),null):A2(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};p([b()],bi.prototype,"index",void 0),p([b({type:Jw.apiValues,readOnly:!0,json:{read:Jw.read,write:Jw.write}})],bi.prototype,"type",void 0),p([b({type:String,json:{write:!0}})],bi.prototype,"field",void 0),p([gt("field")],bi.prototype,"castField",null),p([b({type:String,json:{write:!0}})],bi.prototype,"valueExpression",void 0),p([b({type:String,json:{write:!0}})],bi.prototype,"valueExpressionTitle",void 0),p([b({readOnly:!0})],bi.prototype,"arcadeRequired",null),p([b({type:g9,json:{write:!0}})],bi.prototype,"legendOptions",void 0),bi=p([L("esri.renderers.visualVariables.VisualVariable")],bi);const im=bi;var GS;let zl=GS=class extends re{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,n){t[n]=e??0}clone(){return new GS({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};p([b({type:fe,json:{type:[Be],write:!0}})],zl.prototype,"color",void 0),p([b({type:String,json:{write:!0}})],zl.prototype,"label",void 0),p([b({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],zl.prototype,"value",void 0),p([xe("value")],zl.prototype,"writeValue",null),zl=GS=p([L("esri.renderers.visualVariables.support.ColorStop")],zl);const Jie=zl;var WS;let Bl=WS=class extends im{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,n)=>t.value-n.value),this._set("stops",e)}clone(){var e;return new WS({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};p([b({readOnly:!0})],Bl.prototype,"cache",null),p([b({type:["color"],json:{type:["colorInfo"]}})],Bl.prototype,"type",void 0),p([b({type:String,json:{write:!0}})],Bl.prototype,"normalizationField",void 0),p([b({type:[Jie],json:{write:!0}})],Bl.prototype,"stops",null),Bl=WS=p([L("esri.renderers.visualVariables.ColorVariable")],Bl);const y9=Bl;var HS;let ea=HS=class extends re{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return Y1(t.transparency)}writeOpacity(e,t,n){t[n]=hL(e)}clone(){return new HS({label:this.label,opacity:this.opacity,value:this.value})}};p([b({type:String,json:{write:!0}})],ea.prototype,"label",void 0),p([b({type:Number,json:{type:Be,write:{target:"transparency"}}})],ea.prototype,"opacity",void 0),p([ge("opacity",["transparency"])],ea.prototype,"readOpacity",null),p([xe("opacity")],ea.prototype,"writeOpacity",null),p([b({type:Number,json:{write:!0}})],ea.prototype,"value",void 0),ea=HS=p([L("esri.renderers.visualVariables.support.OpacityStop")],ea);const Zie=ea;var qS;let Ul=qS=class extends im{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,n)=>t.value-n.value),this._set("stops",e)}clone(){var e;return new qS({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};p([b({readOnly:!0})],Ul.prototype,"cache",null),p([b({type:["opacity"],json:{type:["transparencyInfo"]}})],Ul.prototype,"type",void 0),p([b({type:String,json:{write:!0}})],Ul.prototype,"normalizationField",void 0),p([b({type:[Zie],json:{write:!0}})],Ul.prototype,"stops",null),Ul=qS=p([L("esri.renderers.visualVariables.OpacityVariable")],Ul);const b9=Ul;var JS;let Vs=JS=class extends im{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,n,r){if(r!=null&&r.messages){const i=`visualVariables[${this.index}]`;r.messages.push(new Y("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:i+".valueExpressionTitle",context:r}))}}clone(){var e;return new JS({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:(e=this.legendOptions)==null?void 0:e.clone()})}};p([b({readOnly:!0})],Vs.prototype,"cache",null),p([b({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Vs.prototype,"axis",void 0),p([b({type:["rotation"],json:{type:["rotationInfo"]}})],Vs.prototype,"type",void 0),p([b({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Vs.prototype,"rotationType",void 0),p([b({type:String,json:{write:!0}})],Vs.prototype,"valueExpressionTitle",void 0),p([xe("web-scene","valueExpressionTitle")],Vs.prototype,"writeValueExpressionTitleWebScene",null),Vs=JS=p([L("esri.renderers.visualVariables.RotationVariable")],Vs);const Fb=Vs;var ZS;let nh=ZS=class extends re{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new ZS({label:this.label,size:this.size,value:this.value})}};p([b({type:String,json:{write:!0}})],nh.prototype,"label",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],nh.prototype,"size",void 0),p([b({type:Number,json:{write:!0}})],nh.prototype,"value",void 0),nh=ZS=p([L("esri.renderers.visualVariables.support.SizeStop")],nh);const Yie=nh;var YS;let My=YS=class extends g9{constructor(){super(...arguments),this.customValues=null}clone(){var e;return new YS({title:this.title,showLegend:this.showLegend,customValues:(e=this.customValues)==null?void 0:e.slice(0)})}};p([b({type:[Number],json:{write:!0}})],My.prototype,"customValues",void 0),My=YS=p([L("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],My);const Kie=My;var ho,sn;function kh(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function p0(e){return e!=null&&!isNaN(e)&&isFinite(e)}function w9(e){return e.valueExpression?ho.Expression:e.field&&typeof e.field=="string"?ho.Field:ho.Unknown}function Xie(e,t){const n=t||w9(e),r=e.valueUnit||"unknown";return n===ho.Unknown?sn.Constant:e.stops?sn.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?sn.ClampedLinear:r==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?sn.Proportional:sn.Additive:sn.Identity:sn.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(ho||(ho={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(sn||(sn={}));function L_e(e){}function F_e(e){return()=>e}const Ya=ie.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),LI=new hu,$y=Math.PI,v9=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function x9(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void Ya.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const i=typeof t=="number",s=i?null:t,o=s==null?void 0:s.attributes;let a=i?t:null;const l=r.field,{ipData:c,hasExpression:u}=r.cache;let h=r.cache.compiledFunc;if(!l&&!u){const g=r.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(u){if((n==null?void 0:n.arcade)==null)return void Ya.error("Use of arcade expressions requires an arcade context");const g={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},y=n.arcade.arcadeUtils,w=y.getViewInfo(g),v=y.createExecContext(s,w,n.timeZone);if(!h){const x=y.createSyntaxTree(r.valueExpression);h=y.createFunction(x),r.cache.compiledFunc=h}a=y.executeFunction(h,v)}else o&&(a=o[l]);const f=r.normalizationField,d=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||i||!isNaN(d)&&d!==0)){isNaN(d)||i||(a/=d);const g=G$(a,c);if(g){const y=g[0],w=g[1],v=y===w?r.stops[y].color:fe.blendColors(r.stops[y].color,r.stops[w].color,g[2],n!=null?n.color:void 0);return new fe(v)}}}function S9(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void Ya.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const i=typeof t=="number",s=i?null:t,o=s==null?void 0:s.attributes;let a=i?t:null;const l=r.field,{ipData:c,hasExpression:u}=r.cache;let h=r.cache.compiledFunc;if(!l&&!u){const g=r.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(u){if((n==null?void 0:n.arcade)==null)return void Ya.error("Use of arcade expressions requires an arcade context");const g={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},y=n.arcade.arcadeUtils,w=y.getViewInfo(g),v=y.createExecContext(s,w,n.timeZone);if(!h){const x=y.createSyntaxTree(r.valueExpression);h=y.createFunction(x),r.cache.compiledFunc=h}a=y.executeFunction(h,v)}else o&&(a=o[l]);const f=r.normalizationField,d=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||i||!isNaN(d)&&d!==0)){isNaN(d)||i||(a/=d);const g=G$(a,c);if(g){const y=g[0],w=g[1];if(y===w)return r.stops[y].opacity;{const v=r.stops[y].opacity;return v+(r.stops[w].opacity-v)*g[2]}}}}function V$(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(d=>d.type==="rotation"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void Ya.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const i=r.axis||"heading",s=i==="heading"&&r.rotationType==="arithmetic"?90:0,o=i==="heading"&&r.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a==null?void 0:a.attributes,c=r.field,{hasExpression:u}=r.cache;let h=r.cache.compiledFunc,f=0;if(!c&&!u)return f;if(u){if((n==null?void 0:n.arcade)==null)return void Ya.error("Use of arcade expressions requires an arcade context");const d={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},g=n.arcade.arcadeUtils,y=g.getViewInfo(d),w=g.createExecContext(a,y,n.timeZone);if(!h){const v=g.createSyntaxTree(r.valueExpression);h=g.createFunction(v),r.cache.compiledFunc=h}f=g.executeFunction(h,w)}else l&&(f=l[c]||0);return f=typeof f!="number"||isNaN(f)?null:s+o*f,f}function Qie(e,t,n){const r=typeof t=="number",i=r?null:t,s=i==null?void 0:i.attributes;let o=r?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const u=n!=null?n.scale:void 0,h=n!=null?n.view:void 0;o=u==null||h==="3d"?ese(e):u}else if(!r)switch(e.inputValueType){case ho.Expression:{if((n==null?void 0:n.arcade)==null)return void Ya.error("Use of arcade expressions requires an arcade context");const u={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},h=n.arcade.arcadeUtils,f=h.getViewInfo(u),d=h.createExecContext(i,f,n.timeZone);if(!l){const g=h.createSyntaxTree(e.valueExpression);l=h.createFunction(g),e.cache.compiledFunc=l}o=h.executeFunction(l,d);break}case ho.Field:s&&(o=s[e.field]);break;case ho.Unknown:o=null}if(!p0(o))return null;if(r||!e.normalizationField)return o;const c=s?parseFloat(s[e.normalizationField]):null;return p0(c)&&c!==0?o/c:null}function ese(e){let t=null,n=null;const r=e.stops;return r?(t=r[0].value,n=r[r.length-1].value):(t=e.minDataValue||0,n=e.maxDataValue||0),(t+n)/2}function jb(e,t,n){const r="visualVariables"in e&&e.visualVariables?e.visualVariables.find(s=>s.type==="size"):e;if(!r)return;if(r.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void Ya.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const i=M9(Qie(r,t,n),r,t,n,r.cache.ipData);return i==null||isNaN(i)?0:i}function br(e,t,n){return e==null?null:kh(e)?jb(e,t,n):p0(e)?e:null}function _9(e,t,n){return p0(n)&&e>n?n:p0(t)&&e<t?t:e}function tse(e,t,n,r){return e+((br(t.minSize,n,r)||t.minDataValue)??0)}function nse(e,t,n){const r=e.stops;let i=(r==null?void 0:r.length)&&r[0].size;return i==null&&(i=e.minSize),br(i,t,n)}function rse(e,t,n,r){const i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=br(t.minSize,n,r),o=br(t.maxSize,n,r),a=r!=null?r.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(s==null||o==null)return null;if(t.scaleBy==="area"&&a){const l=a==="circle",c=l?$y*(s/2)**2:s*s,u=c+i*((l?$y*(o/2)**2:o*o)-c);return l?2*Math.sqrt(u/$y):Math.sqrt(u)}return s+i*(o-s)}function ise(e,t,n,r){const i=r!=null?r.shape:void 0,s=e/t.minDataValue,o=br(t.minSize,n,r),a=br(t.maxSize,n,r);let l=null;return l=i==="circle"?2*Math.sqrt(s*(o/2)**2):i==="square"||i==="diamond"||i==="image"?Math.sqrt(s*o**2):s*o,_9(l,o,a)}function sse(e,t,n,r,i){var l,c,u;const[s,o,a]=G$(e,i);if(s===o)return br((l=t.stops)==null?void 0:l[s].size,n,r);{const h=br((c=t.stops)==null?void 0:c[s].size,n,r);return h+(br((u=t.stops)==null?void 0:u[o].size,n,r)-h)*a}}function ose(e,t,n,r){const i=((r==null?void 0:r.resolution)??1)*Rb[t.valueUnit],s=br(t.minSize,n,r),o=br(t.maxSize,n,r),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/$y)/i:a==="radius"||a==="distance"?2*e/i:e/i,_9(l,s,o)}function M9(e,t,n,r,i){switch(t.transformationType){case sn.Additive:return tse(e,t,n,r);case sn.Constant:return nse(t,n,r);case sn.ClampedLinear:return rse(e,t,n,r);case sn.Proportional:return ise(e,t,n,r);case sn.Stops:return sse(e,t,n,r,i);case sn.RealWorldSize:return ose(e,t,n,r);case sn.Identity:return e;case sn.Unknown:return null}}function ase(e,t,n){const{isScaleDriven:r}=e.cache;if(!(r&&n==="3d"||t))return null;const i={scale:t,view:n};let s=br(e.minSize,LI,i),o=br(e.maxSize,LI,i);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function lse(e,t,n){if(!e.visualVariables)return;const r=[],i=[],s=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":i.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return i.forEach(l=>{const c=x9(l,t,n);r.push({variable:l,value:c})}),s.forEach(l=>{const c=S9(l,t,n);r.push({variable:l,value:c})}),a.forEach(l=>{const c=V$(l,t,n);r.push({variable:l,value:c})}),o.forEach(l=>{const c=jb(l,t,n);r.push({variable:l,value:c})}),r.filter(l=>l.value!=null)}function G$(e,t){if(!t)return;let n=0,r=t.length-1;return t.some((i,s)=>e<i?(r=s,!0):(n=s,!1)),[n,r,(e-t[n])/(t[r]-t[n])]}function $9(e,t,n){const r=["proportional","proportional","proportional"];for(const i of e){const s=i.useSymbolValue?"symbol-value":jb(i,t,n);switch(i.axis){case"width":r[0]=s;break;case"depth":r[1]=s;break;case"height":r[2]=s;break;case"width-and-depth":r[0]=s,r[1]=s;break;case"all":case void 0:case null:r[0]=s,r[1]=s,r[2]=s;break;default:i.axis}}return r}const j_e=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:$9,getColor:x9,getOpacity:S9,getRotationAngle:V$,getSize:jb,getSizeForValue:M9,getSizeFromNumberOrVariable:br,getSizeRangeAtScale:ase,getVisualVariableValues:lse,viewScaleRE:v9},Symbol.toStringTag,{value:"Module"}));var KS;const ng=new Ne({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),XS=new Ne({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function FI(e){if(e!=null)return typeof e=="string"||typeof e=="number"?ot(e):e.type==="size"?kh(e)?e:(delete(e={...e}).type,new Ve(e)):void 0}function jI(e,t,n){if(typeof e!="object")return e;const r=new Ve;return r.read(e,n),r}let Ve=KS=class extends im{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&v9.test(this.valueExpression)}}set expression(e){ie.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){kh(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),kh(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return w9(this)}set maxDataValue(e){e&&this.stops&&(ie.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(ie.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return FI(e)}readMaxSize(e,t,n){return jI(e,t,n)}set minDataValue(e){e&&this.stops&&(ie.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(ie.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return FI(e)}readMinSize(e,t,n){return jI(e,t,n)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,n)=>t.value-n.value):e&&(ie.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Xie(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,n,r){if(e==="$view.scale"){if(r!=null&&r.messages){const i=this.index,s=typeof i=="string"?i:`visualVariables[${i}]`;r.messages.push(new Y("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:r}))}}else t[n]=e}readValueUnit(e){return e?XS.read(e):null}clone(){var e,t;return new KS({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:kh(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:kh(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:(e=this.stops)==null?void 0:e.map(n=>n.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:(t=this.legendOptions)==null?void 0:t.clone()})}flipSizes(){if(this.transformationType===sn.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===sn.Stops){const e=this.stops;if(!e)return this;const t=e.map(r=>r.size).reverse(),n=e.length;for(let r=0;r<n;r++)e[r].size=t[r];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){var e;return(e=this.stops)==null?void 0:e.map(t=>t.value||0)}};p([b({readOnly:!0})],Ve.prototype,"cache",null),p([b({type:ng.apiValues,json:{type:ng.jsonValues,origins:{"web-map":{read:!1}},read:ng.read,write:ng.write}})],Ve.prototype,"axis",void 0),p([b({type:String,value:null,json:{read:!1}})],Ve.prototype,"expression",null),p([b()],Ve.prototype,"index",null),p([b({type:String,readOnly:!0})],Ve.prototype,"inputValueType",null),p([b({type:Kie,json:{write:!0}})],Ve.prototype,"legendOptions",void 0),p([b({type:Number,value:null,json:{write:!0}})],Ve.prototype,"maxDataValue",null),p([b({type:Number,value:null,json:{write:!0}})],Ve.prototype,"maxSize",null),p([gt("maxSize")],Ve.prototype,"castMaxSize",null),p([ge("maxSize")],Ve.prototype,"readMaxSize",null),p([b({type:Number,value:null,json:{write:!0}})],Ve.prototype,"minDataValue",null),p([b({type:Number,value:null,json:{write:!0}})],Ve.prototype,"minSize",null),p([gt("minSize")],Ve.prototype,"castMinSize",null),p([ge("minSize")],Ve.prototype,"readMinSize",null),p([b({type:String,json:{write:!0}})],Ve.prototype,"normalizationField",void 0),p([b({readOnly:!0})],Ve.prototype,"arcadeRequired",null),p([b({type:String})],Ve.prototype,"scaleBy",void 0),p([b({type:[Yie],value:null,json:{write:!0}})],Ve.prototype,"stops",null),p([b({type:["outline"],json:{write:!0}})],Ve.prototype,"target",void 0),p([b({type:String,readOnly:!0})],Ve.prototype,"transformationType",null),p([b({type:["size"],json:{type:["sizeInfo"]}})],Ve.prototype,"type",void 0),p([b({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Ve.prototype,"useSymbolValue",void 0),p([b({type:String,json:{write:!0}})],Ve.prototype,"valueExpression",void 0),p([ge("valueExpression",["valueExpression","expression"])],Ve.prototype,"readValueExpression",null),p([xe("web-scene","valueExpression")],Ve.prototype,"writeValueExpressionWebScene",null),p([b({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Ve.prototype,"valueRepresentation",void 0),p([b({type:XS.apiValues,json:{write:XS.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],Ve.prototype,"valueUnit",void 0),p([ge("valueUnit")],Ve.prototype,"readValueUnit",null),Ve=KS=p([L("esri.renderers.visualVariables.SizeVariable")],Ve);const zb=Ve,cse={color:y9,size:zb,opacity:b9,rotation:Fb},use=new Ne({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),hse=/^\[([^\]]+)\]$/i;let Ty=class extends Yt{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t&&t.filter(n=>!!n),t==null?void 0:t.length){for(const n of t)switch(n.type){case"color":this.colorVariables.push(n);break;case"opacity":this.opacityVariables.push(n);break;case"rotation":this.rotationVariables.push(n);break;case"size":this.sizeVariables.push(n)}this.sizeVariables.length&&this.sizeVariables.some(n=>!!n.target)&&t.sort((n,r)=>{let i=null;return i=n.target===r.target?0:n.target?1:-1,i});for(let n=0;n<t.length;n++)t[n].index=n;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,n,r){const{rotationExpression:i,rotationType:s}=n,o=i==null?void 0:i.match(hse),a=o==null?void 0:o[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:s,field:a})),t)return t.map(l=>{const c=use.read(l.type),u=cse[c];u||(ie.getLogger(this).warn(`Unknown variable type: ${c}`),r!=null&&r.messages&&r.messages.push(new Zc("visual-variable:unsupported",`visualVariable of type '${c}' is not supported`,{definition:l,context:r})));const h=new u;return h.read(l,r),h})}writeVariables(t,n){const r=[];for(const i of t){const s=i.toJSON(n);s&&r.push(s)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};p([b()],Ty.prototype,"visualVariables",null),Ty=p([L("esri.renderers.visualVariables.VisualVariableFactory")],Ty);const fse=Ty,dse={base:im,key:"type",typeMap:{opacity:b9,color:y9,rotation:Fb,size:zb}},Bb=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new fse}set visualVariables(n){this._vvFactory.visualVariables=n,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(n,r,i){return this._vvFactory.readVariables(n,r,i)}writeVisualVariables(n,r,i,s){r[i]=this._vvFactory.writeVariables(n,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const n of this.visualVariables)if(n.arcadeRequired)return!0;return!1}hasVisualVariables(n,r){return n?this.getVisualVariablesForType(n,r).length>0:this.getVisualVariablesForType("size",r).length>0||this.getVisualVariablesForType("color",r).length>0||this.getVisualVariablesForType("opacity",r).length>0||this.getVisualVariablesForType("rotation",r).length>0}getVisualVariablesForType(n,r){const i=this.visualVariables;return i?i.filter(s=>s.type===n&&(typeof r=="string"?s.target===r:r!==!1||!s.target)):[]}async collectVVRequiredFields(n,r){let i=[];this.visualVariables&&(i=i.concat(this.visualVariables));for(const s of i)s&&(s.field&&ni(n,r,s.field),s.normalizationField&&ni(n,r,s.normalizationField),s.valueExpression&&(pse(s.valueExpression,n,r)||await Fi(n,r,s.valueExpression)))}};return p([b({types:[dse],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),p([ge("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),p([xe("visualVariables")],t.prototype,"writeVisualVariables",null),t=p([L("esri.renderers.mixins.VisualVariablesMixin")],t),t};function pse(e,t,n){const r=Hie(e);return r!=null&&(ni(t,n,r),!0)}function B_e(e){return gse(e)||mse(e)}function U_e(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="feature"}function V_e(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="graphics"}function G_e(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="map-notes"&&"sublayers"in e}function W_e(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="knowledge-graph"&&"layers"in e}function mse(e){return(e==null?void 0:e.type)==="scene"}function H_e(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function gse(e){const t=e==null?void 0:e.type;return t==="imagery-tile"||t==="tile"||t==="open-street-map"||t==="vector-tile"||t==="web-tile"||t==="wmts"}function q_e(e){const t=e==null?void 0:e.type;return t==="base-tile"||t==="tile"||t==="elevation"||t==="imagery-tile"||t==="base-elevation"||t==="open-street-map"||t==="wcs"||t==="web-tile"||t==="wmts"||t==="vector-tile"}function J_e(e){return e!=null&&"type"in e&&e.type==="group"}const Z_e={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function yse(e){const t=e==null?void 0:e.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function Y_e(e){return(e==null?void 0:e.type)==="voxel"}function K_e(e){return(e==null?void 0:e.type)==="imagery-tile"}function X_e(e){return(e==null?void 0:e.parent)!=null&&"declaredClass"in e.parent&&e.parent.declaredClass==="esri.Basemap"&&e.parent.baseLayers.includes(e)}function Q_e(e){var t;return(e==null?void 0:e.type)==="feature"&&!e.url&&((t=e.source)==null?void 0:t.type)==="memory"}function e5e(e){var t;return((e==null?void 0:e.type)==="feature"||(e==null?void 0:e.type)==="subtype-group")&&((t=e.source)==null?void 0:t.type)==="feature-layer"}function t5e(e){if(e.activeLayer){const t=e.activeLayer.tileMatrixSet;if(t)return t;const n=e.activeLayer.tileMatrixSets;if(n)return n}return null}async function bse(e,t){const n=Le==null?void 0:Le.findServerInfo(e);if((n==null?void 0:n.currentVersion)!=null)return n.owningSystemUrl||null;const r=e.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const i=`${e.substring(0,r)}/rest/info`,s=t!=null?t.signal:null,{data:o}=await He(i,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function wse(e){if(!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function n5e(e){return e!=null&&typeof e=="object"&&"isTable"in e&&!!e.isTable}function r5e(e){return wse(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function vse(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function i5e(e){return!!vse(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const td={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function xse(e,t=td){var a,l;if(!e)return{symbol:null};const{retainId:n=td.retainId,ignoreDrivers:r=td.ignoreDrivers,hasLabelingContext:i=td.hasLabelingContext,retainCIM:s=td.retainCIM}=t;let o=null;if(uu(e)||e instanceof $u)o=e.clone();else if(e.type==="cim"){const c=(l=(a=e.data)==null?void 0:a.symbol)==null?void 0:l.type;if(c!=="CIMPointSymbol")return{error:new Y("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:e})};o=s?e.clone():Ac.fromCIMSymbol(e)}else if(e instanceof Io)o=Ib.fromSimpleLineSymbol(e);else if(e instanceof Rf)o=Ac.fromSimpleMarkerSymbol(e);else if(e instanceof Fc)o=Ac.fromPictureMarkerSymbol(e);else if(e instanceof Eb)o=t.geometryType&&t.geometryType==="mesh"?kb.fromSimpleFillSymbol(e):tm.fromSimpleFillSymbol(e);else{if(!(e instanceof nm))return{error:new Y("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=i?Ab.fromTextSymbol(e):Ac.fromTextSymbol(e)}return n&&o&&o.type!=="cim"&&(o.id=e.id),r&&uu(o)&&o.symbolLayers.forEach(c=>c.ignoreDrivers=!0),{symbol:o}}function K1(e,t,n,r){const i=T9(e,{},{context:r,isLabelSymbol:!1});i!=null&&(t[n]=i)}function s5e(e,t,n,r){const i=T9(e,{},{context:r,isLabelSymbol:!0});i!=null&&(t[n]=i)}function zI(e){return e instanceof Pf||e instanceof $u}function T9(e,t,n){if(e==null)return null;const{context:r,isLabelSymbol:i}=n,s=r==null?void 0:r.origin,o=r==null?void 0:r.messages;if(s==="web-scene"&&!zI(e)){const a=xse(e,{retainCIM:!0,hasLabelingContext:i});return a.symbol!=null?a.symbol.write(t,r):(o==null||o.push(new Y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:a.error})),null)}return(s==="web-map"||s==="portal-item"&&!yse(r==null?void 0:r.layer))&&zI(e)?(o==null||o.push(new Y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(t,r)}function o5e(e,t){return zre(e,null,t)}const Ub={types:Bre,json:{write:{writer:K1},origins:{"web-scene":{types:SI,write:{writer:K1},read:{reader:rM({types:SI})}}}}},A9=K5({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},Ub),I9={types:{base:Mr,key:"type",typeMap:{"simple-fill":Gh.typeMap["simple-fill"],"picture-fill":Gh.typeMap["picture-fill"],"polygon-3d":Gh.typeMap["polygon-3d"]}},json:{write:{writer:K1},origins:{"web-scene":{type:tm,write:{writer:K1}}}}},Ay={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e==null?void 0:e.toString()}}}};var QS;let ta=QS=class extends re{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new QS({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};p([b({type:String,json:{write:!0}})],ta.prototype,"description",void 0),p([b({type:String,json:{write:!0}})],ta.prototype,"label",void 0),p([b({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],ta.prototype,"minValue",void 0),p([b({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],ta.prototype,"maxValue",void 0),p([b(A9)],ta.prototype,"symbol",void 0),ta=QS=p([L("esri.renderers.support.ClassBreakInfo")],ta);const gf=ta;var e_;const k9="log",Iy="percent-of-total",ky="field",rg=new Ne({esriNormalizeByLog:k9,esriNormalizeByPercentOfTotal:Iy,esriNormalizeByField:ky}),Sse=vr(gf);let Ut=e_=class extends Bb(m9){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,n){if(!Array.isArray(e))return;let r=t.minValue;return e.map(i=>{const s=new gf;return s.read(i,n),s.minValue==null&&(s.minValue=r),s.maxValue==null&&(s.maxValue=s.minValue),r=s.maxValue,s})}writeClassBreakInfos(e,t,n,r){const i=e.map(s=>s.write({},r));this._areClassBreaksConsecutive()&&i.forEach(s=>delete s.classMinValue),t[n]=i}castField(e){return e==null?e:typeof e=="function"?(ie.getLogger(this).error(".field: field must be a string value"),null):A2(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,n=this.normalizationTotal!=null;return t||n?(e=t&&ky||n&&Iy||null,t&&n&&ie.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==ky&&e!==Iy||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,n){let r=null;r=typeof e=="number"?new gf({minValue:e,maxValue:t,symbol:VL(n)}):Sse(J(e)),this.classBreakInfos.push(r),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const n=this.classBreakInfos.length;for(let r=0;r<n;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]===e&&i[1]===t){this.classBreakInfos.splice(r,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(t==null?void 0:t.arcade)==null&&ie.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let n=t;this.valueExpression&&(t==null?void 0:t.arcade)==null&&(n={...n,arcade:await mf()});const r=this.getBreakIndex(e,n);return r!==-1?this.classBreakInfos[r]:null}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void ie.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const n=this.getBreakIndex(e,t);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let n=t;if(this.valueExpression&&(t==null?void 0:t.arcade)==null){const i=await mf(),{arcadeUtils:s}=i;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),n={...n,arcade:i}}const r=this.getBreakIndex(e,n);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((r,i)=>r+i.getMeshHash(),"")}.${n}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){var e,t;return new e_({field:this.field,backgroundFillSymbol:(e=this.backgroundFillSymbol)==null?void 0:e.clone(),defaultLabel:this.defaultLabel,defaultSymbol:(t=this.defaultSymbol)==null?void 0:t.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:J(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:J(this.visualVariables),legendOptions:J(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const n=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(n)}async collectSymbolFields(e,t){const n=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Fi(e,t,this.valueExpression)];ni(e,t,this.field),ni(e,t,this.normalizationField),await Promise.all(n)}_getBreakIndexForExpression(e,t){const{viewingMode:n,scale:r,spatialReference:i,arcade:s,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const c=s.arcadeUtils;if(!l){const h=c.createSyntaxTree(a);l=c.createFunction(h),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const u=c.executeFunction(l,c.createExecContext(e,c.getViewInfo({viewingMode:n,scale:r,spatialReference:i}),o));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(e){const t=this.field,n=e.attributes,r=this.normalizationType;let i=parseFloat(n[t]);if(r){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?n[this.normalizationField]:void 0);if(r===k9)i=Math.log(i)*Math.LOG10E;else if(r!==Iy||s==null||isNaN(s)){if(r===ky&&!isNaN(o)){if(isNaN(i)||isNaN(o))return-1;i/=o}}else i=i/s*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let n=0;n<this.classBreakInfos.length;n++){const r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]<=e&&(t?e<=r[1]:e<r[1]))return n}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let n=1;n<t;n++)if(e[n-1].maxValue!==e[n].minValue)return!1;return!0}};p([b(I9)],Ut.prototype,"backgroundFillSymbol",void 0),p([b({type:[gf]})],Ut.prototype,"classBreakInfos",void 0),p([ge("classBreakInfos")],Ut.prototype,"readClassBreakInfos",null),p([xe("classBreakInfos")],Ut.prototype,"writeClassBreakInfos",null),p([b({type:String,json:{write:!0}})],Ut.prototype,"defaultLabel",void 0),p([b(Ub)],Ut.prototype,"defaultSymbol",void 0),p([b({type:String,json:{write:!0}})],Ut.prototype,"field",void 0),p([gt("field")],Ut.prototype,"castField",null),p([b({type:Boolean})],Ut.prototype,"isMaxInclusive",void 0),p([b({type:jc,json:{write:!0}})],Ut.prototype,"legendOptions",void 0),p([b({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ut.prototype,"minValue",null),p([b({type:String,json:{write:!0}})],Ut.prototype,"normalizationField",void 0),p([b({type:Number,cast:e=>I2(e),json:{write:!0}})],Ut.prototype,"normalizationTotal",void 0),p([b({type:rg.apiValues,value:null,json:{type:rg.jsonValues,read:rg.read,write:rg.write}})],Ut.prototype,"normalizationType",null),p([pe({classBreaks:"class-breaks"})],Ut.prototype,"type",void 0),p([b({type:String,json:{write:!0}})],Ut.prototype,"valueExpression",void 0),p([b({type:String,json:{write:!0}})],Ut.prototype,"valueExpressionTitle",void 0),Ut=e_=p([L("esri.renderers.ClassBreaksRenderer")],Ut);const Vb=Ut;var t_;const ig=new Ne({flow_from:"flow-from",flow_to:"flow-to"});let Cn=t_=class extends Bb(re){constructor(e){super(e),this.density=.8,this.color=new fe([255,255,255,1]),this.maxPathLength=200,this.trailWidth=1.5,this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation="flow-from",this.type="flow",this.authoringInfo=null,this.legendOptions=null,this.trailCap="butt",this.background="none"}clone(){var d,g;const{density:e,maxPathLength:t,trailWidth:n,flowSpeed:r,trailLength:i,smoothing:s,flowRepresentation:o,trailCap:a,background:l}=this,c=this.color.clone(),u=(this.visualVariables||[]).map(y=>y.clone()),h=(d=this.authoringInfo)==null?void 0:d.clone(),f=(g=this.legendOptions)==null?void 0:g.clone();return new t_({density:e,color:c,maxPathLength:t,trailWidth:n,flowSpeed:r,trailLength:i,trailCap:a,background:l,smoothing:s,flowRepresentation:o,visualVariables:u,authoringInfo:h,legendOptions:f})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};p([b({type:Number,json:{write:!0}})],Cn.prototype,"density",void 0),p([b({type:fe,json:{write:{allowNull:!0}}})],Cn.prototype,"color",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],Cn.prototype,"maxPathLength",void 0),p([b({type:Number,cast:ot,json:{write:!0}})],Cn.prototype,"trailWidth",void 0),p([b({type:Number,json:{write:!0}})],Cn.prototype,"flowSpeed",void 0),p([b({type:Number,json:{write:!0}})],Cn.prototype,"trailLength",void 0),p([b({type:Number,cast:ot,json:{write:!1}})],Cn.prototype,"smoothing",void 0),p([b({type:ig.apiValues,json:{type:ig.jsonValues,read:{reader:ig.read},write:{writer:ig.write}}})],Cn.prototype,"flowRepresentation",void 0),p([pe({flowRenderer:"flow"})],Cn.prototype,"type",void 0),p([b({type:U$,json:{write:!0}})],Cn.prototype,"authoringInfo",void 0),p([b({type:jc,json:{write:!0}})],Cn.prototype,"legendOptions",void 0),p([b({type:String,json:{write:!0}})],Cn.prototype,"trailCap",void 0),p([b({type:String,json:{write:!0}})],Cn.prototype,"background",void 0),Cn=t_=p([L("esri.renderers.FlowRenderer")],Cn);const E9=Cn;let rh=class extends re{constructor(){super(...arguments),this.value=null,this.label=null,this.color=null}};p([b({type:Number,json:{write:!0}})],rh.prototype,"value",void 0),p([b({type:String,json:{write:!0}})],rh.prototype,"label",void 0),p([b({type:fe,json:{type:[Be],write:!0}})],rh.prototype,"color",void 0),rh=p([L("esri.renderers.support.ColormapInfo")],rh);const C9=rh;function _se(e){return"r"in e&&"g"in e&&"b"in e}function O9(e){return"h"in e&&"s"in e&&"v"in e}function P9(e){return"l"in e&&"a"in e&&"b"in e}function R9(e){return"l"in e&&"c"in e&&"h"in e}function Mse(e){return"x"in e&&"y"in e&&"z"in e}const $se=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Tse=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function N9(e,t){const n=[];let r,i;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,o=e[0].length;let a=0;for(r=0;r<s;r++){for(a=0,i=0;i<o;i++)a+=e[r][i]*t[i];n.push(a)}return n}function D9(e){const t=[e.r/255,e.g/255,e.b/255].map(r=>r<=.04045?r/12.92:((r+.055)/1.055)**2.4),n=N9($se,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function W$(e){const t=N9(Tse,[e.x/100,e.y/100,e.z/100]).map(n=>{const r=n<=.0031308?12.92*n:1.055*n**.4166666666666667-.055;return Math.min(1,Math.max(r,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function L9(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(n=>n>.008856451679035631?n**.3333333333333333:7.787037037037035*n+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function F9(e){const t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(r=>r>6/29?r**3:3*(6/29)**2*(r-4/29));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function Ase(e){const t=e.l,n=e.a,r=e.b,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s=s>0?s:s+2*Math.PI,{l:t,c:i,h:s}}function Ise(e){const t=e.l,n=e.c,r=e.h;return{l:t,a:n*Math.cos(r),b:n*Math.sin(r)}}function kse(e){return L9(D9(e))}function Ese(e){return W$(F9(e))}function Cse(e){return Ase(L9(D9(e)))}function Ose(e){return W$(F9(Ise(e)))}function Pse(e){const t=e.r,n=e.g,r=e.b,i=Math.max(t,n,r),s=i-Math.min(t,n,r);let o=i,a=s===0?0:i===t?(n-r)/s%6:i===n?(r-t)/s+2:(t-n)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function Rse(e){const t=(e.h+360)%360/60,n=e.s/100,r=e.v/100*255,i=r*n,s=i*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:i,g:s,b:0};break;case 1:o={r:s,g:i,b:0};break;case 2:o={r:0,g:i,b:s};break;case 3:o={r:0,g:s,b:i};break;case 4:o={r:s,g:0,b:i};break;case 5:case 6:o={r:i,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-i),o.g=Math.round(o.g+r-i),o.b=Math.round(o.b+r-i),o}function Ka(e){return _se(e)?e:R9(e)?Ose(e):P9(e)?Ese(e):Mse(e)?W$(e):O9(e)?Rse(e):e}function m0(e){return O9(e)?e:Pse(Ka(e))}function n_(e){return P9(e)?e:kse(Ka(e))}function BI(e){return R9(e)?e:Cse(Ka(e))}function Nse(e){let{r:t,g:n,b:r,a:i}=e;return i<1&&(t=Math.round(i*t+255*(1-i)),n=Math.round(i*n+255*(1-i)),r=Math.round(i*r+255*(1-i))),new fe({r:t,g:n,b:r})}function Dse(e,t){const{r:n,g:r,b:i}=t!=null&&t.ignoreAlpha?e:Nse(e);return .2126*n+.7152*r+.0722*i}var r_;function l5e(e,t=r_.High){return Dse(e,{ignoreAlpha:!0})>t?new fe([0,0,0,e.a]):new fe([255,255,255,e.a])}function c5e(e,t){const n=n_(e);n.l*=1-t;const r=Ka(n),i=e.clone();return i.setColor(r),i.a=e.a,i}function u5e(e,t){const n=e.clone();return n.a*=t,n}function h5e(e,t){const n=m0(e);n.s*=t;const r=Ka(n),i=e.clone();return i.setColor(r),i.a=e.a,i}function f5e(e){return fe.toUnitRGBA(e)}function d5e(e,t){return e===t||e!=null&&e.equals(t)}function p5e(e,t){return e===t||e!=null&&t!=null&&F0(e,t)}function m5e(e){return _o(e[0],e[1],e[2],e.length>3?e[3]:1)}function g5e(e,t){const n=fe.toUnitRGBA(e);return n[3]*=t,n}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(r_||(r_={}));const Lse=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],H$=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],Wh=new Ne({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function sg(e,t){if(!e||!t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]>t[n]+2||e[n]<t[n]-2)return!1;return!0}function UI(e){const t=e.clone();return t.fromColor=e.toColor,t.toColor=e.fromColor,t.algorithm=e.algorithm,t}function Fse(e){var t;if(e.type==="multipart"){const n=e.clone();return(t=n.colorRamps)!=null&&t.length&&(n.colorRamps=n.colorRamps.reverse().map(r=>UI(r))),n}return UI(e)}function VI(e,t){if(!e)return;const n=t??H$;let r=null;return e.type==="algorithmic"?n.some(i=>{if(sg(e.fromColor.toRgb(),i.fromColor)&&sg(e.toColor.toRgb(),i.toColor))return r=i.id,!0}):e.type==="multipart"&&n.some(i=>{const s=e.colorRamps,o=i.colorRamps;if(s&&o&&s.length===o.length&&!o.some((a,l)=>{if(!sg(s[l].fromColor.toRgb(),new fe(a.fromColor).toRgb())||!sg(s[l].toColor.toRgb(),new fe(a.toColor).toRgb()))return!0})){if(r)return!0;r=i.id}}),r}function jse(e,t,n=!1){if(!e)return;let r=VI(e,t);return r!=null||n||(r=VI(e=Fse(e),t)),r}function zse(e,t=!1){const n=typeof e=="string"?e:jse(e,void 0,t);return n?Wh.toJSON(n):null}function Bse(e,t="esriCIELabAlgorithm"){const n=H$.find(({id:r})=>r===e);return n?n.colorRamps?{type:"multipart",colorRamps:n.colorRamps.map(r=>({type:"algorithmic",algorithm:t,fromColor:[...r.fromColor],toColor:[...r.toColor]}))}:{type:"algorithmic",algorithm:t,fromColor:[...n.fromColor],toColor:[...n.toColor]}:null}function j9(e){const t=(e=e||{}).numColors||256,n=e.distanceOffset||0,r=e.isCustomInterval!=null?e.isCustomInterval:e.distanceInterval!==null&&e.distanceInterval!==1/(t-1),i=e.distanceInterval||1/(t-1);return{...e,numColors:t,distanceOffset:n,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:i,isCustomInterval:r,weights:e.weights}}function Use(e,t,n){const{numColors:r,distanceOffset:i,distanceInterval:s,isCustomInterval:o}=n,a=e.s===0,l=t.s===0;let c=e.h,u=t.h;a&&!l?c=u:l&&!a&&(t={...t,h:c},u=c);let h,f=Math.abs(u-c);const d=360;f<d/2?h=(u-c)*s:(f=d-f,h=c>u?f*s:-f*s);const g=(t.s-e.s)*s,y=(t.v-e.v)*s;let{s:w,v}=e,x=c;if(i){const _=i/s;x=(x+_*h+d)%d,w+=_*g,v+=_*y}const S=[];for(let _=0;_<r-1;_++)S.push({h:x,s:w,v}),x=(x+h+d)%d,w+=g,v+=y;return S.push(o?{h:x,s:w,v}:t),S}function Vse(e,t,n){const{numColors:r,distanceOffset:i,distanceInterval:s,isCustomInterval:o}=n;let{l:a,a:l,b:c}=e;const u=(t.l-a)*s,h=(t.a-l)*s,f=(t.b-c)*s,d=[];if(i){const g=i/s;a+=g*u,l+=g*h,c+=g*f}for(let g=0;g<r-1;g++)d.push({l:a,a:l,b:c}),a+=u,l+=h,c+=f;return d.push(o?{l:a,a:l,b:c}:t),d}function Gse(e,t,n){const{numColors:r,distanceOffset:i,distanceInterval:s,isCustomInterval:o}=n,a=e.h,l=t.h,c=2*Math.PI;let u;if(a<=l){const x=l-a,S=l-a-c;u=Math.abs(S)<Math.abs(x)?S:x}else{const x=l+c-a,S=l-a;u=Math.abs(S)<Math.abs(x)?S:x}const h=u*s,f=(t.l-e.l)*s,d=(t.c-e.c)*s;let{l:g,c:y,h:w}=e;if(i){const x=i/s;g+=x*f,y+=x*d,w=(w+x*h+c)%c}const v=[];for(let x=0;x<r-1;x++)v.push({l:g,c:y,h:w}),g+=f,y+=d,w=(w+h+c)%c;return v.push(o?{l:g,c:y,h:w}:t),v}function z9(e,t){let{fromColor:n,toColor:r}=e;n=[...n],r=[...r],n.length===3&&(n=n.concat([255])),r.length===3&&(r=r.concat([255]));const i=e.algorithm||"esriCIELabAlgorithm",s=j9(t),{numColors:o,distanceOffset:a,isCustomInterval:l,interpolateAlpha:c}=s;if(o===1&&a===0)return[n];if(o===2&&a===0&&!l)return[n,r];const u={r:n[0],g:n[1],b:n[2]},h={r:r[0],g:r[1],b:r[2]},f=i==="esriCIELabAlgorithm"?Vse(n_(u),n_(h),s):i==="esriHSVAlgorithm"?Use(m0(u),m0(h),s):Gse(BI(u),BI(h),s),d=[],g=n[3]??255,y=((r[3]??255)-g)/(o-1);for(let w=0;w<o;w++){const{r:v,g:x,b:S}=Ka(f[w]),_=c?Math.round(g+y*w):255;d.push([v,x,S,_])}return d}function Wse(e,t){const{numColors:n,interpolateAlpha:r}=j9(t);let i=t==null?void 0:t.weights;const{colorRamps:s}=e;if(i){const f=i.reduce((d,g)=>d+g);i=i.map(d=>d/f)}else{i=[];for(let f=0;f<s.length;f++)i[f]=1/s.length}const o=[];let a=0,l=0;const c=1/(n-1);let u=!1;for(let f=0;f<s.length;f++){let d=u?0:a*c-l,g=f===s.length-1?n-1-a:(i[f]-d)/c;if(u=Math.ceil(g)===g,g=Math.ceil(g),g===0)continue;d/=i[f];const y=z9(s[f],{numColors:g,interpolateAlpha:r,distanceOffset:d,distanceInterval:c/i[f]});a+=y.length,o.push(...y),l+=i[f]}const h=[...s[s.length-1].toColor];return h.length===3&&h.push(255),o.push(h),o}function q$(e,t){const n=d1(e)?e.toJSON():e;return n.type==="multipart"?Wse(n,t):z9(n,t)}function fu(e,t){const n=q$(e,t),r=t==null?void 0:t.interpolateAlpha;return n.forEach((i,s)=>{i.unshift(s),r||i.pop()}),n}function GI(e){const t=m0(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function WI(e){const t=e.toJSON();return{Algorithm:(t==null?void 0:t.Algorithm)||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:GI(e.fromColor),ToColor:GI(e.toColor)}}function y5e(e){const t=zse(e);if(!t)return null;if(e.type==="algorithmic")return{...WI(e),Name:t};if(e.colorRamps){const n=e.colorRamps.map(WI);return{type:"MultiPartColorRamp",NumColorRamps:n.length,ArrayOfColorRamp:n,Name:t}}return null}function b5e(e){const t=e.reverse().map(n=>{const r=n.toString(16);return r.length<2?"0"+r:r});return 4294967295&Number.parseInt(t.join(""),16)}var Wd;let Hd=Wd=class extends re{constructor(e){super(e),this.colormapInfos=null,this.type="raster-colormap"}static createFromColormap(e,t){if(!e)return null;const n=e[0].length===5,r=[...e].sort((i,s)=>i[0]-s[0]).map(i=>C9.fromJSON({value:i[0],color:n?i.slice(1,5):i.slice(1,4).concat([255]),label:t?t[i[0]]??"":i[0]}));return new Wd({colormapInfos:r})}static createFromColorramp(e){const t=fu(e);return Wd.createFromColormap(t)}clone(){return new Wd({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255]).sort((e,t)=>e[0]-t[0])}};p([b({type:[C9],json:{write:!0}})],Hd.prototype,"colormapInfos",void 0),p([pe({rasterColormap:"raster-colormap"})],Hd.prototype,"type",void 0),Hd=Wd=p([L("esri.renderers.RasterColormapRenderer")],Hd);const J$=Hd;var i_;let Tr=i_=class extends re{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType="traditional",this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType="none",this.type="raster-shaded-relief",this.zFactor=1}readColorRamp(e){return Lb(e)}clone(){return new i_({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:J(this.colorRamp)})}};p([b({type:Number,json:{write:!0}})],Tr.prototype,"altitude",void 0),p([b({type:Number,json:{write:!0}})],Tr.prototype,"azimuth",void 0),p([b({types:Db,json:{write:!0}})],Tr.prototype,"colorRamp",void 0),p([ge("colorRamp")],Tr.prototype,"readColorRamp",null),p([b({type:["traditional","multi-directional"],json:{write:!0}})],Tr.prototype,"hillshadeType",void 0),p([b({type:Number,json:{write:!0}})],Tr.prototype,"pixelSizePower",void 0),p([b({type:Number,json:{write:!0}})],Tr.prototype,"pixelSizeFactor",void 0),p([b({type:["none","adjusted"],json:{write:!0}})],Tr.prototype,"scalingType",void 0),p([pe({rasterShadedRelief:"raster-shaded-relief"})],Tr.prototype,"type",void 0),p([b({type:Number,json:{write:!0}})],Tr.prototype,"zFactor",void 0),Tr=i_=p([L("esri.renderers.RasterShadedReliefRenderer")],Tr);const B9=Tr,Ey=new Ne({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),U9={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};var s_;let Pt=s_=class extends re{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.statistics=[],this.histograms=null,this.useGamma=!1,this.stretchType="none",this.type="raster-stretch"}readColorRamp(e){if(e)return Lb(e)}writeStatistics(e,t,n){e!=null&&e.length&&(Array.isArray(e[0])||(e=e.map(r=>[r.min,r.max,r.avg,r.stddev])),t[n]=e)}readStretchType(e,t){let n=t.stretchType;return typeof n=="number"&&(n=U9[n]),Ey.read(n)}clone(){return new s_({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:J(this.statistics),gamma:J(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:J(this.colorRamp),histograms:J(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};p([b({types:Db,json:{write:!0}})],Pt.prototype,"colorRamp",void 0),p([ge("colorRamp")],Pt.prototype,"readColorRamp",null),p([b({type:Boolean,json:{write:!0}})],Pt.prototype,"computeGamma",void 0),p([b({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],Pt.prototype,"dynamicRangeAdjustment",void 0),p([b({type:[Number],json:{write:!0}})],Pt.prototype,"gamma",void 0),p([b({type:Number,json:{write:!0}})],Pt.prototype,"maxPercent",void 0),p([b({type:Number,json:{write:!0}})],Pt.prototype,"minPercent",void 0),p([b({type:Number,json:{write:!0}})],Pt.prototype,"numberOfStandardDeviations",void 0),p([b({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],Pt.prototype,"outputMax",void 0),p([b({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],Pt.prototype,"outputMin",void 0),p([b({type:Number,json:{write:!0}})],Pt.prototype,"sigmoidStrengthLevel",void 0),p([b({json:{type:[[Number]],write:!0}})],Pt.prototype,"statistics",void 0),p([b()],Pt.prototype,"histograms",void 0),p([xe("statistics")],Pt.prototype,"writeStatistics",null),p([b({type:Boolean,json:{write:!0}})],Pt.prototype,"useGamma",void 0),p([b({type:Ey.apiValues,json:{type:Ey.jsonValues,write:Ey.write}})],Pt.prototype,"stretchType",void 0),p([ge("stretchType",["stretchType"])],Pt.prototype,"readStretchType",null),p([pe({rasterStretch:"raster-stretch"})],Pt.prototype,"type",void 0),Pt=s_=p([L("esri.renderers.RasterStretchRenderer")],Pt);const Z$=Pt,Hse=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function o_(e){return e instanceof Yt}function HI(e){return e instanceof tt?Object.keys(e.items):o_(e)?xr(e).keys():e?Object.keys(e):[]}function og(e,t){return e instanceof tt?e.items[t]:e[t]}function qse(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Np(e){return e?e.declaredClass:null}function V9(e,t){var h;const n=e.diff;if(n&&typeof n=="function")return n(e,t);const r=HI(e),i=HI(t);if(r.length===0&&i.length===0)return;if(!r.length||!i.length||qse(e,t))return{type:"complete",oldValue:e,newValue:t};const s=i.filter(f=>!r.includes(f)),o=r.filter(f=>!i.includes(f)),a=r.filter(f=>i.includes(f)&&og(e,f)!==og(t,f)).concat(s,o).sort(),l=Np(e);if(l&&Hse.has(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let c;const u=o_(e)&&o_(t);for(const f of a){const d=og(e,f),g=og(t,f);let y;if((u||typeof d!="function"&&typeof g!="function")&&d!==g&&(d!=null||g!=null)){if(n&&n[f]&&typeof n[f]=="function")y=(h=n[f])==null?void 0:h.call(n,d,g);else if(d instanceof Date&&g instanceof Date){if(d.getTime()===g.getTime())continue;y={type:"complete",oldValue:d,newValue:g}}else y=typeof d=="object"&&typeof g=="object"&&Np(d)===Np(g)?V9(d,g):{type:"complete",oldValue:d,newValue:g};y!=null&&(c!=null?c.diff[f]=y:c={type:"partial",diff:{[f]:y}})}}return c}function Jse(e,t){if(e==null)return!1;const n=t.split(".");let r=e;for(const i of n){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const s=r.diff[i];if(!s)return!1;r=s}}return!0}function w5e(e,t){for(const n of t)if(Jse(e,n))return!0;return!1}function Zse(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&Np(e)!==Np(t)?{type:"complete",oldValue:e,newValue:t}:V9(e,t)}function ag(e){if(e==null)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const n of t.added)if(!ag(n))return!1;for(const n of t.removed)if(!ag(n))return!1;for(const n of t.changed)if(!ag(n))return!1;return!0}case"partial":for(const t in e.diff)if(!ag(e.diff[t]))return!1;return!0}}let ih=class extends _n(re){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};p([b(Ay)],ih.prototype,"value",void 0),p([b(Ay)],ih.prototype,"value2",void 0),p([b(Ay)],ih.prototype,"value3",void 0),ih=p([L("esri.renderers.support.UniqueValue")],ih);const Hh=ih;let na=class extends _n(re){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const n=typeof(t=Array.isArray(t)?t:[t])[0];return n==="string"||n==="number"?t.map(r=>new Hh({value:r})):n==="object"?t[0]instanceof Hh?t:t.map(r=>new Hh(r)):null}};p([b({type:String,json:{write:!0}})],na.prototype,"description",void 0),p([b({type:String,json:{write:!0}})],na.prototype,"label",void 0),p([b(Ub)],na.prototype,"symbol",void 0),p([b({type:[Hh],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Hh({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const n=[];for(const r of e){const i=[r.value,r.value2,r.value3].filter(ja).map(s=>s.toString());n.push(i)}t.values=n}}}})],na.prototype,"values",void 0),p([gt("values")],na.prototype,"castValues",null),na=p([L("esri.renderers.support.UniqueValueClass")],na);const G9=na;let qd=class extends _n(re){constructor(t){super(t),this.heading=null,this.classes=null}};p([b({type:String,json:{write:!0}})],qd.prototype,"heading",void 0),p([b({type:[G9],json:{write:!0}})],qd.prototype,"classes",void 0),qd=p([L("esri.renderers.support.UniqueValueGroup")],qd);const a_=qd;var l_;let Vl=l_=class extends re{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new l_({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){var t;const e=JSON.stringify((t=this.symbol)==null?void 0:t.toJSON());return`${this.value}.${e}`}};p([b({type:String,json:{write:!0}})],Vl.prototype,"description",void 0),p([b({type:String,json:{write:!0}})],Vl.prototype,"label",void 0),p([b(A9)],Vl.prototype,"symbol",void 0),p([b(Ay)],Vl.prototype,"value",void 0),Vl=l_=p([L("esri.renderers.support.UniqueValueInfo")],Vl);const zc=Vl,Yse=()=>!!X("enable-feature:force-wosr"),_5e=()=>!!X("enable-feature:direct-3d-object-feature-layer-display"),Kse=()=>X.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),Xse=()=>X.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),M5e=()=>!!X("enable-i3s-patching"),Qse=()=>X.add("enable-i3s-patching",!0,!0,!0),eoe=()=>X.add("enable-i3s-patching",!1,!0,!0),$5e=()=>!!X("enable-feature:SceneLayer-editing"),toe=(e="i3s-patching")=>{switch(eoe(),Xse(),X.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":Kse();break;case"i3s-patching":Qse()}};toe("i3s-patching");let Zw={};async function noe(e,t){try{return{data:(await ooe(e,t)).data,baseUrl:WP(e),styleUrl:e}}catch(n){return hs(n),null}}function roe(e,t,n){const r=t.portal!=null?t.portal:si.getDefault();let i;const s=`${r.url} - ${r.user&&r.user.username} - ${e}`;return Zw[s]||(Zw[s]=ioe(e,r,n).then(o=>(i=o,o.fetchData())).then(o=>({data:o,baseUrl:i.itemUrl??"",styleName:e}))),Zw[s]}function ioe(e,t,n){return t.load(n).then(()=>{const r=new ps({disableExtraQuery:!0,query:`owner:${qI} AND type:${JI} AND typekeywords:"${e}"`});return t.queryItems(r,n)}).then(({results:r})=>{var o;let i=null;const s=e.toLowerCase();if(r&&Array.isArray(r)){for(const a of r)if(((o=a.typeKeywords)==null?void 0:o.some(c=>c.toLowerCase()===s))&&a.type===JI&&a.owner===qI){i=a;break}}if(!i)throw new Y("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(n)})}function soe(e,t,n){return(e==null?void 0:e.styleUrl)!=null?noe(e.styleUrl,n):(e==null?void 0:e.styleName)!=null?roe(e.styleName,t,n):Promise.reject(new Y("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function T5e(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function A5e(e,t,n=["gltf"]){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!Yse())for(const r of n){const i=e.formatInfos.find(s=>s.type===r);if(i)return i.href}return e.webRef}function ooe(e,t){const n={responseType:"json",query:{f:"json"},...t};return He(Oi(e),n)}const qI="esri_en",JI="Style",I5e="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Jd;const W9="esri.renderers.UniqueValueRenderer",zo=ie.getLogger(W9),ZI="uvInfos-watcher",YI="uvGroups-watcher",aoe=",",loe=vr(zc);function coe(e){const{field1:t,field2:n,field3:r,fieldDelimiter:i,uniqueValueInfos:s,valueExpression:o}=e,a=!(!t||!n);return[{classes:(s??[]).map(l=>{var v;const{symbol:c,label:u,value:h,description:f}=l,[d,g,y]=a?((v=h==null?void 0:h.toString())==null?void 0:v.split(i||""))||[]:[h],w=[];return(t||o)&&w.push(d),n&&w.push(g),r&&w.push(y),{symbol:c,label:u,values:[w],description:f}})}]}let bt=Jd=class extends Bb(m9){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,n){if(!t&&!n)return;if(!t||!n)return{type:"complete",oldValue:t,newValue:n};let r=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<n.length;s++){const o=t.find(a=>a.value===n[s].value);o?Zse(o,n[s])?(i.changed.push({type:"complete",oldValue:o,newValue:n[s]}),r=!0):i.unchanged.push({oldValue:o,newValue:n[s]}):(i.added.push(n[s]),r=!0)}for(let s=0;s<t.length;s++)n.find(o=>o.value===t[s].value)||(i.removed.push(t[s]),r=!0);return r?i:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:A2(e)}writeField(e,t,n,r){typeof e=="string"?t[n]=e:r!=null&&r.messages?r.messages.push(new Y("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):zo.error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,n){return n.portal||si.getDefault()}readStyleOrigin(e,t,n){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const r=Mf(t.styleUrl,n);return Object.freeze({styleUrl:r})}}writeStyleOrigin(e,t,n,r){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=su(e.styleUrl,r))}set uniqueValueGroups(e){this.styleOrigin?zo.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?zo.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){var r;if(this.styleOrigin)return void zo.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let n;n=typeof e=="object"?loe(e):new zc({value:e,symbol:VL(t)}),(r=this.uniqueValueInfos)==null||r.push(n),this._valueInfoMap[n.value]=n,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void zo.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let n=0;n<t.length;n++){const r=t[n];if(String(r.value)===String(e)){delete this._valueInfoMap[e],t.splice(n,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let n=t;return this.valueExpression&&(t==null?void 0:t.arcade)==null&&(n={...n,arcade:await mf()}),this._getUniqueValueInfo(e,n)}getSymbol(e,t){if(this.valueExpression&&(t==null?void 0:t.arcade)==null)return void zo.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const n=this._getUniqueValueInfo(e,t);return(n==null?void 0:n.symbol)||this.defaultSymbol}async getSymbolAsync(e,t){let n=t;if(this.valueExpression&&(n==null?void 0:n.arcade)==null){const i=await mf(),{arcadeUtils:s}=i;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),n={...n,arcade:i}}const r=this._getUniqueValueInfo(e,n);return(r==null?void 0:r.symbol)||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){var r;const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n=(r=this.uniqueValueInfos)==null?void 0:r.reduce((i,s)=>i+s.getMeshHash(),"");return`${e}.${t}.${n}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Jd({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:J(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:J(this.visualVariables),legendOptions:J(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:J(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=J(this.uniqueValueInfos),n=J(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(J(this.styleOrigin))),Object.freeze(t),Object.freeze(n)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",n),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const n=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(n)}async collectSymbolFields(e,t){const n=[...this.getSymbols().map(r=>r.collectRequiredFields(e,t)),Fi(e,t,this.valueExpression)];ni(e,t,this.field),ni(e,t,this.field2),ni(e,t,this.field3),await Promise.all(n)}populateFromStyle(){return soe(this.styleOrigin,{portal:this.portal}).then(e=>{var n;const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const i=new $u({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const s=new zc({value:r.name,symbol:i});t.push(s),this._valueInfoMap[r.name]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((n=this.uniqueValueInfos)!=null&&n.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",aoe)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(ZI);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const n of e)t.push(co(()=>({symbol:n.symbol,value:n.value,label:n.label,description:n.description}),(r,i)=>{r!==i&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,ZI)}}_watchUniqueValueGroups(){this.removeHandles(YI);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const n of e){t.push(co(()=>({classes:n.classes}),(r,i)=>{r!==i&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const r of n.classes??[])t.push(co(()=>({symbol:r.symbol,values:r.values,label:r.label,description:r.description}),(i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,YI)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:n,field3:r,fieldDelimiter:i,uniqueValueGroups:s,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!n);for(const l of s)for(const c of l.classes??[]){const{symbol:u,label:h,values:f,description:d}=c;for(const g of f??[]){const{value:y,value2:w,value3:v}=g,x=[y];n&&x.push(w),r&&x.push(v);const S=a?x.join(i||""):x[0];e.push(new zc({symbol:u,label:h,value:S,description:d}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:n,valueExpression:r,fieldDelimiter:i,uniqueValueInfos:s}=this;if(!t&&!r||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!n),a=s.map(c=>{var v;const{symbol:u,label:h,value:f,description:d}=c,[g,y,w]=o?((v=f==null?void 0:f.toString())==null?void 0:v.split(i||""))||[]:[f];return new G9({symbol:u,label:h,description:d,values:[new Hh({value:g,value2:y,value3:w})]})}),l=[new a_({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:n,scale:r,spatialReference:i,arcade:s,timeZone:o}=t??{};let a=this._cache.compiledFunc;const l=s.arcadeUtils;if(!a){const u=l.createSyntaxTree(this.valueExpression);a=l.createFunction(u),this._cache.compiledFunc=a}const c=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:n,scale:r,spatialReference:i}),o));return this._valueInfoMap[c+""]}_getUnqiueValueInfoForFields(e){const t=this.field,n=e.attributes;let r;if(typeof t!="function"&&this.field2){const i=this.field2,s=this.field3,o=[];t&&o.push(n[t]),i&&o.push(n[i]),s&&o.push(n[s]),r=o.join(this.fieldDelimiter||"")}else typeof t=="function"?r=t(e):t&&(r=n[t]);return this._valueInfoMap[r+""]}static fromPortalStyle(e,t){const n=new Jd(t==null?void 0:t.properties);n._set("styleOrigin",Object.freeze({styleName:e})),n._set("portal",(t==null?void 0:t.portal)||si.getDefault());const r=n.populateFromStyle();return r.catch(i=>{zo.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",i)}),r}static fromStyleUrl(e,t){const n=new Jd(t==null?void 0:t.properties);n._set("styleOrigin",Object.freeze({styleUrl:e}));const r=n.populateFromStyle();return r.catch(i=>{zo.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",i)}),r}};p([b({readOnly:!0})],bt.prototype,"_cache",null),p([pe({uniqueValue:"unique-value"})],bt.prototype,"type",void 0),p([b(I9)],bt.prototype,"backgroundFillSymbol",void 0),p([b({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],bt.prototype,"field",null),p([gt("field")],bt.prototype,"castField",null),p([xe("field")],bt.prototype,"writeField",null),p([b({type:String,value:null,json:{write:!0}})],bt.prototype,"field2",null),p([b({type:String,value:null,json:{write:!0}})],bt.prototype,"field3",null),p([b({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],bt.prototype,"orderByClassesEnabled",void 0),p([b({type:String,value:null,json:{write:!0}})],bt.prototype,"valueExpression",null),p([b({type:String,json:{write:!0}})],bt.prototype,"valueExpressionTitle",void 0),p([b({type:jc,json:{write:!0}})],bt.prototype,"legendOptions",void 0),p([b({type:String,json:{write:!0}})],bt.prototype,"defaultLabel",void 0),p([b(K5({...Ub},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],bt.prototype,"defaultSymbol",null),p([b({type:String,value:null,json:{write:!0}})],bt.prototype,"fieldDelimiter",null),p([b({type:si,readOnly:!0})],bt.prototype,"portal",void 0),p([ge("portal",["styleName"])],bt.prototype,"readPortal",null),p([b({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],bt.prototype,"styleOrigin",void 0),p([ge("styleOrigin",["styleName","styleUrl"])],bt.prototype,"readStyleOrigin",null),p([xe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],bt.prototype,"writeStyleOrigin",null),p([b({type:[a_],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,n)=>(t.uniqueValueGroups||coe(t)).map(r=>a_.fromJSON(r,n))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],bt.prototype,"uniqueValueGroups",null),p([b({type:[zc],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],bt.prototype,"uniqueValueInfos",null),bt=Jd=p([L(W9)],bt);const Y$=bt,lg={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Ii({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:we.WebMercator}),minus180Line:new Ii({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:we.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Ii({paths:[[[180,-180],[180,180]]],spatialReference:we.WGS84}),minus180Line:new Ii({paths:[[[-180,-180],[-180,180]]],spatialReference:we.WGS84})}};function Ic(e,t){return Math.ceil((e-t)/(2*t))}function H9(e,t){const n=Dp(e);for(const r of n)for(const i of r)i[0]+=t;return e}function Dp(e){return Lh(e)?e.rings:e.paths}function uoe(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function q9(e){return typeof e=="string"?_r(e):J(e)}function J9(e,t,n){const r={};for(const i in e){if(i==="declaredClass")continue;const s=e[i];if(s!=null&&typeof s!="function")if(Array.isArray(s)){r[i]=[];for(let o=0;o<s.length;o++)r[i][o]=J9(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(n==null?void 0:n[i]);r[i]=t?o:JSON.stringify(o)}else r[i]=t?s:JSON.stringify(s);else r[i]=s}return r}function k5e(e,t){var n;return e?bM(e)&&(t||ze.apiKey)?t||ze.apiKey:(n=Le==null?void 0:Le.findCredential(e))==null?void 0:n.token:null}async function hoe(e,t,n,r){const i=q9(e),s=t[0].spatialReference,o={...r,responseType:"json",query:{...i.query,f:"json",sr:o6(s),target:JSON.stringify({geometryType:H2(t[0]),geometries:t}),cutter:JSON.stringify(n)}},a=await He(i.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(u=>{const h=$f(u);return h.spatialReference=s,h})}}function foe(e){return{geometryType:H2(e[0]),geometries:e.map(t=>t.toJSON())}}function doe(e,t,n){const r=sJ(t);return e.map(i=>{const s=r.fromJSON(i);return s.spatialReference=n,s})}async function poe(e,t,n){const r=typeof e=="string"?_r(e):e,i=t[0].spatialReference,s=H2(t[0]),o={...n,query:{...r.query,f:"json",sr:o6(i),geometries:JSON.stringify(foe(t))}},{data:a}=await He(r.path+"/simplify",o);return doe(a.geometries,s,i)}const Z9=ie.getLogger("esri.geometry.support.normalizeUtils");function moe(e){return e.type==="polygon"}function goe(e){return e[0].type==="polygon"}function yoe(e){return e[0].type==="polyline"}function KI(e){const t=[];let n=0,r=0;for(let i=0;i<e.length;i++){const s=e[i];let o=null;for(let a=0;a<s.length;a++)o=s[a],t.push(o),a===0?(n=o[0],r=n):(n=Math.min(n,o[0]),r=Math.max(r,o[0]));o&&t.push([(n+r)/2,0])}return t}function boe(e,t){if(!(e instanceof Ii||e instanceof ii)){const i="straightLineDensify: the input geometry is neither polyline nor polygon";throw Z9.error(i),new Y(i)}const n=Dp(e),r=[];for(const i of n){const s=[];r.push(s),s.push([i[0][0],i[0][1]]);for(let o=0;o<i.length-1;o++){const a=i[o][0],l=i[o][1],c=i[o+1][0],u=i[o+1][1],h=Math.sqrt((c-a)*(c-a)+(u-l)*(u-l)),f=(u-l)/h,d=(c-a)/h,g=h/t;if(g>1){for(let x=1;x<=g-1;x++){const S=x*t,_=d*S+a,M=f*S+l;s.push([_,M])}const y=(h+Math.floor(g-1)*t)/2,w=d*y+a,v=f*y+l;s.push([w,v])}s.push([c,u])}}return moe(e)?new ii({rings:r,spatialReference:e.spatialReference}):new Ii({paths:r,spatialReference:e.spatialReference})}function XI(e,t,n){if(t){const r=boe(e,1e6);e=wh(r,!0)}return n&&(e=H9(e,n)),e}function QI(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const i=Ic(r,t);e[0]=r+i*(-2*t)}else if(r<n){const i=Ic(r,n);e[0]=r+i*(-2*n)}}else{const r=e.x;if(r>t){const i=Ic(r,t);e=e.clone().offset(i*(-2*t),0)}else if(r<n){const i=Ic(r,n);e=e.clone().offset(i*(-2*n),0)}}return e}function woe(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const i=t.cutIndexes[r],s=t.geometries[r],o=Dp(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let u=0;for(let f=0;f<l.length;f++){const d=l[f][0];u=d>u?d:u}u=Number(u.toFixed(9));const h=-360*Ic(u,180);for(let f=0;f<l.length;f++){const d=s.getPoint(a,f);s.setPoint(a,f,d.clone().offset(h,0))}return!0}})}if(i===n){if(goe(e))for(const a of Dp(s))e[i]=e[i].addRing(a);else if(yoe(e))for(const a of Dp(s))e[i]=e[i].addPath(a)}else n=i,e[i]=s}return e}async function Y9(e,t,n){if(!Array.isArray(e))return Y9([e],t);t&&typeof t!="string"&&Z9.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof t=="string"?t:(t==null?void 0:t.url)??ze.geometryServiceUrl;let i,s,o,a,l,c,u,h,f=0;const d=[],g=[];for(const _ of e)if(_!=null)if(i||(i=_.spatialReference,s=yr(i),o=i.isWebMercator,c=o?102100:4326,a=lg[c].maxX,l=lg[c].minX,u=lg[c].plus180Line,h=lg[c].minus180Line),s)if(_.type==="mesh")g.push(_);else if(_.type==="point")g.push(QI(_.clone(),a,l));else if(_.type==="multipoint"){const M=_.clone();M.points=M.points.map($=>QI($,a,l)),g.push(M)}else if(_.type==="extent"){const M=_.clone()._normalize(!1,!1,s);g.push(M.rings?new ii(M):M)}else if(_.extent){const M=_.extent,$=Ic(M.xmin,l)*(2*a);let T=$===0?_.clone():H9(_.clone(),$);M.offset($,0),M.intersects(u)&&M.xmax!==a?(f=M.xmax>f?M.xmax:f,T=XI(T,o),d.push(T),g.push("cut")):M.intersects(h)&&M.xmin!==l?(f=M.xmax*(2*a)>f?M.xmax*(2*a):f,T=XI(T,o,360),d.push(T),g.push("cut")):g.push(T)}else g.push(_.clone());else g.push(_);else g.push(_);let y=Ic(f,a),w=-90;const v=y,x=new Ii;for(;y>0;){const _=360*y-180;x.addPath([[_,w],[_,-1*w]]),w*=-1,y--}if(d.length>0&&v>0){const _=woe(d,await hoe(r,d,x,n)),M=[],$=[];for(let I=0;I<g.length;I++){const E=g[I];if(E!=="cut")$.push(E);else{const O=_.shift(),P=e[I];P!=null&&P.type==="polygon"&&P.rings&&P.rings.length>1&&O.rings.length>=P.rings.length?(M.push(O),$.push("simplify")):$.push(o?Dh(O):O)}}if(!M.length)return $;const T=await poe(r,M,n),A=[];for(let I=0;I<$.length;I++){const E=$[I];E!=="simplify"?A.push(E):A.push(o?Dh(T.shift()):T.shift())}return A}const S=[];for(let _=0;_<g.length;_++){const M=g[_];if(M!=="cut")S.push(M);else{const $=d.shift();S.push(o===!0?Dh($):$)}}return S}function E5e(e){if(!e)return null;const t=e.extent;if(!t)return null;const n=e.spatialReference&&yr(e.spatialReference);if(!n)return t;const[r,i]=n.valid,s=2*i,{width:o}=t;let a,{xmin:l,xmax:c}=t;if([l,c]=[c,l],e.type==="extent"||o===0||o<=i||o>s||l<r||c>i)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=KI(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=KI(e.paths);break;case"multipoint":a=e.points}const u=t.clone();for(let h=0;h<a.length;h++){let f=a[h][0];f<0?(f+=i,c=Math.max(f,c)):(f-=i,l=Math.min(f,l))}return u.xmin=l,u.xmax=c,u.width<o?(u.xmin-=i,u.xmax-=i,u):t}function C5e(e,t,n){const r=yr(n);if(r==null)return e;const[i,s]=r.valid,o=2*s;let a=0,l=0;t>s?a=Math.ceil(Math.abs(t-s)/o):t<i&&(a=-Math.ceil(Math.abs(t-i)/o)),e>s?l=Math.ceil(Math.abs(e-s)/o):e<i&&(l=-Math.ceil(Math.abs(e-i)/o));let c=e+(a-l)*o;const u=c-t;return u>s?c-=o:u<i&&(c+=o),c}function O5e(e,t){const n=yr(t);if(n){const[r,i]=n.valid,s=i-r;if(e<r)for(;e<r;)e+=s;if(e>i)for(;e>i;)e-=s}return e}let ek=class{constructor(t=null,n=null,r=null){this.minValue=t,this.maxValue=n,this.noDataValue=r}};const voe=9999999e31,xoe=2e-7,Soe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function As(e){return Soe[e]??[-34028234663852886e22,34028234663852886e22]}function Gb(e,t,n){var f,d;if(e.depthCount&&e.depthCount>1)return;const{pixels:r,statistics:i,pixelType:s}=e,o=r[0].length,a=e.bandMasks??[],l=e.mask??new Uint8Array(o).fill(255),c=s==="f32"||s==="f64",u=As(s);let h=!1;for(let g=0;g<r.length;g++){const y=typeof t=="number"?t:t[g];if(y==null)continue;const w=((f=i==null?void 0:i[g])==null?void 0:f.minValue)??u[0],v=((d=i==null?void 0:i[g])==null?void 0:d.maxValue)??u[1];if(w>y+Number.EPSILON||v<y-Number.EPSILON)continue;const x=a[g]||l.slice(),S=r[g],_=n==null?void 0:n.customFloatTolerance;if(c&&_!==0){let M=_;M||(M=Math.abs(y)>=voe?xoe*Math.abs(y):s==="f32"?2**-23:Number.EPSILON);for(let $=0;$<S.length;$++)x[$]&&Math.abs(S[$]-y)<M&&(S[$]=0,x[$]=0,l[$]=0,h=!0)}else for(let M=0;M<S.length;M++)x[M]&&S[M]===y&&(S[M]=0,x[M]=0,l[M]=0,h=!0);a[g]=x}h&&(e.bandMasks=e.bandMasks||e.pixels.length>1?a:null,e.mask=l),h&&"updateStatistics"in e&&e.updateStatistics()}var Gl;let On=Gl=class extends re{static createEmptyBand(e,t){return new(Gl.getPixelArrayConstructor(e))(t)}static getPixelArrayConstructor(e){let t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":t=Float32Array;break;case"f64":t=Float64Array}return t}constructor(e){super(e),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.premultiplyAlpha=!1,this.statistics=null,this.depthCount=1}castPixelType(e){if(!e)return"f32";let t=e.toLowerCase();return["u1","u2","u4"].includes(t)?t="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(t)||(t="f32"),t}getPlaneCount(){var e;return(e=this.pixels)==null?void 0:e.length}addData(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new Y("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics??new ek)}getAsRGBA(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}getAsRGBAFloat(){const e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}updateStatistics(){if(!this.pixels)return;this.statistics=this.pixels.map(n=>this._calculateBandStatistics(n,this.mask));const e=this.mask;let t=0;if(e!=null)for(let n=0;n<e.length;n++)e[n]&&t++;else t=this.width*this.height;this.validPixelCount=t}clamp(e){if(!e||e==="f64"||e==="f32"||!this.pixels)return;const[t,n]=As(e),r=this.pixels,i=this.width*this.height,s=r.length;let o,a,l;const c=[];for(let u=0;u<s;u++){l=Gl.createEmptyBand(e,i),o=r[u];for(let h=0;h<i;h++)a=o[h],l[h]=a>n?n:a<t?t:a;c.push(l)}this.pixels=c,this.pixelType=e}extractBands(e){var h;const{pixels:t,statistics:n}=this;if(e==null||e.length===0||!t||t.length===0)return this;const r=t.length,i=e.some(f=>f>=t.length),s=r===e.length&&!e.some((f,d)=>f!==d);if(i||s)return this;const o=((h=this.bandMasks)==null?void 0:h.length)===r?e.map(f=>this.bandMasks[f]):void 0;let{mask:a,validPixelCount:l}=this;const{width:c,height:u}=this;if(o){if(o.length===1)a=o[0];else{const f=c*u;a=new Uint8Array(f).fill(255);for(let d=0;d<o.length;d++){const g=o[d];for(let y=0;y<f;y++)g[y]||(a[y]=0)}}l=a.filter(f=>!!f).length}return new Gl({pixelType:this.pixelType,width:c,height:u,mask:a,bandMasks:o,validPixelCount:l,maskIsAlpha:this.maskIsAlpha,pixels:e.map(f=>t[f]),statistics:n&&e.map(f=>n[f])})}clone(){const e=new Gl({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let t;this.mask!=null&&(this.mask instanceof Uint8Array?e.mask=new Uint8Array(this.mask):e.mask=this.mask.slice(0)),this.bandMasks&&(e.bandMasks=this.bandMasks.map(r=>new Uint8Array(r)));const n=Gl.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];const r=!!this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=r?this.pixels[t].slice(0,this.pixels[t].length):new n(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=J(this.statistics[t]);return e.premultiplyAlpha=this.premultiplyAlpha,e}_fillFrom8Bit(e){const{mask:t,maskIsAlpha:n,premultiplyAlpha:r,pixels:i}=this;if(!e||!(i!=null&&i.length))return void ie.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let s,o,a,l;s=o=a=i[0],i.length>=3?(o=i[1],a=i[2]):i.length===2&&(o=i[1]);const c=new Uint32Array(e),u=this.width*this.height;if(s.length===u)if(t!=null&&t.length===u)if(n)for(l=0;l<u;l++){const h=t[l];if(h){const f=h/255;c[l]=r?h<<24|a[l]*f<<16|o[l]*f<<8|s[l]*f:h<<24|a[l]<<16|o[l]<<8|s[l]}}else for(l=0;l<u;l++)t[l]&&(c[l]=255<<24|a[l]<<16|o[l]<<8|s[l]);else for(l=0;l<u;l++)c[l]=255<<24|a[l]<<16|o[l]<<8|s[l];else ie.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(e){const{pixels:t,mask:n,statistics:r}=this;if(!e||!(t!=null&&t.length))return void ie.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const i=this.pixelType;let s=1,o=0,a=1;if(r&&r.length>0){for(const y of r)if(y.minValue!=null&&(o=Math.min(o,y.minValue)),y.maxValue!=null&&y.minValue!=null){const w=y.maxValue-y.minValue;a=Math.max(a,w)}s=255/a}else{let y=255;i==="s8"?(o=-128,y=127):i==="u16"?y=65535:i==="s16"?(o=-32768,y=32767):i==="u32"?y=4294967295:i==="s32"?(o=-2147483648,y=2147483647):i==="f32"?(o=-34e38,y=34e38):i==="f64"&&(o=-Number.MAX_VALUE,y=Number.MAX_VALUE),s=255/(y-o)}const l=new Uint32Array(e),c=this.width*this.height;let u,h,f,d,g;if(u=h=f=t[0],u.length!==c)return ie.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(h=t[1],t.length>=3&&(f=t[2]),n!=null&&n.length===c)for(d=0;d<c;d++)n[d]&&(l[d]=255<<24|(f[d]-o)*s<<16|(h[d]-o)*s<<8|(u[d]-o)*s);else for(d=0;d<c;d++)l[d]=255<<24|(f[d]-o)*s<<16|(h[d]-o)*s<<8|(u[d]-o)*s;else if(n!=null&&n.length===c)for(d=0;d<c;d++)g=(u[d]-o)*s,n[d]&&(l[d]=255<<24|g<<16|g<<8|g);else for(d=0;d<c;d++)g=(u[d]-o)*s,l[d]=255<<24|g<<16|g<<8|g}_fillFrom32Bit(e){const{pixels:t,mask:n}=this;if(!e||!(t!=null&&t.length))return ie.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let r,i,s,o;r=i=s=t[0],t.length>=3?(i=t[1],s=t[2]):t.length===2&&(i=t[1]);const a=this.width*this.height;if(r.length!==a)return ie.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let l=0;if(n!=null&&n.length===a)for(o=0;o<a;o++)e[l++]=r[o],e[l++]=i[o],e[l++]=s[o],e[l++]=1&n[o];else for(o=0;o<a;o++)e[l++]=r[o],e[l++]=i[o],e[l++]=s[o],e[l++]=1}_calculateBandStatistics(e,t){let n=1/0,r=-1/0;const i=e.length;let s,o=0;if(t!=null)for(s=0;s<i;s++)t[s]&&(o=e[s],n=o<n?o:n,r=o>r?o:r);else for(s=0;s<i;s++)o=e[s],n=o<n?o:n,r=o>r?o:r;return new ek(n,r)}};p([b({json:{write:!0}})],On.prototype,"width",void 0),p([b({json:{write:!0}})],On.prototype,"height",void 0),p([b({json:{write:!0}})],On.prototype,"pixelType",void 0),p([gt("pixelType")],On.prototype,"castPixelType",null),p([b({json:{write:!0}})],On.prototype,"validPixelCount",void 0),p([b({json:{write:!0}})],On.prototype,"mask",void 0),p([b({json:{write:!0}})],On.prototype,"maskIsAlpha",void 0),p([b({json:{write:!0}})],On.prototype,"pixels",void 0),p([b()],On.prototype,"premultiplyAlpha",void 0),p([b({json:{write:!0}})],On.prototype,"statistics",void 0),p([b({json:{write:!0}})],On.prototype,"depthCount",void 0),p([b({json:{write:!0}})],On.prototype,"noDataValues",void 0),p([b({json:{write:!0}})],On.prototype,"bandMasks",void 0),On=Gl=p([L("esri.layers.support.PixelBlock")],On);const ee=On;var X1,Q1;(function(e){e[e.matchAny=0]="matchAny",e[e.matchAll=1]="matchAll"})(X1||(X1={})),function(e){e[e.bestMatch=0]="bestMatch",e[e.fail=1]="fail"}(Q1||(Q1={}));const to=6;function dt(e){return e!=null&&e.declaredClass==="esri.layers.support.PixelBlock"&&e.pixels&&e.pixels.length>0}function _oe(e){var u;if(!(e!=null&&e.length)||e.some(h=>!dt(h)))return null;if(e.length===1)return((u=e[0])==null?void 0:u.clone())??null;const t=e,{width:n,height:r,pixelType:i}=t[0];if(t.some(h=>h.width!==n||h.height!==r))return null;const s=t.map(({mask:h})=>h).filter(h=>h!=null);let o=null;s.length&&(o=new Uint8Array(n*r),o.set(s[0]),s.length>1&&K9(s.slice(1),o));const a=[];t.forEach(({pixels:h})=>a.push(...h));const l=t.map(({statistics:h})=>h).filter(h=>h==null?void 0:h.length),c=[];return l.forEach(h=>c.push(...h)),new ee({pixelType:i,width:n,height:r,mask:o,pixels:a,statistics:c.length?c:null})}function nd(e){if(!e)return;const t=e.colormap;if(!t||t.length===0)return;const n=t.sort((h,f)=>h[0]-f[0]);let r=0;n[0][0]<0&&(r=n[0][0]);const i=Math.max(256,n[n.length-1][0]-r+1),s=new Uint8Array(4*i),o=[];let a,l=0,c=0;const u=n[0].length===5;if(i>65536)return n.forEach(h=>{o[h[0]-r]=u?h.slice(1):h.slice(1).concat([255])}),{indexed2DColormap:o,offset:r,alphaSpecified:u};if(e.fillUnspecified)for(a=n[c],l=a[0]-r;l<i;l++)s[4*l]=a[1],s[4*l+1]=a[2],s[4*l+2]=a[3],s[4*l+3]=u?a[4]:255,l===a[0]-r&&(a=c===n.length-1?a:n[++c]);else for(l=0;l<n.length;l++)a=n[l],c=4*(a[0]-r),s[c]=a[1],s[c+1]=a[2],s[c+2]=a[3],s[c+3]=u?a[4]:255;return{indexedColormap:s,offset:r,alphaSpecified:u}}function Yw(e,t){if(!dt(e)||!t||!t.indexedColormap&&!t.indexed2DColormap)return e;const n=e.clone(),r=n.pixels;let i=n.mask;const s=n.width*n.height;if(r.length!==1)return e;const{indexedColormap:o,indexed2DColormap:a,offset:l,alphaSpecified:c}=t;let u=0;const h=r[0],f=new Uint8Array(h.length),d=new Uint8Array(h.length),g=new Uint8Array(h.length);let y,w=0;if(o){const v=o.length-1;if(i!=null)for(u=0;u<s;u++)i[u]&&(w=4*(h[u]-l),w<l||w>v?i[u]=0:(f[u]=o[w],d[u]=o[w+1],g[u]=o[w+2],i[u]=o[w+3]));else{for(i=new Uint8Array(s),u=0;u<s;u++)w=4*(h[u]-l),w<l||w>v?i[u]=0:(f[u]=o[w],d[u]=o[w+1],g[u]=o[w+2],i[u]=o[w+3]);n.mask=i}}else if(a)if(i!=null)for(u=0;u<s;u++)i[u]&&(y=a[h[u]],f[u]=y[0],d[u]=y[1],g[u]=y[2],i[u]=y[3]);else{for(i=new Uint8Array(s),u=0;u<s;u++)y=a[h[u]],f[u]=y[0],d[u]=y[1],g[u]=y[2],i[u]=y[3];n.mask=i}return n.pixels=[f,d,g],n.statistics=null,n.pixelType="u8",n.maskIsAlpha=c,n}function g0(e,t){if(!dt(e))return null;const{pixels:n,mask:r}=e,i=n.length;let s=t.lut;const{offset:o}=t;s&&s[0].length===1&&(s=n.map(()=>s));const a=[],l=t.outputPixelType||"u8";for(let u=0;u<i;u++){const h=K$(n[u],r,s[u],o||0,l);a.push(h)}const c=new ee({width:e.width,height:e.height,pixels:a,mask:r,pixelType:l});return c.updateStatistics(),c}function K$(e,t,n,r,i){const s=e.length,o=ee.createEmptyBand(i,s);if(t)for(let a=0;a<s;a++)t[a]&&(o[a]=n[e[a]-r]);else for(let a=0;a<s;a++)o[a]=n[e[a]-r];return o}function Moe(e,t){if(!dt(e))return null;const n=e.clone(),{pixels:r}=n,i=n.width*n.height,s=t.length,o=Math.floor(s/2),a=t[Math.floor(o)],l=r[0];let c,u,h,f,d,g,y=!1;const w=new Uint8Array(i),v=new Uint8Array(i),x=new Uint8Array(i);let S=n.mask;const _=t[0].mappedColor.length===4;for(S||(S=new Uint8Array(i),S.fill(_?255:1),n.mask=S),d=0;d<i;d++)if(S[d]){for(c=l[d],y=!1,g=o,u=a,h=0,f=s-1;f-h>1;){if(c===u.value){y=!0;break}c>u.value?h=g:f=g,g=Math.floor((h+f)/2),u=t[Math.floor(g)]}y||(c===t[h].value?(u=t[h],y=!0):c===t[f].value?(u=t[f],y=!0):c<t[h].value?(y=!1,u=null):c>t[h].value&&(c<t[f].value?(u=t[h],y=!0):f===s-1?(y=!1,u=null):(u=t[f],y=!0))),y?(w[d]=u.mappedColor[0],v[d]=u.mappedColor[1],x[d]=u.mappedColor[2],S[d]=u.mappedColor[3]):w[d]=v[d]=x[d]=S[d]=0}return n.pixels=[w,v,x],n.mask=S,n.pixelType="u8",n.maskIsAlpha=_,n}function $oe(e,t){if(!dt(e))return null;const{width:n,height:r}=e,{inputRanges:i,outputValues:s,outputPixelType:o,noDataRanges:a,allowUnmatched:l,isLastInputRangeInclusive:c}=t,u=e.pixels[0],h=ee.createEmptyBand(o,u.length),f=e.mask,d=new Uint8Array(n*r);f?d.set(f):d.fill(255);const g=e.pixelType.startsWith("f")?1e-6:0,y=i.map(_=>_-g);y[0]=i[0],y[y.length-1]=i[i.length-1]+(c?1e-6:0);const w=i.length/2,[v,x]=As(o);for(let _=0;_<r;_++)for(let M=0;M<n;M++){const $=_*n+M;if(d[$]){const T=u[$];let A=!1;for(let I=w-1;I>=0;I--)if(T===y[2*I]||T>y[2*I]&&T<y[2*I+1]){h[$]=s[I],A=!0;break}A||(l?h[$]=T>x?x:T<v?v:T:d[$]=0)}}const S=a==null?void 0:a.length;if(S)for(let _=0;_<r;_++)for(let M=0;M<n;M++){const $=_*n+M;if(!f||f[$]){const T=u[$];for(let A=0;A<S;A+=2)if(T>=a[A]&&T<=a[A+1]){h[$]=0,d[$]=0;break}}}return new ee({width:n,height:r,pixelType:o,pixels:[h],mask:d})}function tk(e,t,n,r){const i=n!=null&&n.length>=2?new Set(n):null,s=(n==null?void 0:n.length)===1?n[0]:null,o=!!(t!=null&&t.length);for(let a=0;a<e.length;a++)if(r[a]){const l=e[a];if(o){let c=!1;for(let u=0;u<t.length;u+=2)if(l>=t[u]&&l<=t[u+1]){c=!0;break}c||(r[a]=0)}r[a]&&(l===s||i!=null&&i.has(l))&&(r[a]=0)}}function nk(e,t){const n=e[0].length;for(let r=0;r<n;r++)if(t[r]){let i=!1;for(let s=0;s<e.length;s++)if(e[s][r]){i=!0;break}i||(t[r]=0)}}function K9(e,t){const n=e[0].length;for(let r=0;r<n;r++)if(t[r]){let i=!1;for(let s=0;s<e.length;s++)if(e[s][r]===0){i=!0;break}i&&(t[r]=0)}}function Toe(e,t){if(!dt(e))return null;const{width:n,height:r,pixels:i}=e,s=n*r,o=new Uint8Array(s);e.mask?o.set(e.mask):o.fill(255);const a=i.length,{includedRanges:l,noDataValues:c,outputPixelType:u,matchAll:h,lookups:f}=t;if(f){const d=[];for(let g=0;g<a;g++){const y=f[g],w=K$(i[g],o,y.lut,y.offset||0,"u8");d.push(w)}d.length===1?o.set(d[0]):h?nk(d,o):K9(d,o)}else if(h){const d=[];for(let g=0;g<a;g++){const y=new Uint8Array(s);y.set(o),tk(i[g],l==null?void 0:l.slice(2*g,2*g+2),c==null?void 0:c[g],y),d.push(y)}d.length===1?o.set(d[0]):nk(d,o)}else for(let d=0;d<a;d++)tk(i[d],l==null?void 0:l.slice(2*d,2*d+2),c==null?void 0:c[d],o);return new ee({width:n,height:r,pixelType:u,pixels:i,mask:o})}function Aoe(e){const{srcPixelType:t,inputRanges:n,outputValues:r,allowUnmatched:i,noDataRanges:s,isLastInputRangeInclusive:o,outputPixelType:a}=e;if(t!=="u8"&&t!=="s8"&&t!=="u16"&&t!=="s16")return null;const l=t.includes("16")?65536:256,c=t.includes("s")?-l/2:0,u=ee.createEmptyBand(a,l),h=new Uint8Array(l);i&&h.fill(255);const[f,d]=As(a);if(n!=null&&n.length&&(r!=null&&r.length)){const y=n.map(w=>w-1e-6);y[0]=n[0],o&&(y[y.length-1]=n[n.length-1]);for(let w=0;w<y.length;w++){const v=r[w]>d?d:r[w]<f?f:r[w],x=Math.ceil(y[2*w]-c),S=Math.floor(y[2*w+1]-c);for(let _=x;_<=S;_++)u[_]=v,h[_]=255}}if(s!=null&&s.length)for(let g=0;g<s.length;g++){const y=Math.ceil(s[2*g]-c),w=Math.floor(s[2*g+1]-c);for(let v=y;v<=w;v++)h[v]=0}return{lut:u,offset:c,mask:h}}function Ioe(e,t,n){if(e!=="u8"&&e!=="s8"&&e!=="u16"&&e!=="s16")return null;const r=e.includes("16")?65536:256,i=e.includes("s")?-r/2:0,s=new Uint8Array(r);if(t)for(let o=0;o<t.length;o++){const a=Math.ceil(t[2*o]-i),l=Math.floor(t[2*o+1]-i);for(let c=a;c<=l;c++)s[c]=255}else s.fill(255);if(n)for(let o=0;o<n.length;o++)s[n[o]-i]=0;return{lut:s,offset:i}}function koe(e,t,n,r,i,s,o,a){return{xmin:i<=n*e?0:i<n*e+e?i-n*e:e,ymin:s<=r*t?0:s<r*t+t?s-r*t:t,xmax:i+o<=n*e?0:i+o<n*e+e?i+o-n*e:e,ymax:s+a<=r*t?0:s+a<r*t+t?s+a-r*t:t}}function R5e(e,t){if(!e||e.length===0)return null;const n=e.find(g=>g.pixelBlock);if((n==null?void 0:n.pixelBlock)==null)return null;const r=(n.extent.xmax-n.extent.xmin)/n.pixelBlock.width,i=(n.extent.ymax-n.extent.ymin)/n.pixelBlock.height,s=.01*Math.min(r,i),o=e.sort((g,y)=>Math.abs(g.extent.ymax-y.extent.ymax)>s?y.extent.ymax-g.extent.ymax:Math.abs(g.extent.xmin-y.extent.xmin)>s?g.extent.xmin-y.extent.xmin:0),a=Math.min.apply(null,o.map(g=>g.extent.xmin)),l=Math.min.apply(null,o.map(g=>g.extent.ymin)),c=Math.max.apply(null,o.map(g=>g.extent.xmax)),u=Math.max.apply(null,o.map(g=>g.extent.ymax)),h={x:Math.round((t.xmin-a)/r),y:Math.round((u-t.ymax)/i)},f={width:Math.round((c-a)/r),height:Math.round((u-l)/i)},d={width:Math.round((t.xmax-t.xmin)/r),height:Math.round((t.ymax-t.ymin)/i)};return Math.round(f.width/n.pixelBlock.width)*Math.round(f.height/n.pixelBlock.height)!==o.length||h.x<0||h.y<0||f.width<d.width||f.height<d.height?null:{extent:t,pixelBlock:Cy(o.map(g=>g.pixelBlock),f,{clipOffset:h,clipSize:d})}}function Kw(e,t,n,r,i,s){const{width:o,height:a}=n.block,{x:l,y:c}=n.offset,{width:u,height:h}=n.mosaic,f=koe(o,a,r,i,l,c,u,h);let d=0,g=0;if(s){const y=s.hasGCSSShiftTransform?360:s.halfWorldWidth??0,w=o*s.resolutionX,v=s.startX+r*w;v<y&&v+w>y?g=s.rightPadding:v>=y&&(d=s.leftMargin-s.rightPadding,g=0)}if(f.xmax-=g,typeof t!="number")for(let y=f.ymin;y<f.ymax;y++){const w=(i*a+y-c)*u+(r*o-l)+d,v=y*o;for(let x=f.xmin;x<f.xmax;x++)e[w+x]=t[v+x]}else for(let y=f.ymin;y<f.ymax;y++){const w=(i*a+y-c)*u+(r*o-l)+d;for(let v=f.xmin;v<f.xmax;v++)e[w+v]=t}}function Cy(e,t,n={}){var E;const{clipOffset:r,clipSize:i,alignmentInfo:s,blockWidths:o}=n;if(o)return Eoe(e,t,{blockWidths:o});const a=e.find(O=>dt(O));if(a==null)return null;const l=i?i.width:t.width,c=i?i.height:t.height,u=a.width,h=a.height,f=t.width/u,d=t.height/h,g={offset:r||{x:0,y:0},mosaic:i||t,block:{width:u,height:h}},y=a.pixelType,w=ee.getPixelArrayConstructor(y),v=a.pixels.length,x=[];let S,_;for(let O=0;O<v;O++){_=new w(l*c);for(let P=0;P<d;P++)for(let j=0;j<f;j++){const V=e[P*f+j];dt(V)&&(S=V.pixels[O],Kw(_,S,g,j,P,s))}x.push(_)}const M=e.some(O=>O==null||O.mask!=null&&O.mask.length>0),$=e.some(O=>(O==null?void 0:O.bandMasks)&&O.bandMasks.length>1),T=M?new Uint8Array(l*c):void 0,A=$?[]:void 0;if(T){for(let O=0;O<d;O++)for(let P=0;P<f;P++){const j=e[O*f+P],V=j!=null?j.mask:null;Kw(T,V??(j?255:0),g,P,O,s)}if(A)for(let O=0;O<v;O++){const P=new Uint8Array(l*c);for(let j=0;j<d;j++)for(let V=0;V<f;V++){const U=e[j*f+V],q=((E=U==null?void 0:U.bandMasks)==null?void 0:E[O])??(U==null?void 0:U.mask);Kw(P,q??(U?255:0),g,V,j,s)}A.push(P)}}const I=new ee({width:l,height:c,pixels:x,pixelType:y,bandMasks:A,mask:T});return I.updateStatistics(),I}function Eoe(e,t,n){var w;const r=e.find(v=>v!=null);if(r==null)return null;const i=e.some(v=>v==null||!!v.mask),{width:s,height:o}=t,a=i?new Uint8Array(s*o):null,{blockWidths:l}=n,c=[],u=r.getPlaneCount(),h=ee.getPixelArrayConstructor(r.pixelType);if(i)for(let v=0,x=0;v<e.length;x+=l[v],v++){const S=e[v];if(!dt(S))continue;const _=S.mask;for(let M=0;M<o;M++)for(let $=0;$<l[v];$++)a[M*s+$+x]=_==null?255:_[M*S.width+$]}const f=e.some(v=>(v==null?void 0:v.bandMasks)&&v.bandMasks.length>1),d=f?[]:void 0,g=s*o;for(let v=0;v<u;v++){const x=new h(g),S=f?new Uint8Array(g):void 0;for(let _=0,M=0;_<e.length;M+=l[_],_++){const $=e[_];if(!dt($))continue;const T=$.pixels[v];if(T!=null){for(let A=0;A<o;A++)for(let I=0;I<l[_];I++)x[A*s+I+M]=T[A*$.width+I];if(S){const A=((w=$.bandMasks)==null?void 0:w[v])??$.mask;for(let I=0;I<o;I++)for(let E=0;E<l[_];E++)S[I*s+E+M]=A?A[I*$.width+E]:255}}}c.push(x),d&&S&&d.push(S)}const y=new ee({width:s,height:o,mask:a,bandMasks:d,pixels:c,pixelType:r.pixelType});return y.updateStatistics(),y}function Coe(e,t,n){if(!dt(e))return null;const{width:r,height:i}=e,s=t.x,o=t.y,a=n.width+s,l=n.height+o;if(s<0||o<0||a>r||l>i||s===0&&o===0&&a===r&&l===i)return e;e.mask||(e.mask=new Uint8Array(r*i));const c=e.mask;for(let u=0;u<i;u++){const h=u*r;for(let f=0;f<r;f++)c[h+f]=u<o||u>=l||f<s||f>=a?0:1}return e.updateStatistics(),e}function Ooe(e){if(!dt(e))return null;const t=e.clone(),{width:n,height:r,pixels:i}=e,s=i[0],o=t.pixels[0],a=e.mask;for(let l=2;l<r-1;l++){const c=new Map;for(let h=l-2;h<l+2;h++)for(let f=0;f<4;f++){const d=h*n+f;rd(c,s[d],a?a[d]:1)}o[l*n]=rk(c),o[l*n+1]=o[l*n+2]=o[l*n];let u=3;for(;u<n-1;u++){let h=(l-2)*n+u+1;rd(c,s[h],a?a[h]:1),h=(l-1)*n+u+1,rd(c,s[h],a?a[h]:1),h=l*n+u+1,rd(c,s[h],a?a[h]:1),h=(l+1)*n+u+1,rd(c,s[h],a?a[h]:1),h=(l-2)*n+u-3,cg(c,s[h],a?a[h]:1),h=(l-1)*n+u-3,cg(c,s[h],a?a[h]:1),h=l*n+u-3,cg(c,s[h],a?a[h]:1),h=(l+1)*n+u-3,cg(c,s[h],a?a[h]:1),o[l*n+u]=rk(c)}o[l*n+u+1]=o[l*n+u]}for(let l=0;l<n;l++)o[l]=o[n+l]=o[2*n+l],o[(r-1)*n+l]=o[(r-2)*n+l];return t.updateStatistics(),t}function rk(e){if(e.size===0)return 0;let t=0,n=-1,r=0;const i=e.keys();let s=i.next();for(;!s.done;)r=e.get(s.value),r>t&&(n=s.value,t=r),s=i.next();return n}function cg(e,t,n){if(n===0)return;const r=e.get(t);r===1?e.delete(t):e.set(t,r-1)}function rd(e,t,n){n!==0&&e.set(t,e.has(t)?e.get(t)+1:1)}function Poe(e,t,n){let{x:r,y:i}=t;const{width:s,height:o}=n;if(r===0&&i===0&&o===e.height&&s===e.width)return e;const{width:a,height:l}=e,c=Math.max(0,i),u=Math.max(0,r),h=Math.min(r+s,a),f=Math.min(i+o,l);if(h<0||f<0||!dt(e))return null;r=Math.max(0,-r),i=Math.max(0,-i);const{pixels:d}=e,g=s*o,y=d.length,w=[];for(let _=0;_<y;_++){const M=d[_],$=ee.createEmptyBand(e.pixelType,g);for(let T=c;T<f;T++){const A=T*a;let I=(T+i-c)*s+r;for(let E=u;E<h;E++)$[I++]=M[A+E]}w.push($)}const v=new Uint8Array(g),x=e.mask;for(let _=c;_<f;_++){const M=_*a;let $=(_+i-c)*s+r;for(let T=u;T<h;T++)v[$++]=x?x[M+T]:1}const S=new ee({width:n.width,height:n.height,pixelType:e.pixelType,pixels:w,mask:v});return S.updateStatistics(),S}function Roe(e,t=!0){if(!dt(e))return null;const{pixels:n,width:r,height:i,mask:s,pixelType:o}=e,a=[],l=Math.round(r/2),c=Math.round(i/2),u=i-1,h=r-1;for(let d=0;d<n.length;d++){const g=n[d],y=ee.createEmptyBand(o,l*c);let w=0;for(let v=0;v<i;v+=2)for(let x=0;x<r;x+=2){const S=g[v*r+x];if(t){const _=x===h?S:g[v*r+x+1],M=v===u?S:g[v*r+x+r],$=x===h?M:v===u?_:g[v*r+x+r+1];y[w++]=(S+_+M+$)/4}else y[w++]=S}a.push(y)}let f=null;if(s!=null){f=new Uint8Array(l*c);let d=0;for(let g=0;g<i;g+=2)for(let y=0;y<r;y+=2){const w=s[g*r+y];if(t){const v=y===h?w:s[g*r+y+1],x=g===u?w:s[g*r+y+r],S=y===h?x:g===u?v:s[g*r+y+r+1];f[d++]=w*v*x*S?1:0}else f[d++]=w}}return new ee({width:l,height:c,pixelType:o,pixels:a,mask:f})}function Noe(e,t,n){if(!dt(e))return null;const{width:r,height:i}=t;let{width:s,height:o}=e;const a=new Map,l={x:0,y:0},c=n==null?1:1+n;let u=e;for(let h=0;h<c;h++){const f=Math.ceil(s/r),d=Math.ceil(o/i);for(let g=0;g<d;g++){l.y=g*i;for(let y=0;y<f;y++){l.x=y*r;const w=Poe(u,l,t);a.set(`${h}/${g}/${y}`,w)}}h<c-1&&(u=Roe(u)),s=Math.round(s/2),o=Math.round(o/2)}return a}function X9(e,t,n,r,i=0){const{width:s,height:o}=e,{width:a,height:l}=t,c=r.cols,u=r.rows,h=Math.ceil(a/c-.1/c),f=Math.ceil(l/u-.1/u);let d,g,y,w,v,x,S;const _=h*c,M=_*f*u,$=new Float32Array(M),T=new Float32Array(M),A=new Uint32Array(M),I=new Uint32Array(M);let E,O,P=0;for(let j=0;j<f;j++)for(let V=0;V<h;V++){d=12*(j*h+V),g=n[d],y=n[d+1],w=n[d+2],v=n[d+3],x=n[d+4],S=n[d+5];for(let U=0;U<u;U++){P=(j*u+U)*_+V*c,O=(U+.5)/u;for(let q=0;q<U;q++)E=(q+.5)/c,$[P+q]=(g*E+y*O+w)*s+i,T[P+q]=(v*E+x*O+S)*o+i,A[P+q]=Math.floor($[P+q]),I[P+q]=Math.floor(T[P+q])}d+=6,g=n[d],y=n[d+1],w=n[d+2],v=n[d+3],x=n[d+4],S=n[d+5];for(let U=0;U<u;U++){P=(j*u+U)*_+V*c,O=(U+.5)/u;for(let q=U;q<c;q++)E=(q+.5)/c,$[P+q]=(g*E+y*O+w)*s+i,T[P+q]=(v*E+x*O+S)*o+i,A[P+q]=Math.floor($[P+q]),I[P+q]=Math.floor(T[P+q])}}return{offsets_x:$,offsets_y:T,offsets_xi:A,offsets_yi:I,gridWidth:_}}function Doe(e,t){const{coefficients:n,spacing:r}=t,{offsets_x:i,offsets_y:s,gridWidth:o}=X9(e,e,n,{rows:r[0],cols:r[1]}),{width:a,height:l}=e,c=new Float32Array(a*l),u=180/Math.PI;for(let h=0;h<l;h++)for(let f=0;f<a;f++){const d=h*o+f,g=h===0?d:d-o,y=h===l-1?d:d+o,w=i[g]-i[y],v=s[y]-s[g];if(isNaN(w)||isNaN(v))c[h*a+f]=90;else{let x=Math.atan2(v,w)*u;x=(360+x)%360,c[h*a+f]=x}}return c}function Q9(e,t,n,r,i="nearest"){if(!dt(e))return null;i==="majority"&&(e=Ooe(e));const{pixels:s,mask:o,bandMasks:a,pixelType:l}=e,c=e.width,u=e.height,h=ee.getPixelArrayConstructor(l),f=s.length,{width:d,height:g}=t;let y=!1;for(let P=0;P<n.length;P+=3)n[P]===-1&&n[P+1]===-1&&n[P+2]===-1&&(y=!0);const{offsets_x:w,offsets_y:v,offsets_xi:x,offsets_yi:S,gridWidth:_}=X9({width:c,height:u},t,n,r,i==="majority"?.5:0);let M;const $=(P,j,V,U)=>{const q=P instanceof Float32Array||P instanceof Float64Array?0:.5;for(let C=0;C<g;C++){M=C*_;for(let R=0;R<d;R++){if(w[M]<0||v[M]<0)P[C*d+R]=0;else if(U)P[C*d+R]=j[x[M]+S[M]*c];else{const N=Math.floor(w[M]),D=Math.floor(v[M]),z=Math.ceil(w[M]),G=Math.ceil(v[M]),W=w[M]-N,K=v[M]-D;if(!V||V[N+D*c]&&V[z+D*c]&&V[N+G*c]&&V[z+G*c]){const oe=(1-W)*j[N+D*c]+W*j[z+D*c],Se=(1-W)*j[N+G*c]+W*j[z+G*c];P[C*d+R]=(1-K)*oe+K*Se+q}else P[C*d+R]=j[x[M]+S[M]*c]}M++}}},T=[];let A;const I=(a==null?void 0:a.length)===f,E=[];for(let P=0;P<f;P++){if(I){const j=new Uint8Array(d*g);$(j,a[P],a[P],!0),E.push(j)}A=new h(d*g),$(A,s[P],I?a[P]:o,i==="nearest"||i==="majority"),T.push(A)}const O=new ee({width:d,height:g,pixelType:l,pixels:T,bandMasks:I?E:void 0});if(o!=null)O.mask=new Uint8Array(d*g),$(O.mask,o,o,!0);else if(y){O.mask=new Uint8Array(d*g);for(let P=0;P<d*g;P++)O.mask[P]=w[P]<0||v[P]<0?0:1}return O.updateStatistics(),O}const bc=new Map;bc.set("meter-per-second",1),bc.set("kilometer-per-hour",.277778),bc.set("knots",.514444),bc.set("feet-per-second",.3048),bc.set("mile-per-hour",.44704);const c_=180/Math.PI,X$=5,Er=new Ne({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function Wb(e,t){return bc.get(e)/bc.get(t)||1}function eF(e){return(450-e)%360}function Q$(e,t="geographic"){const[n,r]=e,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n)*c_;return s=(360+s)%360,t==="geographic"&&(s=eF(s)),[i,s]}function tF(e,t="geographic"){let n=e[1];t==="geographic"&&(n=eF(n)),n%=360;const r=e[0];return[r*Math.cos(n/c_),r*Math.sin(n/c_)]}function Loe(e,t,n,r="geographic"){if(!dt(e)||n==null)return e;const i=t==="vector-magdir"?e.clone():e2(e,t),s=i.pixels[1];for(let o=0;o<s.length;o++)s[o]=r==="geographic"?(s[o]+n[o]+270)%360:(s[o]+360-n[o])%360;return t==="vector-magdir"?i:e2(i,"vector-magdir")}function e2(e,t,n="geographic",r=1){if(!dt(e))return e;const{pixels:i,width:s,height:o}=e,a=s*o,l=i[0],c=i[1],u=e.pixelType.startsWith("f")?e.pixelType:"f32",h=ee.createEmptyBand(u,a),f=ee.createEmptyBand(u,a);let d=0;for(let y=0;y<o;y++)for(let w=0;w<s;w++)t==="vector-uv"?([h[d],f[d]]=Q$([l[d],c[d]],n),h[d]*=r):([h[d],f[d]]=tF([l[d],c[d]],n),h[d]*=r,f[d]*=r),d++;const g=new ee({pixelType:u,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[h,f]});return g.updateStatistics(),g}function Foe(e,t,n=1){if(n===1||!dt(e))return e;const r=e.clone(),{pixels:i,width:s,height:o}=r,a=i[0],l=i[1];let c=0;for(let u=0;u<o;u++)for(let h=0;h<s;h++)t==="vector-uv"?(a[c]*=n,l[c]*=n):a[c]*=n,c++;return r.updateStatistics(),r}function N5e(e,t,n,r,i){if(i==null||!i.spatialReference.equals(e.spatialReference))return{extent:e,width:Math.round(t/r),height:Math.round(n/r),resolution:e.width/t};const s=i.xmin,o=i.ymax,a=(e.xmax-e.xmin)/t*r,l=(e.ymax-e.ymin)/n*r,c=(a+l)/2;return e.xmin=s+Math.floor((e.xmin-s)/a)*a,e.xmax=s+Math.ceil((e.xmax-s)/a)*a,e.ymin=o+Math.floor((e.ymin-o)/l)*l,e.ymax=o+Math.ceil((e.ymax-o)/l)*l,{extent:e,width:Math.round(e.width/a),height:Math.round(e.height/l),resolution:c}}const joe=nF(0,0,0);function nF(e=0,t=0,n=Math.PI,r=!0){r&&(n=(2*Math.PI-n)%(2*Math.PI));const i=r?-1:1,s=13*i,o=-7*i,a=-2*i,l=-16*i,c=21.75,[u,h]=xn(0,t+s,n,c),[f,d]=xn(e-5.5,t+o,n,c),[g,y]=xn(e+5.5,t+o,n,c),[w,v]=xn(e-1.5,t+a,n,c),[x,S]=xn(e+1.5,t+a,n,c),[_,M]=xn(e-1.5,t+l,n,c),[$,T]=xn(e+1.5,t+l,n,c);return[u,h,f,d,w,v,x,S,g,y,_,M,$,T]}function zoe(e=0,t=Math.PI,n=!0){n&&(t=(2*Math.PI-t)%(2*Math.PI));const r=10,i=n?-1:1,s=5*i,o=20*i,a=25*i,l=45,c=0,u=0,h=2,f=0,d=h*i,g=n?1:-1,y=r/2*g;let[w,v]=[c+y,u-o],[x,S]=[w+h*g,v],[_,M]=[x-f*g,S+d],[$,T]=[c-y,u-a],[A,I]=[$+f*g,T-d],E=Math.ceil(e/X$),O=Math.floor(E/10);E-=8*O;const P=[],j=[];for(let W=0;W<E/2;W++,O--){O<=0&&E%2==1&&W===(E-1)/2&&($=c,A=$+f*g,T=(T+v)/2,I=T-d);const[K,oe]=xn($,T,t,l);if(O>0){const[Se,Ee]=xn(x,T,t,l),[Ze,ye]=xn(w,v,t,l);P.push(Se),P.push(Ee),P.push(K),P.push(oe),P.push(Ze),P.push(ye)}else{const[Se,Ee]=xn(x,S,t,l),[Ze,ye]=xn(_,M,t,l),[de,$e]=xn(A,I,t,l);j.push(K),j.push(oe),j.push(de),j.push($e),j.push(Ze),j.push(ye),j.push(Se),j.push(Ee)}T+=s,v+=s,S+=s,M+=s,I+=s}const[V,U]=xn(c+y,u+o,t,l),q=(r/2+h)*g,[C,R]=xn(c+q,u+o,t,l),[N,D]=xn(c+y,u-a,t,l),[z,G]=xn(c+q,u-a,t,l);return{pennants:P,barbs:j,shaft:[V,U,C,R,N,D,z,G]}}function xn(e,t,n,r=1){const i=Math.sqrt(e*e+t*t)/r,s=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[i,(2*Math.PI+s-n)%(2*Math.PI)]}const ug=[0,1,3,6,10,16,21,27,33,40,47,55,63],Boe=[0,.5,1,1.5,2],Uoe=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function gl(e,t,n,r){const i=Wb(r||"knots",n);let s;for(s=1;s<t.length;s++)if(s===t.length-1){if(e<t[s]*i)break}else if(e<=t[s]*i)break;return Math.min(s-1,t.length-2)}function Voe(e,t,n,r,i){let s=0;switch(t){case"beaufort_kn":s=gl(e,ug,"knots",n);break;case"beaufort_km":s=gl(e,ug,"kilometer-per-hour",n);break;case"beaufort_ft":s=gl(e,ug,"feet-per-second",n);break;case"beaufort_m":s=gl(e,ug,"meter-per-second",n);break;case"classified_arrow":s=gl(e,i??[],r,n);break;case"ocean_current_m":s=gl(e,Boe,"meter-per-second",n);break;case"ocean_current_kn":s=gl(e,Uoe,"knots",n)}return s}function Goe(e,t){const{style:n,inputUnit:r,outputUnit:i,breakValues:s}=t,o=Er.fromJSON(r),a=Er.fromJSON(i),l=7*6,c=15;let u=0,h=0;const{width:f,height:d,mask:g}=e,y=e.pixels[0],w=e.pixels[1],v=g!=null?g.filter(M=>M>0).length:f*d,x=new Float32Array(v*l),S=new Uint32Array(c*v),_=t.invertDirection?nF(0,0,0,!1):joe;for(let M=0;M<d;M++)for(let $=0;$<f;$++){const T=M*f+$;if(!g||g[M*f+$]){const A=(w[T]+360)%360/180*Math.PI,I=Voe(y[T],n,o,a,s);for(let O=0;O<_.length;O+=2)x[u++]=($+.5)/f,x[u++]=(M+.5)/d,x[u++]=_[O],x[u++]=_[O+1]+A,x[u++]=I,x[u++]=y[T];const E=7*(u/l-1);S[h++]=E,S[h++]=E+1,S[h++]=E+2,S[h++]=E+0,S[h++]=E+4,S[h++]=E+3,S[h++]=E+0,S[h++]=E+2,S[h++]=E+3,S[h++]=E+2,S[h++]=E+5,S[h++]=E+3,S[h++]=E+5,S[h++]=E+6,S[h++]=E+3}}return{vertexData:x,indexData:S}}const Xw=[];function Woe(e,t){if(Xw.length===0)for(let d=0;d<30;d++)Xw.push(zoe(5*d,0,!t.invertDirection));const n=Wb(Er.fromJSON(t.inputUnit),"knots"),{width:r,height:i,mask:s}=e,o=e.pixels[0],a=e.pixels[1],l=6,c=[],u=[];let h=0,f=0;for(let d=0;d<i;d++)for(let g=0;g<r;g++){const y=d*r+g,w=o[y]*n;if((!s||s[d*r+g])&&w>=X$){const v=(a[y]+360)%360/180*Math.PI,{pennants:x,barbs:S,shaft:_}=Xw[Math.min(Math.floor(w/5),29)];if(x.length+S.length===0)continue;let M=c.length/l;const $=(g+.5)/r,T=(d+.5)/i;for(let A=0;A<x.length;A+=2)c[h++]=$,c[h++]=T,c[h++]=x[A],c[h++]=x[A+1]+v,c[h++]=0,c[h++]=w;for(let A=0;A<S.length;A+=2)c[h++]=$,c[h++]=T,c[h++]=S[A],c[h++]=S[A+1]+v,c[h++]=0,c[h++]=w;for(let A=0;A<_.length;A+=2)c[h++]=$,c[h++]=T,c[h++]=_[A],c[h++]=_[A+1]+v,c[h++]=0,c[h++]=w;for(let A=0;A<x.length/6;A++)u[f++]=M,u[f++]=M+1,u[f++]=M+2,M+=3;for(let A=0;A<S.length/8;A++)u[f++]=M,u[f++]=M+1,u[f++]=M+2,u[f++]=M+1,u[f++]=M+2,u[f++]=M+3,M+=4;u[f++]=M+0,u[f++]=M+1,u[f++]=M+2,u[f++]=M+1,u[f++]=M+3,u[f++]=M+2,M+=4}}return{vertexData:new Float32Array(c),indexData:new Uint32Array(u)}}function Hoe(e,t){let r=0,i=0;const{width:s,height:o,mask:a}=e,l=e.pixels[0],c=[],u=[],h=Wb(Er.fromJSON(t.inputUnit),"knots"),f=t.style==="wind_speed"?X$:Number.MAX_VALUE;for(let d=0;d<o;d++)for(let g=0;g<s;g++){const y=l[d*s+g]*h;if((!a||a[d*s+g])&&y<f){for(let v=0;v<4;v++)c[r++]=(g+.5)/s,c[r++]=(d+.5)/o,c[r++]=v<2?-.5:.5,c[r++]=v%2==0?-.5:.5,c[r++]=0,c[r++]=y;const w=4*(r/24-1);u[i++]=w,u[i++]=w+1,u[i++]=w+2,u[i++]=w+1,u[i++]=w+2,u[i++]=w+3}}return{vertexData:new Float32Array(c),indexData:new Uint32Array(u)}}function D5e(e,t){return t.style==="simple_scalar"?Hoe(e,t):t.style==="wind_speed"?Woe(e,t):Goe(e,t)}function L5e(e,t,n,r=[0,0],i=.5){const{width:s,height:o,mask:a}=e,[l,c]=e.pixels,[u,h]=r,f=Math.round((s-u)/n),d=Math.round((o-h)/n),g=f*d,y=new Float32Array(g),w=new Float32Array(g),v=new Uint8Array(g),x=t==="vector-uv";for(let _=0;_<d;_++)for(let M=0;M<f;M++){let $=0;const T=_*f+M,A=Math.max(0,_*n+h),I=Math.max(0,M*n+u),E=Math.min(o,A+n),O=Math.min(s,I+n);for(let P=A;P<E;P++)for(let j=I;j<O;j++){const V=P*s+j;if(!a||a[V]){$++;const U=x?[l[V],c[V]]:[l[V],(360+c[V])%360],[q,C]=x?U:tF(U);y[T]+=q,w[T]+=C}}if($>=(E-A)*(O-I)*(1-i)){v[T]=1;const[P,j]=Q$([y[T]/$,w[T]/$]);y[T]=P,w[T]=j}else v[T]=0,y[T]=0,w[T]=0}const S=new ee({width:f,height:d,pixels:[y,w],mask:v});return S.updateStatistics(),S}function qoe(e){return typeof e=="function"}function F5e(e,t,n,r){return qoe(e)?e(t,n,r):e}function j5e(e){return[e.r,e.g,e.b,e.a]}const Joe=` /-,
`;function ik(e){let t=e.length;for(;t--;)if(!Joe.includes(e.charAt(t)))return!1;return!0}function Zoe(e,t){const n=[];let r=0,i=-1;do if(i=e.indexOf("[",r),i>=r){if(i>r){const s=e.substr(r,i-r);n.push([s,null,ik(s)])}if(r=i+1,i=e.indexOf("]",r),i>=r){if(i>r){const s=t[e.substr(r,i-r)];s&&n.push([null,s,!1])}r=i+1}}while(i!==-1);if(r<e.length-1){const s=e.substr(r);n.push([s,null,ik(s)])}return n}function Yoe(e,t,n){let r="",i=null;for(const s of t){const[o,a,l]=s;if(o)l?i=o:(i&&(r+=i,i=null),r+=o);else{const c=e.attributes[a];c&&(i&&(r+=i,i=null),r+=c)}}return Koe(r,n)}function z5e(e,t,n){const r=Zoe(t,e);return i=>Yoe(i,r,n)}function Koe(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function B5e(e,t,n,r,i,s,o=!0){const a=t/i,l=n/s,c=Math.ceil(a/2),u=Math.ceil(l/2);for(let h=0;h<s;h++)for(let f=0;f<i;f++){const d=4*(f+(o?s-h-1:h)*i);let g=0,y=0,w=0,v=0,x=0,S=0,_=0;const M=(h+.5)*l;for(let $=Math.floor(h*l);$<(h+1)*l;$++){const T=Math.abs(M-($+.5))/u,A=(f+.5)*a,I=T*T;for(let E=Math.floor(f*a);E<(f+1)*a;E++){let O=Math.abs(A-(E+.5))/c;const P=Math.sqrt(I+O*O);P>=-1&&P<=1&&(g=2*P*P*P-3*P*P+1,g>0&&(O=4*(E+$*t),_+=g*e[O+3],w+=g,e[O+3]<255&&(g=g*e[O+3]/250),v+=g*e[O],x+=g*e[O+1],S+=g*e[O+2],y+=g))}}r[d]=v/y,r[d+1]=x/y,r[d+2]=S/y,r[d+3]=_/w}}function rF(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function iF(e){var t;return((t=e.data)==null?void 0:t.symbol)??null}function u_(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function h_(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function Xoe(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function t2(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const U5e=(e,t=0)=>e==null||isNaN(e)?t:e,V5e=e=>e.tintColor?rF(e.tintColor):{r:255,g:255,b:255,a:1},G5e=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function W5e(){return ne(()=>import("./geometryEngineJSON-1bbfc398.js"),["assets/geometryEngineJSON-1bbfc398.js","assets/geometryEngineBase-dfbd3a67.js","assets/geometryEngineJSON-53aa2407.js","assets/json-48e3ea08.js"])}function H5e(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function q5e(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function J5e(e){let t="normal",n="normal";if(e){const r=e.toLowerCase();r.includes("italic")?t="italic":r.includes("oblique")&&(t="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:t,weight:n}}function Z5e(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function sk(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const n=sk(t);if(n!=null)return n}break;case"CIMTextSymbol":return sk(e.symbol);case"CIMSolidFill":return e.color}}function ok(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const n of t){const r=ok(n);if(r!=null)return r}break}case"CIMTextSymbol":return ok(e.symbol);case"CIMSolidStroke":return e.color}}function ak(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const n=ak(t);if(n!==void 0)return n}break;case"CIMTextSymbol":return ak(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function Y5e(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function K5e(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function X5e(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Q5e=e=>e.includes("data:image/svg+xml");function eMe(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function sF(e,t,n,r){if(e)if(e.type!=="CIMTextSymbol"){if(n&&e.effects)for(const i of e.effects)tae(i,t);if(e.symbolLayers)for(const i of e.symbolLayers)switch(i.type){case"CIMPictureMarker":case"CIMVectorMarker":Qoe(i,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!(r!=null&&r.preserveOutlineWidth)&&i.width&&(i.width*=t);break;case"CIMPictureFill":i.height&&(i.height*=t),i.offsetX&&(i.offsetX*=t),i.offsetY&&(i.offsetY*=t);break;case"CIMHatchFill":sF(i.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),i.offsetX&&(i.offsetX*=t),i.offsetY&&(i.offsetY*=t),i.separation&&(i.separation*=t)}}else e.height!=null&&(e.height*=t)}function Qoe(e,t,n){if(e&&(e.markerPlacement&&eae(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=e.size!=null?e.size*t:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||sF(r.symbol,t,!0,n)}function eae(e,t){switch(t2(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map(r=>r*t);e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map(r=>r*t);e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function tae(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map(r=>r*t);e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function oF(e){const t=[];return f_(iF(e),t),t.length?new fe(rF(t[0])):null}function f_(e,t){var i;if(!e)return;let n;n=e.type==="CIMTextSymbol"?e.symbol:e;const r=e.type==="CIMPolygonSymbol";if(n!=null&&n.symbolLayers){for(const s of n.symbolLayers)if(!(s.colorLocked||r&&(h_(s)||u_(s)&&s.markerPlacement&&t2(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&lk(t,s.tintColor);break;case"CIMVectorMarker":(i=s.markerGraphics)==null||i.forEach(o=>{f_(o.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":lk(t,s.color);break;case"CIMHatchFill":f_(s.lineSymbol,t)}}}function lk(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function tMe(e,t,n){t instanceof fe||(t=new fe(t));const r=iF(e);r&&d_(r,t,n)}function d_(e,t,n){var s;if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const i=(r==null?void 0:r.type)==="CIMPolygonSymbol";if(r!=null&&r.symbolLayers)for(const o of r.symbolLayers){if(o.colorLocked)continue;if(i){if(n){const{layersToColor:l}=n;if((h_(o)||u_(o)&&o.markerPlacement&&t2(o.markerPlacement))&&l==="fill"||Xoe(o)&&l==="outline")continue}else if(h_(o)||u_(o)&&o.markerPlacement&&t2(o.markerPlacement))continue}const a=t.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach(l=>{d_(l.symbol,t,n)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMHatchFill":d_(o.lineSymbol,t,n)}}}const Qw=-3;var Zs;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(Zs||(Zs={}));let nMe=class{constructor(t,n,r){this.name=t,this._storage=n,this.id=rae+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(t,n,r,i=0){this._storage.put(this,t,n,r,i)}get(t){const n=this._storage.get(this,t);return n===void 0?++this._miss:++this._hit,n}peek(t){return this._storage.peek(this,t)}pop(t){const n=this._storage.pop(this,t);return n===void 0?++this._miss:++this._hit,n}updateSize(t,n,r){this._storage.updateSize(this,t,n,r)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},nae=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Yh,this._users=new Yh}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,n){this._removeFuncs.push([t,n])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(n=>n[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimits()}put(t,n,r,i,s){n=t.id+n;const o=this._db.get(n);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(n),o.entry!==r&&this._notifyRemove(n,o.entry,Zs.ALL)),i>this._maxSize)return void this._notifyRemove(n,r,Zs.ALL);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return console.warn(`Refusing to cache entry with size ${i} for key ${n}`),void this._notifyRemove(n,r,Zs.ALL);const a=1+Math.max(s,Qw)-Qw;this._db.set(n,{entry:r,size:i,lifetime:a,lives:a}),this._size+=i,t.size+=i,this._checkSizeLimits()}updateSize(t,n,r,i){n=t.id+n;const s=this._db.get(n);if(s&&s.entry===r){for(this._size-=s.size,t.size-=s.size;i>this._maxSize;){const o=this._notifyRemove(n,r,Zs.SOME);if(!(o!=null&&o>0))return void this._db.delete(n);i=o}s.size=i,this._size+=i,t.size+=i,this._checkSizeLimits()}}pop(t,n){n=t.id+n;const r=this._db.get(n);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(n),++this._hit,r.entry;++this._miss}get(t,n){n=t.id+n;const r=this._db.get(n);if(r!==void 0)return this._db.delete(n),r.lives=r.lifetime,this._db.set(n,r),++this._hit,r.entry;++this._miss}peek(t,n){const r=this._db.get(t.id+n);return r?++this._hit:++this._miss,r==null?void 0:r.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},r=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;r[l]=(r[l]||0)+o.size,this._users.forAll(c=>{const{id:u,name:h}=c;if(a.startsWith(u)){const f=n[h]||0;n[h]=f+o.size}})});const i={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=n[a]||0;n[a]=l,i[a]=Math.round(100*o.hitRate)+"%"}else i[a]="0%"});const s=Object.keys(n);s.sort((o,a)=>n[a]-n[o]),s.forEach(o=>t[o]=Math.round(n[o]/2**20)+"MB / "+i[o]);for(let o=r.length-1;o>=0;--o){const a=r[o];a&&(t["Priority "+(o+Qw-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const n=t.id;this._db.forEach((r,i)=>{i.startsWith(n)&&(this._size-=r.size,this._db.delete(i),this._notifyRemove(i,r.entry,Zs.ALL))}),t.size=0}clearAll(){this._db.forEach((t,n)=>this._notifyRemove(n,t.entry,Zs.ALL)),this._users.forEach(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,n,r){let i;return this._removeFuncs.some(s=>{if(t.startsWith(s[0])){const o=s[1](n,r);return typeof o=="number"&&(i=o),!0}return!1}),i}_checkSizeLimits(){if(this._size>this._maxSize){for(const[t,n]of this._db)if(this._purgeItem(t,n),this._size<=.9*this.maxSize)return}this._users.forEach(t=>{if(t.maxSize>0&&t.size>t.maxSize){for(const[n,r]of this._db)if(n.startsWith(t.id)&&(this._purgeItem(n,r,t),t.size<=.9*t.maxSize))return}})}_purgeItem(t,n,r=this._users.find(i=>t.startsWith(i.id))){if(this._db.delete(t),n.lives<=1){this._size-=n.size,r&&(r.size-=n.size);const i=this._notifyRemove(t,n.entry,Zs.SOME);i!=null&&i>0&&(this._size+=i,r&&(r.size+=i),n.lives=n.lifetime,n.size=i,this._db.set(t,n))}else--n.lives,this._db.set(t,n)}},rae=0,aF=class{constructor(t,n){this._storage=new nae,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),n&&this._storage.registerRemoveFunc("",n)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,n,r=1){this._storage.put(this,t,n,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}};const lF="picture-fill",cF="simple-fill",iae="simple-line",uF="simple-marker",sae="text",oae="cim",ev=new aF(1e3);function oMe(e){const t=e.style;let n=null;if(e)switch(e.type){case uF:t!=="cross"&&t!=="x"&&(n=e.color);break;case cF:t==="solid"?n=e.color:t!=="none"&&(n={type:"pattern",x:0,y:0,src:vu(`esri/symbols/patterns/${t}.png`),width:5,height:5});break;case lF:n={type:"pattern",src:e.url,width:Th(e.width)*e.xscale,height:Th(e.height)*e.yscale,x:Th(e.xoffset),y:Th(e.yoffset)};break;case sae:n=e.color;break;case oae:n=oF(e)}return n}function aMe(e,t){const n=e+"-"+t;return ev.get(n)!==void 0?Promise.resolve(ev.get(n)):He(e,{responseType:"image"}).then(r=>{const i=r.data,s=i.naturalWidth,o=i.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=t,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(i,0,0);const c=a.toDataURL();return ev.put(n,c),c})}function hF(e){if(!e)return null;let t=null;switch(e.type){case cF:case lF:case uF:t=hF(e.outline);break;case iae:{const n=Th(e.width);e.style!=null&&e.style!=="none"&&n!==0&&(t={color:e.color,style:aae(e.style),width:n,cap:e.cap,join:e.join==="miter"?Th(e.miterLimit):e.join});break}default:t=null}return t}const aae=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),lMe=new fe([128,128,128]),lae=new fe("white");function cae(e){var n,r;const t=(n=e.symbolLayers)==null?void 0:n.at(-1);if(t&&"outline"in t)return(r=t==null?void 0:t.outline)==null?void 0:r.size}function cMe(e){var t;if(!e)return 0;if(uu(e)){const n=cae(e);return n??0}return bo((t=hF(e))==null?void 0:t.width)}function uMe(e){if(e==null||!("symbolLayers"in e)||e.symbolLayers==null)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some(t=>t.type==="object");case"line-3d":return e.symbolLayers.some(t=>t.type==="path");case"polygon-3d":return e.symbolLayers.some(t=>t.type==="object"||t.type==="extrude");default:return!1}}function hMe(e){var t;return((t=e.resource)==null?void 0:t.href)??""}function fMe(e,t){if(!e)return null;let n=null;return uu(e)?n=uae(e):Cb(e)&&(n=e.type==="cim"?oF(e):e.color?new fe(e.color):null),n?y0(n,t):null}function uae(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach(r=>{var i;r.type==="object"&&((i=r.resource)!=null&&i.href)||(n=r.type==="water"?r.color:r.material?r.material.color:null)}),n?new fe(n):null}function y0(e,t){if(t==null||e==null)return e;const n=e.toRgba();return n[3]=n[3]*t,new fe(n)}function hae(e,t,n){const r=e.symbolLayers;if(!r)return;const i=s=>y0(t=t??s??(n!=null?lae:null),n);r.forEach(s=>{var o,a;if(s.type!=="object"||!((o=s.resource)!=null&&o.href)||t)if(s.type==="water")s.color=i(s.color);else{const l=s.material!=null?s.material.color:null,c=i(l);s.material==null?s.material=new Lr({color:c}):s.material.color=c,n!=null&&"outline"in s&&((a=s.outline)==null?void 0:a.color)!=null&&(s.outline.color=y0(s.outline.color,n))}})}function fae(e,t,n){var r;(t=t??e.color)&&(e.color=y0(t,n)),n!=null&&"outline"in e&&((r=e.outline)!=null&&r.color)&&(e.outline.color=y0(e.outline.color,n))}function dMe(e,t,n){e&&(t||n!=null)&&(t&&(t=new fe(t)),uu(e)?hae(e,t,n):Cb(e)&&fae(e,t,n))}async function dae(e,t){const n=e.symbolLayers;n&&await CG(n,async r=>pae(r,t))}async function pae(e,t){switch(e.type){case"extrude":gae(e,t);break;case"icon":case"line":case"text":mae(e,t);break;case"path":bae(e,t);break;case"object":await yae(e,t)}}function mae(e,t){const n=fF(t);n!=null&&(e.size=n)}function fF(e){for(const t of e)if(typeof t=="number")return t;return null}function gae(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function yae(e,t){const{resourceSize:n,symbolSize:r}=await wae(e),i=dF(t,n,r);e.width=Lp(t[0],r[0],n[0],i),e.depth=Lp(t[1],r[1],n[1],i),e.height=Lp(t[2],r[2],n[2],i)}function bae(e,t){const n=dF(t,L6,[e.width,void 0,e.height]);e.width=Lp(t[0],e.width,1,n),e.height=Lp(t[2],e.height,1,n)}function dF(e,t,n){for(let r=0;r<3;r++){const i=e[r];switch(i){case"symbol-value":{const s=n[r];return s!=null?s/t[r]:1}case"proportional":break;default:if(i&&t[r])return i/t[r]}}return 1}async function wae(e){const{computeObjectLayerResourceSize:t}=await ne(()=>import("./symbolLayerUtils-99abac24.js"),[]),n=await t(e,10),{width:r,height:i,depth:s}=e,o=[r,s,i];let a=1;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/n[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=n[l]*a);return{resourceSize:n,symbolSize:o}}function Lp(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return t??n;default:return e}}function vae(e,t){const n=fF(t);if(n!=null)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const r=e.width/e.height;r>1?(e.width=n,e.height=n*r):(e.width=n*r,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}async function xae(e,t){if(e&&t)return uu(e)?dae(e,t):void(Cb(e)&&vae(e,t))}function Sae(e,t,n){if(e&&t!=null)if(uu(e)){const r=e.symbolLayers;r&&r.forEach(i=>{if(i&&i.type==="object")switch(n){case"tilt":i.tilt=t;break;case"roll":i.roll=t;break;default:i.heading=t}})}else Cb(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}function pMe(e){if(!e)return null;const t=e.effects.filter(n=>n.type!=="bloom").map(n=>n.toJSON());return PS(t)}function mMe(e){return e!=null&&e.type==="polygon-3d"&&e.symbolLayers.some(t=>t.type==="extrude")}async function gMe(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}var p_;const ck=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),hg=new Ne({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),fg=new Ne({flow_from:"flow-from",flow_to:"flow-to"});let Pn=p_=class extends Bb(re){constructor(e){super(e),this.attributeField="Magnitude",this.flowRepresentation="flow-from",this.rotationType="arithmetic",this.style="single-arrow",this.symbolTileSize=50,this.type="vector-field"}readInputUnit(e,t){return ck.has(e)?Er.fromJSON(e):null}readOutputUnit(e,t){return ck.has(e)?Er.fromJSON(e):null}get styleRenderer(){const e=this.style,t=this.attributeField,n=this._createStyleRenderer(e);return n.field=t,n}get sizeVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="size"&&e.push(t);if(e.length===0){const t=new zb({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}get rotationVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="rotation"&&e.push(t);if(e.length===0){const t=new Fb({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}clone(){return new p_({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:J(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,n=[]){var f;const r=new Array,i=Wb(this.inputUnit,this.outputUnit),s=((f=this.rotationVariables[0])==null?void 0:f.rotationType)||this.rotationType,o=t?e2(e.pixelBlock,"vector-uv",s,i):Foe(e.pixelBlock,"vector-magdir",i);if(o==null)return r;const a=e.extent,l=o.mask!=null&&o.mask.length>0;let c=0;const u=(a.xmax-a.xmin)/o.width,h=(a.ymax-a.ymin)/o.height;for(let d=0;d<o.height;d++)for(let g=0;g<o.width;g++,c++){let y=new ce({x:a.xmin+g*u+u/2,y:a.ymax-d*h-h/2,spatialReference:a.spatialReference});y=(await Y9(y))[0];const w=n.some(v=>v.intersects(y));if((!l||o.mask[c])&&!w){const v={Magnitude:o.pixels[0][c],Direction:o.pixels[1][c]},x=new hu({geometry:{type:"point",x:y.x,y:y.y,spatialReference:a.spatialReference},attributes:v});x.symbol=this._getVisualVariablesAppliedSymbol(x),r.push(x)}}return r}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){var e;return(e=this.styleRenderer)==null?void 0:e.classBreakInfos}getDefaultSymbol(){var e;return(e=this.styleRenderer)==null?void 0:e.defaultSymbol}_getDefaultSymbol(e){return new Rf({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new Io({width:0}),size:20,color:e||new fe([0,92,230])})}_getVisualVariablesAppliedSymbol(e){var i,s;if(!e)return;const t=(s=(i=this.styleRenderer)==null?void 0:i.getSymbol(e))==null?void 0:s.clone(),n=this.sizeVariables,r=this.rotationVariables;if(n&&n.length&&this.sizeVariables.forEach(o=>xae(t,$9([o],e))),r&&r.length){const o=this.flowRepresentation==="flow-to"==(this.style==="ocean-current-kn"||this.style==="ocean-current-m")?0:180;e.attributes.Direction=e.attributes.Direction+o,this.rotationVariables.forEach(a=>Sae(t,V$(a,e),a.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new Vb(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const e=[0,1,3,6,10,16,21,27,33,40,47,55,63],t=[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]];return{defaultSymbol:this._getDefaultSymbol(new fe([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortMeterRenderer(){const e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],t=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]];return{defaultSymbol:this._getDefaultSymbol(new fe([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortFeetRenderer(){const e=this._getDefaultSymbol(new fe([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const n=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=3.28084;return t=t.map(i=>i*r),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,n)}}_createBeaufortMilesRenderer(){const e=this._getDefaultSymbol(new fe([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const n=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=2.23694;return t=t.map(i=>i*r),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,n)}}_createBeaufortKilometersRenderer(){const e=this._getDefaultSymbol(new fe([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const n=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],r=3.6;return t=t.map(i=>i*r),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,n)}}_createCurrentMeterRenderer(){const e=[0,.5,1,1.5,2],t=[[78,26,153],[179,27,26],[202,128,26],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new fe([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createCurrentKnotsRenderer(){const e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],t=[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new fe([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createClassifiedArrowRenderer(){var r;const e=this._getDefaultSymbol(new fe([56,168,0]));let t=[0,1e-6,3.5,7,10.5,14];if((r=this.sizeVariables)!=null&&r.length){const i=this.sizeVariables[0].minDataValue,s=this.sizeVariables[0].maxDataValue;if(i&&s){const o=(s-i)/5;t=Array.from(Array(6).keys()).map(a=>i+o*a)}}const n=[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]];return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,n)}}_createSimpleScalarRenderer(){return{defaultSymbol:Fc.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const e=Array.from(Array(31).keys()).map(i=>5*i),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],n=Fc.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),r=e.map((i,s)=>{let o;if(s!==e.length-1)if(s===0)o={minValue:i,maxValue:e[s+1],symbol:n};else{const a=Fc.fromJSON({type:"esriPMS",imageData:t[s].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});o={minValue:i,maxValue:e[s+1],symbol:a}}return new gf(o)});return{defaultSymbol:n,classBreakInfos:r}}_getClassBreaks(e,t){return t.map((n,r)=>new gf({minValue:e[r],maxValue:e[r+1],symbol:this._getDefaultSymbol(new fe(n))}))}};p([b({type:String,json:{write:!0}})],Pn.prototype,"attributeField",void 0),p([b({type:fg.apiValues,json:{type:fg.jsonValues,read:{reader:fg.read},write:{writer:fg.write}}})],Pn.prototype,"flowRepresentation",void 0),p([b({type:["geographic","arithmetic"],json:{write:!0}})],Pn.prototype,"rotationType",void 0),p([b({type:hg.apiValues,json:{type:hg.jsonValues,read:{reader:hg.read},write:{writer:hg.write}}})],Pn.prototype,"style",void 0),p([b({json:{write:!0}})],Pn.prototype,"symbolTileSize",void 0),p([b({type:Er.apiValues,json:{type:Er.jsonValues,write:{writer:Er.write}}})],Pn.prototype,"inputUnit",void 0),p([ge("inputUnit")],Pn.prototype,"readInputUnit",null),p([b({type:Er.apiValues,json:{type:Er.jsonValues,read:{reader:Er.read},write:{writer:Er.write}}})],Pn.prototype,"outputUnit",void 0),p([ge("outputUnit")],Pn.prototype,"readOutputUnit",null),p([pe({vectorField:"vector-field"})],Pn.prototype,"type",void 0),p([b({type:Vb})],Pn.prototype,"styleRenderer",null),p([b({type:zb})],Pn.prototype,"sizeVariables",null),p([b({type:Fb})],Pn.prototype,"rotationVariables",null),Pn=p_=p([L("esri.renderers.VectorFieldRenderer")],Pn);const e4=Pn,m_={key:"type",base:null,typeMap:{"unique-value":Y$,"class-breaks":Vb,"raster-colormap":J$,"raster-stretch":Z$,"vector-field":e4,"raster-shaded-relief":B9,flow:E9}},g_={...m_,typeMap:{...m_.typeMap}};delete g_.typeMap["vector-field"],delete g_.typeMap.flow;const _ae={uniqueValue:Y$,classBreaks:Vb,rasterStretch:Z$,rasterColormap:J$,vectorField:e4,rasterShadedRelief:B9,flowRenderer:E9};function Mae(e){return e&&_ae[e.type]||null}function $ae(e,t){if(!e)return null;if(e.type==="classBreaks"&&e.classificationMethod){const r=e.authoringInfo||{classificationMethod:""};r.classificationMethod=e.classificationMethod,e.authoringInfo=r}e.type==="vectorField"&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);const n=Mae(e);if(n){const r=new n;return r.read(e,t),r}return t!=null&&t.messages&&e&&t.messages.push(new Zc("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}const uk={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function Bc(e,t,n,r=Ja){const i=new Li(g$(r)),s=ve.fromJSDate(e,{zone:i}),o=n==="decades"||n==="centuries"?"year":pF(n);return n==="decades"&&(t*=10),n==="centuries"&&(t*=100),s.plus({[o]:t}).toJSDate()}function yMe(e,t,n="milliseconds"){const r=e.getTime(),i=kc(t,n,"milliseconds");return new Date(r+i)}function hk(e,t,n=Ja){const r=new Li(g$(n)),i=ve.fromJSDate(e,{zone:r});if(t==="decades"||t==="centuries"){const o=i.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=pF(t);return i.startOf(s).toJSDate()}function bMe(e,t,n="milliseconds"){const r=new Date(kc(t,n,"milliseconds"));return r.setUTCFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),r}function wMe(e,t="milliseconds"){const n=kc(e.getUTCHours(),"hours","milliseconds"),r=kc(e.getUTCMinutes(),"minutes","milliseconds"),i=kc(e.getUTCSeconds(),"seconds","milliseconds");return kc(n+r+i+e.getUTCMilliseconds(),"milliseconds",t)}function vMe(e,t){const n=new Date(e.getTime());return n.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n}function xMe(e){const t=new Date(0);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t}function kc(e,t,n){return e===0?0:e*uk[t]/uk[n]}function SMe(e){return e instanceof Date&&!isNaN(e.getTime())}function _Me(e,t){return e&&t?e.intersection(t):e||t}function pF(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var wi;let Ir=wi=class extends re{static get allTime(){return fk}static get empty(){return Tae}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(wi.allTime)}get isEmpty(){return this.equals(wi.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=(e==null?void 0:e.getTime())??null}clone(){return new wi({end:this.end,start:this.start})}equals(e){var s,o,a,l;if(!e)return!1;const t=((s=this.start)==null?void 0:s.getTime())??this.start,n=((o=this.end)==null?void 0:o.getTime())??this.end,r=((a=e.start)==null?void 0:a.getTime())??e.start,i=((l=e.end)==null?void 0:l.getTime())??e.end;return t===r&&n===i}expandTo(e,t=Ja){if(this.isEmpty||this.isAllTime)return this.clone();let n=this.start;n&&(n=hk(n,e,t));let r=this.end;if(r){const i=hk(r,e,t);r=r.getTime()===i.getTime()?i:Bc(i,1,e,t)}return new wi({start:n,end:r})}intersection(e){var a,l,c,u;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return wi.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=((a=this.start)==null?void 0:a.getTime())??-1/0,n=((l=this.end)==null?void 0:l.getTime())??1/0,r=((c=e.start)==null?void 0:c.getTime())??-1/0,i=((u=e.end)==null?void 0:u.getTime())??1/0;let s,o;if(r>=t&&r<=n?s=r:t>=r&&t<=i&&(s=t),n>=r&&n<=i?o=n:i>=t&&i<=n&&(o=i),s!=null&&o!=null&&!isNaN(s)&&!isNaN(o)){const h=new wi;return h.start=s===-1/0?null:new Date(s),h.end=o===1/0?null:new Date(o),h}return wi.empty}offset(e,t,n=Ja){if(this.isEmpty||this.isAllTime)return this.clone();const r=new wi,{start:i,end:s}=this;return i!=null&&(r.start=Bc(i,e,t,n)),s!=null&&(r.end=Bc(s,e,t,n)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return fk.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,n=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new wi({start:t,end:n})}};p([b({type:Date,json:{write:{allowNull:!0}}})],Ir.prototype,"end",void 0),p([ge("end")],Ir.prototype,"readEnd",null),p([xe("end")],Ir.prototype,"writeEnd",null),p([b({readOnly:!0,json:{read:!1}})],Ir.prototype,"isAllTime",null),p([b({readOnly:!0,json:{read:!1}})],Ir.prototype,"isEmpty",null),p([b({type:Date,json:{write:{allowNull:!0}}})],Ir.prototype,"start",void 0),p([ge("start")],Ir.prototype,"readStart",null),p([xe("start")],Ir.prototype,"writeStart",null),Ir=wi=p([L("esri.TimeExtent")],Ir);const fk=new Ir,Tae=new Ir({start:void 0,end:void 0}),ws=Ir,oi=(e=>e)(["operational-layers","basemap","ground"]);function Aae(e){return e.timeInfo!==void 0}async function MMe(e,t){var c;if(e.length===0)return ws.allTime;const n=e.filter(Aae);await Promise.all(n.map(u=>u.load({signal:t})));const r=[],i=[];for(const u of n)(u==null?void 0:u.type)!=="feature"&&(u==null?void 0:u.type)!=="map-image"||!((c=u.timeInfo)!=null&&c.hasLiveData)?i.push(u):r.push(u);const s=u=>u==null||u.isAllTime,o=i.map(u=>{var h;return(h=u.timeInfo)==null?void 0:h.fullTimeExtent});if(o.some(s))return ws.allTime;const a=r.map(async u=>{var f;const{timeExtent:h}=await u.fetchRecomputedExtents({signal:t});return h||((f=u.timeInfo)==null?void 0:f.fullTimeExtent)}),l=(await Promise.allSettled(a)).map(u=>u.status==="fulfilled"?u.value:null);return l.some(s)?ws.allTime:[...l,...o].filter(ja).reduce((u,h)=>u.union(h))}function Iae(e){if(!e)return e;const{start:t,end:n}=e;return new ws({start:t!=null?Bc(t,-t.getTimezoneOffset(),"minutes"):t,end:n!=null?Bc(n,-n.getTimezoneOffset(),"minutes"):n})}function kae(e){if(!e)return e;const{start:t,end:n}=e;return new ws({start:t!=null?Bc(t,t.getTimezoneOffset(),"minutes"):t,end:n!=null?Bc(n,n.getTimezoneOffset(),"minutes"):n})}const $Me={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:oi}}},TMe={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,n){t[n]=!e}}}},AMe={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:oi}}},mF={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:Ha}}},Eae={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:oi}}},IMe={value:null,type:o9,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:oi}}};function kMe(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const gF={write:{enabled:!0,layerContainerTypes:oi},read:!0},y_={type:Number,json:{origins:{"web-document":gF,"portal-item":{write:!0}}}},EMe={...y_,json:{...y_.json,origins:{"web-document":{...gF,write:{enabled:!0,layerContainerTypes:oi,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,n)=>{var r;return n&&n.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?(r=t.layerDefinition)!=null&&r.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?Y1(t.layerDefinition.drawingInfo.transparency):void 0:Y1(t.drawingInfo.transparency)}}}},CMe={type:ws,readOnly:!0,get(){var a,l;if(!((a=this.layer)!=null&&a.timeInfo))return null;const{datesInUnknownTimezone:e,timeOffset:t,useViewTime:n}=this.layer,r=(l=this.view)==null?void 0:l.timeExtent;let i=this.layer.timeExtent;e&&(i=kae(i));let s=n?r&&i?r.intersection(i):r||i:i;if(!s||s.isEmpty||s.isAllTime)return s;t&&(s=s.offset(-t.value,t.unit)),e&&(s=Iae(s));const o=this._get("timeExtent");return s.equals(o)?o:s}},OMe={type:Me,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const n=Me.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(n.spatialReference=we.fromJSON(t.spatialReference)),n}}}},read:!1}},PMe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},RMe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:oi}}},name:"layerDefinition.minScale",write:!0}},NMe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:oi}}},name:"layerDefinition.maxScale",write:!0}},Cae={json:{write:{ignoreOrigin:!0,layerContainerTypes:oi},origins:{"web-map":{read:!1,write:!1}}}};var b_;let Wl=b_=class extends re{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new b_({variableName:this.variableName,dimensionName:this.dimensionName,values:J(this.values),isSlice:this.isSlice})}};p([b({type:String,json:{write:!0}})],Wl.prototype,"variableName",void 0),p([b({type:String,json:{write:!0}})],Wl.prototype,"dimensionName",void 0),p([b({type:Ff.array(Ff.oneOf([Ff.native(Number),Ff.array(Ff.native(Number))])),json:{write:!0}})],Wl.prototype,"values",void 0),p([b({type:Boolean,json:{write:!0}})],Wl.prototype,"isSlice",void 0),Wl=b_=p([L("esri.layers.support.DimensionalDefinition")],Wl);const du=Wl;var w_;const Oae={base:xo,key:"type",typeMap:{extent:Me,polygon:ii}};let Hl=w_=class extends re{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Map;e.forEach(r=>{if(!r.dimensionName)return;let i,s;if(Array.isArray(r.values[0])){const o=r.values;i=o[0][0],s=o[r.values.length-1][1]}else{const o=r.values;i=o[0],s=o[r.values.length-1]}if(t.has(r.dimensionName)){const o=t.get(r.dimensionName);o[0]=Math.min(i,o[0]),o[1]=Math.max(s,o[1])}else t.set(r.dimensionName,[i,s])});const n=[];for(const r of t)n.push({name:r[0],extent:r[1]});return n}get variables(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Set;return e.forEach(n=>{n.variableName&&t.add(n.variableName)}),[...t]}clone(){var n;const e=(n=this.subsetDefinitions)==null?void 0:n.map(r=>r.clone()),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new w_({areaOfInterest:t,subsetDefinitions:e})}};p([b({types:Oae,json:{read:$f,write:!0}})],Hl.prototype,"areaOfInterest",void 0),p([b({readOnly:!0})],Hl.prototype,"dimensions",null),p([b({readOnly:!0})],Hl.prototype,"variables",null),p([b({type:[du],json:{write:!0}})],Hl.prototype,"subsetDefinitions",void 0),Hl=w_=p([L("esri.layers.support.MultidimensionalSubset")],Hl);const Pae=Hl,Rae=yn()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),DMe=yn()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),tv=yn()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});let ra=class extends re{constructor(){super(...arguments),this.pixelType="unknown"}};p([b({type:String,json:{write:!0}})],ra.prototype,"name",void 0),p([b({type:String,json:{write:!0}})],ra.prototype,"description",void 0),p([b({type:Be,json:{type:Be,write:!0,name:"_object_id"}})],ra.prototype,"id",void 0),p([b({type:String,json:{type:tv.jsonValues,read:tv.read,write:tv.write}})],ra.prototype,"pixelType",void 0),p([b({type:String,json:{write:!0}})],ra.prototype,"type",void 0),ra=p([L("esri.layers.support.RasterFunctionInfo")],ra);const Nae=ra;let Gs=class extends re{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type="RasterFunctionVariable"}};p([b({type:String,json:{write:!0}})],Gs.prototype,"name",void 0),p([b({type:Number,json:{type:Be,write:!0,name:"_object_id"}})],Gs.prototype,"id",void 0),p([b({type:Boolean,json:{write:!0}})],Gs.prototype,"isDataset",void 0),p([b({type:Boolean,json:{write:!0}})],Gs.prototype,"isPublic",void 0),p([b({json:{write:!0}})],Gs.prototype,"value",void 0),p([b({type:String,json:{write:!0}})],Gs.prototype,"type",void 0),Gs=p([L("esri.layers.support.RasterFunctionVariable")],Gs);const Dae=Gs,dg={key:"type",base:null,typeMap:{RasterFunctionVariable:Dae}};let ql=class extends re{};p([b({types:dg,json:{types:dg,name:"MatchVariable"}})],ql.prototype,"matchVariable",void 0),p([b({types:dg,json:{types:dg,name:"UnionDimension"}})],ql.prototype,"unionDimension",void 0),p([b({type:Number,json:{type:Be,write:!0,name:"_object_id"}})],ql.prototype,"id",void 0),p([b({type:String,json:{write:!0}})],ql.prototype,"type",void 0),ql=p([L("esri.layers.support.RasterFunctionProperties")],ql);const Lae=ql,nv=new Ne({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});let un=class extends re{constructor(){super(...arguments),this.functionType="mosaic",this.type="RasterFunctionTemplate"}};p([b({type:[String],json:{write:!0}})],un.prototype,"aliases",void 0),p([b({type:Object,json:{write:!0}})],un.prototype,"arguments",void 0),p([b({type:String,json:{write:!0}})],un.prototype,"description",void 0),p([b({type:Nae,json:{write:!0,name:"function"}})],un.prototype,"functionInfo",void 0),p([b({type:nv.apiValues,json:{type:[0,1,2],read:nv.read,write:nv.write}})],un.prototype,"functionType",void 0),p([b({type:String,json:{write:!0}})],un.prototype,"group",void 0),p([b({type:String,json:{write:!0}})],un.prototype,"help",void 0),p([b({type:Number,json:{type:Be,write:!0,name:"_object_id"}})],un.prototype,"id",void 0),p([b({type:String,json:{write:!0}})],un.prototype,"name",void 0),p([b({type:String,json:{write:!0,name:"definition"}})],un.prototype,"queryDefinition",void 0),p([b({type:String,json:{write:!0}})],un.prototype,"tag",void 0),p([b({type:Lae,json:{write:!0}})],un.prototype,"properties",void 0),p([b({type:String,json:{write:!0}})],un.prototype,"thumbnail",void 0),p([b({type:String,json:{write:!0}})],un.prototype,"thumbnailEx",void 0),p([b({json:{type:["RasterFunctionTemplate"],write:!0}})],un.prototype,"type",void 0),un=p([L("esri.layers.support.RasterFunctionTemplate")],un);const yF=un;var v_;const Oy=new Set(["raster","raster2","dem","fillraster"]),Py=new Set(["rasters"]),dk=e=>e!=null&&e.rasterFunction?Qn.fromJSON(e):e,rv=e=>e&&e instanceof Qn?e.toJSON():e,x_=e=>(e==null?void 0:e.functionName)&&!e.declaredClass,pk=e=>x_(e)?new Qn(e):e,Fae=e=>{if(e==null)return null;e=J(e);const t={};for(const n of Object.keys(e))Oy.has(n.toLowerCase())?t[n]=dk(e[n]):Py.has(n.toLowerCase())&&Array.isArray(e[n])?t[n]=e[n].map(dk):t[n]=e[n];return t},jae={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:yF}},json:{write:!0,name:"rasterFunctionDefinition"}};let Qn=v_=class extends re{constructor(e){super(e),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.functionDefinition=null}set functionArguments(e){if(e){const t=Object.keys(e);if(t.some(n=>Oy.has(n.toLowerCase())&&x_(e[n]))||t.some(n=>Py.has(n.toLowerCase())&&Array.isArray(e[n])&&e[n].some(r=>x_(r)))){e=J(e);for(const n of t)Oy.has(n.toLowerCase())?e[n]=pk(e[n]):Py.has(n.toLowerCase())&&Array.isArray(e[n])&&(e[n]=e[n].map(r=>pk(r)))}}this._set("functionArguments",e)}readFunctionArguments(e){return Fae(e)}writeFunctionArguments(e,t,n){const r={};for(const i of Object.keys(e))Oy.has(i.toLowerCase())?r[i]=rv(e[i]):Py.has(i.toLowerCase())&&Array.isArray(e[i])?r[i]=e[i].map(rv):r[i]=rv(e[i]);t[n]=r}readFunctionName(e,t){const n=t.rasterFunctionInfos;return t.name||(n!=null&&n.length&&n[0].name!=="None"?n[0].name:t.rasterFunctionDefinition?t.rasterFunctionDefinition.name:t.rasterFunction)}get rasterFunctionDefinition(){var e;return(e=this.functionDefinition)==null?void 0:e.toJSON()}set rasterFunctionDefinition(e){this.functionDefinition=e?yF.fromJSON(e):null}clone(){return new v_({functionName:this.functionName,functionArguments:J(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:J(this.rasterFunctionDefinition)})}};p([b({json:{type:Object,name:"rasterFunctionArguments"}})],Qn.prototype,"functionArguments",null),p([ge("functionArguments")],Qn.prototype,"readFunctionArguments",null),p([xe("functionArguments")],Qn.prototype,"writeFunctionArguments",null),p([b({json:{type:String,write:{target:"rasterFunction"}}})],Qn.prototype,"functionName",void 0),p([ge("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],Qn.prototype,"readFunctionName",null),p([pe({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),b({json:{default:"unknown"}})],Qn.prototype,"outputPixelType",void 0),p([b({type:String,json:{read:!0,write:!0}})],Qn.prototype,"variableName",void 0),p([b()],Qn.prototype,"rasterFunctionDefinition",null),p([b(jae)],Qn.prototype,"functionDefinition",void 0),Qn=v_=p([L("esri.layers.support.RasterFunction")],Qn);const pu=Qn;let zae=class{constructor(t=n=>n.values().next().value){this._peeker=t,this._observable=new IM,this._items=new Set}get length(){return _e(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return _e(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const n=this.length;return this._items.forEach(r=>{t(r)||this._items.delete(r)}),n!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){_e(this._observable),yield*this._items}};const bF=new FinalizationRegistry(e=>{e.close()});function Bae(e,t){bF.register(e,t,t)}function Uae(e){bF.unregister(e)}const Vae={statsWorker:()=>ne(()=>import("./statsWorker-c9d2a4a5.js"),["assets/statsWorker-c9d2a4a5.js","assets/utils-f54bcc46.js","assets/quantizationUtils-17105106.js","assets/heatmapUtils-7f42325f.js","assets/utils-1a995f8e.js","assets/basemapUtils-6ec10a55.js","assets/Basemap-8d62c69e.js","assets/loadAll-5e767cfa.js","assets/writeUtils-e226a8aa.js"]),geometryEngineWorker:()=>ne(()=>import("./geometryEngineWorker-9fe981de.js"),["assets/geometryEngineWorker-9fe981de.js","assets/geometryEngineJSON-53aa2407.js","assets/geometryEngineBase-dfbd3a67.js","assets/json-48e3ea08.js"]),CSVSourceWorker:()=>ne(()=>import("./CSVSourceWorker-444e403a.js"),["assets/CSVSourceWorker-444e403a.js","assets/date-294ce3fb.js","assets/json-48e3ea08.js","assets/OptimizedFeature-e90b69df.js","assets/OptimizedGeometry-196224d4.js","assets/FeatureStore-02a891a3.js","assets/featureConversionUtils-09cf00ff.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/BoundsStore-230a1891.js","assets/PooledRBush-fa11eac4.js","assets/quickselect-bc0541de.js","assets/QueryEngine-ee1ccbba.js","assets/WhereClause-41137be1.js","assets/TimeOnly-879c5107.js","assets/UnknownTimeZone-a05df022.js","assets/projectionSupport-dcf335fc.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-17105106.js","assets/utils-f54bcc46.js","assets/heatmapUtils-7f42325f.js","assets/utils-1a995f8e.js","assets/basemapUtils-6ec10a55.js","assets/Basemap-8d62c69e.js","assets/loadAll-5e767cfa.js","assets/writeUtils-e226a8aa.js","assets/SnappingCandidate-970faec6.js","assets/FieldsIndex-e8db657f.js","assets/Scheduler-ff5943a4.js","assets/signal-51ed66f5.js","assets/debugFlags-9a30f077.js","assets/RenderState-1d6218ee.js","assets/optimizedFeatureQueryEngineAdapter-1fecea41.js","assets/number-2ab18aee.js","assets/clientSideDefaults-dfab1319.js","assets/defaultsJSON-59981e75.js"]),EdgeProcessingWorker:()=>ne(()=>import("./EdgeProcessingWorker-04b72e8c.js"),["assets/EdgeProcessingWorker-04b72e8c.js","assets/workerHelper-d1cc0cda.js","assets/InterleavedLayout-d76b0d59.js","assets/types-1305598a.js","assets/edgeProcessing-82213448.js","assets/glUtil-ce5ee52b.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>ne(()=>import("./ElevationSamplerWorker-540d0b4e.js"),["assets/ElevationSamplerWorker-540d0b4e.js","assets/PooledRBush-fa11eac4.js","assets/quickselect-bc0541de.js"]),FeatureServiceSnappingSourceWorker:()=>ne(()=>import("./FeatureServiceSnappingSourceWorker-160c2cdc.js"),["assets/FeatureServiceSnappingSourceWorker-160c2cdc.js","assets/UpdatingHandles-7949a657.js","assets/FeatureStore-02a891a3.js","assets/featureConversionUtils-09cf00ff.js","assets/OptimizedFeature-e90b69df.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/OptimizedGeometry-196224d4.js","assets/BoundsStore-230a1891.js","assets/PooledRBush-fa11eac4.js","assets/quickselect-bc0541de.js","assets/QueryEngine-ee1ccbba.js","assets/WhereClause-41137be1.js","assets/TimeOnly-879c5107.js","assets/UnknownTimeZone-a05df022.js","assets/projectionSupport-dcf335fc.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-17105106.js","assets/utils-f54bcc46.js","assets/heatmapUtils-7f42325f.js","assets/utils-1a995f8e.js","assets/basemapUtils-6ec10a55.js","assets/Basemap-8d62c69e.js","assets/loadAll-5e767cfa.js","assets/writeUtils-e226a8aa.js","assets/SnappingCandidate-970faec6.js","assets/FieldsIndex-e8db657f.js","assets/Scheduler-ff5943a4.js","assets/signal-51ed66f5.js","assets/debugFlags-9a30f077.js","assets/RenderState-1d6218ee.js","assets/optimizedFeatureQueryEngineAdapter-1fecea41.js","assets/Query-071039d7.js","assets/FullTextSearch-12e0754c.js","assets/QuantizationParameters-f983cf8d.js","assets/symbologySnappingCandidates-ffc7ee52.js","assets/pbfQueryUtils-b37a842c.js","assets/pbf-2651fe50.js","assets/query-351887b5.js","assets/queryZScale-d7a48772.js"]),GeoJSONSourceWorker:()=>ne(()=>import("./GeoJSONSourceWorker-b3c1c6c9.js"),["assets/GeoJSONSourceWorker-b3c1c6c9.js","assets/featureConversionUtils-09cf00ff.js","assets/OptimizedFeature-e90b69df.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/OptimizedGeometry-196224d4.js","assets/FeatureStore-02a891a3.js","assets/BoundsStore-230a1891.js","assets/PooledRBush-fa11eac4.js","assets/quickselect-bc0541de.js","assets/QueryEngine-ee1ccbba.js","assets/WhereClause-41137be1.js","assets/TimeOnly-879c5107.js","assets/UnknownTimeZone-a05df022.js","assets/projectionSupport-dcf335fc.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-17105106.js","assets/utils-f54bcc46.js","assets/heatmapUtils-7f42325f.js","assets/utils-1a995f8e.js","assets/basemapUtils-6ec10a55.js","assets/Basemap-8d62c69e.js","assets/loadAll-5e767cfa.js","assets/writeUtils-e226a8aa.js","assets/SnappingCandidate-970faec6.js","assets/FieldsIndex-e8db657f.js","assets/Scheduler-ff5943a4.js","assets/signal-51ed66f5.js","assets/debugFlags-9a30f077.js","assets/RenderState-1d6218ee.js","assets/optimizedFeatureQueryEngineAdapter-1fecea41.js","assets/geojson-573ee405.js","assets/date-294ce3fb.js","assets/clientSideDefaults-dfab1319.js","assets/defaultsJSON-59981e75.js","assets/sourceUtils-34e7b477.js"]),LercWorker:()=>ne(()=>import("./LercWorker-8beff6f9.js"),[]),MemorySourceWorker:()=>ne(()=>import("./MemorySourceWorker-8e99e7c4.js"),["assets/MemorySourceWorker-8e99e7c4.js","assets/featureConversionUtils-09cf00ff.js","assets/OptimizedFeature-e90b69df.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/OptimizedGeometry-196224d4.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-02a891a3.js","assets/BoundsStore-230a1891.js","assets/PooledRBush-fa11eac4.js","assets/quickselect-bc0541de.js","assets/QueryEngine-ee1ccbba.js","assets/WhereClause-41137be1.js","assets/TimeOnly-879c5107.js","assets/UnknownTimeZone-a05df022.js","assets/projectionSupport-dcf335fc.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-17105106.js","assets/utils-f54bcc46.js","assets/heatmapUtils-7f42325f.js","assets/utils-1a995f8e.js","assets/basemapUtils-6ec10a55.js","assets/Basemap-8d62c69e.js","assets/loadAll-5e767cfa.js","assets/writeUtils-e226a8aa.js","assets/SnappingCandidate-970faec6.js","assets/FieldsIndex-e8db657f.js","assets/Scheduler-ff5943a4.js","assets/signal-51ed66f5.js","assets/debugFlags-9a30f077.js","assets/RenderState-1d6218ee.js","assets/optimizedFeatureQueryEngineAdapter-1fecea41.js","assets/clientSideDefaults-dfab1319.js","assets/defaultsJSON-59981e75.js","assets/sourceUtils-34e7b477.js","assets/date-294ce3fb.js"]),PBFDecoderWorker:()=>ne(()=>import("./PBFDecoderWorker-f647436d.js"),["assets/PBFDecoderWorker-f647436d.js","assets/dehydratedFeatures-2a3f0608.js","assets/quantizationUtils-17105106.js","assets/featureConversionUtils-09cf00ff.js","assets/OptimizedFeature-e90b69df.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/OptimizedGeometry-196224d4.js","assets/pbfQueryUtils-b37a842c.js","assets/pbf-2651fe50.js"]),Pipeline:()=>ne(()=>import("./Pipeline-39edfddb.js").then(e=>e.P),["assets/Pipeline-39edfddb.js","assets/UpdatingHandles-7949a657.js","assets/featureConversionUtils-09cf00ff.js","assets/OptimizedFeature-e90b69df.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/OptimizedGeometry-196224d4.js","assets/QueryEngine-ee1ccbba.js","assets/WhereClause-41137be1.js","assets/TimeOnly-879c5107.js","assets/UnknownTimeZone-a05df022.js","assets/projectionSupport-dcf335fc.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-17105106.js","assets/utils-f54bcc46.js","assets/heatmapUtils-7f42325f.js","assets/utils-1a995f8e.js","assets/basemapUtils-6ec10a55.js","assets/Basemap-8d62c69e.js","assets/loadAll-5e767cfa.js","assets/writeUtils-e226a8aa.js","assets/SnappingCandidate-970faec6.js","assets/FieldsIndex-e8db657f.js","assets/Scheduler-ff5943a4.js","assets/signal-51ed66f5.js","assets/debugFlags-9a30f077.js","assets/RenderState-1d6218ee.js","assets/CircularArray-ef508845.js","assets/TileStore-c31b905a.js","assets/quickselect-bc0541de.js","assets/QuantizationParameters-f983cf8d.js","assets/TileKey-4b1303ff.js","assets/TileInfoView-ce4d65fb.js","assets/ComputedAttributeStorage-bbcde1eb.js","assets/labelPoint-96433514.js","assets/definitions-5366d472.js","assets/visualVariablesUtils-b310591f.js","assets/color-a1c19855.js","assets/enums-f1a6a48a.js","assets/enums-b1d611e3.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-e491b09e.js","assets/ogcFeatureUtils-73278bb3.js","assets/geojson-573ee405.js","assets/date-294ce3fb.js","assets/clientSideDefaults-dfab1319.js","assets/defaultsJSON-59981e75.js","assets/query-351887b5.js","assets/pbfQueryUtils-b37a842c.js","assets/pbf-2651fe50.js","assets/queryZScale-d7a48772.js","assets/Query-071039d7.js","assets/FullTextSearch-12e0754c.js","assets/QueueProcessor-4b9d43d3.js","assets/StreamFeatureManager-3c1591f4.js","assets/createConnection-c6387383.js","assets/geohashUtils-77d8429b.js"]),PointCloudWorker:()=>ne(()=>import("./PointCloudWorker-405f1b86.js"),["assets/PointCloudWorker-405f1b86.js","assets/vec3f32-bac7ea57.js","assets/PointCloudWorkerUtil-4698dfea.js","assets/PointCloudUniqueValueRenderer-60348ed7.js","assets/I3SBinaryReader-e72af7de.js"]),RasterWorker:()=>ne(()=>import("./RasterWorker-b1772d1e.js"),[]),SceneLayerSnappingSourceWorker:()=>ne(()=>import("./SceneLayerSnappingSourceWorker-4c19ac77.js"),["assets/SceneLayerSnappingSourceWorker-4c19ac77.js","assets/Octree-7cea9440.js","assets/frustum-f9d53cdf.js","assets/edgeProcessing-82213448.js","assets/InterleavedLayout-d76b0d59.js","assets/types-1305598a.js","assets/glUtil-ce5ee52b.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>ne(()=>import("./SceneLayerWorker-b7dd55be.js").then(e=>e.S),["assets/SceneLayerWorker-b7dd55be.js","assets/I3SNode-81f8301c.js"]),WFSSourceWorker:()=>ne(()=>import("./WFSSourceWorker-bb4853d6.js"),["assets/WFSSourceWorker-bb4853d6.js","assets/featureConversionUtils-09cf00ff.js","assets/OptimizedFeature-e90b69df.js","assets/OptimizedFeatureSet-1d1ac4b9.js","assets/OptimizedGeometry-196224d4.js","assets/FeatureStore-02a891a3.js","assets/BoundsStore-230a1891.js","assets/PooledRBush-fa11eac4.js","assets/quickselect-bc0541de.js","assets/QueryEngine-ee1ccbba.js","assets/WhereClause-41137be1.js","assets/TimeOnly-879c5107.js","assets/UnknownTimeZone-a05df022.js","assets/projectionSupport-dcf335fc.js","assets/json-48e3ea08.js","assets/QueryEngineCapabilities-85c4f1d0.js","assets/quantizationUtils-17105106.js","assets/utils-f54bcc46.js","assets/heatmapUtils-7f42325f.js","assets/utils-1a995f8e.js","assets/basemapUtils-6ec10a55.js","assets/Basemap-8d62c69e.js","assets/loadAll-5e767cfa.js","assets/writeUtils-e226a8aa.js","assets/SnappingCandidate-970faec6.js","assets/FieldsIndex-e8db657f.js","assets/Scheduler-ff5943a4.js","assets/signal-51ed66f5.js","assets/debugFlags-9a30f077.js","assets/RenderState-1d6218ee.js","assets/optimizedFeatureQueryEngineAdapter-1fecea41.js","assets/geojson-573ee405.js","assets/date-294ce3fb.js","assets/sourceUtils-34e7b477.js","assets/wfsUtils-b983817c.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>ne(()=>import("./WorkerTileHandler-942b74b1.js"),["assets/WorkerTileHandler-942b74b1.js","assets/enums-fb086c25.js","assets/GeometryUtils-984e8446.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-29c49b98.js","assets/enums-f1a6a48a.js","assets/pbf-2651fe50.js","assets/TurboLine-a90259bc.js","assets/definitions-5366d472.js","assets/StyleRepository-00d8a116.js","assets/enums-bdecffa2.js","assets/VertexElementDescriptor-2925c6af.js","assets/unitBezier-881ac1eb.js","assets/BidiEngine-9a40f2f4.js"])};var pn;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(pn||(pn={}));let Gae=0;function wF(){return Gae++}function Wae(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function b0(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function t4(e,t,n,r){if(t.type===pn.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==pn.INVOKE&&t.type!==pn.RESPONSE)return void e.postMessage(t);let i;if(Wae(n)?(i=mk(n.transferList),t.data=n.result):(i=mk(r),t.data=n),i){if(X("ff")){for(const s of i)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case pn.INVOKE:throw o;case pn.RESPONSE:return void t4(e,{type:pn.RESPONSE,jobId:t.jobId,error:b0(o)})}}}e.postMessage(t,i)}else e.postMessage(t)}function w0(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function mk(e){if(!(e!=null&&e.length))return null;if(X("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(n=>!Hae(n));return t.length?t:null}function Hae(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)==null?void 0:t.name)==="ArrayBuffer"}const{CLOSE:gk,ABORT:yk,INVOKE:bk,RESPONSE:id,OPEN_PORT:wk,ON:qae}=pn,Jae=2;let Zae=class{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===pn.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Xa=class sh{static connect(t){const n=new MessageChannel;let r;r=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const i=new sh(n.port1,{channel:n,client:r});return typeof r=="object"&&"remoteClient"in r&&(r.remoteClient=i),sh.clients.set(i,r),n.port2}static loadWorker(t){const n=Vae[t];return n?n():Promise.resolve(null)}constructor(t,n,r){this._port=t,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new Zae(i=>this._onInvokeMessage(i)),this._client=n.client,this._onMessage=this._onMessage.bind(this),this._channel=n.channel,this._schedule=n.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:gk}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,n,r){const i=r==null?void 0:r.signal,s=r==null?void 0:r.transferList;if(!this._port)return Promise.reject(new Y("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:n}));const o=wF();return new Promise((a,l)=>{if(ri(i))return this._processWork(),void l(Ot());const c=po(i,()=>{const h=this._outJobs.get(o);h&&(this._outJobs.delete(o),this._processWork(),Ci(h.abortHandle),this._post({type:yk,jobId:o}),l(Ot()))}),u={resolve:a,reject:l,abortHandle:c,debugInfo:t};this._outJobs.set(o,u),this._post({type:bk,jobId:o,methodName:t,abortable:i!=null},n,s)})}on(t,n){const r=new MessageChannel;function i(s){n(s.data)}return this._port.postMessage({type:pn.ON,eventType:t,port:r.port2},[r.port2]),r.port1.addEventListener("message",i),r.port1.start(),It(()=>{r.port1.postMessage({type:pn.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",i)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:wk,port:t.port2}),t.port1}_processWork(){var o;if(this._outJobs.size>=Jae)return;const t=(o=this._jobQueue)==null?void 0:o.pop();if(!t)return;const{methodName:n,data:r,invokeOptions:i,resolver:s}=t;this.invoke(n,r,i).then(a=>s.resolve(a)).catch(a=>s.reject(a))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Ci(t.abortHandle),t.reject(Ot(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const n=w0(t);if(n)switch(n.type){case id:this._onResponseMessage(n);break;case bk:this._invokeQueue.push(n);break;case yk:this._onAbortMessage(n);break;case gk:this._onCloseMessage();break;case wk:this._onOpenPortMessage(n);break;case qae:this._onOnMessage(n)}}_onAbortMessage(t){const n=this._inJobs,r=t.jobId,i=n.get(r);this._invokeQueue.push(t),i&&(i.controller&&i.controller.abort(),n.delete(r))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&sh.clients.get(this)===t&&t.destroy(),sh.clients.delete(this),t!=null&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:n,jobId:r,data:i,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,u=c[n];try{if(!u&&n&&n.includes(".")){const h=n.split(".");for(let f=0;f<h.length-1;f++)c=c[h[f]],u=c[h[f+1]]}if(typeof u!="function")throw new TypeError(`${n} is not a function`);l=u.call(c,i,{client:this,signal:o?o.signal:null})}catch(h){return void this._post({type:id,jobId:r,error:b0(h)})}k0(l)?(a.set(r,{controller:o,promise:l}),l.then(h=>{a.has(r)&&(a.delete(r),this._post({type:id,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),wr(h)||this._post({type:id,jobId:r,error:b0(h||{message:`Error encountered at method ${n}`})}))})):this._post({type:id,jobId:r},l)}_onOpenPortMessage(t){new sh(t.port,{client:this._client})}_onOnMessage(t){const{port:n}=t,r=this._client.on(t.eventType,s=>{n.postMessage(s)}),i=$2(t.port,"message",s=>{const o=w0(s);(o==null?void 0:o.type)===pn.CLOSE&&(i.remove(),r.remove(),n.close())})}_onResponseMessage(t){const{jobId:n,error:r,data:i}=t,s=this._outJobs;if(!s.has(n))return;const o=s.get(n);s.delete(n),this._processWork(),Ci(o.abortHandle),r?o.reject(Y.fromJSON(JSON.parse(r))):o.resolve(i)}_post(t,n,r){return t4(this._port,t,n,r)}};Xa.kernelInfo={buildDate:YP,fullVersion:yM,revision:KP},Xa.clients=new Map;let Yae=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new zae}destroy(){this.close()}get closed(){var t;return!((t=this._clients)!=null&&t.length)}open(t,n){return new Promise((r,i)=>{let s=!0;const o=a=>{Hn(n.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];k0(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new Xa(c,n,this._ongoingJobsQueue),o(r),this._clients[a]),()=>(o(i),null)):(this._clients[a]=new Xa(l,n,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(t,n,r){const i=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];i[s]=o.then(a=>a==null?void 0:a.invoke(t,n,r))}return i}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(Ot(`Worker closing, aborting job calling '${t.methodName}'`));for(const n of this._clientPromises)n.then(r=>r==null?void 0:r.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,Uae(this)}invoke(t,n,r){let i;Array.isArray(r)?(ie.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),i={transferList:r}):i=r;const s=qc();this._ongoingJobsQueue.push({methodName:t,data:n,invokeOptions:i,resolver:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l==null?void 0:l.jobAdded())}return s.promise}on(t,n){return Promise.all(this._clientPromises).then(()=>x2(this._clients.map(r=>r.on(t,n))))}openPorts(){return new Promise(t=>{const n=new Array(this._clientPromises.length);let r=n.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(s=>{s&&(n[i]=s.openPort()),--r==0&&t(n)})})}get test(){return{numClients:this._clients.length}}};const Kae={async request(e,t){var o,a;const n=e.options,r=n.responseType;n.signal=t==null?void 0:t.signal,n.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((o=VP(e.url))!=null&&o.after)?r:"array-buffer";const i=await He(e.url,n),s={data:i.data,httpStatus:i.httpStatus,ssl:i.ssl};switch((a=i.requestOptions)==null?void 0:a.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},Xae={};function Qae(e){var n;const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:((n=e.packages)==null?void 0:n.concat())||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=Xae.baseUrl),t}let ele=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(n=>{this[n]=(...r)=>t[n](...r)})}},Ry=class{constructor(){this._dispatcher=new ele,this._workerPostMessage({type:pn.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){Zh(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,n,r){this._dispatcher.addEventListener(t,n,r)}removeEventListener(t,n,r){this._dispatcher.removeEventListener(t,n,r)}_workerPostMessage(t){Zh(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const n=w0(t);if(n&&n.type===pn.OPEN){const{modulePath:r,jobId:i}=n;let s=await Xa.loadWorker(r);s||(s=await ne(()=>import(r),[]));const o=Xa.connect(s);this._workerPostMessage({type:pn.OPENED,jobId:i,data:o})}}};const S_=ie.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:tle}=pn,nle='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,s)=>{if(t){if(t.aborted)return s(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:ABORT,jobId:n}),s(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:s}),self.postMessage({type:INVOKE,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n??s}\\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case OPEN:let n;function t(e){const o=n.connect(e);self.postMessage({type:OPENED,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case RESPONSE:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let pg,mg;const vk="Failed to create Worker. Fallback to execute module in main thread";async function rle(){if(!X("esri-workers"))return xk(new Ry);if(!pg&&!mg)try{const t=nle.split('"{CONFIGURATION}"').join(`'${ile()}'`);pg=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){mg=t||{}}let e;if(pg)try{e=new Worker(pg,{name:"esri-worker-"+sle++})}catch{S_.warn(vk,mg),e=new Ry}else S_.warn(vk,mg),e=new Ry;return xk(e)}async function xk(e){return new Promise(t=>{function n(i){const s=w0(i);s&&s.type===tle&&(e.removeEventListener("message",n),e.removeEventListener("error",r),t(e))}function r(i){i.preventDefault(),e.removeEventListener("message",n),e.removeEventListener("error",r),S_.warn("Failed to create Worker. Fallback to execute module in main thread",i),(e=new Ry).addEventListener("message",n),e.addEventListener("error",r)}e.addEventListener("message",n),e.addEventListener("error",r)})}function ile(){let e;if(ze.default!=null){const i={...ze};delete i.default,e=JSON.parse(JSON.stringify(i))}else e=JSON.parse(JSON.stringify(ze));e.assetsPath=Xr(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Xr(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=ti(),e.has={"esri-csp-restrictions":X("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":X("esri-2d-update-debug"),"esri-2d-log-updating":X("esri-2d-log-updating"),"featurelayer-pbf":X("featurelayer-pbf"),"featurelayer-simplify-thresholds":X("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":X("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":X("featurelayer-simplify-mobile-factor"),"esri-atomics":X("esri-atomics"),"esri-shared-array-buffer":X("esri-shared-array-buffer"),"esri-tiles-debug":X("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":X("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":X("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Xr(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Xr(e.workers.workerPath):e.workers.workerPath=Xr(vu("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=ze.workers.loaderConfig,n=Qae({baseUrl:t==null?void 0:t.baseUrl,locale:ti(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t==null?void 0:t.has},map:{...t==null?void 0:t.map},paths:{...t==null?void 0:t.paths},packages:(t==null?void 0:t.packages)||[]});return JSON.stringify({esriConfig:e,loaderConfig:n,kernelInfo:{buildDate:YP,fullVersion:yM,revision:KP}})}let sle=0;const{ABORT:Sk,INVOKE:ole,OPEN:ale,OPENED:lle,RESPONSE:sd}=pn;let cle=class vF{static async create(t){const n=await rle();return new vF(n,t)}constructor(t,n){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=n,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",r=>{r.preventDefault(),ie.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(t,n={}){const{signal:r}=n,i=wF();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:HO(r,()=>{this._outJobs.delete(i),this._post({type:Sk,jobId:i})})};this._outJobs.set(i,a),this._post({type:ale,jobId:i,modulePath:t})})}_onMessage(t){const n=w0(t);if(n)switch(n.type){case lle:this._onOpenedMessage(n);break;case sd:this._onResponseMessage(n);break;case Sk:this._onAbortMessage(n);break;case ole:this._onInvokeMessage(n)}}_onAbortMessage(t){const n=this._inJobs,r=t.jobId,i=n.get(r);i&&(i.controller&&i.controller.abort(),n.delete(r))}_onInvokeMessage(t){const{methodName:n,jobId:r,data:i,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,l=Kae[n];let c;try{if(typeof l!="function")throw new TypeError(`${n} is not a function`);c=l.call(null,i,{signal:o?o.signal:null})}catch(u){return void this._post({type:sd,jobId:r,error:b0(u)})}k0(c)?(a.set(r,{controller:o,promise:c}),c.then(u=>{a.has(r)&&(a.delete(r),this._post({type:sd,jobId:r},u))},u=>{a.has(r)&&(a.delete(r),u||(u={message:"Error encountered at method"+n}),wr(u)||this._post({type:sd,jobId:r,error:b0(u||{message:`Error encountered at method ${n}`})}))})):this._post({type:sd,jobId:r},c)}_onOpenedMessage(t){const{jobId:n,data:r}=t,i=this._outJobs.get(n);i&&(this._outJobs.delete(n),Ci(i.abortHandle),i.resolve(r))}_onResponseMessage(t){const{jobId:n,error:r,data:i}=t,s=this._outJobs.get(n);s&&(this._outJobs.delete(n),Ci(s.abortHandle),r?s.reject(Y.fromJSON(JSON.parse(r))):s.resolve(i))}_post(t,n,r){return t4(this.worker,t,n,r)}};const _k=X("host-browser")?Math.min(navigator.hardwareConcurrency-1,X("workers-pool-size")):0;let Ec=X("esri-mobile")?Math.min(_k,3):_k;Ec||(Ec=X("safari")&&X("mac")?7:2);let Mk=0;const Ny=[];function HMe(){xF()}async function gg(e,t){const n=new Yae,{registryTarget:r,...i}=t;return await n.open(e,i),r&&Bae(r,n),n}async function ule(e,t={}){if(typeof e!="string")throw new Y("workers:undefined-module","modulePath is missing");let n=t.strategy||"distributed";if(X("host-webworker")&&!X("esri-workers")&&(n="local"),n==="local"){let r=await Xa.loadWorker(e);r||(r=await ne(()=>import(e),[])),Hn(t.signal);const i=t.client||r;return gg([Xa.connect(r)],{...t,client:i})}if(await xF(),Hn(t.signal),n==="dedicated"){const r=Mk++%Ec;return gg([await Ny[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,Ec);if(r<Ec){const i=new Array(r);for(let s=0;s<r;++s){const o=Mk++%Ec;i[s]=Ny[o].open(e,t)}return gg(i,t)}}return gg(Ny.map(r=>r.open(e,t)),t)}let yg=null;async function xF(){if(yg)return yg;new AbortController;const e=[];for(let t=0;t<Ec;t++){const n=cle.create(t).then(r=>(Ny[t]=r,r));e.push(n)}return yg=Promise.all(e),yg}let hle=class{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const t=await ule("RasterWorker");this._destroyed?t.close():this._workerThread=t}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(t,n){if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:t.pixelBlock.toJSON(),type:t.dataType},n);return r?new ee(r):null}computeStatisticsHistograms(t,n){if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:t.pixelBlock.toJSON()},n)}async decode(t,n){if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("decode",t,n);return r?new ee(r):null}async symbolize(t,n){var s,o;if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");const r={extent:(s=t.extent)==null?void 0:s.toJSON(),pixelBlock:(o=t.pixelBlock)==null?void 0:o.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},i=await this._workerThread.invoke("symbolize",r,n);return i?new ee(i):null}async updateSymbolizer(t,n){var i;if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");const r=(i=t==null?void 0:t.rendererJSON)==null?void 0:i.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:r},n))}async updateRasterFunction(t,n){if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:t.toJSON()},n))}async process(t,n){var i,s;if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("process",{extent:(i=t.extent)==null?void 0:i.toJSON(),primaryPixelSizes:(s=t.primaryPixelSizes)==null?void 0:s.map(o=>o!=null?o.toJSON():null),primaryPixelBlocks:t.primaryPixelBlocks.map(o=>o!=null?o.toJSON():null),primaryRasterIds:t.primaryRasterIds},n);return r?new ee(r):null}async stretch(t,n){if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");if(!(t!=null&&t.pixelBlock))return null;const r={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},i=await this._workerThread.invoke("stretch",r,n);return i?new ee(i):null}async split(t,n){if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");if(!(t!=null&&t.pixelBlock))return null;const r={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel},i=await this._workerThread.invoke("split",r,n);return i&&i.forEach((s,o)=>{i.set(o,s?ee.fromJSON(s):null)}),i}async estimateStatisticsHistograms(t,n){if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");if(!(t!=null&&t.pixelBlock))return null;const r={srcPixelBlock:t.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",r,n)}async mosaicAndTransform(t,n){var s;if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");if(!((s=t==null?void 0:t.srcPixelBlocks)!=null&&s.length))return{pixelBlock:null};const r={...t,srcPixelBlocks:t.srcPixelBlocks.map(o=>o!=null?o.toJSON():null)},i=await this._workerThread.invoke("mosaicAndTransform",r,n);return{pixelBlock:i.pixelBlock?new ee(i.pixelBlock):null,localNorthDirections:i.localNorthDirections}}async createFlowMesh(t,n){if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");const r={buffer:t.flowData.data.buffer,maskBuffer:t.flowData.mask.buffer,width:t.flowData.width,height:t.flowData.height},{meshType:i,simulationSettings:s}=t,o=await this._workerThread.invoke("createFlowMesh",{meshType:i,flowData:r,simulationSettings:s},{...n,transferList:[r.buffer,r.maskBuffer]});return{vertexData:new Float32Array(o.vertexBuffer),indexData:new Uint32Array(o.indexBuffer)}}getProjectionOffsetGrid(t,n){if(!this._workerThread)throw new Y("raster-jobhandler:no-connection","no available worker connection");const r=t.datumTransformation!=null?t.datumTransformation.steps.map(o=>({wkid:o.wkid,wkt:o.wkt,isInverse:o.isInverse})):null,i=t.rasterTransform!=null?t.rasterTransform.toJSON():null,s={projectedExtent:t.projectedExtent.toJSON(),srcBufferExtent:t.srcBufferExtent.toJSON(),pixelSize:t.pixelSize,hasWrapAround:t.hasWrapAround,spacing:t.spacing,datumTransformationSteps:r,rasterTransform:i,isAdaptive:t.isAdaptive,includeGCSGrid:t.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",s,n)}};var __;let ss=__=class extends re{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new __({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};p([b({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ss.prototype,"cols",void 0),p([b({type:Be,json:{write:!0}})],ss.prototype,"level",void 0),p([b({type:String,json:{write:!0}})],ss.prototype,"levelValue",void 0),p([b({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ss.prototype,"origin",void 0),p([b({type:Number,json:{write:!0}})],ss.prototype,"resolution",void 0),p([b({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],ss.prototype,"rows",void 0),p([b({type:Number,json:{write:!0}})],ss.prototype,"scale",void 0),ss=__=p([L("esri.layers.support.LOD")],ss);const Ks=ss;let SF=class{constructor(t,n,r,i,s=void 0){this.id=t,this.level=n,this.row=r,this.col=i,this.extent=s}};var ia;const $k=new Ne({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let bn=ia=class extends re{static create(e={}){const{resolutionFactor:t=1,scales:n,size:r=256,spatialReference:i=we.WebMercator,numLODs:s=24}=e;if(!Bn(i)){const h=[];if(n)for(let f=0;f<n.length;f++){const d=n[f];h.push(new Ks({level:f,scale:d,resolution:d}))}else{let f=5e-4;for(let d=s-1;d>=0;d--)h.unshift(new Ks({level:d,scale:f,resolution:f})),f*=2}return new ia({dpi:96,lods:h,origin:new ce(0,0,i),size:[r,r],spatialReference:i})}const o=yr(i),a=e.origin?new ce({x:e.origin.x,y:e.origin.y,spatialReference:i}):new ce(o?{x:o.origin[0],y:o.origin[1],spatialReference:i}:{x:0,y:0,spatialReference:i}),l=96,c=1/(tr(i)*39.37*l),u=[];if(n)for(let h=0;h<n.length;h++){const f=n[h],d=f*c;u.push(new Ks({level:h,scale:f,resolution:d}))}else{let h=vM(i)?512/r*5916575275917094e-7:256/r*591657527591555e-6;const f=Math.ceil(s/t);u.push(new Ks({level:0,scale:h,resolution:h*c}));for(let d=1;d<f;d++){const g=h/2**t,y=g*c;u.push(new Ks({level:d,scale:g,resolution:y})),h=g}}return new ia({dpi:l,lods:u,origin:a,size:[r,r],spatialReference:i})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const n=yr(e);return e.isWrappable&&!!n&&Math.abs(n.origin[0]-t.x)<=n.dx}return!1}readOrigin(e,t){return ce.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,n=0;const r=[],i=this._levelToLOD={};e&&(t=-1/0,n=1/0,e.forEach(s=>{r.push(s.scale),t=s.scale>t?s.scale:t,n=s.scale<n?s.scale:n,i[s.level]=s})),this._set("scales",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const n=Math.floor(e),r=n+1;return t[n]/(t[n]/t[r])**(e-n)}scaleToZoom(e){const t=this.scales,n=t.length-1;let r=0;for(;r<n;r++){const i=t[r],s=t[r+1];if(i<=e)return r;if(s===e)return r+1;if(i>e&&s<e)return r+Math.log(i/e)/Math.log(i/s)}return r}snapScale(e,t=.95){const n=this.scaleToZoom(e);return n%Math.floor(n)>=t?this.zoomToScale(Math.ceil(n)):this.zoomToScale(Math.floor(n))}tileAt(e,t,n,r){const i=this.lodAt(e);if(!i)return null;let s,o;if(typeof t=="number")s=t,o=n;else if(gn(t.spatialReference,this.spatialReference))s=t.x,o=t.y,r=n;else{const c=MM(t,this.spatialReference);if(c==null)return null;s=c.x,o=c.y,r=n}const a=i.resolution*this.size[0],l=i.resolution*this.size[1];return r||(r=new SF(null,0,0,0,Wa())),r.level=e,r.row=Math.floor((this.origin.y-o)/l+.001),r.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(r),r}updateTileInfo(e,t=ia.ExtrapolateOptions.NONE){let n=this.lodAt(e.level);if(!n&&t===ia.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(n=o)}if(!n)return;const r=e.level-n.level,i=n.resolution*this.size[0]/2**r,s=n.resolution*this.size[1]/2**r;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Wa()),e.extent[0]=this.origin.x+e.col*i,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+i,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const n=this.lodAt(t.level);if(n==null)return null;const{resolution:r}=n,i=r*this.size[0],s=r*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*s,e[2]=e[0]+i,e[3]=e[1]+s,e}lodAt(e){var t;return((t=this._levelToLOD)==null?void 0:t[e])??null}clone(){return ia.fromJSON(this.write({}))}getOrCreateCompatible(e,t){if(this.size[0]===256&&this.size[1]===256)return e===256?this:null;const n=[],r=this.lods.length;for(let i=0;i<r;i++){const s=this.lods[i],o=s.resolution*t;n.push(new Ks({level:s.level,scale:s.scale,resolution:o}))}return new ia({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:n})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let n=0;n<e.length;n++){const r=e[n];this._upsampleLevels[r.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/r.resolution:0},t=r}}};p([b({type:Number,json:{write:!0}})],bn.prototype,"compressionQuality",void 0),p([b({type:Number,json:{write:!0}})],bn.prototype,"dpi",void 0),p([b({type:String,json:{read:$k.read,write:$k.write,origins:{"web-scene":{read:!1,write:!1}}}})],bn.prototype,"format",void 0),p([b({readOnly:!0})],bn.prototype,"isWrappable",null),p([b({type:ce,json:{write:!0}})],bn.prototype,"origin",void 0),p([ge("origin")],bn.prototype,"readOrigin",null),p([b({type:[Ks],value:null,json:{write:!0}})],bn.prototype,"lods",null),p([b({readOnly:!0})],bn.prototype,"scales",void 0),p([b({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],bn.prototype,"size",void 0),p([ge("size",["rows","cols"])],bn.prototype,"readSize",null),p([xe("size",{cols:{type:Be},rows:{type:Be}})],bn.prototype,"writeSize",null),p([b({type:we,json:{write:!0}})],bn.prototype,"spatialReference",void 0),bn=ia=p([L("esri.layers.support.TileInfo")],bn),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(bn||(bn={}));const fo=bn;var M_;let wn=M_=class extends re{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new M_({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:J(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:J(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:J(this.tileInfo),transposeInfo:J(this.transposeInfo),blockBoundary:J(this.blockBoundary)})}};p([b({type:Number,json:{write:!0}})],wn.prototype,"blockWidth",void 0),p([b({type:Number,json:{write:!0}})],wn.prototype,"blockHeight",void 0),p([b({type:String,json:{write:!0}})],wn.prototype,"compression",void 0),p([b({type:ce,json:{write:!0}})],wn.prototype,"origin",void 0),p([b({type:Number,json:{write:!0}})],wn.prototype,"firstPyramidLevel",void 0),p([b({type:Number,json:{write:!0}})],wn.prototype,"maximumPyramidLevel",void 0),p([b({json:{write:!0}})],wn.prototype,"pyramidResolutions",void 0),p([b({type:Number,json:{write:!0}})],wn.prototype,"pyramidScalingFactor",void 0),p([b({type:Number,json:{write:!0}})],wn.prototype,"pyramidBlockWidth",void 0),p([b({type:Number,json:{write:!0}})],wn.prototype,"pyramidBlockHeight",void 0),p([b({type:Boolean,json:{write:!0}})],wn.prototype,"isVirtualTileInfo",void 0),p([b({json:{write:!0}})],wn.prototype,"tileInfo",void 0),p([b()],wn.prototype,"transposeInfo",void 0),p([b()],wn.prototype,"blockBoundary",void 0),wn=M_=p([L("esri.layers.support.RasterStorageInfo")],wn);const Df=wn;function _F(e,t,n){var s;const r=t.shift();if(n.length===0){const o=[];n.push({sliceId:-1,multidimensionalDefinition:o})}const i=n.length;for(let o=0;o<i;o++){const a=n.shift().multidimensionalDefinition;(s=r.values)==null||s.forEach(l=>{n.push({sliceId:-1,multidimensionalDefinition:[...a,{variableName:e,dimensionName:r.name,values:[l]}]})})}t.length&&_F(e,t,n)}function fle(e,t){const n=[];let r=0;return(t?e.variables.filter(i=>i.name.toLowerCase()===t.toLowerCase()):[...e.variables].sort((i,s)=>i.name>s.name?1:-1)).forEach(i=>{const s=[],o=[...i.dimensions].sort((a,l)=>a.name>l.name?-1:1);_F(i.name,o,s),s.forEach(a=>{n.push({...a,sliceId:r++})})}),n}function dle(e,t,n){let r=e;if(t&&(t=[...t].sort((i,s)=>i.dimensionName<s.dimensionName?-1:1)).forEach(({dimensionName:i,values:s,isSlice:o})=>{s.length&&(r=r.filter(a=>{const l=a.multidimensionalDefinition.find(u=>u.dimensionName===i);if(l==null)return!1;const c=l.values[0];return typeof c=="number"?typeof s[0]=="number"?s.includes(c):s.some(u=>u[0]<=c&&u[1]>=c):typeof s[0]=="number"?s.some(u=>c[0]<=u&&c[1]>=u):o?s.some(u=>u[0]===c[0]&&u[0]===c[1]):s.some(u=>u[0]>=c[0]&&u[0]<=c[1]||u[1]>=c[0]&&u[1]<=c[1]||u[0]<c[0]&&u[1]>c[1])}))}),r.length&&(n==null?void 0:n.start)!=null&&n.end!=null){const i=n.start.getTime(),s=n.end.getTime(),o=r[0].multidimensionalDefinition.findIndex(a=>a.dimensionName==="StdTime");o>-1&&(r=r.filter(a=>{const l=a.multidimensionalDefinition[o].values[0];return i<=l&&s>=l}))}return r.map(i=>i.sliceId)}function MF(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function ple(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}function $F(e){return e.length===1?[e[0],e[0]]:[e[0],e[e.length-1]]}function TF(e,t,n){var o,a;if(!((o=t==null?void 0:t.subsetDefinitions)!=null&&o.length))return e;let r;if(n){const{variables:l}=t;if(l.length&&!l.includes(n))return null;const c=t.subsetDefinitions.find(u=>u.dimensionName===e.name&&u.variableName===n);if(!((a=c==null?void 0:c.values)!=null&&a.length))return e;r=$F(c.values)}else{const l=t.dimensions.find(({name:c})=>c===e.name);r=l==null?void 0:l.extent}const i=r;if(!(i!=null&&i.length))return e;const s=e.values.filter(l=>MF(l,i));return{...e,extent:[...i],values:s}}function n4(e,t,n){var i;if(!((i=t==null?void 0:t.subsetDefinitions)!=null&&i.length))return!1;const{variables:r}=t;if(r.length&&e.some(({variableName:s})=>s&&!r.includes(s)))return!0;for(let s=0;s<e.length;s++){const o=e[s],a=t.subsetDefinitions.find(l=>(o.variableName===""||l.variableName===o.variableName)&&l.dimensionName===o.dimensionName);if(a!=null&&a.values.length){const l=$F(a.values);if(!o.isSlice&&o.values.length===2&&!Array.isArray(o.values[0])&&o.values[0]!==o.values[1]&&n){if(!ple(o.values,l))return!0}else if(o.values.some(c=>!MF(c,l)))return!0}}return!1}function ZMe(e,t){if(e==null)return{isOutside:!1};const{geometry:n,timeExtent:r,multidimensionalDefinition:i}=t;let s=null;if(r!=null&&(s=mle(e,r),s==null))return{isOutside:!0};const{areaOfInterest:o}=e;if(o&&n){const a=n.type==="point"?n:n.type==="extent"?n.center:n.type==="polygon"?n.centroid:null;if(a&&!o.contains(a))return{isOutside:!0}}return i!=null&&i.length&&n4(i,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:n,timeExtent:s,multidimensionalDefinition:i}}}function mle(e,t){const n=e.dimensions.find(({name:o})=>o==="StdTime");if(n==null||t.start==null&&t.end==null)return t;t=t.clone();const{start:r,end:i}=t.toJSON(),s=r===i?[r]:r!=null&&i!=null?[r,i]:[r??i];return s.length===2&&(n!=null&&n.extent.length)&&(s[0]=Math.max(s[0],n.extent[0]),s[1]=Math.min(s[1],n.extent[1]??n.extent[0]),s[1]<s[0])||n4([new du({variableName:"",dimensionName:"StdTime",isSlice:s.length===1,values:s})],e,!0)?null:(t.start=new Date(s[0]),t.end=new Date(s[1]??s[0]),t)}function $_(e,t={}){var u,h;const{multidimensionalInfo:n,keyProperties:r}=e;if(n==null)return null;const{variableName:i,multidimensionalSubset:s,multidimensionalDefinition:o}=t,a=o!=null?(u=o[0])==null?void 0:u.variableName:null,l=i||a||(r==null?void 0:r.DefaultVariable);let{variables:c}=n;return(h=s==null?void 0:s.variables)!=null&&h.length&&(c=c.filter(({name:f})=>s.variables.includes(f))),l?c.find(({name:f})=>f===l)??c[0]:c[0]}function Tk(e,t={}){const n=$_(e,t);if(!n)return null;const r=[],{dimensions:i,name:s}=n;if(i.length===0)return[new du({variableName:s,dimensionName:"",values:[],isSlice:!0})];for(let o=0;o<i.length;o++){const a=TF(i[o],t.multidimensionalSubset,s);if(!a)return null;const{values:l,extent:c}=a;let u=(l==null?void 0:l[0])??c[0];a.name.toLowerCase()==="stdz"&&!a.hasRanges&&Math.abs(c[1])<=Math.abs(c[0])&&(u=l!=null&&l.length?l[l.length-1]:c[1]),r.push(new du({variableName:s,dimensionName:a.name,values:[u],isSlice:!t.useRangeForRangedDimensionInfo||!!a.hasRanges}))}return r}function AF(e){return!!(e!=null&&e.length)&&e.some(t=>{if(t.values==null)return!0;const n=t.values.length;return n===0||n>1||!t.isSlice&&Array.isArray(t.values[0])})}function gle(e,t){var r;if(t==null||e==null)return null;let n=t.variables.map(i=>({...i}));return(r=e==null?void 0:e.variables)!=null&&r.length&&(n=n.filter(({name:i})=>e.variables.includes(i)),n.forEach(i=>{i.dimensions=i.dimensions.map(s=>TF(s,e,i.name)).filter(ja)})),n}function yle(e,t){var a;const{values:n}=t;if(n!=null&&n.length){const l=Array.isArray(n[0]),c=Array.isArray(e);return l!==c?-1:l&&c?n.findIndex(u=>u[0]===e[0]&&u[1]===e[1]):n.indexOf(e)}const{extent:r}=t;if(Array.isArray(e)||e<r[0]||e>r[1])return-1;const i=t.interval||1;if(t.unit!=="ISO8601")return Math.round((e-r[0])/i);const s=r[0];let o=-1;switch(((a=t.intervalUnit)==null?void 0:a.toLowerCase())||"seconds"){case"seconds":o=Math.round((e-s)/1e3/i);break;case"minutes":o=Math.round((e-s)/6e4/i);break;case"hours":o=Math.round((e-s)/36e5/i);break;case"days":o=Math.round((e-s)/864e5/i);break;case"months":{const l=new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear(),c=new Date(s).getUTCMonth(),u=new Date(e).getUTCMonth();o=l===0?u-c:u+11-c+12*(l-1)}break;case"years":o=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/i);break;case"decades":o=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/10/i)}return o}function Ak(e){var o,a;let t=(o=e.values)==null?void 0:o.length;if(t)return t;const{extent:n,unit:r}=e,i=e.interval||1,s=n?n[1]-n[0]:0;if(r!=="ISO8601")return Math.round(s/i);switch(((a=e.intervalUnit)==null?void 0:a.toLowerCase())??"seconds"){case"seconds":t=Math.round(s/1e3/i);break;case"minutes":t=Math.round(s/6e4/i);break;case"hours":t=Math.round(s/36e5/i);break;case"days":t=Math.round(s/864e5/i);break;case"months":{const l=new Date(n[1]).getUTCFullYear()-new Date(n[0]).getUTCFullYear(),c=new Date(n[0]).getUTCMonth(),u=new Date(n[1]).getUTCMonth();t=l===0?u-c+1:u+11-c+12*(l-1)+1}break;case"years":t=Math.round((new Date(n[1]).getUTCFullYear()-new Date(n[0]).getUTCFullYear())/i);break;case"decades":t=Math.round((new Date(n[1]).getUTCFullYear()-new Date(n[0]).getUTCFullYear())/10/i);break;default:t=0}return t}function ble(e,t){let n=0;const r=e[0].variableName,i=[...t.variables].sort((s,o)=>s.name>o.name?1:-1);for(let s=0;s<i.length;s++){const o=i[s],a=[...o.dimensions].sort((u,h)=>u.name>h.name?-1:1);if(o.name!==r){n+=a.map(u=>Ak(u)).reduce((u,h)=>u*h);continue}const l=a.map(u=>Ak(u)),c=a.length;for(let u=0;u<c;u++){const h=e.find(d=>d.dimensionName===a[u].name);if(h==null)return null;const f=yle(h.values[0],a[u]);if(f===-1)return null;l.shift(),n+=u===c-1?f:f*l.reduce((d,g)=>d*g)}break}return n}let wle=class{constructor(t=15e3,n=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=t,this._interval=Math.min(t,n)}decreaseRefCount(t,n){const r=t+"/"+n,i=this._cachedBlocks;if(i.has(r)){const s=i.get(r);return s.refCount--,s.refCount<=0&&(i.delete(r),s.controller&&s.controller.abort()),s.refCount}return 0}getBlock(t,n){const r=t+"/"+n,i=this._cachedBlocks;if(i.has(r)){const s=i.get(r);return s.ts=Date.now(),s.refCount++,i.delete(r),i.set(r,s),s.block}return null}putBlock(t,n,r,i){const s=this._cachedBlocks,o=t+"/"+n;if(s.has(o)){const a=s.get(o);a.ts=Date.now(),a.refCount++}else s.set(o,{block:r,ts:Date.now(),refCount:1,controller:i});this._trim(),this._updateTimer()}deleteBlock(t,n){const r=this._cachedBlocks,i=t+"/"+n;r.has(i)&&r.delete(i)}updateMaxSize(t){this._size=t,this._trim()}empty(){this._cachedBlocks.clear(),this._clearTimer()}getCurrentSize(){return this._cachedBlocks.size}_updateTimer(){if(this._timer!=null)return;const t=this._cachedBlocks;this._timer=setInterval(()=>{const n=Array.from(t),r=Date.now();for(let i=0;i<n.length&&n[i][1].ts<=r-this._duration;i++)t.delete(n[i][0]);t.size===0&&this._clearTimer()},this._interval)}_trim(){const t=this._cachedBlocks;if(this._size===-1||this._size>=t.size)return;const n=Array.from(t);for(let r=0;r<n.length-this._size;r++)t.delete(n[r][0])}_clearTimer(){this._timer!=null&&(clearInterval(this._timer),this._timer=null)}};var T_;function IF(e,t,n){return!ou(e,t,n)}function Tu(e,t,n){const r=IF(e,t,n);if(r&&!_u())throw new Y("rasterprojectionhelper-project","projection engine is not loaded");return r}(function(e){e[e.None=0]="None",e[e.North=1]="North",e[e.South=2]="South",e[e.Both=3]="Both"})(T_||(T_={}));const Ik=(e,t,n,r=0)=>{if(n[0]===1)return[0,0];let i=1,s=-1,o=1,a=-1;for(let w=0;w<e.length;w+=2)isNaN(e[w])||(i=i>e[w]?e[w]:i,s=s>e[w]?s:e[w],o=o>e[w+1]?e[w+1]:o,a=a>e[w+1]?a:e[w+1]);const{cols:l,rows:c}=t,u=(s-i)/l/n[0],h=(a-o)/c/n[1],f=2*r;let d=0,g=!1,y=[0,0];for(let w=0;w<l-3;w++){for(let v=0;v<c-3;v++){const x=w*c*2+2*v,S=(e[x]+e[x+4]+e[x+4*c]+e[x+4*c+4])/4,_=(e[x+1]+e[x+5]+e[x+4*c+1]+e[x+4*c+5])/4,M=Math.abs((S-e[x+2*c+2])/u),$=Math.abs((_-e[x+2*c+3])/h);if(M+$>d&&(d=M+$,y=[M,$]),f&&d>f){g=!0;break}}if(g)break}return y},vle={3395:20037508342789244e-9,3410:17334193943686873e-9,3857:20037508342788905e-9,3975:17367530445161372e-9,4087:20037508342789244e-9,4088:20015108787169147e-9,6933:17367530445161372e-9,32662:20037508342789244e-9,53001:2001508679602057e-8,53002:1000754339801029e-8,53003:2001508679602057e-8,53004:2001508679602057e-8,53016:14152803599503474e-9,53017:17333573624304302e-9,53034:2001508679602057e-8,53079:20015114352186374e-9,53080:20015114352186374e-9,54001:20037508342789244e-9,54002:10018754171394624e-9,54003:20037508342789244e-9,54004:20037508342789244e-9,54016:14168658027268292e-9,54017:1736753044516137e-8,54034:20037508342789244e-9,54079:20037508342789244e-9,54080:20037508342789244e-9,54100:20037508342789244e-9,54101:20037508342789244e-9},n2=32,r2=4,iv=r2,sv=new Map,ov=new Map,i2=500;async function A_(){_u()||await hf()}function xle(e,t,n){return Tu(e.spatialReference,t),n?D1(t,e.spatialReference,e):D1(e.spatialReference,t,e)}function s2(e,t,n,r=null){const i=e.spatialReference;if(i.equals(t))return e;Tu(i,t,r);const s=n.center,o=new Me({xmin:s.x-e.x/2,xmax:s.x+e.x/2,ymin:s.y-e.y/2,ymax:s.y+e.y/2,spatialReference:i}),a=$s(o,t,r),l=gr(t);let c;if(a==null||l!=null&&a.width>=l){const u=tr(i)/tr(t);c={x:e.x*u,y:e.y*u}}else c={x:a.width,y:a.height};return c}function Rr(e,t=.01){return tr(e)?t/tr(e):0}function o2(e,t,n=null,r=!0){const i=e.spatialReference;if(i.equals(t))return e;Tu(i,t,n);const s=$s(e,t,n);return r&&s&&kF([e],[s],i,t),s}function kF(e,t,n,r){const i=a2(n,!0),s=a2(r,!0),o=Rr(n,i2),a=Rr(r,i2);if(o&&i!=null&&s!=null)for(let l=0;l<e.length;l++){const c=t[l];if(!c)continue;const{x:u}=e[l],{x:h}=c;h>=s[1]-a&&Math.abs(u-i[0])<o?c.x-=s[1]-s[0]:h<=s[0]+a&&Math.abs(u-i[1])<o&&(c.x+=s[1]-s[0])}}function Sle(e){const{inSR:t,outSR:n,datumTransformation:r,preferPE:i}=e;if(t.equals(n)){const{points:s}=r4(e,null);return s}return t.isWebMercator&&n.isWGS84||t.isWGS84&&n.isWebMercator?Mle(e):Tu(t,n,r)&&i&&(t.isGeographic||mu(t)!=null)?kk(e):_le(e)}function _le(e){const{points:t}=r4(e,null),{inSR:n,outSR:r,datumTransformation:i}=e,s=t.map(a=>new ce(a[0],a[1],n)),o=$s(s,r,i);return i&&kF(s,o,n,r),o.map(a=>a?[a.x,a.y]:[NaN,NaN])}function kk(e){const{inSR:t,outSR:n,datumTransformation:r}=e,i=mu(t),{points:s,mask:o}=r4(e,i);if(!t.isGeographic){const l=t.wkid?Or.coordsys(t.wkid):Or.fromString(t.isGeographic?je.PE_TYPE_GEOGCS:je.PE_TYPE_PROJCS,t.wkt2||t.wkt);Kp.projToGeog(l,s.length,s)}if(r!=null&&r.steps.length){let l;if(n.isGeographic&&(l=s.map(([u])=>u>179.9955?1:u<-179.9955?-1:0)),r.steps.forEach(u=>{const h=u.wkid?Or.geogtran(u.wkid):Or.fromString(je.PE_TYPE_GEOGTRAN,u.wkt);w1.geogToGeog(h,s.length,s,null,u.isInverse?je.PE_TRANSFORM_2_TO_1:je.PE_TRANSFORM_1_TO_2)}),l)for(let u=0;u<s.length;u++){const h=l[u],f=s[u][0],d=f>179.9955?1:f<-179.9955?-1:0;h&&d&&h!==d&&(s[u][0]=h>0?f+360:f-360)}}if(!n.isGeographic){const l=mu(n,!0),c=l!=null&&l.isEnvelope?[l.bbox[1],l.bbox[3]]:[-90,90];$le(s,c);const u=n.wkid?Or.coordsys(n.wkid):Or.fromString(n.isGeographic?je.PE_TYPE_GEOGCS:je.PE_TYPE_PROJCS,n.wkt2||n.wkt);Kp.geogToProj(u,s.length,s)}let a=s;if(o&&s.length!==o.length){a=[];for(let l=0,c=0;l<o.length;l++)o[l]?a.push(s[c++]):a.push([NaN,NaN])}return a}function Mle(e){const{cols:t,rows:n,xres:r,yres:i,usePixelCenter:s,inSR:o,outSR:a}=e;let{xmin:l,ymax:c}=e;s&&(l+=r/2,c-=i/2);const u=[],h=[],f=Math.max(t,n);for(let g=0;g<f;g++){const y=l+r*Math.min(t,g),w=c-i*Math.min(n,g),v=$s(new ce({x:y,y:w,spatialReference:o}),a);g<=t&&u.push(v.x),g<=n&&h.push(v.y)}const d=[];for(let g=0;g<t;g++)for(let y=0;y<n;y++)d.push([u[g],h[y]]);return d}function mu(e,t=!1){let n=e.wkid||e.wkt2||e.wkt;if(!n||e.isGeographic)return null;if(n=String(n),sv.has(n)){const o=sv.get(n);return t?o==null?void 0:o.gcs:o==null?void 0:o.pcs}const r=e.wkid?Or.coordsys(e.wkid):Or.fromString(e.isGeographic?je.PE_TYPE_GEOGCS:je.PE_TYPE_PROJCS,e.wkt2||e.wkt),i=Ek(r,Rr(e,1e-4)),s=Ek(r,0,!0);return sv.set(n,{pcs:i,gcs:s}),t?s:i}function Ek(e,t=0,n=!1){const r=Xp.generate(e),i=n?e.horizonGcsGenerate():e.horizonPcsGenerate();if(!r||!(i!=null&&i.length))return null;let s=!1,o=i.find(w=>w.getInclusive()===1&&w.getKind()===1);if(!o){if(o=i.find(w=>w.getInclusive()===1&&w.getKind()===0),!o)return null;s=!0}const a=n?0:(r.getNorthPoleLocation()===2?1:0)|(r.getSouthPoleLocation()===2?2:0),l=r.isPannableRectangle(),c=o.getCoord();if(s)return{isEnvelope:s,isPannable:l,vertices:c,coef:null,bbox:[c[0][0]-t,c[0][1]-t,c[1][0]+t,c[1][1]+t],poleLocation:a};let u=0;const h=[];let[f,d]=c[0],[g,y]=c[0];for(let w=0,v=c.length;w<v;w++){u++,u===v&&(u=0);const[x,S]=c[w],[_,M]=c[u];if(M===S)h.push([x,_,S,M,2]);else{const $=(_-x)/(M-S||1e-4),T=x-$*S;S<M?h.push([$,T,S,M,0]):h.push([$,T,M,S,1])}f=f<x?f:x,d=d<S?d:S,g=g>x?g:x,y=y>S?y:S}return{isEnvelope:!1,isPannable:l,vertices:c,coef:h,bbox:[f,d,g,y],poleLocation:a}}function r4(e,t){const n=[],{cols:r,rows:i,xres:s,yres:o,usePixelCenter:a}=e;let{xmin:l,ymax:c}=e;if(a&&(l+=s/2,c-=o/2),t==null){for(let d=0;d<r;d++)for(let g=0;g<i;g++)n.push([l+s*d,c-o*g]);return{points:n}}const u=new Uint8Array(r*i);if(t.isEnvelope){const{bbox:[d,g,y,w]}=t;for(let v=0,x=0;v<r;v++){const S=l+s*v,_=t.isPannable||S>=d&&S<=y;for(let M=0;M<i;M++,x++){const $=c-o*M;_&&$>=g&&$<=w&&(n.push([S,$]),u[x]=1)}}return{points:n,mask:u}}const h=t.coef,f=[];for(let d=0;d<i;d++){const g=c-o*d,y=[],w=[];for(let x=0;x<h.length;x++){const[S,_,M,$,T]=h[x];if(g===M&&M===$)y.push(S),y.push(_),w.push(2),w.push(2);else if(g>=M&&g<=$){const A=S*g+_;y.push(A),w.push(T)}}let v=y;if(y.length>2){let x=w[0]===2?0:w[0],S=y[0];v=[];for(let _=1;_<w.length;_++)w[_]===2&&_!==w.length-1||(w[_]!==x&&(v.push(x===0?Math.min(S,y[_-1]):Math.max(S,y[_-1])),x=w[_],S=y[_]),_===w.length-1&&v.push(w[_]===0?Math.min(S,y[_]):Math.max(S,y[_])));v.sort((_,M)=>_-M)}else y[0]>y[1]&&(v=[y[1],y[0]]);f.push(v)}for(let d=0,g=0;d<r;d++){const y=l+s*d;for(let w=0;w<i;w++,g++){const v=c-o*w,x=f[w];if(x.length===2)y>=x[0]&&y<=x[1]&&(n.push([y,v]),u[g]=1);else if(x.length>2){let S=!1;for(let _=0;_<x.length;_+=2)if(y>=x[_]&&y<=x[_+1]){S=!0;break}S&&(n.push([y,v]),u[g]=1)}}}return{points:n,mask:u}}function $le(e,t){const[n,r]=t;for(let i=0;i<e.length;i++){const s=e[i][1];(s<n||s>r)&&(e[i]=[NaN,NaN])}}function EF(e,t){const n=gr(e[0].spatialReference);if(e.length<2||n==null||(t=t??Rr(e[0].spatialReference),(e=e.filter(a=>a.width>t)).length===1))return e[0];let{xmin:r,xmax:i,ymin:s,ymax:o}=e[0];for(let a=1;a<e.length;a++){const l=e[a];i=l.xmax+n*a,s=Math.min(s,l.ymin),o=Math.max(o,l.ymax)}return new Me({xmin:r,xmax:i,ymin:s,ymax:o,spatialReference:e[0].spatialReference})}function Uc(e,t,n=null,r=!0){const i=e.spatialReference;if(i.equals(t))return e;const s=Fp(e),o=gr(i,!0),a=gr(t);if(s===0||o==null||a==null){const c=Ck(e,t,n,r);if(o==null&&a!=null&&Math.abs(c.width-a)<Rr(t)&&_u()){const u=mu(i);if(u!=null&&u.poleLocation===T_.None&&e.width<(u.bbox[2]-u.bbox[0])/2)return Ale(e,t)||c}return c}const l=e.clone().normalize();if(l.length===1&&e.xmax<o&&e.xmax-o/2>Rr(i)){const{xmin:c,xmax:u}=e;for(let h=0;h<=s;h++){const f=h===0?c:-o/2,d=h===s?u-o*h:o/2;l[h]=new Me({xmin:f,xmax:d,ymin:e.ymin,ymax:e.ymax,spatialReference:i})}}return EF(l.map(c=>Ck(c,t,n,r)).filter(ja))}function Tle(e,t,n){if(e.type==="extent"){const{xmin:r,ymin:i,xmax:s,ymax:o,spatialReference:a}=e;e=new ii({rings:[[[r,o],[s,o],[s,i],[r,i],[r,o]]],spatialReference:a})}return e.spatialReference.equals(t)?e:(Tu(e.spatialReference,t,n),$s(e,t,n))}function Ale(e,t){const n=gr(t);if(n==null)return null;let{xmin:r,ymin:i,xmax:s,ymax:o}=e;const a=e.spatialReference,l=new ii({spatialReference:a,rings:[[[r,i],[s,i],[s,o],[r,o],[r,i]]]}),c=$s(l,t);if(c.rings.length!==2||!c.rings[0].length||!c.rings[1].length)return null;const{rings:u}=c,h=Rr(a),f=new Me({spatialReference:t});for(let d=0;d<2;d++){r=s=u[d][0][0],i=o=u[d][0][1];for(let g=0;g<u[d].length;g++)r=r>u[d][g][0]?u[d][g][0]:r,s=s<u[d][g][0]?u[d][g][0]:s,i=i>u[d][g][1]?u[d][g][1]:i,o=o<u[d][g][1]?u[d][g][1]:o;if(d===0)f.ymin=i,f.ymax=o,f.xmin=r,f.xmax=s;else if(f.ymin=Math.min(f.ymin,i),f.ymax=Math.max(f.ymax,o),Math.abs(s-n/2)<h)f.xmin=r,f.xmax=f.xmax+n;else{if(!(Math.abs(r+n/2)<h))return null;f.xmax=s+n}}return f}function Ck(e,t,n=null,r=!0,i=!0){const s=e.spatialReference;if(s.equals(t)||!t)return e;Tu(s,t,n);const o=$s(e,t,n);if(i&&t.isWebMercator&&o&&(o.ymax=Math.min(20037508342787e-6,o.ymax),o.ymin=Math.max(-20037508342787e-6,o.ymin),o.ymin>=o.ymax))return null;if(!r||!o)return o;const a=a2(s,!0),l=a2(t,!0);if(a==null||l==null)return o;const c=Rr(s,.001),u=Rr(s,i2),h=Rr(t,.001);if(Math.abs(o.xmin-l[0])<h&&Math.abs(o.xmax-l[1])<h){const f=Math.abs(e.xmin-a[0]),d=Math.abs(a[1]-e.xmax);if(f<c&&d>u){o.xmin=l[0];const g=[];g.push(new ce(e.xmax,e.ymin,s)),g.push(new ce(e.xmax,(e.ymin+e.ymax)/2,s)),g.push(new ce(e.xmax,e.ymax,s));const y=g.map(w=>o2(w,t,n)).filter(w=>!isNaN(w==null?void 0:w.x)).map(w=>w.x);o.xmax=Math.max.apply(null,y)}if(d<c&&f>u){o.xmax=l[1];const g=[];g.push(new ce(e.xmin,e.ymin,s)),g.push(new ce(e.xmin,(e.ymin+e.ymax)/2,s)),g.push(new ce(e.xmin,e.ymax,s));const y=g.map(w=>o2(w,t,n)).filter(w=>!isNaN(w==null?void 0:w.x)).map(w=>w.x);o.xmin=Math.min.apply(null,y)}}else{const f=Rr(t,.001);Math.abs(o.xmin-l[0])<f&&(o.xmin=l[0]),Math.abs(o.xmax-l[1])<f&&(o.xmax=l[1])}return o}function gr(e,t=!1){if(!e)return null;const n=t?20037508342787e-6:20037508342788905e-9;return e.isWebMercator?2*n:e.wkid&&e.isGeographic?360:2*vle[e.wkid]||null}function a2(e,t=!1){if(e.isGeographic)return[-180,180];const n=gr(e,t);return n!=null?[-n/2,n/2]:null}function Ok(e,t,n,r){let i=(e-t)/n;return i-Math.floor(i)!=0?i=Math.floor(i):r&&(i-=1),i}function Fp(e,t=!1){const n=gr(e.spatialReference);if(n==null)return 0;const r=t?0:-(n/2),i=Rr(e.spatialReference),s=!t&&Math.abs(e.xmax-n/2)<i?n/2:e.xmax,o=!t&&Math.abs(e.xmin+n/2)<i?-n/2:e.xmin;return Ok(s,r,n,!0)-Ok(o,r,n,!1)}function Ile(e){const t=e.storageInfo.origin.x,n=gr(e.spatialReference,!0);if(n==null)return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const r=n/2,{nativePixelSize:i,storageInfo:s,extent:o}=e,{maximumPyramidLevel:a,blockWidth:l,pyramidScalingFactor:c}=s;let u=i.x;const h=[],f=e.transform!=null&&e.transform.type==="gcs-shift",d=t+(f?0:r),g=f?n-t:r-t;for(let y=0;y<=a;y++){const w=(o.xmax-t)/u/l,v=w-Math.floor(w)==0?w:Math.ceil(w),x=g/u/l,S=x-Math.floor(x)==0?x:Math.ceil(x),_=Math.floor(d/u/l),M=Math.round(d/u)%l,$=(l-Math.round(g/u)%l)%l;h.push({resolutionX:u,blockWidth:l,datsetColumnCount:v,worldColumnCountFromOrigin:S,leftMargin:M,rightPadding:$,originColumnOffset:_}),u*=c}return{originX:t,halfWorldWidth:r,pyramidsInfo:h,hasGCSSShiftTransform:f}}function kle(e){if(!e||e.isGeographic)return e;const t=String(e.wkid||e.wkt2||e.wkt);let n;return ov.has(t)?n=ov.get(t):(n=(e.wkid?Or.coordsys(e.wkid):Or.fromString(je.PE_TYPE_PROJCS,e.wkt2||e.wkt)).getGeogcs().getCode(),ov.set(t,n)),new we({wkid:n})}function Ele(e){const t=e.isAdaptive&&e.spacing==null;let n=e.spacing||[n2,n2],r=av(e),i={cols:r.size[0]+1,rows:r.size[1]+1};const s=r.outofBoundPointCount>0&&r.outofBoundPointCount<r.offsets.length/2;let o=r.outofBoundPointCount===r.offsets.length/2||t&&s?[0,0]:Ik(r.offsets,i,n,iv);const a=(o[0]+o[1])/2,l=e.projectedExtent.spatialReference,c=e.srcBufferExtent.spatialReference;if(t&&(s||a>iv)&&(IF(l,c,e.datumTransformation)&&(l.isGeographic||mu(l)),n=[r2,r2],r=av({...e,spacing:n}),i={cols:r.size[0]+1,rows:r.size[1]+1},o=Ik(r.offsets,i,n,iv)),r.error=o,n[0]>1&&(r.coefficients=Pk(r.offsets,i,s)),e.includeGCSGrid&&!l.isGeographic&&!l.isWebMercator)if(c.isGeographic)r.gcsGrid={offsets:r.offsets,coefficients:r.coefficients,spacing:n};else{const u=mu(l);if(u!=null&&!u.isEnvelope){const h=kle(l),f=Uc(e.projectedExtent,h),{offsets:d}=av({...e,srcBufferExtent:f,spacing:n}),g=Pk(d,i,s);r.gcsGrid={offsets:d,coefficients:g,spacing:n}}}return r}function av(e){const{projectedExtent:t,srcBufferExtent:n,pixelSize:r,datumTransformation:i,rasterTransform:s}=e,o=t.spatialReference,a=n.spatialReference,l=Tu(o,a),{xmin:c,ymin:u,xmax:h,ymax:f}=t,d=gr(a),g=d!=null&&(e.hasWrapAround||(s==null?void 0:s.type)==="gcs-shift"),y=e.spacing||[n2,n2],w=y[0]*r.x,v=y[1]*r.y,x=y[0]===1,S=Math.ceil((h-c)/w-.1/y[0])+(x?0:1),_=Math.ceil((f-u)/v-.1/y[1])+(x?0:1),M=Sle({cols:S,rows:_,xmin:c,ymax:f,xres:w,yres:v,inSR:o,outSR:a,datumTransformation:i,preferPE:y[0]<=r2,usePixelCenter:x}),$=[];let T,A=0;const I=x?-1:NaN,{xmin:E,xmax:O,ymax:P,width:j,height:V}=n,U=Rr(a,i2),q=d!=null&&E>0&&O>d/2;let C=!1;if(l){const R=mu(o);C=R!=null&&R.poleLocation>0}for(let R=0;R<S;R++){const N=[];for(let D=0;D<_;D++){let z=M[R*_+D];if(g&&z[0]>O&&z[0]>d/2-U?z[0]-=d:g&&R===0&&z[0]<0&&q&&!s&&(z[0]+=d),!z||isNaN(z[0])||isNaN(z[1]))$.push(I),$.push(I),N.push(null),A++;else{if(s){const G=s.inverseTransform(new ce({x:z[0],y:z[1],spatialReference:a}));z=[G.x,G.y]}N.push(z),R>0&&g&&T[D]&&z[0]<T[D][0]&&(z[0]+=d,C&&z[0]>O&&z[0]>d&&(z[0]-=d)),$.push((z[0]-E)/j),$.push((P-z[1])/V)}}T=N}return{offsets:$,error:null,coefficients:null,outofBoundPointCount:A,spacing:y,size:x?[S,_]:[S-1,_-1]}}function Pk(e,t,n){const{cols:r,rows:i}=t,s=new Float32Array((r-1)*(i-1)*2*6),o=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),a=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let l=0;l<r-1;l++){for(let c=0;c<i-1;c++){let u=l*i*2+2*c;const h=e[u],f=e[u+1],d=e[u+2],g=e[u+3];u+=2*i;const y=e[u],w=e[u+1],v=e[u+2],x=e[u+3];let S=0,_=12*(c*(r-1)+l);for(let M=0;M<3;M++)s[_++]=o[S++]*h+o[S++]*d+o[S++]*v;S=0;for(let M=0;M<3;M++)s[_++]=o[S++]*f+o[S++]*g+o[S++]*x;S=0;for(let M=0;M<3;M++)s[_++]=a[S++]*h+a[S++]*y+a[S++]*v;S=0;for(let M=0;M<3;M++)s[_++]=a[S++]*f+a[S++]*w+a[S++]*x}if(n)for(let c=0;c<s.length;c++)isNaN(s[c])&&(s[c]=-1)}return s}function Cle(e,t){const n=e.clone().normalize();return n.length===1?n[0]:EF(n,t)}function Ole(e){const{spatialReference:t}=e,n=yr(t);if(!n)return e;const[r,i]=n.valid,s=i-r;let o=0;if(e.xmin<r){const a=r-e.xmin;o=Math.ceil(a/s)}else if(e.xmin>i){const a=e.xmin-i;o=-Math.ceil(a/s)}return new Me({spatialReference:e.spatialReference,xmin:e.xmin+o*s,ymin:e.ymin,xmax:e.xmax+o*s,ymax:e.ymax})}function I_(e,t,n){var g;const{storageInfo:r,pixelSize:i}=t;let s=0,o=!1;const{pyramidResolutions:a}=r,l=((g=r.tileInfo.format)==null?void 0:g.toLowerCase())==="mixed"?Math.max(1,Math.min(3,r.tileInfo.dpi/96)):1,c=(e.x+e.y)/2/l;if(a!=null&&a.length){const y=a[a.length-1],w=(y.x+y.y)/2,v=(i.x+i.y)/2;if(c<=v)s=0;else if(c>=w)s=a.length,o=c/w>8;else{let S,_=v;for(let M=1;M<=a.length;M++){if(S=(a[M-1].x+a[M-1].y)/2,c<=S){c===S?s=M:n==="down"?(s=M-1,o=c/_>8):s=n==="up"||c-_>S-c||c/_>2?M:M-1;break}_=S}}const x=s===0?i:a[s-1];return o&&Math.min(x.x,x.y)*tr(t.spatialReference)>19567&&(o=!1),{pyramidLevel:s,pyramidResolution:new ce({x:x.x,y:x.y,spatialReference:t.spatialReference}),excessiveReading:o}}const u=Math.log(e.x/i.x)/Math.LN2,h=Math.log(e.y/i.y)/Math.LN2,f=t.storageInfo.maximumPyramidLevel||0;s=n==="down"?Math.floor(Math.min(u,h)):n==="up"?Math.ceil(Math.max(u,h)):Math.round((u+h)/2),s<0?s=0:s>f&&(o=s>f+3,s=f);const d=2**s;return{pyramidLevel:s,pyramidResolution:new ce({x:d*t.nativePixelSize.x,y:d*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:o}}function Ple(e,t){const{pixelSize:n,extent:r}=e,i=xle(r,t,!1);return Uc(Cle(r,(n.x+n.y)/16),t,i)}function KMe(e,t,n){var I;const r=(n==null?void 0:n.tileSize)??512,i=(n==null?void 0:n.alignGlobalDatasetWithAGOL)??!0,s=!!(n!=null&&n.limitToSrcResolution),{extent:o,spatialReference:a,pixelSize:l}=e,c=s2(new ce({x:l.x,y:l.y,spatialReference:a}),t,o);if(c==null)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const u=(c.x+c.y)/2,h=tr(t),f=u*h*96*39.37,d=t.isGeographic?256/r*2958287637958547e-7:256/r*591657527591555e-6;let g=e.dataType==="vector-magdir"||e.dataType==="vector-uv";const y=Ple(e,t),w=Math.min(Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2),Math.ceil(Math.log(d/2/f)/Math.LN2));if(!g&&i&&(t.isGeographic||t.isWebMercator)){const E=gr(t);if(g=Fp(y)>0||E!=null&&y.width>E/4,!g&&E!=null){let O=-1;if(w<3)O=2**w*u*r;else if(e.storageInfo){const{maximumPyramidLevel:j=0,pyramidScalingFactor:V=2}=e.storageInfo;O=V**j*u*r}const P=Math.ceil(E/O);g=P===1||P===2&&E/2-y.xmax<O}}let v,x=f;const S=1.001,_=Math.min(2,Math.max(1.414,((I=e.storageInfo)==null?void 0:I.pyramidScalingFactor)||2));if(g){x=d;const E=t.isGeographic?1341104507446289e-21:.29858214164761665,O=E*(96*h*39.37),P=t.isGeographic?4326:3857;v=s2(new ce({x:E,y:E,spatialReference:{wkid:P}}),a,y),v.x*=x/O,v.y*=x/O}else{v={x:l.x,y:l.y};let E=0;for(;x<d*(S/2)&&E<w;)E++,x*=_,v.x*=_,v.y*=_;Math.max(x,d)/Math.min(x,d)<=S&&(x=d)}const M=[x],$=[{x:v.x,y:v.y}],T=70.5310735,A=Math.min(T,f)/S;for(;x>=A;)x/=_,v.x/=_,v.y/=_,M.push(x),$.push({x:v.x,y:v.y});if(s){const E=.001*l.x;let O=$.findIndex(P=>P.x>=l.x-E&&P.x<=l.x+E);O>-1?($.length=O+1,M.length=O+1):(O=$.findIndex(P=>P.x<=l.x+E),O>0&&($.length=O,M.length=O))}return{projectedPixelSize:c,scales:M,srcResolutions:$,isCustomTilingScheme:!g}}const wo=new Map,Qa=new wle;function Rk(e,t){return t==null?e:`${e}?sliceId=${t}`}function XMe(e,t){const n={extent:null,rasterInfo:t,cache:new Map},r=wo.get(e);return r?(r.push(n),r.length-1):(wo.set(e,[n]),0)}function QMe(e,t){const n=wo.get(e);n&&(n[t]=null,n.some(r=>r!=null)||wo.delete(e))}function Rle(e,t,n){var o,a;const r=wo.get(e);if(!r)return t==null?Qa.decreaseRefCount(e,n):0;if(t==null||r[t]==null)return Qa.decreaseRefCount(e,n);const i=(o=r[t])==null?void 0:o.cache,s=i==null?void 0:i.get(n);if(i&&s){if(s.refCount--,s.refCount===0){i.delete(n);for(let l=0;l<r.length;l++)(a=r[l])==null||a.cache.delete(n);s.controller&&s.controller.abort()}return s.refCount}return 0}function Nk(e,t,n){var s,o,a;const r=wo.get(e);if(!r)return t==null?Qa.getBlock(e,n):null;if(t==null||r[t]==null){for(let l=0;l<r.length;l++){const c=(s=r[l])==null?void 0:s.cache.get(n);if(c)return c.refCount++,c.block}return Qa.getBlock(e,n)}const i=(o=r[t])==null?void 0:o.cache.get(n);if(i)return i.refCount++,i.block;for(let l=0;l<r.length;l++){if(l===t||!r[l])continue;const c=(a=r[l])==null?void 0:a.cache,u=c==null?void 0:c.get(n);if(c&&u)return u.refCount++,c.set(n,u),u.block}return null}function Dk(e,t,n,r,i=null){var a;const s=wo.get(e);if(!s)return void(t==null&&Qa.putBlock(e,n,r,i));if(t==null||s[t]==null)return void Qa.putBlock(e,n,r,i);const o={refCount:1,block:r,isResolved:!1,isRejected:!1,controller:i};r.then(()=>o.isResolved=!0).catch(()=>o.isRejected=!0),(a=s[t])==null||a.cache.set(n,o)}function Nle(e,t,n){var i;const r=wo.get(e);r?t!=null&&r[t]!=null?(i=r[t])==null||i.cache.delete(n):Qa.deleteBlock(e,n):t==null&&Qa.deleteBlock(e,n)}function Dle(e,t){const n=wo.get(e);return n?n[t]??null:null}function e$e(e,t,n,r,i,s,o=null){const a=Dle(e,t);if(!a)return;const l=a.extent,{cache:c,rasterInfo:u}=a;if(l&&l.xmin===n.xmin&&l.xmax===n.xmax&&l.ymin===n.ymin&&l.ymax===n.ymax)return;r=r??0;const h=n.clone().normalize(),{spatialReference:f,transform:d}=u,g=new Set;for(let y=0;y<h.length;y++){const w=h[y];if(w.xmax-w.xmin<=r||w.ymax-w.ymin<=r)continue;let v=Uc(w,f,o);d!=null&&(v=d.inverseTransform(v));const x=new ce({x:r,y:r,spatialReference:w.spatialReference});if(i==null&&!(i=s2(x,f,w,o)))return;const{pyramidLevel:S,pyramidResolution:_,excessiveReading:M}=I_(i,u,s||"closest");if(M)return;const{storageInfo:$}=u,{origin:T}=$,A={x:Math.max(0,Math.floor((v.xmin-T.x)/_.x)),y:Math.max(0,Math.floor((T.y-v.ymax)/_.y))},I=Math.ceil((v.xmax-v.xmin)/_.x-.1),E=Math.ceil((v.ymax-v.ymin)/_.y-.1),O=S>0?$.pyramidBlockWidth:$.blockWidth,P=S>0?$.pyramidBlockHeight:$.blockHeight,j=1,V=Math.max(0,Math.floor(A.x/O)-j),U=Math.max(0,Math.floor(A.y/P)-j),q=Math.floor((A.x+I-1)/O)+j,C=Math.floor((A.y+E-1)/P)+j;for(let R=U;R<=C;R++)for(let N=V;N<=q;N++)g.add(`${S}/${R}/${N}`)}c.forEach((y,w)=>{if(!g.has(w)){const v=c.get(w);(v==null||v.isResolved||v.isRejected)&&c.delete(w)}}),a.extent={xmin:n.xmin,ymin:n.ymin,xmax:n.xmax,ymax:n.ymax}}var lv,Lk,Fk,k_={exports:{}};k_.exports,Lk=k_,lv=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(t){var n=this.buffer,r=n?n.byteLength:0;if(t<r)return n;for(var i=512;i<t;)i<<=1;for(var s=new Uint8Array(i),o=0;o<r;++o)s[o]=n[o];return this.buffer=s},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var n=this.pos;if(t){this.ensureBuffer(n+t);for(var r=n+t;!this.eof&&this.bufferLength<r;)this.readBlock();var i=this.bufferLength;r>i&&(r=i)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}return this.pos=r,this.buffer.subarray(n,r)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,n,r){for(var i=t+n;this.bufferLength<=i&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,n,r)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},e}(),(Fk=function(){if(!self||!self.Uint32Array)return null;var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),r=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],i=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function s(a){throw new Error(a)}function o(a){var l=0,c=a[l++],u=a[l++];c!=-1&&u!=-1||s("Invalid header in flate stream"),(15&c)!=8&&s("Unknown compression method in flate stream"),((c<<8)+u)%31!=0&&s("Bad FCHECK in flate stream"),32&u&&s("FDICT bit set in flate stream"),this.bytes=a,this.bytesPos=l,this.codeSize=0,this.codeBuf=0,lv.call(this)}return o.prototype=Object.create(lv.prototype),o.prototype.getBits=function(a){for(var l,c=this.codeSize,u=this.codeBuf,h=this.bytes,f=this.bytesPos;c<a;)(l=h[f++])===void 0&&s("Bad encoding in flate stream"),u|=l<<c,c+=8;return l=u&(1<<a)-1,this.codeBuf=u>>a,this.codeSize=c-=a,this.bytesPos=f,l},o.prototype.getCode=function(a){for(var l=a[0],c=a[1],u=this.codeSize,h=this.codeBuf,f=this.bytes,d=this.bytesPos;u<c;){var g;(g=f[d++])===void 0&&s("Bad encoding in flate stream"),h|=g<<u,u+=8}var y=l[h&(1<<c)-1],w=y>>16,v=65535&y;return(u==0||u<w||w==0)&&s("Bad encoding in flate stream"),this.codeBuf=h>>w,this.codeSize=u-w,this.bytesPos=d,v},o.prototype.generateHuffmanTable=function(a){for(var l=a.length,c=0,u=0;u<l;++u)a[u]>c&&(c=a[u]);for(var h=1<<c,f=new Uint32Array(h),d=1,g=0,y=2;d<=c;++d,g<<=1,y<<=1)for(var w=0;w<l;++w)if(a[w]==d){var v=0,x=g;for(u=0;u<d;++u)v=v<<1|1&x,x>>=1;for(u=v;u<h;u+=y)f[u]=d<<16|w;++g}return[f,c]},o.prototype.readBlock=function(){function a(D,z,G,W,K){for(var oe=D.getBits(G)+W;oe-- >0;)z[y++]=K}var l=this.getBits(3);if(1&l&&(this.eof=!0),(l>>=1)!=0){var c,u;if(l==1)c=r,u=i;else if(l==2){for(var h=this.getBits(5)+257,f=this.getBits(5)+1,d=this.getBits(4)+4,g=Array(e.length),y=0;y<d;)g[e[y++]]=this.getBits(3);for(var w=this.generateHuffmanTable(g),v=0,x=(y=0,h+f),S=new Array(x);y<x;){var _=this.getCode(w);_==16?a(this,S,2,3,v):_==17?a(this,S,3,3,v=0):_==18?a(this,S,7,11,v=0):S[y++]=v=_}c=this.generateHuffmanTable(S.slice(0,h)),u=this.generateHuffmanTable(S.slice(h,x))}else s("Unknown block type in flate stream");for(var M=(C=this.buffer)?C.length:0,$=this.bufferLength;;){var T=this.getCode(c);if(T<256)$+1>=M&&(M=(C=this.ensureBuffer($+1)).length),C[$++]=T;else{if(T==256)return void(this.bufferLength=$);var A=(T=t[T-=257])>>16;A>0&&(A=this.getBits(A)),v=(65535&T)+A,T=this.getCode(u),(A=(T=n[T])>>16)>0&&(A=this.getBits(A));var I=(65535&T)+A;$+v>=M&&(M=(C=this.ensureBuffer($+v)).length);for(var E=0;E<v;++E,++$)C[$]=C[$-I]}}}else{var O,P=this.bytes,j=this.bytesPos;(O=P[j++])===void 0&&s("Bad block header in flate stream");var V=O;(O=P[j++])===void 0&&s("Bad block header in flate stream"),V|=O<<8,(O=P[j++])===void 0&&s("Bad block header in flate stream");var U=O;(O=P[j++])===void 0&&s("Bad block header in flate stream"),(U|=O<<8)!=(65535&~V)&&s("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var q=this.bufferLength,C=this.ensureBuffer(q+V),R=q+V;this.bufferLength=R;for(var N=q;N<R;++N){if((O=P[j++])===void 0){this.eof=!0;break}C[N]=O}this.bytesPos=j}},o}())!==void 0&&(Lk.exports=Fk);const sm=WM(k_.exports);let Lle=class CF{constructor(t){this._canvas=null,this._ctx=null,t&&(this._canvas=t.canvas,this._ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}decode(t,n,r){if(!t||t.byteLength<10)throw new Y("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:i=0,height:s=0,format:o}=n;const{applyJpegMask:a}=n;if(a&&(!i||!s))throw new Y("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,c)=>{let u=null;o==="jpg"&&a&&(u=CF._getMask(t,{width:i,height:s}));const h=new Blob([new Uint8Array(t)],{type:"image/"+o=="jpg"?"jpeg":o}),f=URL.createObjectURL(h),d=new Image;let g;d.src=f,d.onload=()=>{if(URL.revokeObjectURL(f),ri(r))return void c(Ot());i=d.width,s=d.height,this._canvas&&this._ctx?(this._canvas.width===i&&this._canvas.height===s||(this._canvas.width=i,this._canvas.height=s),this._ctx.clearRect(0,0,i,s)):(this._canvas=document.createElement("canvas"),this._canvas.width=i,this._canvas.height=s,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(d,0,0);const y=this._ctx.getImageData(0,0,i,s);let w;if(g=y.data,n.renderOnCanvas){if(u)for(w=0;w<u.length;w++)u[w]?g[4*w+3]=255:g[4*w+3]=0;return this._ctx.putImageData(y,0,0),void l(null)}const v=i*s,x=new Uint8Array(v),S=new Uint8Array(v),_=new Uint8Array(v);if(u)for(w=0;w<v;w++)x[w]=g[4*w],S[w]=g[4*w+1],_[w]=g[4*w+2];else for(u=new Uint8Array(v),w=0;w<v;w++)x[w]=g[4*w],S[w]=g[4*w+1],_[w]=g[4*w+2],u[w]=g[4*w+3];l({width:i,height:s,pixels:[x,S,_],mask:u,pixelType:"u8"})},d.onerror=()=>{URL.revokeObjectURL(f),c("cannot load image")}})}static _getMask(t,n){let r=null;try{const i=new Uint8Array(t),s=Math.ceil(i.length/2);let o=0;const a=i.length-2;for(o=s;o<a&&(i[o]!==255||i[o+1]!==217);o++);if(o+=2,o<i.length-1){const l=new sm(i.subarray(o)).getBytes();r=new Uint8Array(n.width*n.height);let c=0;for(let u=0;u<l.length;u++)for(let h=7;h>=0;h--)r[c++]=l[u]>>h&1}}catch{}return r}};var jk,zk,Bk,E_={exports:{}};E_.exports,jk=E_,zk=function(){var e=function(){function t(n){this.message="JPEG error: "+n}return t.prototype=new Error,t.prototype.name="JpegError",t.constructor=t,t}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),n=4017,r=799,i=3406,s=2276,o=1567,a=3784,l=5793,c=2896;function u(){this.decodeTransform=null,this.colorTransform=-1}function h(v,x){for(var S,_,M=0,$=[],T=16;T>0&&!v[T-1];)T--;$.push({children:[],index:0});var A,I=$[0];for(S=0;S<T;S++){for(_=0;_<v[S];_++){for((I=$.pop()).children[I.index]=x[M];I.index>0;)I=$.pop();for(I.index++,$.push(I);$.length<=S;)$.push(A={children:[],index:0}),I.children[I.index]=A.children,I=A;M++}S+1<T&&($.push(A={children:[],index:0}),I.children[I.index]=A.children,I=A)}return $[0].children}function f(v,x,S){return 64*((v.blocksPerLine+1)*x+S)}function d(v,x,S,_,M,$,T,A,I){var E=S.mcusPerLine,O=S.progressive,P=x,j=0,V=0;function U(){if(V>0)return V--,j>>V&1;if((j=v[x++])===255){var he=v[x++];if(he)throw new e("unexpected marker "+(j<<8|he).toString(16))}return V=7,j>>>7}function q(he){for(var Ce=he;;){if(typeof(Ce=Ce[U()])=="number")return Ce;if(typeof Ce!="object")throw new e("invalid huffman sequence")}}function C(he){for(var Ce=0;he>0;)Ce=Ce<<1|U(),he--;return Ce}function R(he){if(he===1)return U()===1?1:-1;var Ce=C(he);return Ce>=1<<he-1?Ce:Ce+(-1<<he)+1}function N(he,Ce){var Ye=q(he.huffmanTableDC),Ft=Ye===0?0:R(Ye);he.blockData[Ce]=he.pred+=Ft;for(var St=1;St<64;){var $r=q(he.huffmanTableAC),Kt=15&$r,Tn=$r>>4;if(Kt!==0){var ow=t[St+=Tn];he.blockData[Ce+ow]=R(Kt),St++}else{if(Tn<15)break;St+=16}}}function D(he,Ce){var Ye=q(he.huffmanTableDC),Ft=Ye===0?0:R(Ye)<<I;he.blockData[Ce]=he.pred+=Ft}function z(he,Ce){he.blockData[Ce]|=U()<<I}var G=0;function W(he,Ce){if(G>0)G--;else for(var Ye=$,Ft=T;Ye<=Ft;){var St=q(he.huffmanTableAC),$r=15&St,Kt=St>>4;if($r!==0){var Tn=t[Ye+=Kt];he.blockData[Ce+Tn]=R($r)*(1<<I),Ye++}else{if(Kt<15){G=C(Kt)+(1<<Kt)-1;break}Ye+=16}}}var K,oe=0;function Se(he,Ce){for(var Ye,Ft,St=$,$r=T,Kt=0;St<=$r;){var Tn=t[St];switch(oe){case 0:if(Kt=(Ft=q(he.huffmanTableAC))>>4,(Ye=15&Ft)==0)Kt<15?(G=C(Kt)+(1<<Kt),oe=4):(Kt=16,oe=1);else{if(Ye!==1)throw new e("invalid ACn encoding");K=R(Ye),oe=Kt?2:3}continue;case 1:case 2:he.blockData[Ce+Tn]?he.blockData[Ce+Tn]+=U()<<I:--Kt==0&&(oe=oe===2?3:0);break;case 3:he.blockData[Ce+Tn]?he.blockData[Ce+Tn]+=U()<<I:(he.blockData[Ce+Tn]=K<<I,oe=0);break;case 4:he.blockData[Ce+Tn]&&(he.blockData[Ce+Tn]+=U()<<I)}St++}oe===4&&--G==0&&(oe=0)}function Ee(he,Ce,Ye,Ft,St){var $r=Ye%E;Ce(he,f(he,(Ye/E|0)*he.v+Ft,$r*he.h+St))}function Ze(he,Ce,Ye){Ce(he,f(he,Ye/he.blocksPerLine|0,Ye%he.blocksPerLine))}var ye,de,$e,ai,lt,ul,Is=_.length;ul=O?$===0?A===0?D:z:A===0?W:Se:N;var nr,ks,Eu,Cu,li=0;for(ks=Is===1?_[0].blocksPerLine*_[0].blocksPerColumn:E*S.mcusPerColumn;li<ks;){var Ou=M?Math.min(ks-li,M):ks;for(de=0;de<Is;de++)_[de].pred=0;if(G=0,Is===1)for(ye=_[0],lt=0;lt<Ou;lt++)Ze(ye,ul,li),li++;else for(lt=0;lt<Ou;lt++){for(de=0;de<Is;de++)for(Eu=(ye=_[de]).h,Cu=ye.v,$e=0;$e<Cu;$e++)for(ai=0;ai<Eu;ai++)Ee(ye,ul,li,$e,ai);li++}V=0,(nr=w(v,x))&&nr.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+nr.invalid),x=nr.offset);var Es=nr&&nr.marker;if(!Es||Es<=65280)throw new e("marker was not found");if(!(Es>=65488&&Es<=65495))break;x+=2}return(nr=w(v,x))&&nr.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+nr.invalid),x=nr.offset),x-P}function g(v,x,S){var _,M,$,T,A,I,E,O,P,j,V,U,q,C,R,N,D,z=v.quantizationTable,G=v.blockData;if(!z)throw new e("missing required Quantization Table.");for(var W=0;W<64;W+=8)P=G[x+W],j=G[x+W+1],V=G[x+W+2],U=G[x+W+3],q=G[x+W+4],C=G[x+W+5],R=G[x+W+6],N=G[x+W+7],P*=z[W],j|V|U|q|C|R|N?(j*=z[W+1],V*=z[W+2],U*=z[W+3],q*=z[W+4],C*=z[W+5],R*=z[W+6],N*=z[W+7],M=(_=(_=l*P+128>>8)+(M=l*q+128>>8)+1>>1)-M,D=($=V)*a+(T=R)*o+128>>8,$=$*o-T*a+128>>8,E=(A=(A=c*(j-N)+128>>8)+(E=C<<4)+1>>1)-E,I=(O=(O=c*(j+N)+128>>8)+(I=U<<4)+1>>1)-I,T=(_=_+(T=D)+1>>1)-T,$=(M=M+$+1>>1)-$,D=A*s+O*i+2048>>12,A=A*i-O*s+2048>>12,O=D,D=I*r+E*n+2048>>12,I=I*n-E*r+2048>>12,E=D,S[W]=_+O,S[W+7]=_-O,S[W+1]=M+E,S[W+6]=M-E,S[W+2]=$+I,S[W+5]=$-I,S[W+3]=T+A,S[W+4]=T-A):(D=l*P+512>>10,S[W]=D,S[W+1]=D,S[W+2]=D,S[W+3]=D,S[W+4]=D,S[W+5]=D,S[W+6]=D,S[W+7]=D);for(var K=0;K<8;++K)P=S[K],(j=S[K+8])|(V=S[K+16])|(U=S[K+24])|(q=S[K+32])|(C=S[K+40])|(R=S[K+48])|(N=S[K+56])?(M=(_=4112+((_=l*P+2048>>12)+(M=l*q+2048>>12)+1>>1))-M,D=($=V)*a+(T=R)*o+2048>>12,$=$*o-T*a+2048>>12,T=D,E=(A=(A=c*(j-N)+2048>>12)+(E=C)+1>>1)-E,I=(O=(O=c*(j+N)+2048>>12)+(I=U)+1>>1)-I,D=A*s+O*i+2048>>12,A=A*i-O*s+2048>>12,O=D,D=I*r+E*n+2048>>12,I=I*n-E*r+2048>>12,P=(P=(_=_+T+1>>1)+O)<16?0:P>=4080?255:P>>4,j=(j=(M=M+$+1>>1)+(E=D))<16?0:j>=4080?255:j>>4,V=(V=($=M-$)+I)<16?0:V>=4080?255:V>>4,U=(U=(T=_-T)+A)<16?0:U>=4080?255:U>>4,q=(q=T-A)<16?0:q>=4080?255:q>>4,C=(C=$-I)<16?0:C>=4080?255:C>>4,R=(R=M-E)<16?0:R>=4080?255:R>>4,N=(N=_-O)<16?0:N>=4080?255:N>>4,G[x+K]=P,G[x+K+8]=j,G[x+K+16]=V,G[x+K+24]=U,G[x+K+32]=q,G[x+K+40]=C,G[x+K+48]=R,G[x+K+56]=N):(D=(D=l*P+8192>>14)<-2040?0:D>=2024?255:D+2056>>4,G[x+K]=D,G[x+K+8]=D,G[x+K+16]=D,G[x+K+24]=D,G[x+K+32]=D,G[x+K+40]=D,G[x+K+48]=D,G[x+K+56]=D)}function y(v,x){for(var S=x.blocksPerLine,_=x.blocksPerColumn,M=new Int16Array(64),$=0;$<_;$++)for(var T=0;T<S;T++)g(x,f(x,$,T),M);return x.blockData}function w(v,x,S){function _(I){return v[I]<<8|v[I+1]}var M=v.length-1,$=S<x?S:x;if(x>=M)return null;var T=_(x);if(T>=65472&&T<=65534)return{invalid:null,marker:T,offset:x};for(var A=_($);!(A>=65472&&A<=65534);){if(++$>=M)return null;A=_($)}return{invalid:T.toString(16),marker:A,offset:$}}return u.prototype={parse:function(v){function x(){var he=v[T]<<8|v[T+1];return T+=2,he}function S(){var he=x(),Ce=T+he-2,Ye=w(v,Ce,T);Ye&&Ye.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+Ye.invalid),Ce=Ye.offset);var Ft=v.subarray(T,Ce);return T+=Ft.length,Ft}function _(he){for(var Ce=Math.ceil(he.samplesPerLine/8/he.maxH),Ye=Math.ceil(he.scanLines/8/he.maxV),Ft=0;Ft<he.components.length;Ft++){lt=he.components[Ft];var St=Math.ceil(Math.ceil(he.samplesPerLine/8)*lt.h/he.maxH),$r=Math.ceil(Math.ceil(he.scanLines/8)*lt.v/he.maxV),Kt=Ce*lt.h,Tn=Ye*lt.v*64*(Kt+1);lt.blockData=new Int16Array(Tn),lt.blocksPerLine=St,lt.blocksPerColumn=$r}he.mcusPerLine=Ce,he.mcusPerColumn=Ye}var M,$,T=0,A=null,I=null,E=[],O=[],P=[],j=x();if(j!==65496)throw new e("SOI not found");for(j=x();j!==65497;){var V,U,q;switch(j){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var C=S();j===65504&&C[0]===74&&C[1]===70&&C[2]===73&&C[3]===70&&C[4]===0&&(A={version:{major:C[5],minor:C[6]},densityUnits:C[7],xDensity:C[8]<<8|C[9],yDensity:C[10]<<8|C[11],thumbWidth:C[12],thumbHeight:C[13],thumbData:C.subarray(14,14+3*C[12]*C[13])}),j===65518&&C[0]===65&&C[1]===100&&C[2]===111&&C[3]===98&&C[4]===101&&(I={version:C[5]<<8|C[6],flags0:C[7]<<8|C[8],flags1:C[9]<<8|C[10],transformCode:C[11]});break;case 65499:for(var R=x()+T-2;T<R;){var N=v[T++],D=new Uint16Array(64);if(N>>4){if(N>>4!=1)throw new e("DQT - invalid table spec");for(U=0;U<64;U++)D[t[U]]=x()}else for(U=0;U<64;U++)D[t[U]]=v[T++];E[15&N]=D}break;case 65472:case 65473:case 65474:if(M)throw new e("Only single frame JPEGs supported");x(),(M={}).extended=j===65473,M.progressive=j===65474,M.precision=v[T++],M.scanLines=x(),M.samplesPerLine=x(),M.components=[],M.componentIds={};var z,G=v[T++],W=0,K=0;for(V=0;V<G;V++){z=v[T];var oe=v[T+1]>>4,Se=15&v[T+1];W<oe&&(W=oe),K<Se&&(K=Se);var Ee=v[T+2];q=M.components.push({h:oe,v:Se,quantizationId:Ee,quantizationTable:null}),M.componentIds[z]=q-1,T+=3}M.maxH=W,M.maxV=K,_(M);break;case 65476:var Ze=x();for(V=2;V<Ze;){var ye=v[T++],de=new Uint8Array(16),$e=0;for(U=0;U<16;U++,T++)$e+=de[U]=v[T];var ai=new Uint8Array($e);for(U=0;U<$e;U++,T++)ai[U]=v[T];V+=17+$e,(ye>>4?O:P)[15&ye]=h(de,ai)}break;case 65501:x(),$=x();break;case 65498:x();var lt,ul=v[T++],Is=[];for(V=0;V<ul;V++){var nr=M.componentIds[v[T++]];lt=M.components[nr];var ks=v[T++];lt.huffmanTableDC=P[ks>>4],lt.huffmanTableAC=O[15&ks],Is.push(lt)}var Eu=v[T++],Cu=v[T++],li=v[T++],Ou=d(v,T,M,Is,$,Eu,Cu,li>>4,15&li);T+=Ou;break;case 65535:v[T]!==255&&T--;break;default:if(v[T-3]===255&&v[T-2]>=192&&v[T-2]<=254){T-=3;break}throw new e("unknown marker "+j.toString(16))}j=x()}for(this.width=M.samplesPerLine,this.height=M.scanLines,this.jfif=A,this.eof=T,this.adobe=I,this.components=[],V=0;V<M.components.length;V++){var Es=E[(lt=M.components[V]).quantizationId];Es&&(lt.quantizationTable=Es),this.components.push({output:y(M,lt),scaleX:lt.h/M.maxH,scaleY:lt.v/M.maxV,blocksPerLine:lt.blocksPerLine,blocksPerColumn:lt.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(v,x){var S,_,M,$,T,A,I,E,O,P,j,V=this.width/v,U=this.height/x,q=0,C=this.components.length,R=v*x*C,N=new Uint8ClampedArray(R),D=new Uint32Array(v),z=4294967288;for(I=0;I<C;I++){for(_=(S=this.components[I]).scaleX*V,M=S.scaleY*U,q=I,j=S.output,$=S.blocksPerLine+1<<3,T=0;T<v;T++)E=0|T*_,D[T]=(E&z)<<3|7&E;for(A=0;A<x;A++)for(P=$*((E=0|A*M)&z)|(7&E)<<3,T=0;T<v;T++)N[q]=j[P+D[T]],q+=C}var G=this.decodeTransform;if(G)for(I=0;I<R;)for(E=0,O=0;E<C;E++,I++,O+=2)N[I]=(N[I]*G[O]>>8)+G[O+1];return N},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(v){for(var x,S,_,M=0,$=v.length;M<$;M+=3)x=v[M],S=v[M+1],_=v[M+2],v[M]=x-179.456+1.402*_,v[M+1]=x+135.459-.344*S-.714*_,v[M+2]=x-226.816+1.772*S;return v},_convertYcckToRgb:function(v){for(var x,S,_,M,$=0,T=0,A=v.length;T<A;T+=4)x=v[T],S=v[T+1],_=v[T+2],M=v[T+3],v[$++]=S*(-660635669420364e-19*S+.000437130475926232*_-54080610064599e-18*x+.00048449797120281*M-.154362151871126)-122.67195406894+_*(-.000957964378445773*_+.000817076911346625*x-.00477271405408747*M+1.53380253221734)+x*(.000961250184130688*x-.00266257332283933*M+.48357088451265)+M*(-.000336197177618394*M+.484791561490776),v[$++]=107.268039397724+S*(219927104525741e-19*S-.000640992018297945*_+.000659397001245577*x+.000426105652938837*M-.176491792462875)+_*(-.000778269941513683*_+.00130872261408275*x+.000770482631801132*M-.151051492775562)+x*(.00126935368114843*x-.00265090189010898*M+.25802910206845)+M*(-.000318913117588328*M-.213742400323665),v[$++]=S*(-.000570115196973677*S-263409051004589e-19*_+.0020741088115012*x-.00288260236853442*M+.814272968359295)-20.810012546947+_*(-153496057440975e-19*_-.000132689043961446*x+.000560833691242812*M-.195152027534049)+x*(.00174418132927582*x-.00255243321439347*M+.116935020465145)+M*(-.000343531996510555*M+.24165260232407);return v},_convertYcckToCmyk:function(v){for(var x,S,_,M=0,$=v.length;M<$;M+=4)x=v[M],S=v[M+1],_=v[M+2],v[M]=434.456-x-1.402*_,v[M+1]=119.541-x+.344*S+.714*_,v[M+2]=481.816-x-1.772*S;return v},_convertCmykToRgb:function(v){for(var x,S,_,M,$=0,T=1/255,A=0,I=v.length;A<I;A+=4)x=v[A]*T,S=v[A+1]*T,_=v[A+2]*T,M=v[A+3]*T,v[$++]=255+x*(-4.387332384609988*x+54.48615194189176*S+18.82290502165302*_+212.25662451639585*M-285.2331026137004)+S*(1.7149763477362134*S-5.6096736904047315*_-17.873870861415444*M-5.497006427196366)+_*(-2.5217340131683033*_-21.248923337353073*M+17.5119270841813)-M*(21.86122147463605*M+189.48180835922747),v[$++]=255+x*(8.841041422036149*x+60.118027045597366*S+6.871425592049007*_+31.159100130055922*M-79.2970844816548)+S*(-15.310361306967817*S+17.575251261109482*_+131.35250912493976*M-190.9453302588951)+_*(4.444339102852739*_+9.8632861493405*M-24.86741582555878)-M*(20.737325471181034*M+187.80453709719578),v[$++]=255+x*(.8842522430003296*x+8.078677503112928*S+30.89978309703729*_-.23883238689178934*M-14.183576799673286)+S*(10.49593273432072*S+63.02378494754052*_+50.606957656360734*M-112.23884253719248)+_*(.03296041114873217*_+115.60384449646641*M-193.58209356861505)-M*(22.33816807309886*M+180.12613974708367);return v},getData:function(v,x,S){if(this.numComponents>4)throw new e("Unsupported color mode");var _=this._getLinearizedBlockData(v,x);if(this.numComponents===1&&S){for(var M=_.length,$=new Uint8ClampedArray(3*M),T=0,A=0;A<M;A++){var I=_[A];$[T++]=I,$[T++]=I,$[T++]=I}return $}if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(_);if(this.numComponents===4){if(this._isColorConversionNeeded())return S?this._convertYcckToRgb(_):this._convertYcckToCmyk(_);if(S)return this._convertCmykToRgb(_)}return _}},u}()},(Bk=zk())!==void 0&&(jk.exports=Bk);const OF=WM(E_.exports);let Fle=class{static decode(t,n=!1){const r=new Uint8Array(t),i=new OF;i.parse(r);const{width:s,height:o,numComponents:a,eof:l}=i,c=i.getData(s,o,!0),u=s*o;let h,f=null,d=0,g=0,y=0;if(!n&&l<r.length-1)try{const w=new sm(r.subarray(l)).getBytes();f=new Uint8Array(u);let v=0;for(d=0;d<w.length;d++)for(y=7;y>=0;y--)f[v++]=w[d]>>y&1}catch{}if(a===1&&c.length===s*o){const w=new Uint8Array(c.buffer);h=[w,w,w]}else{for(h=[],d=0;d<3;d++)h.push(new Uint8Array(u));for(y=0,g=0;g<u;g++)for(d=0;d<3;d++)h[d][g]=c[y++]}return{width:s,height:o,pixels:h,mask:f}}};const PF=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let cv=null;function RF(){return cv||(cv=ne(()=>import("./lerc-wasm-7cb58621.js"),[]).then(e=>e.l).then(({default:e})=>e({locateFile:t=>vu(`esri/layers/support/rasterFormats/${t}`)})).then(e=>{zle(e)}),cv)}const l2={getBlobInfo:null,decode:null};function jle(e){return 16+(e>>3<<3)}function Bo(e,t,n){n.set(e.slice(t,t+n.length))}function zle(e){const{_malloc:t,_free:n,_lerc_getBlobInfo:r,_lerc_getDataRanges:i,_lerc_decode_4D:s,asm:o}=e;let a;const l=Object.values(o).find(u=>u&&"buffer"in u&&u.buffer===e.HEAPU8.buffer),c=u=>{const h=u.map(y=>jle(y)),f=h.reduce((y,w)=>y+w),d=t(f);a=new Uint8Array(l.buffer);let g=h[0];h[0]=d;for(let y=1;y<h.length;y++){const w=h[y];h[y]=h[y-1]+g,g=w}return h};l2.getBlobInfo=u=>{const d=new Uint8Array(48),g=new Uint8Array(8*3),[y,w,v]=c([u.length,d.length,g.length]);a.set(u,y),a.set(d,w),a.set(g,v);let x=r(y,u.length,w,v,12,3);if(x)throw n(y),new Error(`lerc-getBlobInfo: error code is ${x}`);a=new Uint8Array(l.buffer),Bo(a,w,d),Bo(a,v,g);const S=new Uint32Array(d.buffer),_=new Float64Array(g.buffer),[M,$,,T,A,I,E,O,P,j,V]=S,U={version:M,depthCount:j,width:T,height:A,validPixelCount:E,bandCount:I,blobSize:O,maskCount:P,dataType:$,minValue:_[0],maxValue:_[1],maxZerror:_[2],statistics:[],bandCountWithNoData:V};if(V&&j>1)return n(y),U;if(j===1&&I===1)return n(y),U.statistics.push({minValue:_[0],maxValue:_[1]}),U;const q=j*I*8,C=new Uint8Array(q),R=new Uint8Array(q);let N=y,D=0,z=0,G=!1;if(a.byteLength<y+2*q?(n(y),G=!0,[N,D,z]=c([u.length,q,q]),a.set(u,N)):[D,z]=c([q,q]),a.set(C,D),a.set(R,z),x=i(N,u.length,j,I,D,z),x)throw n(N),G||n(D),new Error(`lerc-getDataRanges: error code is ${x}`);a=new Uint8Array(l.buffer),Bo(a,D,C),Bo(a,z,R);const W=new Float64Array(C.buffer),K=new Float64Array(R.buffer),oe=U.statistics;for(let Se=0;Se<I;Se++)if(j>1){const Ee=W.slice(Se*j,(Se+1)*j),Ze=K.slice(Se*j,(Se+1)*j),ye=Math.min.apply(null,Ee),de=Math.max.apply(null,Ze);oe.push({minValue:ye,maxValue:de,depthStats:{minValues:Ee,maxValues:Ze}})}else oe.push({minValue:W[Se],maxValue:K[Se]});return n(N),G||n(D),U},l2.decode=(u,h)=>{const{maskCount:f,depthCount:d,bandCount:g,width:y,height:w,dataType:v,bandCountWithNoData:x}=h,S=PF[v],_=y*w,M=new Uint8Array(_*g),$=_*d*g*S.size,T=new Uint8Array($),A=new Uint8Array(g),I=new Uint8Array(8*g),[E,O,P,j,V]=c([u.length,M.length,T.length,A.length,I.length]);a.set(u,E),a.set(M,O),a.set(T,P),a.set(A,j),a.set(I,V);const U=s(E,u.length,f,O,d,y,w,g,v,P,j,V);if(U)throw n(E),new Error(`lerc-decode: error code is ${U}`);a=new Uint8Array(l.buffer),Bo(a,P,T),Bo(a,O,M);let q=null;if(x){Bo(a,j,A),Bo(a,V,I),q=[];const C=new Float64Array(I.buffer);for(let R=0;R<A.length;R++)q.push(A[R]?C[R]:null)}return n(E),{data:T,maskData:M,noDataValues:q}}}function Ble(e,t,n,r,i){if(n<2)return e;const s=new r(t*n);if(i)for(let o=0,a=0;o<t;o++)for(let l=0,c=o;l<n;l++,c+=t)s[c]=e[a++];else for(let o=0,a=0;o<t;o++)for(let l=0,c=o;l<n;l++,c+=t)s[a++]=e[c];return s}function NF(e,t={}){const n=t.inputOffset??0,r=e instanceof Uint8Array?e.subarray(n):new Uint8Array(e,n),i=l2.getBlobInfo(r),{data:s,maskData:o,noDataValues:a}=l2.decode(r,i),{width:l,height:c,bandCount:u,depthCount:h,dataType:f,maskCount:d,statistics:g}=i,y=PF[f],w=new y.ctor(s.buffer),v=[],x=[],S=l*c,_=S*h;for(let E=0;E<u;E++){const O=w.subarray(E*_,(E+1)*_);if(t.returnInterleaved)v.push(O);else{const P=Ble(O,S,h,y.ctor,!0);v.push(P)}x.push(o.subarray(E*_,(E+1)*_))}const M=d===0?null:d===1?x[0]:new Uint8Array(S);if(d>1){M.set(x[0]);for(let E=1;E<x.length;E++){const O=x[E];for(let P=0;P<S;P++)M[P]=M[P]&O[P]}}const{noDataValue:$}=t,T=$!=null&&y.range[0]<=$&&y.range[1]>=$;if(d>0&&T)for(let E=0;E<u;E++){const O=v[E],P=x[E]||M;for(let j=0;j<S;j++)P[j]===0&&(O[j]=$)}const A=d===u&&u>1?x:null,{pixelType:I}=y;return{width:l,height:c,bandCount:u,pixelType:I,depthCount:h,statistics:g,pixels:v,mask:M,bandMasks:A,noDataValues:a}}function Ule(e,t,n,r=!0){if(t%4!=0||n%4!=0){const i=new ArrayBuffer(4*Math.ceil(n/4)),s=new Uint8Array(i),o=new Uint8Array(e,t,n);if(r)for(let a=0;a<s.length;a+=4)s[a]=o[a+3],s[a+1]=o[a+2],s[a+2]=o[a+1],s[a+3]=o[a];else s.set(o);return new Uint32Array(s.buffer)}if(r){const i=new Uint8Array(e,t,n),s=new Uint8Array(i.length);for(let o=0;o<s.length;o+=4)s[o]=i[o+3],s[o+1]=i[o+2],s[o+2]=i[o+1],s[o+3]=i[o];return new Uint32Array(s.buffer)}return new Uint32Array(e,t,n/4)}function Uk(){const e=[];for(let t=0;t<=257;t++)e[t]=[t];return e}function Vk(e,t){for(let n=0;n<t.length;n++)e.push(t[n])}const oh=new Set;function i4(e,t,n,r=!0){const i=Ule(e,t,n,r);let s=9,o=Uk(),a=32,l=o.length,c=[],u=1,h=i[0],f=0;const d=i.length,g=8*(4*d-n),y=[];for(;h!=null;){if(a>=s)a-=s,f=h>>>32-s,h<<=s;else{f=h>>>32-a,h=i[u++];const v=s-a;a=32-v,f=(f<<v)+(h>>>a),h<<=v}if(f===257)break;if(f===256){s=9,o=Uk(),l=o.length,c=[];continue}const w=o[f];if(w==null){if(f>o.length)throw new Error("data integrity issue: code does not exist on code page");c.push(c[0]),o[l++]=c.slice(),Vk(y,c)}else Vk(y,w),c.push(w[0]),c.length>1&&(o[l++]=c.slice()),c=w.slice();if(oh.has(l)&&s++,a===0&&(h=i[u++],a=32),u>d||u===d&&a<=g)break}return new Uint8Array(y)}oh.add(511),oh.add(1023),oh.add(2047),oh.add(4095),oh.add(8191);const Gk=(e,t)=>{const n=t.width*t.height,r=t.pixelType;return Math.floor(e.byteLength/(n*DF(r)))},DF=e=>{let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},Vle=(e,t)=>{if(8*e.byteLength<t)return null;const n=new Uint8Array(e,0,Math.ceil(t/8)),r=new Uint8Array(t);let i=0,s=0,o=0,a=0;for(o=0;o<n.length-1;o++)for(s=n[o],a=7;a>=0;a--)r[i++]=s>>a&1;for(a=7;i<t-1;)s=n[n.length-1],r[i++]=s>>a&1,a--;return r};let Gle=class{static decode(t,n){const r=n.pixelType,i=[],s=n.width*n.height,o=Gk(t,n),{bandIds:a,format:l}=n,c=(a==null?void 0:a.length)||Gk(t,n),u=t.byteLength-t.byteLength%(s*DF(r)),h=new r(t,0,s*o);let f,d,g,y,w=null;if(l==="bip")for(f=0;f<c;f++){for(g=new r(s),y=a?a[f]:f,d=0;d<s;d++)g[d]=h[d*o+y];i.push(g)}else if(l==="bsq")for(f=0;f<c;f++)y=a?a[f]:f,i.push(h.subarray(y*s,(y+1)*s));return u<t.byteLength-1&&(w=Vle(t.slice(u),s)),{pixels:i,mask:w}}};function C_(e,t){let n=0,r="",i=0,s=0;const o=e.length;for(;n<o;)s=e[n++],i=s>>4,i<8?i=1:i===15?(i=4,s=(7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]):i===14?(i=3,s=(15&s)<<12|(63&e[n++])<<6|63&e[n++]):(i=2,s=(31&s)<<6|63&e[n++]),(s!==0||t)&&(r+=String.fromCharCode(s));return r}const s4=(()=>{const e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e})(),Wle=(()=>{const e=s4.slice();return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e})(),Hle=["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"],qle=(()=>{const e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e})(),Jle=(e,t)=>{let n=(t||s4)[e];return n===void 0&&(n="unknown"+String(e)),n},O_=new Map;O_.set("EXIFIFD",Wle),O_.set("GPSIFD",Hle);const gs={tiffTags:s4,ifdTags:O_,geoKeys:qle,getTagName:Jle},Hb=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,t[0]===1})(),Wk=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],yf=4294967296,Zle=new Set([1,5,6,7,8,34712,34887]);function o4(e,t){let n="unknown";return e===3?n=t===64?"f64":"f32":e===1?t===1?n="u1":t===2?n="u2":t===4?n="u4":t<=8?n="u8":t<=16?n="u16":t<=32&&(n="u32"):e===2&&(t<=8?n="s8":t<=16?n="s16":t<=32&&(n="s32")),n}function qb(e){let t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f64":t=Float64Array;break;default:t=Float32Array}return t}function Yle(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function LF(e,t){var n;return(n=e.get(t))==null?void 0:n.values}function Vc(e,t){var n;return(n=e.get(t))==null?void 0:n.values}function Hk(e,t){var n,r;return(r=(n=e.get(t))==null?void 0:n.values)==null?void 0:r[0]}function Ae(e,t){var n,r;return(r=(n=e.get(t))==null?void 0:n.values)==null?void 0:r[0]}function uv(e,t,n,r=0,i=gs.tiffTags,s=4){const o=s===8,a=o?c4(new DataView(e,n,8),0,t):new DataView(e,n,2).getUint16(0,t),l=4+2*s,c=o?8:2,u=c+a*l;if(n+u>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:u};const h=n+u+4<=e.byteLength?Dy(new DataView(e,n+u,s===8?8:4),0,t,s===8):null,f=n+c,d=new Map;let g,y,w,v,x,S=0,_=0;for(let M=0;M<a;M++){y=new DataView(e,f+l*M,l),w=y.getUint16(0,t),x=y.getUint16(2,t),v=gs.getTagName(w,i);const $=[];s===2?(S=y.getUint16(4,t),_=y.getUint16(6,t)):s===4?(S=y.getUint32(4,t),_=y.getUint32(8,t)):s===8&&(S=Dy(y,4,t,!0),_=Dy(y,12,t,!0),$.push(y.getUint32(12,t)),$.push(y.getUint32(16,t))),g={id:w,type:x,valueCount:S,valueOffset:_,valueOffsets:$,values:null},FF(e,t,g,r,!1,s),d.set(v,g)}return{success:!0,ifd:d,nextIFD:h,requiredBufferSize:u}}const Kle=(e,t)=>NF(e,{inputOffset:t}).pixels[0];function P_(e,t){if(t!==1&&t!==2&&t!==4)return e;const n=new Uint8Array(e),r=8/t,i=new Uint8Array(e.byteLength*r);let s=0;const o=2**t-1;for(let a=0;a<n.length;a++){const l=n[a];for(let c=0;c<r;c++)i[s++]=l<<t*c>>>8-t&o}return i.buffer}function R_(e,t,n){const r=new OF;r.parse(e),r.colorTransform=n===6?-1:0;const i=r.getData(r.width,r.height,t!==1&&t!==4);return new Uint8Array(i.buffer)}function N_(e){const t=new sm(e).getBytes(),n=new ArrayBuffer(t.length),r=new Uint8Array(n);return r.set(t),r}async function D_(e,t,n,r,i){const s=Hb===t,o=Ae(n,"BITSPERSAMPLE"),a=Ae(n,"SAMPLESPERPIXEL")??1,l=Ae(n,"PHOTOMETRICINTERPRETATION"),c=Ae(n,"SAMPLEFORMAT")??1,u=o4(c,o),h=Ae(n,"COMPRESSION")??1,f=qb(u);let d,g,y;if(h===34887)return await RF(),Kle(e,r);if(h===1)d=e.slice(r,r+i),g=new Uint8Array(d);else if(h===8||h===32946)g=new Uint8Array(e,r,i),g=N_(g),d=g.buffer;else if(h===6)g=new Uint8Array(e,r,i),g=R_(g,a,l),d=g.buffer;else if(h===7){const S=n.get("JPEGTABLES").values,_=S.length-2;g=new Uint8Array(_+i-2);for(let $=0;$<_;$++)g[$]=S[$];const M=new Uint8Array(e,r+2,i-2);for(let $=0;$<M.length;$++)g[_+$]=M[$];g=R_(g,a,l),d=g.buffer}else{if(h!==5)throw new Error("tiff-decode: unsupport compression "+h);g=i4(e,r,i,t),d=g.buffer}if(d=P_(d,o),u==="u8"||u==="s8"||s)y=new f(d);else{d=new ArrayBuffer(g.length);const S=new Uint8Array(d);switch(u){case"u16":case"s16":for(let _=0;_<g.length;_+=2)S[_]=g[_+1],S[_+1]=g[_];break;case"u32":case"s32":case"f32":for(let _=0;_<g.length;_+=4)S[_]=g[_+3],S[_+1]=g[_+2],S[_+2]=g[_+1],S[_+3]=g[_]}y=new f(d)}const w=Ae(n,"PREDICTOR")??1,v=Ae(n,"TILEWIDTH"),x=Ae(n,"TILELENGTH");if(w>1&&(h===5||h===8||h===32946)&&v&&x){const S=om(n),_=new f(y.length);_.set(y),y=ice(_,x,v,c===3&&w===3,S?1:a)}return y}async function Xle(e,t,n){const r=Vc(n,"TILEOFFSETS");if(r===void 0)return null;const i=Vc(n,"TILEBYTECOUNTS"),{width:s,height:o,pixelType:a,tileWidth:l,tileHeight:c}=Jb([n]),u=om(n,t),h=Ae(n,"SAMPLESPERPIXEL")||t.planes,f=s*o,d=Ae(n,"BITSPERSAMPLE"),g=(Ae(n,"COMPRESSION")??1)===34887,y=qb(a),w=[];for(let C=0;C<h;C++)w.push(new y(f));let v,x,S,_,M,$,T,A,I,E,O,P,j;const V=Math.ceil(s/l),U=new Uint8Array(f).fill(255);let q=!1;if(d%8==0)if(g&&u&&h>1){const C=Math.round(r.length/h);for(v=0;v<C;v++){$=Math.floor(v/V)*c,T=v%V*l,A=$*s+T;for(let R=0;R<h;R++){const N=v*h+R;for(i[N]===0?(S=null,q=!0):S=await D_(e,t.littleEndian,n,r[N],i[N]),E=0,I=A,P=Math.min(l,s-T),O=Math.min(c,o-$),j=w[R],_=0;_<O;_++)for(I=A+_*s,E=_*l,M=0;M<P;M++,I++,E++)S?j[I]=S[E]:U[I]=0}}}else for(v=0;v<r.length;v++)for($=Math.floor(v/V)*c,T=v%V*l,A=$*s+T,i[v]===0?(S=null,q=!0):S=await D_(e,t.littleEndian,n,r[v],i[v]),E=0,I=A,P=Math.min(l,s-T),O=Math.min(c,o-$),x=0;x<h;x++)if(j=w[x],u||g)for(_=0;_<O;_++)for(I=A+_*s,E=l*c*x+_*l,M=0;M<P;M++,I++,E++)S?j[I]=S[E]:U[I]=0;else for(_=0;_<O;_++)for(I=A+_*s,E=_*l*h+x,M=0;M<P;M++,I++,E+=h)S?j[I]=S[E]:U[I]=0;return{width:s,height:o,pixelType:a,pixels:w,mask:q?U:void 0}}const Qle=(e,t,n)=>{const r=Hb===t.littleEndian,i=Vc(n,"STRIPOFFSETS");if(i===void 0)return null;const{width:s,height:o,pixelType:a}=Jb([n]),l=Ae(n,"SAMPLESPERPIXEL")||t.planes,c=Ae(n,"PHOTOMETRICINTERPRETATION"),u=s*o,h=Ae(n,"BITSPERSAMPLE"),f=qb(a),d=new f(u*l),g=Vc(n,"STRIPBYTECOUNTS"),y=Ae(n,"ROWSPERSTRIP"),w=Ae(n,"COMPRESSION")??1;let v,x,S,_,M,$,T,A,I,E=y;if(h%8==0)for(v=0;v<i.length;v++){if(M=v*(y*s)*l,E=(v+1)*y>o?o-v*y:y,a==="u8"||a==="s8"||r)w===8||w===32946?(T=new Uint8Array(e,i[v],g[v]),T=N_(T),$=T.buffer):w===6?(T=new Uint8Array(e,i[v],g[v]),T=R_(T,l,c),$=T.buffer):w===5?(T=i4(e,i[v],g[v],t.littleEndian),$=T.buffer):(g[v]!==E*s*l*h/8&&console.log("strip byte counts is different than expected"),$=e.slice(i[v],i[v]+g[v])),$=P_($,h),_=new f($);else{switch(w===6||w===8||w===32946?(T=new Uint8Array(e,i[v],g[v]),A=N_(T),$=A.buffer):(g[v]!==E*s*l*h/8&&console.log("strip byte counts is different than expected"),$=new ArrayBuffer(g[v]),T=new Uint8Array(e,i[v],g[v]),A=new Uint8Array($)),a){case"u16":case"s16":for(S=0;S<T.length;S+=2)A[S]=T[S+1],A[S+1]=T[S];break;case"u32":case"s32":case"f32":for(S=0;S<T.length;S+=4)A[S]=T[S+3],A[S+1]=T[S+2],A[S+2]=T[S+1],A[S+3]=T[S]}$=P_($,h),_=new f($)}d.set(_,M)}const O=[];if(l===1)O.push(d);else for(v=0;v<l;v++){for(I=new f(u),x=0;x<u;x++)I[x]=d[x*l+v];O.push(I)}return{width:s,height:o,pixelType:a,pixels:O}},ece=(e,t,n)=>{if(!(e&&e.length>0&&t&&n))return null;let r,i,s;const o=e[0].length,a=e.length,l=new Uint8Array(o);for(let c=0;c<a;c++)if(r=e[c],i=t[c],s=n[c],c===0)for(let u=0;u<o;u++)l[u]=r[u]<i||r[u]>s?0:1;else for(let u=0;u<o;u++)l[u]&&(l[u]=r[u]<i||r[u]>s?0:1);return l},tce=e=>{if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||t.length===0)return null;const n=new Map;let r,i,s,o,a;for(let v=0;v<t.length;v++)r=t[v],i=r.slice(6,r.indexOf(">")),o=r.indexOf("sample="),o>-1&&(a=r.slice(o+8,r.indexOf('"',o+8))),o=r.indexOf("name="),o>-1&&(i=r.slice(o+6,r.indexOf('"',o+6))),i&&(s=r.slice(r.indexOf(">")+1,r.indexOf("</Item>")).trim(),a!=null?n.has(i)?n.get(i)[a]=s:n.set(i,[s]):n.set(i,s)),a=null;const l=n.get("STATISTICS_MINIMUM"),c=n.get("STATISTICS_MAXIMUM"),u=n.get("STATISTICS_MEAN"),h=n.get("STATISTICS_STDDEV");let f=null;if(l&&c){f=[];for(let v=0;v<l.length;v++)f.push({min:parseFloat(l[v]),max:parseFloat(c[v]),avg:u&&parseFloat(u[v]),stddev:h&&parseFloat(h[v])})}const d=n.get("BandName"),g=n.get("WavelengthMin"),y=n.get("WavelengthMax");let w=null;if(d){w=[];for(let v=0;v<d.length;v++)w.push({BandName:d[v],WavelengthMin:g&&parseFloat(g[v]),WavelengthMax:y&&parseFloat(y[v])})}return{statistics:f,bandProperties:w,dataType:n.get("DataType"),rawMetadata:n}};function FF(e,t,n,r=0,i=!1,s=4){if(n.values)return!0;const o=n.type,a=n.valueCount;let l=n.valueOffset,c=[];const u=Wk[o],h=8*u,f=a*u,d=a*Wk[o]*8;let g,y;const w=s===8?64:32,v=n.valueOffsets;if(d>w&&f>(i?e.byteLength:e?e.byteLength-l+r:0))return n.offlineOffsetSize=[l,f],n.values=null,!1;if(d<=w){if(!t)if(w<=32)l>>>=32-d;else{const x=v!=null&&v.length?v[0]:l>>>0,S=v!=null&&v.length?v[1]:Math.round((l-x)/yf);d<=32?(l=x>>>32-d,v[0]=l):(l=x*2**(32-d)+(S>>>32-d),v[0]=x,v[1]=S>>>32-d)}if(a===1&&h===w)c=[l];else if(w===64){const x=v!=null&&v.length?v[0]:l>>>0,S=v!=null&&v.length?v[1]:Math.round((l-x)/yf);let _=x,M=32;for(y=1;y<=a;y++){const $=32-h*y%32;if(M<h){const T=_<<$>>>32-M,A=S<<32-M>>>32-M;_=S,c.push(T+A*2**(h-M)),M-=32-(h-M)}else c.push(_<<$>>>32-h),M-=h;M===0&&(M=32,_=S)}}else for(y=1;y<=a;y++){const x=32-h*y;c.push(l<<x>>>32-h)}}else{l-=r,i&&(l=0);for(let x=l;x<l+f;x+=u){switch(o){case 1:case 2:case 7:g=new DataView(e,x,1).getUint8(0);break;case 3:g=new DataView(e,x,2).getUint16(0,t);break;case 4:case 13:g=new DataView(e,x,4).getUint32(0,t);break;case 5:g=new DataView(e,x,4).getUint32(0,t)/new DataView(e,x+4,4).getUint32(0,t);break;case 6:g=new DataView(e,x,1).getInt8(0);break;case 8:g=new DataView(e,x,2).getInt16(0,t);break;case 9:g=new DataView(e,x,4).getInt32(0,t);break;case 10:g=new DataView(e,x,4).getInt32(0,t)/new DataView(e,x+4,4).getInt32(0,t);break;case 11:g=new DataView(e,x,4).getFloat32(0,t);break;case 12:g=new DataView(e,x,8).getFloat64(0,t);break;case 16:case 18:g=c4(new DataView(e,x,8),0,t);break;case 17:g=rce(new DataView(e,x,8),0,t);break;default:g=null}c.push(g)}}if(o===2){let x="";const S=c;for(c=[],y=0;y<S.length;y++)S[y]===0&&x!==""?(c.push(x),x=""):x+=String.fromCharCode(S[y]);x===""&&c.length!==0||c.push(x)}return n.values=c,!0}function Jb(e){const t=e[0],n=Ae(t,"TILEWIDTH"),r=Ae(t,"TILELENGTH"),i=Ae(t,"IMAGEWIDTH"),s=Ae(t,"IMAGELENGTH"),o=Ae(t,"BITSPERSAMPLE"),a=Ae(t,"SAMPLESPERPIXEL"),l=Ae(t,"SAMPLEFORMAT")??1,c=o4(l,o),u=om(t),h=LF(t,"GDAL_NODATA");let f=null;h!=null&&h.length&&(f=h.map(N=>parseFloat(N)),f.some(N=>isNaN(N))&&(f=null));const d=Ae(t,"COMPRESSION")??1;let g;switch(d){case 1:g="NONE";break;case 2:case 3:case 4:case 32771:g="CCITT";break;case 5:g="LZW";break;case 6:case 7:g="JPEG";break;case 32773:g="PACKBITS";break;case 8:case 32946:g="DEFLATE";break;case 34712:g="JPEG2000";break;case 34887:g="LERC";break;default:g=String(d)}let y=!0,w="";Zle.has(d)||(y=!1,w+="unsupported tag compression "+d),l>3&&(y=!1,w+="unsupported tag sampleFormat "+l),o!==1&&o!==2&&o!==4&&o%8!=0&&(y=!1,w+="unsupported tag bitsPerSample "+o);const v=Hk(t,"GEOASCIIPARAMS");let x;if(v){const N=v.split("|").find(z=>z.includes("ESRI PE String = ")),D=N?N.replace("ESRI PE String = ",""):"";x=D.startsWith("COMPD_CS")||D.startsWith("PROJCS")||D.startsWith("GEOGCS")?{wkid:null,wkt:D}:null}const S=Vc(t,"GEOTIEPOINTS"),_=Vc(t,"GEOPIXELSCALE"),M=Vc(t,"GEOTRANSMATRIX"),$=t.has("GEOKEYDIRECTORY")?t.get("GEOKEYDIRECTORY").data:null;let T,A,I=!1,E=!1;if($){I=Ae($,"GTRasterTypeGeoKey")===2;const N=Ae($,"GTModelTypeGeoKey");if(N===2){const D=Ae($,"GeographicTypeGeoKey");D>=1024&&D<=32766&&(x={wkid:D}),x||D!==32767||(E=!0,x={wkid:4326})}else if(N===1){const D=Ae($,"ProjectedCSTypeGeoKey");D>=1024&&D<=32766&&(x={wkid:D})}}if(_&&S&&S.length>=6?(T=[_[0],0,S[3]-S[0]*_[0],0,-Math.abs(_[1]),S[4]-S[1]*_[1]],I&&(T[2]-=.5*T[0]+.5*T[1],T[5]-=.5*T[3]+.5*T[4])):M&&M.length===16&&(T=I?[M[0],M[1],M[3]-.5*M[0],M[4],M[5],M[7]-.5*M[5]]:[M[0],M[1],M[3],M[4],M[5],M[7]]),T){const N=[{x:0,y:s},{x:0,y:0},{x:i,y:s},{x:i,y:0}];let D,z=Number.POSITIVE_INFINITY,G=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,K=Number.NEGATIVE_INFINITY;for(let oe=0;oe<N.length;oe++)D=Yle(N[oe],T),z=D.x>z?z:D.x,W=D.x<W?W:D.x,G=D.y>G?G:D.y,K=D.y<K?K:D.y;A={xmin:z,xmax:W,ymin:G,ymax:K,spatialReference:x}}else A={xmin:-.5,ymin:.5-s,xmax:i-.5,ymax:.5,spatialReference:x};E&&(A.xmax-A.xmin>400||Math.max(Math.abs(A.xmin),Math.abs(A.xmax))>361)&&(x=null,A.spatialReference=null);const O=a4(e);let P,j,V,U,q;if(O.length>0){V=Math.round(Math.log(i/Ae(O[0],"IMAGEWIDTH"))/Math.LN2);const N=O[O.length-1];U=Math.round(Math.log(i/Ae(N,"IMAGEWIDTH"))/Math.LN2),P=Ae(N,"TILEWIDTH"),j=Ae(N,"TILELENGTH")}P=U!=null&&U>0?P||n:null,j=U!=null&&U>0?j||r:null,n&&(q=[{maxCol:Math.ceil(i/n)-1,maxRow:Math.ceil(s/r)-1,minRow:0,minCol:0}],O.forEach(N=>{q.push({maxCol:Math.ceil(Ae(N,"IMAGEWIDTH")/Ae(N,"TILEWIDTH"))-1,maxRow:Math.ceil(Ae(N,"IMAGELENGTH")/Ae(N,"TILELENGTH"))-1,minRow:0,minCol:0})}));const C=Hk(e[0],"GDAL_METADATA"),R=tce(C);return w+=" "+BF({width:i,height:s,tileWidth:n,tileHeight:r,planes:a,ifds:e}),{width:i,height:s,tileWidth:n,tileHeight:r,planes:a,isBSQ:u,pixelType:c,compression:g,noData:f,hasMaskBand:l4(e).length===O.length+1,isSupported:y,message:w,extent:A,isPseudoGeographic:E,affine:_?null:T,firstPyramidLevel:V,maximumPyramidLevel:U,pyramidBlockWidth:P,pyramidBlockHeight:j,tileBoundary:q,metadata:R}}function om(e,t){const n=LF(e,"PLANARCONFIGURATION");return n?n[0]===2:!!t&&t.isBSQ}function a4(e){return e.filter(t=>Ae(t,"NEWSUBFILETYPE")===1)}function l4(e){return e.filter(t=>{const n=(4&(Ae(t,"NEWSUBFILETYPE")??0))==4,r=Ae(t,"PHOTOMETRICINTERPRETATION")===4;return n&&r})}function nce(e){const{littleEndian:t,isBigTiff:n,firstIFDPos:r}=jF(e);let i=r;const s=[];do{const o=zF(e,t,i,0,gs.tiffTags,n?8:4);if(!o.success)break;s.push(o.ifd),i=o.nextIFD}while(i>0);return{...Jb(s),littleEndian:t,isBigTiff:n,ifds:s,pyramidIFDs:a4(s),maskIFDs:l4(s)}}function c4(e,t,n){const r=e.getUint32(t,n),i=e.getUint32(t+4,n);return n?i*yf+r:r*yf+i}function rce(e,t,n){let r=n?e.getInt32(t,n):e.getUint32(t,n),i=n?e.getUint32(t+4,n):e.getInt32(t+4,n);const s=(n?r:i)>=0?1:-1;return n?r*=s:i*=s,s*(n?i*yf+r:r*yf+i)}function Dy(e,t,n,r){return r?c4(e,t,n):e.getUint32(t,n)}function jF(e){const t=new DataView(e,0,16),n=t.getUint16(0,!1);let r=null;if(n===18761)r=!0;else{if(n!==19789)throw new Error("unexpected endianess byte");r=!1}const i=t.getUint16(2,r);if(i!==42&&i!==43)throw new Error("unexpected tiff identifier");let s=4;const o=i===43;if(o){const a=t.getUint16(s,r);if(s+=2,a!==8)throw new Error("unsupported bigtiff version");if(t.getUint16(s,r)!==0)throw new Error("unsupported bigtiff version");s+=2}return{littleEndian:r,isBigTiff:o,firstIFDPos:Dy(t,s,r,o)}}function zF(e,t,n,r=0,i=gs.tiffTags,s=4){const o=uv(e,t,n,r,i,s);let a;const l=o.ifd;if(l){if(gs.ifdTags.forEach((c,u)=>{l.has(u)&&(a=l.get(u),a.data=uv(e,t,a.valueOffset-r,r,c).ifd)}),l.has("GEOKEYDIRECTORY")){a=l.get("GEOKEYDIRECTORY");const c=a.values;if(c&&c.length>4){const u=c[0]+"."+c[1]+"."+c[2];a.data=uv(e,t,a.valueOffset+6-r,r,gs.geoKeys,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[u]})}}if(l.has("XMP")){a=l.get("XMP");const c=a.values;typeof c[0]=="number"&&a.type===7&&(a.values=[C_(new Uint8Array(c))])}}return o}function BF(e){const{width:t,height:n,tileHeight:r,tileWidth:i}=e,s=e.planes,o=i?i*r:t*n,a=Ae(e.ifds[0],"BITSPERSAMPLE");let l="";return o*s>2**30/(a>8?a/8:1)&&(l=i?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),l}function ice(e,t,n,r,i){const s=r?4:1,o=n*s*i;r&&(e=new Uint8Array(e.buffer));for(let c=0;c<t;c++){const u=c*o;for(let h=i;h<o;h++)e[u+h]+=e[u+h-i]}if(!r)return e;const a=new Uint8Array(e.length),l=n*i;for(let c=0;c<t;c++){const u=c*o;for(let h=0;h<l;h++)for(let f=0;f<s;f++)a[u+h*s+f]=e[u+h+(s-f-1)*l]}return new Float32Array(a.buffer)}async function sce(e,t){const{headerInfo:n,ifd:r,offsets:i,sizes:s}=t,o=[];for(let I=0;I<i.length;I++){s[I];const E=await D_(e,n.littleEndian,r,i[I],s[I]||e.byteLength);o.push(E)}const a=om(r,n),l=Ae(r,"BITSPERSAMPLE"),c=o4(Ae(r,"SAMPLEFORMAT")??1,l),u=Ae(r,"SAMPLESPERPIXEL")||n.planes,h=qb(c),f=Ae(r,"TILEWIDTH"),d=Ae(r,"TILELENGTH"),g=Ae(r,"COMPRESSION")??1,y=f*d;let w;const v=[];let x=o[0];const S=g===34887;for(let I=0;I<u;I++){if(w=new h(y),o.length===u)x=o[I],x.length===y&&(w=x);else if(x.length)if(a||S)w=x.length===y?x:x.slice(y*I,y*(I+1));else for(let E=0;E<y;E++)w[E]=x[E*u+I];v.push(w)}const _=n.noData?n.noData[0]:t.noDataValue,M=n.metadata?n.metadata.statistics:null,$=M?M.map(I=>I.min):null,T=M?M.map(I=>I.max):null,A={pixelType:c,width:f,height:d,pixels:v,noDataValue:_};return _!=null?Gb(A,_):$&&T&&t.applyMinMaxConstraint&&(A.mask=ece(v,$,T)),A}async function oce(e,t={}){const n=t.pyramidLevel||0,r=t.headerInfo||nce(e),{ifds:i,noData:s}=r;if(i.length===0)throw new Error("no valid image file directory");const o=BF(r);if(o)throw o;let a=null;const l=n===-1?i[i.length-1]:i[n],c=s??t.noDataValue;return a=r.tileWidth?await Xle(e,r,l):Qle(e,r,l),a&&(c!=null&&Gb(a,c),a)}var ace=function(e){var t,n,r,i,s,o;function a(l){var c,u,h,f,d,g,y,w,v,x,S,_,M;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(c=this.readUInt32(),w=(function(){var $,T;for(T=[],$=0;$<4;++$)T.push(String.fromCharCode(this.data[this.pos++]));return T}).call(this).join(""),w){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),h=this.readUInt16()||100,d.delay=1e3*f/h,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,c-=4),l=(d!=null?d.data:void 0)||this.imgData,S=0;0<=c?S<c:S>c;0<=c?++S:--S)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(c),(v=255-this.transparency.indexed.length)>0)for(_=0;0<=v?_<v:_>v;0<=v?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":g=(x=this.read(c)).indexOf(0),y=String.fromCharCode.apply(String,x.slice(0,g)),this.text[y]=String.fromCharCode.apply(String,x.slice(g+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(l,c,u){var h;return typeof c=="function"&&(u=c),(h=new XMLHttpRequest).open("GET",l,!0),h.responseType="arraybuffer",h.onload=function(){var f;return f=new a(new Uint8Array(h.response||h.mozResponseArrayBuffer)),typeof(c!=null?c.getContext:void 0)=="function"&&f.render(c),typeof u=="function"?u(f):void 0},h.send(null)},n=1,r=2,t=0,a.prototype.read=function(l){var c,u;for(u=[],c=0;0<=l?c<l:c>l;0<=l?++c:--c)u.push(this.data[this.pos++]);return u},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var c,u,h,f,d,g,y,w,v,x,S,_,M,$,T,A,I,E,O,P,j,V,U;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);for(l=(l=new sm(l)).getBytes(),A=(_=this.pixelBitlength/8)*this.width,M=new Uint8Array(A*this.height),g=l.length,T=0,$=0,u=0;$<g;){switch(l[$++]){case 0:for(f=O=0;O<A;f=O+=1)M[u++]=l[$++];break;case 1:for(f=P=0;P<A;f=P+=1)c=l[$++],d=f<_?0:M[u-_],M[u++]=(c+d)%256;break;case 2:for(f=j=0;j<A;f=j+=1)c=l[$++],h=(f-f%_)/_,I=T&&M[(T-1)*A+h*_+f%_],M[u++]=(I+c)%256;break;case 3:for(f=V=0;V<A;f=V+=1)c=l[$++],h=(f-f%_)/_,d=f<_?0:M[u-_],I=T&&M[(T-1)*A+h*_+f%_],M[u++]=(c+Math.floor((d+I)/2))%256;break;case 4:for(f=U=0;U<A;f=U+=1)c=l[$++],h=(f-f%_)/_,d=f<_?0:M[u-_],T===0?I=E=0:(I=M[(T-1)*A+h*_+f%_],E=h&&M[(T-1)*A+(h-1)*_+f%_]),y=d+I-E,w=Math.abs(y-d),x=Math.abs(y-I),S=Math.abs(y-E),v=w<=x&&w<=S?d:x<=S?I:E,M[u++]=(c+v)%256;break;default:throw new Error("Invalid filter algorithm: "+l[$-1])}T++}return M},a.prototype.decodePalette=function(){var l,c,u,h,f,d,g,y,w;for(u=this.palette,d=this.transparency.indexed||[],f=new Uint8Array((d.length||0)+u.length),h=0,u.length,l=0,c=g=0,y=u.length;g<y;c=g+=3)f[h++]=u[c],f[h++]=u[c+1],f[h++]=u[c+2],f[h++]=(w=d[l++])!=null?w:255;return f},a.prototype.copyToImageData=function(l,c){var u,h,f,d,g,y,w,v,x,S,_;if(h=this.colors,x=null,u=this.hasAlphaChannel,this.palette.length&&(x=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),h=4,u=!0),v=(f=l.data||l).length,g=x||c,d=y=0,h===1)for(;d<v;)w=x?4*c[d/4]:y,S=g[w++],f[d++]=S,f[d++]=S,f[d++]=S,f[d++]=u?g[w++]:this.transparency.grayscale&&this.transparency.grayscale===S?0:255,y=w;else for(;d<v;)w=x?4*c[d/4]:y,f[d++]=g[w++],f[d++]=g[w++],f[d++]=g[w++],f[d++]=u?g[w++]:this.transparency.rgb&&this.transparency.rgb[1]===g[w-3]&&this.transparency.rgb[3]===g[w-2]&&this.transparency.rgb[5]===g[w-1]?0:255,y=w},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l},s=e.document&&e.document.createElement("canvas"),o=s&&s.getContext("2d"),i=function(l){var c;return o.width=l.width,o.height=l.height,o.clearRect(0,0,l.width,l.height),o.putImageData(l,0,0),(c=new Image).src=s.toDataURL(),c},a.prototype.decodeFrames=function(l){var c,u,h,f,d,g,y,w;if(this.animation){for(w=[],u=d=0,g=(y=this.animation.frames).length;d<g;u=++d)c=y[u],h=l.createImageData(c.width,c.height),f=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(h,f),c.imageData=h,w.push(c.image=i(h));return w}},a.prototype.renderFrame=function(l,c){var u,h,f;return u=(h=this.animation.frames)[c],f=h[c-1],c===0&&l.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===n?l.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===r&&l.putImageData(f.imageData,f.xOffset,f.yOffset),u.blendOp===t&&l.clearRect(u.xOffset,u.yOffset,u.width,u.height),l.drawImage(u.image,u.xOffset,u.yOffset)},a.prototype.animate=function(l){var c,u,h,f,d,g,y=this;return u=0,g=this.animation,f=g.numFrames,h=g.frames,d=g.numPlays,(c=function(){var w,v;if(w=u++%f,v=h[w],y.renderFrame(l,w),f>1&&u/f<d)return y.animation._timeout=setTimeout(c,v.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var c,u;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,c=l.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(u=c.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),c.putImageData(u,0,0))},a}(self);const lce=new Set(["jpg","png","bmp","gif"]);async function cce(e,t){if(!Hb)throw new Y("rasterCoded:decode","lerc decoder is not supported on big endian platform");await RF();const{offset:n}=t,{width:r,height:i,pixelType:s,statistics:o,depthCount:a,noDataValues:l,bandMasks:c,pixels:u,mask:h}=NF(e,{inputOffset:n,returnInterleaved:t.returnInterleaved}),f=new ee({width:r,height:i,pixelType:s.toLowerCase(),pixels:u,mask:h,statistics:o,bandMasks:c,depthCount:a,noDataValues:l});return o!=null&&o.length||f.updateStatistics(),f}async function uce(e,t){const n=await oce(e,{...t,noDataValue:null});Ph(n);const r=new ee({width:n.width,height:n.height,pixels:n.pixels,pixelType:n.pixelType.toLowerCase(),mask:n.mask,bandMasks:n.bandMasks,statistics:null});return r.updateStatistics(),r}async function hce(e,t){const n=await sce(e,t.customOptions),r=new ee({width:n.width,height:n.height,pixels:n.pixels,pixelType:n.pixelType.toLowerCase(),mask:n.mask,statistics:null});return r.updateStatistics(),r}function UF(e,t){const n=t.pixelType||"u8",r=ee.getPixelArrayConstructor(n),i=n==="u8"?e:new r(e.buffer),s=[],o=t.planes||1;if(o===1)s.push(i);else for(let l=0;l<o;l++){const c=(t.width||1)*(t.height||e.length),u=new r(c);for(let h=0;h<c;h++)u[h]=i[h*o+l];s.push(u)}const a=new ee({width:t.width||1,height:t.height||e.length,pixels:s,pixelType:n,statistics:null});return a.updateStatistics(),a}function fce(e,t){return UF(new sm(new Uint8Array(e)).getBytes(),t)}function dce(e,t){return UF(i4(e,t.offset,t.eof,!t.isInputBigEndian),t)}function pce(e,t,n){const{pixelTypeCtor:r}=wce(t.pixelType),i=(0,Gle.decode)(e,{width:t.width,height:t.height,pixelType:r,format:n}),s=new ee({width:t.width,height:t.height,pixels:i.pixels,pixelType:t.pixelType,mask:i.mask,statistics:null});return s.updateStatistics(),s}function mce(e,t){const n=Fle.decode(e,t.hasNoZlibMask??void 0),r=new ee({width:n.width,height:n.height,pixels:n.pixels,pixelType:"U8",mask:n.mask,statistics:null});return r.updateStatistics(),r}function gce(e,t){const n=new Uint8Array(e),r=new ace(n),{width:i,height:s}=t,o=i*s,a=r.decode();let l,c=0,u=0;const h=new Uint8Array(o);for(c=0;c<o;c++)h[c]=a[4*c+3];const f=new ee({width:i,height:s,pixels:[],pixelType:"U8",mask:h,statistics:[]});for(c=0;c<3;c++){for(l=new Uint8Array(o),u=0;u<o;u++)l[u]=a[4*u+c];f.addData({pixels:l})}return f.updateStatistics(),f}async function yce(e,t,n,r){const i=new Lle,s={applyJpegMask:!1,format:t,...n},o=await i.decode(e,s,r),a=new ee(o);return a.updateStatistics(),a}function VF(e){if(e==null)throw new Y("rasterCodec:decode","parameter encodeddata is required.");const t=new Uint8Array(e,0,10);let n="";return t[0]===255&&t[1]===216?n="jpg":t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71?n="png":t[0]===67&&t[1]===110&&t[2]===116&&t[3]===90&&t[4]===73&&t[5]===109&&t[6]===97&&t[7]===103&&t[8]===101&&t[9]===32?n="lerc":t[0]===76&&t[1]===101&&t[2]===114&&t[3]===99&&t[4]===50&&t[5]===32?n="lerc2":t[0]===73&&t[1]===73&&t[2]===42&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===42||t[0]===73&&t[1]===73&&t[2]===43&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===43?n="tiff":t[0]===71&&t[1]===73&&t[2]===70?n="gif":t[0]===66&&t[1]===77?n="bmp":String.fromCharCode.apply(null,t).toLowerCase().includes("error")&&(n="error"),n}function bce(e){let t=null;switch(e){case"lerc":case"lerc2":t=cce;break;case"jpg":t=mce;break;case"png":t=gce;break;case"bsq":case"bip":t=(n,r)=>pce(n,r,e);break;case"tiff":t=uce;break;case"deflate":t=fce;break;case"lzw":t=dce;break;case"error":t=()=>{throw new Y("rasterCodec:decode","input data contains error")};break;default:t=()=>{throw new Y("rasterCodec:decode","unsupported raster format")}}return t}function wce(e){let t=null,n=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":n=255,t=Uint8Array;break;case"u16":n=n||65535,t=Uint16Array;break;case"u32":n=n||2**32-1,t=Uint32Array;break;case"s8":n=n||-128,t=Int8Array;break;case"s16":n=n||-32768,t=Int16Array;break;case"s32":n=n||0-2**31,t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:n}}function vce(e,t=1){if(!e)return;const{pixels:n,width:r,height:i,mask:s}=e;if(!n||n.length===0)return;const o=n.length,a=r-1,l=i-1,c=[];let u,h,f,d,g,y,w=null;const v=ee.getPixelArrayConstructor(e.pixelType);if(t===0){for(u=0;u<o;u++){for(g=n[u],y=new v(a*l),h=0;h<l;h++)for(d=h*r,f=0;f<a;f++)y[h*a+f]=g[d+f];c.push(y)}if(s!=null)for(w=new Uint8Array(a*l),h=0;h<l;h++)for(d=h*r,f=0;f<a;f++)w[h*a+f]=s[d+f]}else{for(u=0;u<o;u++){for(g=n[u],y=new v(a*l),h=0;h<l;h++)for(d=h*r,f=0;f<a;f++)y[h*a+f]=(g[d+f]+g[d+f+1]+g[d+r+f]+g[d+r+f+1])/4;c.push(y)}if(s)for(w=new Uint8Array(a*l),h=0;h<l;h++)for(d=h*r,f=0;f<a;f++)w[h*a+f]=Math.min.apply(null,[s[d+f],s[d+f+1],s[d+r+f],s[d+r+f+1]])}e.width=a,e.height=l,e.mask=w,e.pixels=c}function xce(e){let t=VF(e);return t==="lerc2"?t="lerc":t==="error"&&(t=""),t}async function Sce(e,t={},n){var o;if(e==null)throw new Y("rasterCodec:decode","missing encodeddata parameter.");let r=(o=t.format)==null?void 0:o.toLowerCase();if(!(r!=="bsq"&&r!=="bip"||t.width!=null&&t.height!=null))throw new Y("rasterCodec:decode","requires width and height in options parameter.");if(r==="tiff"&&t.customOptions)return hce(e,t);if((!r||r!=="bsq"&&r!=="bip"&&r!=="deflate"&&r!=="lzw")&&(r=VF(e)),t.useCanvas&&lce.has(r))return yce(e,r,t,n);const i=bce(r);t.isPoint&&((t={...t}).width!=null&&t.width++,t.height!=null&&t.height++);const s=await i(e,t);return s&&(r!=="jpg"&&t.noDataValue!=null&&s.depthCount===1&&Gb(s,t.noDataValue,{customFloatTolerance:t.tolerance}),t.isPoint&&vce(s),s)}const qk=8,_ce=256;let cr=class extends $M(re){constructor(){super(...arguments),this.datasetName=null,this.datasetFormat=null,this.hasUniqueSourceStorageInfo=!0,this.rasterInfo=null,this.ioConfig={sampling:"closest"}}async init(){const t=A_();this.addResolvingPromise(t),await this.when()}normalizeCtorArgs(t){return t!=null&&t.ioConfig&&(t={...t,ioConfig:{resolution:null,bandIds:null,sampling:"closest",tileInfo:fo.create(),...t.ioConfig}}),t}get _isGlobalWrappableSource(){const{rasterInfo:t}=this,n=gr(t.spatialReference);return n!=null&&t.extent.width>=n/2}get _hasNoneOrGCSShiftTransform(){const{transform:t}=this.rasterInfo;return t==null||t.type==="gcs-shift"}set rasterJobHandler(t){var n,r;this._set("rasterJobHandler",t),this.datasetFormat==="Function"&&((r=(n=this.primaryRasters)==null?void 0:n.rasters)==null||r.forEach(i=>i.rasterJobHandler=t))}set url(t){this._set("url",j$(t,ie.getLogger(this)))}async open(t){throw new Y("BaseRaster:open-not-implemented","open() is not implemented")}async fetchTile(t,n,r,i={}){const s=i.tileInfo||this.rasterInfo.storageInfo.tileInfo,o=this.getTileExtentFromTileInfo(t,n,r,s);return this.fetchPixels(o,s.size[0],s.size[1],i)}async identify(t,n={}){var P;t=za(ce,t).clone().normalize();const{multidimensionalDefinition:r,timeExtent:i}=n,{rasterInfo:s}=this,{hasMultidimensionalTranspose:o,multidimensionalInfo:a}=s;let{transposedVariableName:l}=n;const c=a!=null&&o&&(i!=null||AF(r));c&&!l&&(l=r!=null&&r.length>0?r[0].variableName??void 0:a.variables[0].name,n={...n,transposedVariableName:l}),n=this._getRequestOptionsWithSliceId(n);const{spatialReference:u,extent:h}=s,{datumTransformation:f}=n;let d=o2(t,u,f);if(!h.intersects(d))return{location:d,value:null};if(s.transform!=null){const j=s.transform.inverseTransform(d);if(!s.nativeExtent.intersects(j))return{location:j,value:null};d=j}let g=0;const y=l!=null&&a!=null&&s.hasMultidimensionalTranspose;if(this.datasetFormat==="Function"){const j=this.primaryRasters.rasters[0];if(y)return j.identify(d,n);const{pixelSize:V}=s,U=3,q=V.x*U/2,C=V.y*U/2,R=new Me({xmin:d.x-q,xmax:d.x+q,ymin:d.y-C,ymax:d.y+C,spatialReference:u}),N={interpolation:"nearest"},{pixelBlock:D}=await j.fetchPixels(R,U,U,N),{pixelBlock:z}=await this.fetchPixels(R,U,U,N);if(D==null)return{location:d,value:null};const G=Math.floor(U*U*.5),W=!D.mask||D.mask[G]?D.pixels.map(oe=>oe[G]):null;let K;return z!=null&&(K=!z.mask||z.mask[G]?z.pixels.map(oe=>oe[G]):void 0),{location:d,value:W,processedValue:K,pyramidLevel:0}}if(!y){if(n.srcResolution)g=I_(n.srcResolution,s,this.ioConfig.sampling).pyramidLevel;else if(g=await this.computeBestPyramidLevelForLocation(t,n),g==null)return{location:d,value:null}}const w=this.identifyPixelLocation(d,g,null,y);if(w===null)return{location:d,value:null};const{row:v,col:x,rowOffset:S,colOffset:_,blockWidth:M}=w,$=l??n.sliceId,T=Rk(this.url,$),A=`${g}/${v}/${x}`;let I=Nk(T,null,A);I==null&&(I=this.fetchRawTile(g,v,x,n),Dk(T,null,A,I));const E=await I;if(!((P=E==null?void 0:E.pixels)!=null&&P.length))return{location:d,value:null};const O=S*M+_;return this._processIdentifyResult(E,{srcLocation:d,position:O,pyramidLevel:g,useTransposedTile:!!y,requestSomeSlices:c,identifyOptions:n})}async fetchPixels(t,n,r,i={}){t=Ole(t),i=this._getRequestOptionsWithSliceId(i);const{_hasNoneOrGCSShiftTransform:s}=this;if(i.requestRawData&&s)return this._fetchPixels(t,n,r,i);const o=gr(t.spatialReference),a=Fp(t);if(o==null||a===0||a===1&&this._isGlobalWrappableSource&&s)return this._fetchPixels(t,n,r,i);if(a>=3)return{extent:t,pixelBlock:null};const l=[],{xmin:c,xmax:u}=t,h=Math.round(o/(u-c)*n),f=h-Math.round((o/2-c)/(u-c)*n);let d=0;const g=[];for(let x=0;x<=a;x++){const S=new Me({xmin:x===0?c:-o/2,xmax:x===a?u-o*x:o/2,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference}),_=x===0?h-f:x===a?n-d:h;d+=_,g.push(_);const M=i.disableWrapAround&&x>0?null:this._fetchPixels(S,_,r,i);l.push(M)}const y=(await Promise.all(l)).map(x=>x==null?void 0:x.pixelBlock);let w=null;const v={width:n,height:r};return this.rasterJobHandler?w=(await this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:y,srcMosaicSize:v,destDimension:null,coefs:null,sampleSpacing:null,interpolation:"nearest",alignmentInfo:null,blockWidths:g},i)).pixelBlock:w=Cy(y,v,{blockWidths:g}),{extent:t,srcExtent:Uc(t,this.rasterInfo.spatialReference,i.datumTransformation),pixelBlock:w}}async fetchRawPixels(t,n,r,i={}){n={x:Math.floor(n.x),y:Math.floor(n.y)};const s=await this._fetchRawTiles(t,n,r,i),{nativeExtent:o,nativePixelSize:a,storageInfo:l}=this.rasterInfo,c=2**t,u=a.x*c,h=a.y*c,f=new Me({xmin:o.xmin+u*n.x,xmax:o.xmin+u*(n.x+r.width-1),ymin:o.ymax-h*(n.y+r.height-1),ymax:o.ymax-h*n.y,spatialReference:o.spatialReference});if(!s)return{extent:f,srcExtent:f,pixelBlock:null};const{pixelBlocks:d,mosaicSize:g}=s;if(d.length===1&&d[0]!=null&&d[0].width===r.width&&d[0].height===r.height)return{extent:f,srcExtent:f,pixelBlock:s.pixelBlocks[0]};const y=t>0?l.pyramidBlockWidth:l.blockWidth,w=t>0?l.pyramidBlockHeight:l.blockHeight,v={x:n.x%y,y:n.y%w};let x;return this.rasterJobHandler?x=(await this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:d,srcMosaicSize:g,destDimension:r,clipOffset:v,clipSize:r,coefs:null,sampleSpacing:null,interpolation:i.interpolation,alignmentInfo:null,blockWidths:null},i)).pixelBlock:x=Cy(d,g,{clipOffset:v,clipSize:r}),{extent:f,srcExtent:f,pixelBlock:x}}fetchRawTile(t,n,r,i){throw new Y("BaseRaster:read-not-implemented","fetchRawTile() is not implemented")}computeExtent(t){return Uc(this.rasterInfo.extent,t)}decodePixelBlock(t,n){return!this.rasterJobHandler||n.useCanvas?Sce(t,n):this.rasterJobHandler.decode({data:t,options:n})}async request(t,n,r=0){const{customFetchParameters:i}=this.ioConfig,{range:s,query:o,headers:a}=n;r=r??n.retryCount??this.ioConfig.retryCount;const l=s?{Range:`bytes=${s.from}-${s.to}`}:null;try{return await He(t,{...n,query:{...o,...i},headers:{...a,...l}})}catch(c){if(r>0)return r--,this.request(t,n,r);throw c}}getSliceIndex(t){const{multidimensionalInfo:n}=this.rasterInfo;return n==null||t==null||t.length===0?null:ble(t,n)}getTileExtentFromTileInfo(t,n,r,i){const s=i.lodAt(t);return this.getTileExtent({x:s.resolution,y:s.resolution},n,r,i.origin,i.spatialReference,i.size)}updateTileInfo(){const{storageInfo:t,spatialReference:n,extent:r,pixelSize:i}=this.rasterInfo;if(!t.tileInfo){const s=[],o=t.maximumPyramidLevel||0;let a=Math.max(i.x,i.y),l=1/.0254*96*a;for(let u=0;u<=o;u++)s.unshift(new Ks({level:o-u,resolution:a,scale:l})),a*=2,l*=2;const c=new ce({x:r.xmin,y:r.ymax,spatialReference:n});t.tileInfo=new fo({origin:c,size:[t.blockWidth,t.blockHeight],spatialReference:n,lods:s}),t.isVirtualTileInfo=!0}}createRemoteDatasetStorageInfo(t,n=512,r=512,i){const{width:s,height:o,nativeExtent:a,pixelSize:l,spatialReference:c}=t,u=new ce({x:a.xmin,y:a.ymax,spatialReference:c});i==null&&(i=Math.max(0,Math.round(Math.log(Math.max(s,o))/Math.LN2-8)));const h=this.computeBlockBoundary(a,512,512,{x:a.xmin,y:a.ymax},[l],i);t.storageInfo=new Df({blockWidth:n,blockHeight:r,pyramidBlockWidth:n,pyramidBlockHeight:r,origin:u,firstPyramidLevel:1,maximumPyramidLevel:i,blockBoundary:h})}async computeBestPyramidLevelForLocation(t,n={}){return 0}computeBlockBoundary(t,n,r,i,s,o=0,a=2){if(s.length===1&&o>0){s=[...s];let{x:h,y:f}=s[0];for(let d=0;d<o;d++)h*=a,f*=a,s.push({x:h,y:f})}const l=[],{x:c,y:u}=i;for(let h=0;h<s.length;h++){const{x:f,y:d}=s[h];l.push({minCol:Math.floor((t.xmin-c+.1*f)/n/f),maxCol:Math.floor((t.xmax-c-.1*f)/n/f),minRow:Math.floor((u-t.ymax+.1*d)/r/d),maxRow:Math.floor((u-t.ymin-.1*d)/r/d)})}return l}getPyramidPixelSize(t){const{nativePixelSize:n}=this.rasterInfo,{pyramidResolutions:r,pyramidScalingFactor:i}=this.rasterInfo.storageInfo;if(t===0)return n;if(r!=null&&r.length)return r[t-1];const s=i**t;return{x:n.x*s,y:n.y*s}}identifyPixelLocation(t,n,r,i){const{spatialReference:s,nativeExtent:o,storageInfo:a}=this.rasterInfo,{maximumPyramidLevel:l,origin:c,transposeInfo:u}=a,h=i&&u!=null?u.tileSize[0]:a.blockWidth,f=i&&u!=null?u.tileSize[1]:a.blockHeight,d=o2(t,s,r);if(!o.intersects(d)||n<0||n>l)return null;const g=this.getPyramidPixelSize(n),{x:y,y:w}=g,v=(c.y-d.y)/w/f,x=(d.x-c.x)/y/h,S=Math.min(f-1,Math.floor((v-Math.floor(v))*f)),_=Math.min(h-1,Math.floor((x-Math.floor(x))*h));return{pyramidLevel:n,row:Math.floor(v),col:Math.floor(x),rowOffset:S,colOffset:_,blockWidth:h,srcLocation:d}}getTileExtent(t,n,r,i,s,o){const[a,l]=o,c=i.x+r*a*t.x,u=c+a*t.x,h=i.y-n*l*t.y,f=h-l*t.y;return new Me({xmin:c,xmax:u,ymin:f,ymax:h,spatialReference:s})}getBlockWidthHeight(t){return{blockWidth:t>0?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,blockHeight:t>0?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight}}isBlockOutside(t,n,r){const i=this.rasterInfo.storageInfo.blockBoundary[t];return!i||i.maxRow<n||i.maxCol<r||i.minRow>n||i.minCol>r}async _fetchPixels(t,n,r,i={}){let s=Fp(t);if(s>=2)return{extent:t,pixelBlock:null};const o=this._getSourceDataInfo(t,n,r,i),{pyramidLevel:a,srcResolution:l,srcExtent:c,srcWidth:u,srcHeight:h,ul:f}=o;if(u===0||h===0)return{extent:t,srcExtent:c,pixelBlock:null};const{rasterInfo:d}=this,g=d.transform,y=(g==null?void 0:g.type)==="gcs-shift",w=gr(t.spatialReference)!=null;!y&&w||(s=Fp(o.srcExtent,y));const v=await this._fetchRawTiles(a,f,{width:u,height:h,wrapCount:s},i);if(!v)return{extent:t,srcExtent:c,pixelBlock:null};const x=d.storageInfo,S=a>0?x.pyramidBlockWidth:x.blockWidth,_=a>0?x.pyramidBlockHeight:x.blockHeight;let{x:M,y:$}=d.pixelSize;if(a>0){const{pyramidResolutions:oe,pyramidScalingFactor:Se}=x;if(oe!=null&&oe[a-1])({x:M,y:$}=oe[a-1]);else{const Ee=Se**a;M*=Ee,$*=Ee}}const T=d.spatialReference,A=new ce({x:M,y:$,spatialReference:T}),I=S===u&&_===h&&f.x%S==0&&f.y%_==0,E=new ce({x:(t.xmax-t.xmin)/n,y:(t.ymax-t.ymin)/r,spatialReference:t.spatialReference}),O=!t.spatialReference.equals(T),P=T.isGeographic?1e-9:1e-4,{datumTransformation:j}=i;if(!O&&I&&v.pixelBlocks.length===1&&S===n&&_===r&&this._isSameResolution(l,E,P))return{extent:t,srcExtent:c,srcTilePixelSize:A,pixelBlock:v.pixelBlocks[0]};const V=w&&gr(c.spatialReference)!=null&&this._hasNoneOrGCSShiftTransform,U=i.requestProjectedLocalDirections&&this.rasterInfo.dataType.startsWith("vector");U&&!this.rasterJobHandler&&await A_();const q=this.rasterJobHandler?await this.rasterJobHandler.getProjectionOffsetGrid({projectedExtent:t,srcBufferExtent:v.extent,pixelSize:E.toJSON(),datumTransformation:j,rasterTransform:g,hasWrapAround:s>0||V,isAdaptive:this.ioConfig.optimizeProjectionAccuracy!==!1,includeGCSGrid:U},i):Ele({projectedExtent:t,srcBufferExtent:v.extent,pixelSize:E,datumTransformation:j,rasterTransform:g,hasWrapAround:s>0||V,isAdaptive:!1,includeGCSGrid:U});let C;const R=!i.requestRawData,N={rows:q.spacing[0],cols:q.spacing[1]},D=this._hasNoneOrGCSShiftTransform?this._getRasterTileAlignmentInfo(a,v.extent.xmin):void 0,{pixelBlocks:z,mosaicSize:G,isPartiallyFilled:W}=v;let K=null;if(this.rasterJobHandler)({pixelBlock:C,localNorthDirections:K}=await this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:z,srcMosaicSize:G,destDimension:R?{width:n,height:r}:null,coefs:R?q.coefficients:null,sampleSpacing:R?N:null,projectDirections:U,gcsGrid:U?q.gcsGrid:null,isUV:this.rasterInfo.dataType==="vector-uv",interpolation:i.interpolation,alignmentInfo:D,blockWidths:null},i));else{const oe=Cy(z,G,{alignmentInfo:D});C=R?Q9(oe,{width:n,height:r},q.coefficients,N,i.interpolation):oe,U&&q.gcsGrid&&(K=Doe({width:n,height:r},q.gcsGrid),C=Loe(C,this.rasterInfo.dataType,K))}return i.requestRawData||U?{extent:t,srcExtent:c,srcTilePixelSize:A,pixelBlock:C,transformGrid:q,localNorthDirections:K,isPartiallyFilled:W}:{extent:t,srcExtent:c,srcTilePixelSize:A,pixelBlock:C}}async _fetchRawTiles(t,n,r,i){const{origin:s,blockBoundary:o}=this.rasterInfo.storageInfo,{blockWidth:a,blockHeight:l}=this.getBlockWidthHeight(t);let{x:c,y:u}=n,{width:h,height:f,wrapCount:d}=r;const g=this._getRasterTileAlignmentInfo(t,0);i.buffer&&(c-=i.buffer.cols,u-=i.buffer.rows,h+=2*i.buffer.cols,f+=2*i.buffer.rows);let y=0,w=0,v=0;d&&g!=null&&({worldColumnCountFromOrigin:w,originColumnOffset:v,rightPadding:y}=g,w*g.blockWidth-y>=c+h&&(y=0));const x=Math.floor(c/a),S=Math.floor(u/l),_=Math.floor((c+h+y-1)/a),M=Math.floor((u+f+y-1)/l),$=o[t];if(!$)return null;const{minRow:T,minCol:A,maxCol:I,maxRow:E}=$;if(d===0&&(M<T||_<A||S>E||x>I))return null;const O=new Array;let P=!1;const j=this.ioConfig.allowPartialFill==null?i.allowPartialFill:this.ioConfig.allowPartialFill;for(let D=S;D<=M;D++)for(let z=x;z<=_;z++){let G=z;if(!i.disableWrapAround&&d&&g!=null&&w<=z&&(G=z-w-v),D>=T&&G>=A&&E>=D&&I>=G){const W=this._fetchRawTile(t,D,G,i);j?O.push(new Promise(K=>{W.then(oe=>K(oe)).catch(()=>{P=!0,K(null)})})):O.push(W)}else O.push(Promise.resolve(null))}if(O.length===0)return null;const V=await Promise.all(O),U={height:(M-S+1)*l,width:(_-x+1)*a},{spatialReference:q}=this.rasterInfo,C=this.getPyramidPixelSize(t),{x:R,y:N}=C;return{extent:new Me({xmin:s.x+x*a*R,xmax:s.x+(_+1)*a*R,ymin:s.y-(M+1)*l*N,ymax:s.y-S*l*N,spatialReference:q}),pixelBlocks:V,mosaicSize:U,isPartiallyFilled:P}}_isSameResolution(t,n,r){return Math.abs(t.x-n.x)<r&&Math.abs(t.y-n.y)<r}_fetchRawTile(t,n,r,i){const s=this.rasterInfo.storageInfo.blockBoundary[t];if(!s)return Promise.resolve(null);const{minRow:o,minCol:a,maxCol:l,maxRow:c}=s;if(n<o||r<a||n>c||r>l)return Promise.resolve(null);const u=Rk(this.url,i.sliceId),h=`${t}/${n}/${r}`;let f=Nk(u,i.registryId,h);if(f==null){const d=new AbortController;f=this.fetchRawTile(t,n,r,{...i,signal:d.signal}),Dk(u,i.registryId,h,f,d),f.catch(()=>Nle(u,i.registryId,h))}return i.signal&&po(i,()=>{Rle(u,i.registryId,h)}),f}_computeMagDirValues(t){var c;const{bandCount:n,dataType:r}=this.rasterInfo;if(!(n===2&&r==="vector-magdir"||r==="vector-uv")||(t==null?void 0:t.length)!==2||!((c=t[0])!=null&&c.length))return null;const i=t[0].length;if(r==="vector-magdir"){const u=t[1].map(h=>(h+360)%360);return[t[0],u]}const[s,o]=t,a=[],l=[];for(let u=0;u<i;u++){const[h,f]=Q$([s[u],o[u]]);a.push(h),l.push(f)}return[a,l]}_getRasterTileAlignmentInfo(t,n){return this._rasterTileAlighmentInfo==null&&(this._rasterTileAlighmentInfo=Ile(this.rasterInfo)),this._rasterTileAlighmentInfo.pyramidsInfo==null?null:{startX:n,halfWorldWidth:this._rasterTileAlighmentInfo.halfWorldWidth,hasGCSSShiftTransform:this._rasterTileAlighmentInfo.hasGCSSShiftTransform,...this._rasterTileAlighmentInfo.pyramidsInfo[t]}}_getSourceDataInfo(t,n,r,i={}){const s={datumTransformation:i.datumTransformation,pyramidLevel:0,pyramidResolution:null,srcExtent:null,srcHeight:0,srcResolution:null,srcWidth:0,ul:{x:0,y:0}};i.srcResolution&&(s.srcResolution=i.srcResolution,this._updateSourceDataInfo(t,s));const o=this.rasterInfo.storageInfo.maximumPyramidLevel||0,{srcWidth:a,srcHeight:l,pyramidLevel:c}=s,u=a/n,h=l/r,f=c<o&&u*h>=16,d=c===o&&this._requireTooManySrcTiles(a,l,n,r);if(f||d||a===0||l===0){const g=new ce({x:(t.xmax-t.xmin)/n,y:(t.ymax-t.ymin)/r,spatialReference:t.spatialReference});let y=s2(g,this.rasterInfo.spatialReference,t,s.datumTransformation);const w=!y||i.srcResolution&&y.x+y.y<i.srcResolution.x+i.srcResolution.y;if(f&&i.srcResolution&&w){const v=Math.round(Math.log(Math.max(u,h))/Math.LN2)-1;if(o-c+3>=v){const x=2**v;y={x:i.srcResolution.x*x,y:i.srcResolution.y*x}}}y&&(s.srcResolution=y,this._updateSourceDataInfo(t,s))}return this._requireTooManySrcTiles(s.srcWidth,s.srcHeight,n,r)&&(s.srcWidth=0,s.srcHeight=0),s}_requireTooManySrcTiles(t,n,r,i){const{tileInfo:s}=this.rasterInfo.storageInfo;return Math.ceil(t/s.size[0])*Math.ceil(n/s.size[1])>=_ce||t/r>qk||n/i>qk}_updateSourceDataInfo(t,n){n.srcWidth=0,n.srcHeight=0;const{rasterInfo:r}=this,i=r.spatialReference,{srcResolution:s,datumTransformation:o}=n,{pyramidLevel:a,pyramidResolution:l,excessiveReading:c}=I_(s,r,this.ioConfig.sampling);if(c)return;let u=n.srcExtent||Uc(t,i,o);if(u==null)return;const h=r.transform;h&&(u=h.inverseTransform(u)),n.srcExtent=u;const{x:f,y:d}=r.storageInfo.origin,g=Math.floor((u.xmin-f)/l.x+.1),y=Math.floor((d-u.ymax)/l.y+.1),w=Math.floor((u.xmax-f)/l.x-.1),v=Math.floor((d-u.ymin)/l.y-.1),x=u.width<.1*l.x?0:w-g+1,S=u.height<.1*l.y?0:v-y+1;n.pyramidLevel=a,n.pyramidResolution=l,n.srcWidth=x,n.srcHeight=S,n.ul={x:g,y}}_getRequestOptionsWithSliceId(t){return this.rasterInfo.multidimensionalInfo!=null&&t.sliceId==null&&(t={...t,sliceId:this.getSliceIndex(t.multidimensionalDefinition)}),t}_processIdentifyResult(t,n){const{srcLocation:r,position:i,pyramidLevel:s,useTransposedTile:o}=n,a=t.pixels[0].length/t.width/t.height;if(!(!t.mask||t.mask[i]))return{location:r,value:null};const{multidimensionalInfo:l}=this.rasterInfo;if(l==null||!o){const v=t.pixels.map(_=>_[i]),x={location:r,value:v,pyramidLevel:s},S=this._computeMagDirValues(v.map(_=>[_]));return S!=null&&S.length&&(x.magdirValue=S.map(_=>_[0])),x}let c=t.pixels.map(v=>v.slice(i*a,i*a+a)),u=this._computeMagDirValues(c);const{requestSomeSlices:h,identifyOptions:f}=n;let d=fle(l,f.transposedVariableName);if(h){const v=dle(d,f.multidimensionalDefinition,f.timeExtent);c=c.map(x=>v.map(S=>x[S])),u=u==null?void 0:u.map(x=>v.map(S=>x[S])),d=v.map(x=>d[x])}const g=t.noDataValues||this.rasterInfo.noDataValue,y={pixels:c,pixelType:t.pixelType};let w;return g!=null&&(Gb(y,g),w=y.mask),{location:r,value:null,dataSeries:d.map((v,x)=>{const S={value:(w==null?void 0:w[x])===0?null:c.map(_=>_[x]),multidimensionalDefinition:v.multidimensionalDefinition.map(_=>new du({..._,isSlice:!0}))};return u!=null&&u.length&&(S.magdirValue=[u[0][x],u[1][x]]),S}),pyramidLevel:s}}};p([b()],cr.prototype,"_rasterTileAlighmentInfo",void 0),p([b({readOnly:!0})],cr.prototype,"_isGlobalWrappableSource",null),p([b({readOnly:!0})],cr.prototype,"_hasNoneOrGCSShiftTransform",null),p([b()],cr.prototype,"rasterJobHandler",null),p([b(mF)],cr.prototype,"url",null),p([b({type:String,json:{write:!0}})],cr.prototype,"datasetName",void 0),p([b({type:String,json:{write:!0}})],cr.prototype,"datasetFormat",void 0),p([b()],cr.prototype,"hasUniqueSourceStorageInfo",void 0),p([b()],cr.prototype,"rasterInfo",void 0),p([b()],cr.prototype,"ioConfig",void 0),p([b()],cr.prototype,"sourceJSON",void 0),cr=p([L("esri.layers.support.rasterDatasets.BaseRaster")],cr);const Au=cr;var L_;let Zd=L_=class extends re{constructor(e){super(e),this.name=null,this.code=null}clone(){return new L_({name:this.name,code:this.code})}};p([b({type:String,json:{write:!0}})],Zd.prototype,"name",void 0),p([b({type:[String,Number],json:{write:!0}})],Zd.prototype,"code",void 0),Zd=L_=p([L("esri.layers.support.CodedValue")],Zd);const Mce=new Ne({inherited:"inherited",codedValue:"coded-value",range:"range"});let Yd=class extends re{constructor(t){super(t),this.name=null,this.type=null}};p([b({type:String,json:{write:!0}})],Yd.prototype,"name",void 0),p([pe(Mce)],Yd.prototype,"type",void 0),Yd=p([L("esri.layers.support.Domain")],Yd);const Zb=Yd;var F_;let Kd=F_=class extends Zb{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some(r=>(String(r.code)===n&&(t=r.name),!!t))}return t}clone(){return new F_({codedValues:J(this.codedValues),name:this.name})}};p([b({type:[Zd],json:{write:!0}})],Kd.prototype,"codedValues",void 0),p([pe({codedValue:"coded-value"})],Kd.prototype,"type",void 0),Kd=F_=p([L("esri.layers.support.CodedValueDomain")],Kd);const GF=Kd;var j_;let Ly=j_=class extends Zb{constructor(e){super(e),this.type="inherited"}clone(){return new j_}};p([pe({inherited:"inherited"})],Ly.prototype,"type",void 0),Ly=j_=p([L("esri.layers.support.InheritedDomain")],Ly);const WF=Ly;var z_;let ah=z_=class extends Zb{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new z_({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};p([b({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var n;return(n=t.range)==null?void 0:n[1]}},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]}}}})],ah.prototype,"maxValue",void 0),p([b({json:{type:[Number],read:{source:"range",reader:(e,t)=>{var n;return(n=t.range)==null?void 0:n[0]}},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]}}}})],ah.prototype,"minValue",void 0),p([pe({range:"range"})],ah.prototype,"type",void 0),ah=z_=p([L("esri.layers.support.RangeDomain")],ah);const HF=ah,$ce={key:"type",base:Zb,typeMap:{range:HF,"coded-value":GF,inherited:WF}};function Tce(e){if(!(e!=null&&e.type))return null;switch(e.type){case"range":return HF.fromJSON(e);case"codedValue":return GF.fromJSON(e);case"inherited":return WF.fromJSON(e)}return null}const Ace=new Ne({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var B_;const Ice=new Ne({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Rn=B_=class extends re{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch{}return(n==null?void 0:n.value)??null}readValueType(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch{}return n?Ice.fromJSON(n.fieldValueType):null}clone(){return new B_({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};p([b({type:String,json:{write:!0}})],Rn.prototype,"alias",void 0),p([b({type:[String,Number],json:{write:{allowNull:!0}}})],Rn.prototype,"defaultValue",void 0),p([b()],Rn.prototype,"description",void 0),p([ge("description")],Rn.prototype,"readDescription",null),p([b({types:$ce,json:{read:{reader:Tce},write:!0}})],Rn.prototype,"domain",void 0),p([b({type:Boolean,json:{write:!0}})],Rn.prototype,"editable",void 0),p([b({type:Be,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Rn.prototype,"length",void 0),p([b({type:String,json:{write:!0}})],Rn.prototype,"name",void 0),p([b({type:Boolean,json:{write:!0}})],Rn.prototype,"nullable",void 0),p([pe(Ace)],Rn.prototype,"type",void 0),p([b()],Rn.prototype,"valueType",void 0),p([ge("valueType",["description"])],Rn.prototype,"readValueType",null),p([b({type:Boolean,json:{read:!1}})],Rn.prototype,"visible",void 0),Rn=B_=p([L("esri.layers.support.Field")],Rn);const ka=Rn;var U_;const V_=new Ne({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let hn=U_=class extends re{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){var i;const n=we.fromJSON(t.spatialReference),r=[];for(let s=0;s<e.length;s++){const o=e[s],a=hu.fromJSON(o),l=(i=o.geometry)==null?void 0:i.spatialReference;a.geometry==null||l||(a.geometry.spatialReference=n);const c=o.aggregateGeometries,u=a.aggregateGeometries;if(c&&u!=null)for(const h in u){const f=u[h],d=c[h],g=d==null?void 0:d.spatialReference;f==null||g||(f.spatialReference=n)}r.push(a)}return r}writeGeometryType(e,t,n,r){if(e)return void V_.write(e,t,n,r);const{features:i}=this;if(i){for(const s of i)if((s==null?void 0:s.geometry)!=null)return void V_.write(s.geometry.type,t,n,r)}}readQueryGeometry(e,t){if(!e)return null;const n=!!e.spatialReference,r=$f(e);return r&&!n&&t.spatialReference&&(r.spatialReference=we.fromJSON(t.spatialReference)),r}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:n}=this;if(n){for(const r of n)if(r&&r.geometry!=null&&r.geometry.spatialReference)return void(t.spatialReference=r.geometry.spatialReference.toJSON())}}clone(){return new U_(this.cloneProperties())}cloneProperties(){return J({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let n=0;n<t.features.length;n++){const r=t.features[n];if(r.geometry){const i=e==null?void 0:e[n];r.geometry=(i==null?void 0:i.toJSON())||r.geometry}}return t}quantize(e){const{scale:[t,n],translate:[r,i]}=e,s=c=>Math.round((c-r)/t),o=c=>Math.round((i-c)/n),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let c=0,u=a.length;c<u;c++)l!=null&&l(a[c].geometry)||(a.splice(c,1),c--,u--);return this.transform=e,this}unquantize(){var f,d;const{geometryType:e,features:t,transform:n}=this;if(!n)return this;const{translate:[r,i],scale:[s,o]}=n,a=g=>g*s+r,l=g=>i-g*o;let c=null,u=null;if(this.hasZ&&((f=n==null?void 0:n.scale)==null?void 0:f[2])!=null){const{translate:[,,g],scale:[,,y]}=n;c=w=>w*y+g}if(this.hasM&&((d=n==null?void 0:n.scale)==null?void 0:d[3])!=null){const{translate:[,,,g],scale:[,,,y]}=n;u=w=>w==null?w:w*y+g}const h=this._getHydrationFunction(e,a,l,c,u);for(const{geometry:g}of t)g!=null&&h&&h(g);return this.transform=null,this}_quantizePoints(e,t,n){let r,i;const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const c=t(l[0]),u=n(l[1]);c===r&&u===i||(s.push([c-r,u-i]),r=c,i=u)}else r=t(l[0]),i=n(l[1]),s.push([r,i])}return s.length>0?s:null}_getQuantizationFunction(e,t,n){return e==="point"?r=>(r.x=t(r.x),r.y=n(r.y),r):e==="polyline"||e==="polygon"?r=>{const i=Lh(r)?r.rings:r.paths,s=[];for(let o=0,a=i.length;o<a;o++){const l=i[o],c=this._quantizePoints(l,t,n);c&&s.push(c)}return s.length>0?(Lh(r)?r.rings=s:r.paths=s,r):null}:e==="multipoint"?r=>{const i=this._quantizePoints(r.points,t,n);return i&&i.length>0?(r.points=i,r):null}:e==="extent"?r=>r:null}_getHydrationFunction(e,t,n,r,i){return e==="point"?s=>{s.x=t(s.x),s.y=n(s.y),r&&(s.z=r(s.z))}:e==="polyline"||e==="polygon"?s=>{const o=Lh(s)?s.rings:s.paths;let a,l;for(let c=0,u=o.length;c<u;c++){const h=o[c];for(let f=0,d=h.length;f<d;f++){const g=h[f];f>0?(a+=g[0],l+=g[1]):(a=g[0],l=g[1]),g[0]=t(a),g[1]=n(l)}}if(r&&i)for(let c=0,u=o.length;c<u;c++){const h=o[c];for(let f=0,d=h.length;f<d;f++){const g=h[f];g[2]=r(g[2]),g[3]=i(g[3])}}else if(r)for(let c=0,u=o.length;c<u;c++){const h=o[c];for(let f=0,d=h.length;f<d;f++){const g=h[f];g[2]=r(g[2])}}else if(i)for(let c=0,u=o.length;c<u;c++){const h=o[c];for(let f=0,d=h.length;f<d;f++){const g=h[f];g[2]=i(g[2])}}}:e==="extent"?s=>{s.xmin=t(s.xmin),s.ymin=n(s.ymin),s.xmax=t(s.xmax),s.ymax=n(s.ymax),r&&s.zmax!=null&&s.zmin!=null&&(s.zmax=r(s.zmax),s.zmin=r(s.zmin)),i&&s.mmax!=null&&s.mmin!=null&&(s.mmax=i(s.mmax),s.mmin=i(s.mmin))}:e==="multipoint"?s=>{const o=s.points;let a,l;for(let c=0,u=o.length;c<u;c++){const h=o[c];c>0?(a+=h[0],l+=h[1]):(a=h[0],l=h[1]),h[0]=t(a),h[1]=n(l)}if(r&&i)for(let c=0,u=o.length;c<u;c++){const h=o[c];h[2]=r(h[2]),h[3]=i(h[3])}else if(r)for(let c=0,u=o.length;c<u;c++){const h=o[c];h[2]=r(h[2])}else if(i)for(let c=0,u=o.length;c<u;c++){const h=o[c];h[2]=i(h[2])}}:null}};p([b({type:String,json:{write:!0}})],hn.prototype,"displayFieldName",void 0),p([b({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],hn.prototype,"exceededTransferLimit",void 0),p([b({type:[hu],json:{write:!0}})],hn.prototype,"features",void 0),p([ge("features")],hn.prototype,"readFeatures",null),p([b({type:[ka],json:{write:!0}})],hn.prototype,"fields",void 0),p([b({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:V_.read}}})],hn.prototype,"geometryType",void 0),p([xe("geometryType")],hn.prototype,"writeGeometryType",null),p([b({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],hn.prototype,"hasM",void 0),p([b({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],hn.prototype,"hasZ",void 0),p([b({types:q2,json:{write:!0}})],hn.prototype,"queryGeometry",void 0),p([ge("queryGeometry")],hn.prototype,"readQueryGeometry",null),p([b({type:we,json:{write:!0}})],hn.prototype,"spatialReference",void 0),p([xe("spatialReference")],hn.prototype,"writeSpatialReference",null),p([b({json:{write:!0}})],hn.prototype,"transform",void 0),hn=U_=p([L("esri.rest.support.FeatureSet")],hn),hn.prototype.toJSON.isDefaultToJSON=!0;const Yb=hn;let Jl=class extends Au{constructor(){super(...arguments),this.datasetFormat="Function",this.tileType="Raster",this.rasterFunction=null}async open(t){var u,h,f,d;await this.init();const{rasterFunction:n}=this;(h=(u=this.primaryRasters)==null?void 0:u.rasters)!=null&&h.length?n.sourceRasters=this.primaryRasters.rasters:(this.primaryRasters=n.getPrimaryRasters(),this.rasterJobHandler&&((f=this.primaryRasters.rasters)==null||f.forEach(g=>g.rasterJobHandler=this.rasterJobHandler)));const{rasters:r,rasterIds:i}=this.primaryRasters,s=r.map(g=>g.rasterInfo?void 0:g.open(t));await Promise.all(s);const o=r.map(({rasterInfo:g})=>g),a=n.bind({rasterInfos:o,rasterIds:i});if(!a.success||o.length===0)throw new Y("raster-function:open",`cannot bind the function: ${a.error??""}`);const l=n.functionName==="Table"?n:(d=n.functionArguments)==null?void 0:d.raster;(l==null?void 0:l.functionName)==="Table"&&(n.rasterInfo.attributeTable=Yb.fromJSON(l.functionArguments.attributeTableAsRecordSet)),await this.syncJobHandler();const c=o[0];this.hasUniqueSourceStorageInfo=o.length===1||o.slice(1).every(g=>this._hasSameStorageInfo(g,c)),this.set("sourceJSON",r[0].sourceJSON),this.set("rasterInfo",n.rasterInfo)}async syncJobHandler(){var t;return(t=this.rasterJobHandler)==null?void 0:t.updateRasterFunction(this.rasterFunction)}async fetchPixels(t,n,r,i={}){var S,_;const{rasters:s,rasterIds:o}=this.primaryRasters;let a=!1;const{interpolation:l}=i,c=(S=this.rasterFunction.flatWebGLFunctionChain)==null?void 0:S.hasFocalFunction;!i.requestRawData&&l!=="bilinear"&&c&&(a=s.length===1&&!i.skipRasterFunction,i={...i,interpolation:"bilinear",requestRawData:a});const u=s.map(M=>M.fetchPixels(t,n,r,i)),h=await Promise.all(u),f=h.map(M=>M.pixelBlock),d=a||i.requestRawData?h.map(M=>M.srcTilePixelSize):null;if(i.skipRasterFunction||f.every(M=>M==null))return h[0];const g=((_=h.find(M=>M.pixelBlock!=null))==null?void 0:_.extent)??t,y=this.rasterJobHandler?await this.rasterJobHandler.process({extent:g,primaryPixelBlocks:f,primaryPixelSizes:d,primaryRasterIds:o}):this.rasterFunction.process({extent:g,primaryPixelBlocks:f,primaryPixelSizes:d,primaryRasterIds:o}),{transformGrid:w}=h[0];if(!a||y==null||w==null)return{...h[0],pixelBlock:y};const v={rows:w.spacing[0],cols:w.spacing[1]};let x;return this.rasterJobHandler?x=(await this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:[y],srcMosaicSize:{width:y.width,height:y.height},destDimension:{width:n,height:r},coefs:w.coefficients,sampleSpacing:v,projectDirections:!1,gcsGrid:null,isUV:!1,interpolation:l,alignmentInfo:void 0,blockWidths:null},i)).pixelBlock:x=Q9(y,{width:n,height:r},w.coefficients,v,l),{extent:t,srcExtent:h[0].srcExtent,pixelBlock:x}}_hasSameStorageInfo(t,n){const{storageInfo:r,pixelSize:i,spatialReference:s,extent:o}=t,{storageInfo:a,pixelSize:l,spatialReference:c,extent:u}=n;return i.x===l.x&&i.y===l.y&&s.equals(c)&&o.equals(u)&&r.blockHeight===a.blockHeight&&r.blockWidth===a.blockWidth&&r.maximumPyramidLevel===a.maximumPyramidLevel}};p([b({type:String,json:{write:!0}})],Jl.prototype,"datasetFormat",void 0),p([b()],Jl.prototype,"tileType",void 0),p([b()],Jl.prototype,"rasterFunction",void 0),p([b()],Jl.prototype,"primaryRasters",void 0),Jl=p([L("esri.layers.support.rasterDatasets.FunctionRaster")],Jl);const G_=Jl;function kce(e,t){if(e.spatialReference.equals(t))return e;const n=tr(e.spatialReference),r=tr(t);if(n===r)return e;const i=n/r;return{x:e.x*i,y:e.y*i}}async function Ece(e,t,n){if(n.type==="extent")return Oce(e,t,n);const{width:r,height:i}=e,s=new Uint8Array(r*i),{contains:o,intersects:a}=await ne(()=>import("./geometryEngine-656a968c.js"),["assets/geometryEngine-656a968c.js","assets/geometryEngineBase-dfbd3a67.js","assets/hydrated-40effdd0.js"]);return a(t,n)?n.type==="polyline"?Pce(e,t,n):o(n,t)?e:Cce(e,t,n):new ee({pixelType:e.pixelType,width:r,height:i,mask:s,maskIsAlpha:!1,pixels:[...e.pixels]})}function Cce(e,t,n){if(!e)return e;const{width:r,height:i}=e,s=t.width/r,o=t.height/i,{xmin:a,ymax:l}=t;let c;if(n.type==="extent"){const w=(n.xmin-a)/s,v=(n.xmax-a)/s,x=(l-n.ymax)/o,S=(l-n.ymin)/o;c=[[[w,x],[w,S],[v,S],[v,x],[w,x]]]}else c=n.rings.map(w=>w.map(([v,x])=>[(v-a)/s,(l-x)/o]));const u=document.createElement("canvas");u.width=r,u.height=i;const h=u.getContext("2d");h.fillStyle="#f00",c.forEach(w=>{h.beginPath(),h.moveTo(w[0][0],w[0][1]);for(let v=0;v<w.length;v++)h.lineTo(w[v][0],w[v][1]);h.closePath(),h.fill()});const f=h.getImageData(0,0,r,i).data,d=e.mask,g=r*i,y=new Uint8Array(g);for(let w=0;w<g;w++)d&&!d[w]||(y[w]=f[4*w+3]>127?255:0);return new ee({pixelType:e.pixelType,width:r,height:i,mask:y,maskIsAlpha:!1,pixels:[...e.pixels]})}function Oce(e,t,n){const{width:r,height:i}=e,s=new Uint8Array(r*i),o=t.width/r,a=t.height/i;if(n.width/o<.5||n.height/a<.5)return new ee({pixelType:e.pixelType,width:r,height:i,mask:s,pixels:[...e.pixels]});const{xmin:l,xmax:c,ymin:u,ymax:h}=t,{xmin:f,xmax:d,ymin:g,ymax:y}=n,w=Math.max(l,f),v=Math.min(c,d),x=Math.max(u,g),S=Math.min(h,y),_=.5*o,M=.5*a;if(v-w<_||S-x<M||v<l+_||w>c-_||x>h-M||S<u+M)return new ee({pixelType:e.pixelType,width:r,height:i,mask:s,pixels:[...e.pixels]});const $=Math.max(0,(w-l)/o),T=Math.min(r,Math.max(0,(v-l)/o)),A=Math.max(0,(h-S)/a),I=Math.min(i,Math.max(0,(h-x)/a)),E=Math.round($),O=Math.round(T)-1,P=Math.round(A),j=Math.round(I)-1;if(E===O&&$%1>.5&&T%1<.5||P===j&&A%1>.5&&I%1<.5)return new ee({pixelType:e.pixelType,width:r,height:i,mask:s,pixels:[...e.pixels]});if(E===0&&P===0&&O===r&&j===i)return e;const V=e.mask;for(let U=P;U<=j;U++)for(let q=E;q<=O;q++){const C=U*r+q;s[C]=V?V[C]:255}return new ee({pixelType:e.pixelType,width:r,height:i,mask:s,pixels:[...e.pixels]})}function Pce(e,t,n){const{width:r,height:i}=e,s=new Uint8Array(r*i),o=t.width/r,a=t.height/i,{xmin:l,ymax:c}=t,{paths:u}=n,h=e.mask;for(let f=0;f<u.length;f++){const d=u[f];for(let g=0;g<d.length-1;g++){const[y,w]=d[g],[v,x]=d[g+1];let S=Math.floor((c-w)/a),_=Math.floor((c-x)/a);if(_<S){const $=S;S=_,_=$}S=Math.max(0,S),_=Math.min(i-1,_);const M=(v-y)/(x-w);for(let $=S;$<=_;$++){const T=$===S?Math.max(w,x):(i+1-$)*a,A=$===_?Math.min(w,x):T-a;let I=Math.floor(x===w?(y-l)/o:(M*(T-w)+y-l)/o),E=Math.floor(x===w?(v-l)/o:(M*(A-w)+y-l)/o);if(E<I){const P=I;I=E,E=P}const O=$*r;I=Math.max(0,I),E=Math.min(r-1,E);for(let P=O+I;P<=O+E;P++)s[P]=h?h[P]:255}}}return new ee({pixelType:e.pixelType,width:r,height:i,mask:s,pixels:[...e.pixels]})}function Rce(e,t,n,r=!0){const{spatialReference:i}=e,{x:s,y:o}=kce(n,i);let a,l,c;const u=t.type==="extent"?t:t.extent;let{xmin:h,xmax:f,ymax:d,ymin:g}=u;const{xmin:y,ymax:w}=e.extent;return r?(h=y+(h>y?s*Math.round((h-y)/s):0),d=w-(d<w?o*Math.round((w-d)/o):0),f=y+(f>y?s*Math.round((f-y)/s):0),g=w-(g<w?o*Math.round((w-g)/o):0),a=new Me({xmin:h,ymax:d,xmax:f,ymin:g,spatialReference:i}),l=Math.round(a.width/s),c=Math.round(a.height/o)):(l=Math.floor((f-h)/s+.8),c=Math.floor((d-g)/o+.8),h=y+(h>y?s*Math.floor((h-y)/s+.1):0),d=w-(d<w?o*Math.floor((w-d)/o+.1):0),f=h+l*s,g=d-c*o,a=new Me({xmin:h,ymax:d,xmax:f,ymin:g,spatialReference:i})),{extent:a,width:l,height:c}}let Fy=class extends re{constructor(){super(...arguments),this.raster=void 0}};p([b({json:{write:!0}})],Fy.prototype,"raster",void 0),Fy=p([L("esri.layers.support.rasterFunctions.AspectFunctionArguments")],Fy);const Mn=Fy;var W_;let H_=W_=class extends Mn{clone(){return new W_({raster:this.raster})}};H_=W_=p([L("esri.layers.support.rasterFunctions.AspectFunctionArguments")],H_);const Nce=H_;var q_;function yl(e){return e=Number(e),isNaN(e)?void 0:e}let vi=q_=class extends re{constructor(){super(...arguments),this.name=null,this.minWavelength=void 0,this.maxWavelength=void 0,this.radianceBias=void 0,this.radianceGain=void 0,this.reflectanceBias=void 0,this.reflectanceGain=void 0,this.solarIrradiance=void 0}clone(){return new q_({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};p([b({json:{name:"BandName",write:!0}})],vi.prototype,"name",void 0),p([b({json:{name:"WavelengthMin",read:{reader:yl},write:!0}})],vi.prototype,"minWavelength",void 0),p([b({json:{name:"WavelengthMax",read:{reader:yl},write:!0}})],vi.prototype,"maxWavelength",void 0),p([b({json:{name:"RadianceBias",read:{reader:yl},write:!0}})],vi.prototype,"radianceBias",void 0),p([b({json:{name:"RadianceGain",read:{reader:yl},write:!0}})],vi.prototype,"radianceGain",void 0),p([b({json:{name:"ReflectanceBias",read:{reader:yl},write:!0}})],vi.prototype,"reflectanceBias",void 0),p([b({json:{name:"ReflectanceGain",read:{reader:yl},write:!0}})],vi.prototype,"reflectanceGain",void 0),p([b({json:{name:"SolarIrradiance",read:{reader:yl},write:!0}})],vi.prototype,"solarIrradiance",void 0),vi=q_=p([L("esri.layers.support.RasterBandInfo")],vi);const Jk=vi;var J_;function od(e){return e=Number(e),isNaN(e)?void 0:e}let Ar=J_=class extends re{constructor(){super(...arguments),this.acquisitionDate=void 0,this.cloudCover=void 0,this.productName=void 0,this.sensorName=null,this.sensorAzimuth=void 0,this.sensorElevation=void 0,this.sunAzimuth=void 0,this.sunElevation=void 0}readAcquisitionDate(e){return new Date(e)}writeAcquisitionDate(e,t){t.AcquisitionDate=e.getTime()}clone(){return new J_({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};p([b({json:{name:"AcquisitionDate",write:!0}})],Ar.prototype,"acquisitionDate",void 0),p([ge("acquisitionDate")],Ar.prototype,"readAcquisitionDate",null),p([xe("acquisitionDate")],Ar.prototype,"writeAcquisitionDate",null),p([b({json:{name:"CloudCover",read:{reader:od},write:!0}})],Ar.prototype,"cloudCover",void 0),p([b({json:{name:"ProductName",write:!0}})],Ar.prototype,"productName",void 0),p([b({json:{name:"SensorName",write:!0}})],Ar.prototype,"sensorName",void 0),p([b({json:{name:"SensorAzimuth",read:{reader:od},write:!0}})],Ar.prototype,"sensorAzimuth",void 0),p([b({json:{name:"SensorElevation",read:{reader:od},write:!0}})],Ar.prototype,"sensorElevation",void 0),p([b({json:{name:"SunAzimuth",read:{reader:od},write:!0}})],Ar.prototype,"sunAzimuth",void 0),p([b({json:{name:"SunElevation",read:{reader:od},write:!0}})],Ar.prototype,"sunElevation",void 0),Ar=J_=p([L("esri.layers.support.RasterSensorInfo")],Ar);const Dce=Ar;var Z_;let ht=Z_=class extends re{constructor(e){super(e),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get bandInfos(){const e=this.keyProperties.BandProperties,{bandCount:t}=this;if(!(e!=null&&e.length)||e.length<t){const r=[];for(let i=1;i<=t;i++)r.push(new Jk({name:"band_"+i}));return r}const n=e.map(r=>Jk.fromJSON(r));for(let r=0;r<n.length;r++)n[r].name=n[r].name||"band_"+(r+1);return n}get dataType(){var t,n;const e=((n=(t=this.keyProperties)==null?void 0:t.DataType)==null?void 0:n.toLowerCase())??"generic";return e==="stdtime"?"standard-time":e}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(e){e&&this._set("nativeExtent",e)}get nativePixelSize(){if(this.transform==null||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}get hasMultidimensionalTranspose(){var e;return!!((e=this.storageInfo)!=null&&e.transposeInfo)}get sensorInfo(){var e;if((e=this.keyProperties)!=null&&e.SensorName)return Dce.fromJSON(this.keyProperties)}clone(){return new Z_({attributeTable:J(this.attributeTable),bandCount:this.bandCount,colormap:J(this.colormap),extent:J(this.extent),nativePixelSize:J(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:J(this.histograms),keyProperties:J(this.keyProperties),multidimensionalInfo:J(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:J(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:J(this.spatialReference),statistics:J(this.statistics),storageInfo:J(this.storageInfo),transform:J(this.transform)})}};p([b({json:{write:!0}})],ht.prototype,"attributeTable",void 0),p([b({json:{write:!0}})],ht.prototype,"bandCount",void 0),p([b({readOnly:!0})],ht.prototype,"bandInfos",null),p([b({json:{write:!0}})],ht.prototype,"colormap",void 0),p([b({type:String,readOnly:!0})],ht.prototype,"dataType",null),p([b({type:Me,json:{write:!0}})],ht.prototype,"extent",void 0),p([b({type:Me,json:{write:!0}})],ht.prototype,"nativeExtent",null),p([b({json:{write:!0}})],ht.prototype,"nativePixelSize",null),p([b({json:{write:!0}})],ht.prototype,"format",void 0),p([b({json:{write:!0}})],ht.prototype,"height",void 0),p([b({json:{write:!0}})],ht.prototype,"width",void 0),p([b({json:{write:!0}})],ht.prototype,"hasMultidimensionalTranspose",null),p([b({json:{write:!0}})],ht.prototype,"histograms",void 0),p([b({json:{write:!0}})],ht.prototype,"keyProperties",void 0),p([b({json:{write:!0}})],ht.prototype,"multidimensionalInfo",void 0),p([b({json:{write:!0}})],ht.prototype,"noDataValue",void 0),p([b({json:{write:!0}})],ht.prototype,"pixelSize",void 0),p([b({json:{write:!0}})],ht.prototype,"pixelType",void 0),p([b()],ht.prototype,"isPseudoSpatialReference",void 0),p([b({readOnly:!0})],ht.prototype,"sensorInfo",null),p([b({type:we,json:{write:!0}})],ht.prototype,"spatialReference",void 0),p([b({json:{write:!0}})],ht.prototype,"statistics",void 0),p([b({type:Df,json:{write:!0}})],ht.prototype,"storageInfo",void 0),p([b({json:{write:!0}})],ht.prototype,"transform",void 0),ht=Z_=p([L("esri.layers.support.RasterInfo")],ht);const ll=ht,Lce=new Set(["slope","aspect","curvature","hillshade","shadedrelief","statistics"]);let Rt=class extends re{constructor(){super(...arguments),this.functionArguments=null,this.readingBufferSize=0,this.id=-1,this.isNoopProcess=!1,this.rawInputBandIds=[],this.isInputBandIdsSwizzled=!1,this.swizzledBandSelection=[],this.isBranch=!1,this._bindingResult=null}get supportsGPU(){return this._bindingResult.supportsGPU}get flatWebGLFunctionChain(){const t=this.getWebGLProcessorDefinition();if(!t)return null;const n=[t],{parameters:r}=t;let i=r.rasters||r.raster&&[r.raster];for(;i!=null&&i.length;){n.unshift(...i);const a=[];for(let l=0;l<i.length;l++){const{parameters:c}=i[l],u=c.rasters||c.raster&&[c.raster];u!=null&&u.length&&a.push(...u)}i=a}for(let a=n.length-1;a>=0;a--)n[a].isNoopProcess&&n.splice(a,1);let s=!1;for(let a=0;a<n.length;a++){const l=n[a];l.id=n.length-a-1;const{rasters:c}=l.parameters;s=s||c!=null&&c.length>1}const o=n.some(({name:a})=>Lce.has(a.toLowerCase()));return{functions:n,hasBranches:s,hasFocalFunction:o}}bind(t,n=!1,r=-1){this.id=r+1;const i=this._getRasterValues();let s=!0;for(let o=0;o<i.length;o++){const a=i[o];if(a!=null&&this._isRasterFunctionValue(a)){const l=a.bind(t,n,this.id+o);if(!l.success)return this._bindingResult=l,l;s=s&&l.supportsGPU}}return!this.rasterInfo||n?(this.sourceRasterInfos=this._getSourceRasterInfos(t),this._bindingResult=this._bindSourceRasters(),this._bindingResult.success&&this._patchRasterInfo(),this._bindingResult.supportsGPU=s&&this._bindingResult.supportsGPU,this.processInputBandIds(),this._bindingResult):(this._bindingResult={success:!0,supportsGPU:!0},this.processInputBandIds(),this._bindingResult)}process(t){const n=this._getRasterValues(),r=n.length===0?t.pixelBlocks??t.primaryPixelBlocks:n.map(i=>this._readRasterValue(i,t));return this._processPixels({...t,pixelBlocks:r})}processInputBandIds(){const t=this._getRasterValues().filter(this._isRasterFunctionValue);let n;if(t.length>1){const s=t.map(a=>a.processInputBandIds()[0]);this.rawInputBandIds=s,this.isInputBandIdsSwizzled=this.rawInputBandIds.some((a,l)=>a!==l);const o=t.filter(a=>a.functionName==="ExtractBand");return o.length&&o.forEach((a,l)=>{a.isInputBandIdsSwizzled=!0,a.swizzledBandSelection=[l,l,l]}),this.rawInputBandIds}const r=t[0];if(r){if(n=r.processInputBandIds(),r.isInputBandIdsSwizzled)return this.rawInputBandIds=n,n}else{n=[];const{bandCount:s}=this.sourceRasterInfos[0];for(let o=0;o<s;o++)n.push(o)}const i=this._getInputBandIds(n);return this.isInputBandIdsSwizzled=i.some((s,o)=>s!==o),this.rawInputBandIds=i,this.rawInputBandIds}getPrimaryRasters(){const t=[],n=[];return this._getPrimaryRasters(this,t,n),{rasters:t,rasterIds:n}}getWebGLProcessorDefinition(){const t=this._getWebGLParameters(),{raster:n,rasters:r}=this.functionArguments;return r&&Array.isArray(r)&&r.length?(t.rasters=r.map(i=>this._isRasterFunctionValue(i)?i.getWebGLProcessorDefinition():typeof i=="number"?{name:"Constant",parameters:{value:i},pixelType:"f32",id:-1,isNoopProcess:!1}:{name:"Identity",parameters:{value:i},pixelType:"f32",id:-1,isNoopProcess:!1}),t.rasters.some(i=>i!=null)||(t.rasters=null)):this._isRasterFunctionValue(n)&&(t.raster=n.getWebGLProcessorDefinition()),{name:this.functionName,parameters:t,pixelType:this.outputPixelType,id:this.id,isNoopProcess:this.isNoopProcess}}_getOutputPixelType(t){return this.outputPixelType==="unknown"?t:this.outputPixelType??t}_getWebGLParameters(){return{}}_getInputBandIds(t){return t}_isOutputRoundingNeeded(){const{outputPixelType:t}=this;return((t==null?void 0:t.startsWith("u"))||(t==null?void 0:t.startsWith("s")))??!1}_getRasterValues(){const{rasterArgumentNames:t}=this;return t[0]==="rasters"?this.functionArguments.rasters??[]:t.flatMap(n=>this.functionArguments[n])}_getSourceRasterInfos(t){const n=this._getRasterValues(),{rasterInfos:r,rasterIds:i}=t;if(n.length===0)return r;const s=n.map(a=>a&&typeof a=="object"&&"bind"in a&&a.rasterInfo?a.rasterInfo:typeof a=="string"&&i.includes(a)?r[i.indexOf(a)]:typeof a!="number"?r[0]:void 0),o=s.find(a=>a)??r[0];return s.forEach((a,l)=>{a===void 0&&(s[l]=o)}),s}_getPrimaryRasterId(t){return t==null?void 0:t.url}_getPrimaryRasters(t,n=[],r=[]){for(let i=0;i<t.sourceRasters.length;i++){const s=t.sourceRasters[i];if(typeof s!="number")if("bind"in s)this._getPrimaryRasters(s,n,r);else{const o=s,a=this._getPrimaryRasterId(o);if(a==null)continue;r.includes(a)||(this.mainPrimaryRasterId===a?(n.unshift(o),r.unshift(a)):(n.push(o),r.push(a)))}}}_isRasterFunctionValue(t){return t!=null&&typeof t=="object"&&"getWebGLProcessorDefinition"in t}_readRasterValue(t,n){const{primaryPixelBlocks:r}=n;if(t==null||t==="$$"){const i=r[0];return i==null?null:i.clone()}if(typeof t=="string"){const i=n.primaryRasterIds.indexOf(t);return i===-1?null:r[i]}if(typeof t=="number"){const i=r[0];if(i==null)return null;const{width:s,height:o,pixelType:a,mask:l}=i,c=l?new Uint8Array(l):null,u=new Float32Array(s*o);u.fill(t);const h=this.sourceRasterInfos[0].bandCount,f=new Array(h).fill(u);return new ee({width:s,height:o,pixelType:a,pixels:f,mask:c})}return t.process(n)}_patchRasterInfo(){const{rasterInfo:t}=this;if(!(t!=null&&t.keyProperties))return;const{bandCount:n,keyProperties:r,statistics:i,histograms:s}=t,o=r.BandProperties;o&&o.length!==n&&(t.keyProperties={...r,BandProperties:void 0}),i&&i.length!==n&&(t.statistics=i.length>n?i.slice(0,n):null),s&&s.length!==n&&(t.histograms=s.length>n?s.slice(0,n):null),r.BAND_COUNT&&Number(r.BAND_COUNT)!==n&&(t.keyProperties={...r,BAND_COUNT:typeof r.BAND_COUNT=="string"?String(n):n})}};p([b({json:{write:!0}})],Rt.prototype,"functionName",void 0),p([b({json:{write:!0}})],Rt.prototype,"functionArguments",void 0),p([b()],Rt.prototype,"rasterArgumentNames",void 0),p([b({json:{write:!0}}),gt(e=>e==null?void 0:e.toLowerCase())],Rt.prototype,"outputPixelType",void 0),p([b({json:{write:!0}})],Rt.prototype,"mainPrimaryRasterId",void 0),p([b()],Rt.prototype,"sourceRasters",void 0),p([b({type:[ll],json:{write:!0}})],Rt.prototype,"sourceRasterInfos",void 0),p([b({json:{write:!0}})],Rt.prototype,"rasterInfo",void 0),p([b({json:{write:!0}})],Rt.prototype,"readingBufferSize",void 0),p([b({json:{write:!0}})],Rt.prototype,"id",void 0),p([b()],Rt.prototype,"isNoopProcess",void 0),p([b()],Rt.prototype,"supportsGPU",null),p([b()],Rt.prototype,"rawInputBandIds",void 0),p([b()],Rt.prototype,"isInputBandIdsSwizzled",void 0),p([b()],Rt.prototype,"swizzledBandSelection",void 0),p([b()],Rt.prototype,"isBranch",void 0),p([b()],Rt.prototype,"flatWebGLFunctionChain",null),p([b()],Rt.prototype,"_bindingResult",void 0),Rt=p([L("esri.layers.support.rasterFunctions.BaseRasterFunction")],Rt);const $n=Rt,Vn=1,no=1/111e3;function qF(e){let{altitude:t,azimuth:n}=e;const{hillshadeType:r,pixelSizePower:i=1,pixelSizeFactor:s=1,scalingType:o,isGCS:a,resolution:l}=e,c=r==="multi-directional"?2*e.zFactor:e.zFactor,{x:u,y:h}=l;let f=c/(8*u),d=c/(8*h);if(a&&c>.001&&(f/=no,d/=no),o==="adjusted")if(a){const P=u*no,j=h*no;f=(c+P**i*s)/(8*P),d=(c+j**i*s)/(8*j)}else f=(c+u**i*s)/(8*u),d=(c+h**i*s)/(8*h);let g=(90-t)*Math.PI/180,y=Math.cos(g),w=(360-n+90)*Math.PI/180,v=Math.sin(g)*Math.cos(w),x=Math.sin(g)*Math.sin(w);const S=[315,270,225,360,180,0],_=[60,60,60,60,60,90],M=new Float32Array([3,5,3,2,1,4]),$=M.reduce((P,j)=>P+j),T=M.map(P=>P/$),A=r==="multi-directional"?S.length:1,I=new Float32Array(6),E=new Float32Array(6),O=new Float32Array(6);if(r==="multi-directional")for(let P=0;P<A;P++)t=_[P],n=S[P],g=(90-t)*Math.PI/180,y=Math.cos(g),w=(360-n+90)*Math.PI/180,v=Math.sin(g)*Math.cos(w),x=Math.sin(g)*Math.sin(w),I[P]=y,E[P]=v,O[P]=x;else I.fill(y),E.fill(v),O.fill(x);return{resolution:l,factor:[f,d],sinZcosA:v,sinZsinA:x,cosZ:y,sinZcosAs:E,sinZsinAs:O,cosZs:I,weights:T,hillshadeType:["traditional","multi-directional"].indexOf(r)}}function Kb(e,t){const{width:n,height:r}=e,i=n*r,s=new Uint8Array(i),o=e.mask!=null;let a;if(o){a=new Uint8Array(e.mask);for(let $=0;$<a.length;$++)a[$]&&(s[$]=1,a[$]=1)}const l=e.pixels[0],c=new Float32Array(i),u=new Float32Array(i);let h,f=0;if(t){const{resolution:$}=t,T=$?($.x+$.y)/2:1;f=200*t.zFactor/(T*T),h=new Float32Array(i)}const d=t==null?void 0:t.curvatureType;let g,y,w,v,x,S,_,M;for(let $=Vn;$<r-Vn;$++){const T=$*n;for(let A=Vn;A<n-Vn;A++){const I=T+A;if(!a||a[I]!==0){if(a){if(a[I-n-1]+a[I-n]+a[I-n+1]+a[I-1]+a[I+1]+a[I+n-1]+a[I+n]+a[I+n+1]<7){s[I]=0;continue}g=a[I-n-1]?l[I-n-1]:l[I],y=a[I-n]?l[I-n]:l[I],w=a[I-n+1]?l[I-n+1]:l[I],v=a[I-1]?l[I-1]:l[I],x=a[I+1]?l[I+1]:l[I],S=a[I+n-1]?l[I+n-1]:l[I],_=a[I+n]?l[I+n]:l[I],M=a[I+n+1]?l[I+n+1]:l[I]}else g=l[I-n-1],y=l[I-n],w=l[I-n+1],v=l[I-1],x=l[I+1],S=l[I+n-1],_=l[I+n],M=l[I+n+1];if(c[I]=w+x+x+M-(g+v+v+S),u[I]=S+_+_+M-(g+y+y+w),h!=null){const E=l[I],O=.5*(v+x)-E,P=.5*(y+_)-E;if(d==="standard")h[I]=-f*(O+P);else{const j=(-g+w+S-M)/4,V=(-v+x)/2,U=(y-_)/2,q=V*V,C=U*U,R=q+C;R&&(h[I]=d==="profile"?f*(O*q+P*C+j*V*U)/R:-f*(O*C+P*q-j*V*U)/R)}}}}}return{outMask:o?s:null,dzxs:c,dzys:u,curvatures:h}}function Xb(e,t,n){for(let r=0;r<n;r++)e[r*t]=e[r*t+1],e[(r+1)*t-1]=e[(r+1)*t-2];for(let r=1;r<t-1;r++)e[r]=e[r+t],e[r+(n-1)*t]=e[r+(n-2)*t]}function Fce(e,t){if(!dt(e))return e;const{factor:n,sinZcosA:r,sinZsinA:i,cosZ:s,sinZcosAs:o,sinZsinAs:a,cosZs:l,weights:c}=qF(t),[u,h]=n,f=t.hillshadeType==="traditional",{width:d,height:g}=e,y=new Uint8Array(d*g),{dzxs:w,dzys:v,outMask:x}=Kb(e);for(let S=Vn;S<g-Vn;S++){const _=S*d;for(let M=Vn;M<d-Vn;M++){const $=_+M;if(!x||x[$]){const T=w[$]*u,A=v[$]*h,I=Math.sqrt(1+T*T+A*A);let E=0;if(f){let O=255*(s+i*A-r*T)/I;O<0&&(O=0),E=O}else{const O=a.length;for(let P=0;P<O;P++){let j=255*(l[P]+a[P]*A-o[P]*T)/I;j<0&&(j=0),E+=j*c[P]}}y[$]=255&E}}}return Xb(y,d,g),new ee({width:d,height:g,pixels:[y],mask:x,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}function jce(e,t,n,r){if(!dt(e)||!dt(t))return;const{min:i,max:s}=r,o=e.pixels[0],{pixels:a,mask:l}=t,c=a[0],u=255.00001/(s-i),h=new Uint8ClampedArray(c.length),f=new Uint8ClampedArray(c.length),d=new Uint8ClampedArray(c.length),g=n.length-1;for(let y=0;y<c.length;y++){if(l&&l[y]===0)continue;const w=Math.floor((c[y]-i)*u),[v,x]=n[w<0?0:w>g?g:w],S=o[y],_=S*x,M=_*(1-Math.abs(v%2-1)),$=S-_;switch(Math.floor(v)){case 0:h[y]=_+$,f[y]=M+$,d[y]=$;break;case 1:h[y]=M+$,f[y]=_+$,d[y]=$;break;case 2:h[y]=$,f[y]=_+$,d[y]=M+$;break;case 3:h[y]=$,f[y]=M+$,d[y]=_+$;break;case 4:h[y]=M+$,f[y]=$,d[y]=_+$;break;case 5:case 6:h[y]=_+$,f[y]=$,d[y]=M+$}}e.pixels=[h,f,d],e.updateStatistics()}function zce(e,t){if(!dt(e))return e;const n=t.zFactor,r=t.pixelSizePower??1,i=t.pixelSizeFactor??1,s=t.slopeType,o=t.isGCS,{x:a,y:l}=t.resolution;let c=n/(8*a),u=n/(8*l);o&&Math.abs(n-1)<1e-4&&(c/=no,u/=no),s==="adjusted"&&(c=(n+a**r*i)/(8*a),u=(n+l**r*i)/(8*l));const{dzxs:h,dzys:f,outMask:d}=Kb(e),{width:g,height:y}=e,w=new Float32Array(g*y);for(let x=Vn;x<y-Vn;x++){const S=x*g;for(let _=Vn;_<g-Vn;_++){const M=S+_;if(!d||d[M]){const $=h[M]*c,T=f[M]*u,A=Math.sqrt($*$+T*T);w[S+_]=s==="percent-rise"?100*A:57.2957795*Math.atan(A)}}}Xb(w,g,y);const v=new ee({width:g,height:y,pixels:[w],mask:d,pixelType:"f32",validPixelCount:e.validPixelCount});return v.updateStatistics(),v}function Bce(e,t={}){if(!dt(e))return e;const{resolution:n}=t,r=n?1/n.x:1,i=n?1/n.y:1,{dzxs:s,dzys:o,outMask:a}=Kb(e),{width:l,height:c}=e,u=new Float32Array(l*c);for(let h=Vn;h<c-Vn;h++){const f=h*l;for(let d=Vn;d<l-Vn;d++){const g=f+d;if(!a||a[g]){const y=s[g]*r,w=o[g]*i;let v=-1;y===0&&w===0||(v=90-57.29578*Math.atan2(w,-y),v<0&&(v+=360),v===360?v=0:v>360&&(v%=360)),u[f+d]=v}}}return Xb(u,l,c),new ee({width:l,height:c,pixels:[u],mask:a,pixelType:"f32",validPixelCount:e.validPixelCount,statistics:[{minValue:-1,maxValue:360}]})}function Uce(e,t){if(!dt(e))return e;const{curvatures:n,outMask:r}=Kb(e,t),{width:i,height:s}=e;Xb(n,i,s);const o=new ee({width:i,height:s,pixels:[n],mask:r,pixelType:"f32",validPixelCount:e.validPixelCount});return o.updateStatistics(),o}let Zl=class extends $n{constructor(){super(...arguments),this.functionName="Aspect",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isGCS=!1}_bindSourceRasters(){var r;const t=this.sourceRasterInfos[0];this.isGCS=((r=t.spatialReference)==null?void 0:r.isGeographic)??!1,this.outputPixelType=this._getOutputPixelType("f32");const n=t.clone();return n.pixelType=this.outputPixelType,n.statistics=[{min:-1,max:360,avg:180,stddev:30}],n.histograms=null,n.colormap=null,n.attributeTable=null,n.bandCount=1,this.rasterInfo=n,{success:!0,supportsGPU:!0}}_processPixels(t){var a;const n=(a=t.pixelBlocks)==null?void 0:a[0];if(n==null)return null;const{extent:r,primaryPixelSizes:i}=t,s=i==null?void 0:i[0],o=s??(r?{x:r.width/n.width,y:r.height/n.height}:{x:1,y:1});return Bce(n,{resolution:o})}};p([b({json:{write:!0,name:"rasterFunction"}})],Zl.prototype,"functionName",void 0),p([b({type:Nce,json:{write:!0,name:"rasterFunctionArguments"}})],Zl.prototype,"functionArguments",void 0),p([b()],Zl.prototype,"rasterArgumentNames",void 0),p([b({json:{write:!0}})],Zl.prototype,"isGCS",void 0),Zl=p([L("esri.layers.support.rasterFunctions.AspectFunction")],Zl);const Vce=Zl,Gce=new Set(["+","-","*","/","(",")"]);function Wce(e,t){(e=e.replaceAll(" ","")).startsWith("-")&&(e="0"+e),e.startsWith("+")&&(e=e.slice(1,e.length));const n=e.split(""),r=[],i=[];let s="";for(let o=0;o<n.length;o++){const a=n[o];if(Gce.has(a))s!==""&&i.push(parseFloat(s)),r.push(a),s="";else{if(a.toLowerCase()==="b"){o++,s=a.concat(n[o]),i.push(t[parseInt(s[1],10)-1]),s="";continue}s=s.concat(a),o===n.length-1&&i.push(parseFloat(s))}}return{ops:r,nums:i}}function Hce(e,t,n,r){if(typeof n=="number"&&typeof r=="number")return n+r;let i,s,o;typeof n=="number"?(o=r,i=o.length,s=new Float32Array(i),s.fill(n)):(i=n.length,s=n,r.constructor===Number?(o=new Float32Array(i),o.fill(r)):o=r);const a=new Float32Array(i);switch(t){case"+":for(let l=0;l<i;l++)(e==null||e[l])&&(a[l]=s[l]+o[l]);break;case"-":for(let l=0;l<i;l++)(e==null||e[l])&&(a[l]=s[l]-o[l]);break;case"*":for(let l=0;l<i;l++)(e==null||e[l])&&(a[l]=s[l]*o[l]);break;case"/":for(let l=0;l<i;l++)(e==null||e[l])&&o[l]&&(a[l]=s[l]/o[l]);break;case"(":case")":throw new Error("encountered error with custom band index equation")}return a}function qce(e,t){e.splice(t,1);let n=0,r=0;do{n=0,r=0;for(let i=0;i<e.length;i++)if(e[i]==="(")n=i;else if(e[i]===")"){r=i;break}r===n+1&&e.splice(n,2)}while(r===n+1);return e}function Jce(e){if(e.length===1)return{opIndex:0,numIndex:0};let t=0,n=0;for(let o=0;o<e.length;o++)if(e[o]==="(")t=o;else if(e[o]===")"){n=o;break}const r=n===0?e:e.slice(t+1,n);let i=-1;for(let o=0;o<r.length;o++)if(r[o]==="*"||r[o]==="/"){i=o;break}if(i>-1)n>0&&(i+=t+1);else{for(let o=0;o<r.length;o++)if(r[o]==="+"||r[o]==="-"){i=o;break}n>0&&(i+=t+1)}let s=0;for(let o=0;o<i;o++)e[o]==="("&&s++;return{opIndex:i,numIndex:i-s}}function Zce(e,t,n){let r,{ops:i,nums:s}=Wce(n,t);if(i.length===0){const o=s.length===1?s[0]:t[0];if(o instanceof Float32Array)return[o];const a=new Float32Array(t[0].length);return typeof o=="number"?a.fill(o):a.set(o),[a]}for(;i.length>0;){const{numIndex:o,opIndex:a}=Jce(i);if(r=Hce(e,i[a],s[o],s[o+1]),i.length===1)break;i=qce(i,a),s.splice(o,2,r)}return[r]}const Yce=new Ne({0:"custom",1:"ndvi",2:"savi",3:"tsavi",4:"msavi",5:"gemi",6:"pvi",7:"gvitm",8:"sultan",9:"vari",10:"gndvi",11:"sr",12:"ndvi-re",13:"sr-re",14:"mtvi2",15:"rtvi-core",16:"ci-re",17:"ci-g",18:"ndwi",19:"evi",20:"iron-oxide",21:"ferrous-minerals",22:"clay-minerals",23:"wndwi",24:"bai",25:"nbr",26:"ndbi",27:"ndmi",28:"ndsi",29:"mndwi"},{useNumericKeys:!0});function Kce(e,t){if(!dt(e))return e;const{equation:n,method:r}=t,i=t.bandIndexes.map(u=>u-1),{pixels:s,mask:o}=e;let a;switch(r){case"gndvi":case"nbr":case"ndbi":case"ndvi":case"ndvi-re":case"ndsi":case"ndmi":case"mndwi":a=Zk(o,s[i[0]],s[i[1]]);break;case"ndwi":a=Zk(o,s[i[1]],s[i[0]]);break;case"sr":case"sr-re":case"iron-oxide":case"ferrous-minerals":case"clay-minerals":a=Qce(o,s[i[0]],s[i[1]]);break;case"ci-g":case"ci-re":a=eue(o,s[i[0]],s[i[1]]);break;case"savi":a=tue(o,s[i[0]],s[i[1]],i[2]+1);break;case"tsavi":a=nue(o,s[i[0]],s[i[1]],i[2]+1,i[3]+1,i[4]+1);break;case"msavi":a=rue(o,s[i[0]],s[i[1]]);break;case"gemi":a=iue(o,s[i[0]],s[i[1]]);break;case"pvi":a=sue(o,s[i[0]],s[i[1]],i[2]+1,i[3]+1);break;case"gvitm":a=oue(o,[s[i[0]],s[i[1]],s[i[2]],s[i[3]],s[i[4]],s[i[5]]]);break;case"sultan":a=aue(o,[s[i[0]],s[i[1]],s[i[2]],s[i[3]],s[i[4]],s[i[5]]]);break;case"vari":a=lue(o,[s[i[0]],s[i[1]],s[i[2]]]);break;case"mtvi2":a=cue(o,[s[i[0]],s[i[1]],s[i[2]]]);break;case"rtvi-core":a=uue(o,[s[i[0]],s[i[1]],s[i[2]]]);break;case"evi":a=hue(o,[s[i[0]],s[i[1]],s[i[2]]]);break;case"wndwi":a=fue(o,[s[i[0]],s[i[1]],s[i[2]]],i[3]?i[3]+1:.5);break;case"bai":a=due(o,s[i[0]],s[i[1]]);break;case"custom":a=Zce(o,s,n);break;default:return e}const l=o!=null?new Uint8Array(o.length):null;o!=null&&l!=null&&l.set(o);const c=new ee({width:e.width,height:e.height,pixelType:"f32",pixels:a,mask:l});return c.updateStatistics(),c}function Xce(e,t,n,r){const{mask:i,pixels:s,width:o,height:a}=e,l=s[n],c=s[t],u=c.length,h=r?new Uint8Array(u):new Float32Array(u),f=r?100:1,d=r?100.5:0;for(let y=0;y<u;y++)if(i==null||i[y]){const w=l[y],v=c[y],x=w+v;x&&(h[y]=(w-v)/x*f+d)}const g=new ee({width:o,height:a,mask:i,pixelType:r?"u8":"f32",pixels:[h]});return g.updateStatistics(),g}function fn(e){const t=new Float32Array(9);return t[3*e[0]]=1,t[3*e[1]+1]=1,t[3*e[2]+2]=1,t}function Zk(e,t,n){const r=n.length,i=new Float32Array(r);for(let s=0;s<r;s++)if(e==null||e[s]){const o=t[s],a=n[s],l=o+a;l&&(i[s]=(o-a)/l)}return[i]}function Qce(e,t,n){const r=n.length,i=new Float32Array(r);for(let s=0;s<r;s++)if(e==null||e[s]){const o=t[s],a=n[s];a&&(i[s]=o/a)}return[i]}function eue(e,t,n){const r=t.length,i=new Float32Array(r);for(let s=0;s<r;s++)if(e==null||e[s]){const o=t[s],a=n[s];a&&(i[s]=o/a-1)}return[i]}function tue(e,t,n,r){const i=n.length,s=new Float32Array(i);for(let o=0;o<i;o++)if(e==null||e[o]){const a=n[o],l=t[o],c=l+a+r;c&&(s[o]=(l-a)/c*(1+r))}return[s]}function nue(e,t,n,r,i,s){const o=n.length,a=new Float32Array(o),l=-i*r+s*(1+r*r);for(let c=0;c<o;c++)if(e==null||e[c]){const u=n[c],h=t[c],f=i*h+u+l;f&&(a[c]=r*(h-r*u-i)/f)}return[a]}function rue(e,t,n){const r=n.length,i=new Float32Array(r);for(let s=0;s<r;s++)if(e==null||e[s]){const o=n[s],a=t[s];i[s]=.5*(2*(a+1)-Math.sqrt((2*a+1)**2-8*(a-o)))}return[i]}function iue(e,t,n){const r=n.length,i=new Float32Array(r);for(let s=0;s<r;s++)if(e==null||e[s]){const o=n[s],a=t[s];if(o!==1){const l=(2*(a*a-o*o)+1.5*a+.5*o)/(a+o+.5);i[s]=l*(1-.25*l)-(o-.125)/(1-o)}}return[i]}function sue(e,t,n,r,i){const s=n.length,o=new Float32Array(s),a=Math.sqrt(1+r*r);for(let l=0;l<s;l++)if(e==null||e[l]){const c=n[l],u=t[l];o[l]=(u-r*c-i)/a}return[o]}function oue(e,t){const[n,r,i,s,o,a]=t,l=n.length,c=new Float32Array(l);for(let u=0;u<l;u++)(e==null||e[u])&&(c[u]=-.2848*n[u]-.2435*r[u]-.5436*i[u]+.7243*s[u]+.084*o[u]-1.18*a[u]);return[c]}function aue(e,t){const[n,,r,i,s,o]=t,a=n.length,l=new Float32Array(a),c=new Float32Array(a),u=new Float32Array(a);for(let h=0;h<a;h++)(e==null||e[h])&&(l[h]=o[h]?s[h]/o[h]*100:0,c[h]=n[h]?s[h]/n[h]*100:0,u[h]=i[h]?r[h]/i[h]*(s[h]/i[h])*100:0);return[l,c,u]}function lue(e,t){const[n,r,i]=t,s=n.length,o=new Float32Array(s);for(let a=0;a<s;a++)if(e==null||e[a])for(a=0;a<s;a++){const l=n[a],c=r[a],u=c+l-i[a];u&&(o[a]=(c-l)/u)}return[o]}function cue(e,t){const[n,r,i]=t,s=n.length,o=new Float32Array(s);for(let a=0;a<s;a++)if(e==null||e[a])for(a=0;a<s;a++){const l=n[a],c=r[a],u=i[a],h=Math.sqrt((2*l+1)**2-6*l-5*Math.sqrt(c)-.5);o[a]=1.5*(1.2*(l-u)-2.5*(c-u))*h}return[o]}function uue(e,t){const[n,r,i]=t,s=n.length,o=new Float32Array(s);for(let a=0;a<s;a++)if(e==null||e[a])for(a=0;a<s;a++){const l=n[a],c=r[a],u=i[a];o[a]=100*(l-c)-10*(l-u)}return[o]}function hue(e,t){const[n,r,i]=t,s=n.length,o=new Float32Array(s);for(let a=0;a<s;a++)if(e==null||e[a])for(a=0;a<s;a++){const l=n[a],c=r[a],u=l+6*c-7.5*i[a]+1;u&&(o[a]=2.5*(l-c)/u)}return[o]}function fue(e,t,n=.5){const[r,i,s]=t,o=i.length,a=new Float32Array(o);for(let l=0;l<o;l++)if(e==null||e[l])for(l=0;l<o;l++){const c=r[l],u=i[l],h=s[l],f=c+n*u+(1-n)*h;f&&(a[l]=(c-n*u-(1-n)*h)/f)}return[a]}function due(e,t,n){const r=n.length,i=new Float32Array(r);for(let s=0;s<r;s++)if(e==null||e[s])for(s=0;s<r;s++){const o=(.1-t[s])**2+(.06-n[s])**2;o&&(i[s]=1/o)}return[i]}var Y_;let Xd=Y_=class extends Mn{constructor(){super(...arguments),this.method="custom"}clone(){return new Y_({method:this.method,bandIndexes:this.bandIndexes,raster:J(this.raster)})}};p([b({json:{type:String,write:!0}})],Xd.prototype,"bandIndexes",void 0),p([pe(Yce)],Xd.prototype,"method",void 0),Xd=Y_=p([L("esri.layers.support.rasterFunctions.BandArithmeticFunctionArguments")],Xd);const pue=Xd,mue=new Set(["vari","mtvi2","rtvi-core","evi"]);let lh=class extends $n{constructor(){super(...arguments),this.functionName="BandArithmetic",this.functionArguments=null,this.rasterArgumentNames=["raster"]}_bindSourceRasters(){this.outputPixelType=this._getOutputPixelType("f32");const t=this.sourceRasterInfos[0];if(t.bandCount<2)return{success:!1,supportsGPU:!1,error:"band-arithmetic-function: source raster has insufficient amount of raster bands"};const n=t.clone();return n.pixelType=this.outputPixelType,n.statistics=null,n.histograms=null,n.bandCount=this.functionArguments.method==="sultan"?3:1,n.keyProperties={...n.keyProperties,BandProperties:void 0},this.rasterInfo=n,{success:!0,supportsGPU:!["custom","gvitm","sultan"].includes(this.functionArguments.method)}}_processPixels(t){var o;const n=(o=t.pixelBlocks)==null?void 0:o[0];if(n==null)return n;const{method:r,bandIndexes:i}=this.functionArguments,s=i.split(" ").map(a=>parseFloat(a));return Kce(n,{method:r,bandIndexes:s,equation:i})}_getWebGLParameters(){const t=this.functionArguments.bandIndexes.split(" ").map(a=>parseFloat(a)-1);t.length===2&&t.push(0);const n=this.isInputBandIdsSwizzled?[0,1,2]:t;let r,i;const s=new Float32Array(3),{method:o}=this.functionArguments;switch(o){case"gndvi":case"nbr":case"ndbi":case"ndvi":case"ndvi-re":case"ndsi":case"ndmi":case"mndwi":r=fn([n[0],n[1],0]),i="ndxi";break;case"ndwi":r=fn([n[1],n[0],0]),i="ndxi";break;case"sr":case"sr-re":case"iron-oxide":case"ferrous-minerals":case"clay-minerals":r=fn([n[0],n[1],0]),i="sr";break;case"ci-g":case"ci-re":r=fn([n[0],n[1],0]),i="ci";break;case"savi":r=fn([n[0],n[1],0]),i="savi",s[0]=t[2]+1;break;case"tsavi":r=fn([n[0],n[1],0]),i="tsavi",s[0]=t[2]+1,s[1]=t[3]+1,s[2]=t[4]+1;break;case"msavi":r=fn([n[0],n[1],0]),i="msavi";break;case"gemi":r=fn([n[0],n[1],0]),i="gemi";break;case"pvi":r=fn([n[0],n[1],0]),i="tsavi",s[0]=t[2]+1,s[1]=t[3]+1;break;case"vari":r=fn([n[0],n[1],n[2]]),i="vari";break;case"mtvi2":r=fn([n[0],n[1],n[2]]),i="mtvi2";break;case"rtvi-core":r=fn([n[0],n[1],n[2]]),i="rtvicore";break;case"evi":r=fn([n[0],n[1],n[2]]),i="evi";break;case"wndwi":r=fn([n[0],n[1],0]),i="wndwi",s[0]=t[3]?t[3]+1:.5;break;case"bai":r=fn([n[1],n[0],0]),i="bai";break;default:r=fn([0,1,2]),i="custom"}return{bandIndexMat3:r,indexType:i,adjustments:s}}_getInputBandIds(t){if(this.functionArguments.method==="custom")return t;const n=this.functionArguments.bandIndexes.split(" ").map(a=>parseFloat(a)-1),r=t.length,i=n.map(a=>a>=r?r-1:a),s=mue.has(this.functionArguments.method)?3:2,o=i.slice(0,s).map(a=>t[a]);return o.length===2&&o.push(0),o}};p([b({json:{write:!0,name:"rasterFunction"}})],lh.prototype,"functionName",void 0),p([b({type:pue,json:{write:!0,name:"rasterFunctionArguments"}})],lh.prototype,"functionArguments",void 0),p([b()],lh.prototype,"rasterArgumentNames",void 0),lh=p([L("esri.layers.support.rasterFunctions.BandArithmeticFunction")],lh);const gue=lh;var K_;let os=K_=class extends Mn{castColormapName(e){if(!e)return null;const t=e.toLowerCase();return Lse.includes(t)?t:null}readColorRamp(e){return Lb(e)}readColorRampName(e,t){if(!e)return null;const n=Wh.jsonValues.find(r=>r.toLowerCase()===e.toLowerCase());return n?Wh.fromJSON(n):null}clone(){var e;return new K_({colormap:J(this.colormap),colormapName:this.colormapName,colorRamp:(e=this.colorRamp)==null?void 0:e.clone(),colorRampName:this.colorRampName})}};p([b({type:[[Number]],json:{write:!0}})],os.prototype,"colormap",void 0),p([b({type:String,json:{write:!0}})],os.prototype,"colormapName",void 0),p([gt("colormapName")],os.prototype,"castColormapName",null),p([b({types:Db,json:{write:!0}})],os.prototype,"colorRamp",void 0),p([ge("colorRamp")],os.prototype,"readColorRamp",null),p([b({type:Wh.apiValues,json:{type:Wh.jsonValues,write:Wh.write}})],os.prototype,"colorRampName",void 0),p([ge("colorRampName")],os.prototype,"readColorRampName",null),os=K_=p([L("esri.layers.support.rasterFunctions.ColormapFunctionArguments")],os);const yue=os,bue=[[36,0,255],[36,0,255],[36,0,255],[36,0,255],[112,75,3],[113,76,3],[114,77,3],[115,77,3],[116,78,3],[117,79,3],[118,79,3],[119,80,3],[121,81,4],[122,82,4],[123,82,4],[124,83,4],[125,84,4],[126,84,4],[127,85,4],[128,86,4],[129,86,4],[130,87,4],[131,88,4],[132,89,4],[133,89,4],[134,90,4],[135,91,4],[136,91,4],[137,92,4],[138,93,4],[139,94,4],[140,94,4],[142,95,5],[143,96,5],[144,96,5],[145,97,5],[146,98,5],[147,99,5],[148,99,5],[149,100,5],[150,101,5],[151,101,5],[152,102,5],[153,103,5],[154,104,5],[155,104,5],[156,105,5],[157,106,5],[158,106,5],[159,107,5],[160,108,5],[161,108,5],[162,109,5],[164,110,6],[165,111,6],[166,111,6],[167,112,6],[168,113,6],[169,113,6],[170,114,6],[171,115,6],[172,116,6],[173,116,6],[174,117,6],[245,0,0],[245,5,0],[245,10,0],[246,15,0],[246,20,0],[246,25,0],[246,30,0],[247,35,0],[247,40,0],[247,45,0],[247,50,0],[247,55,0],[248,60,0],[248,65,0],[248,70,0],[248,75,0],[249,81,0],[249,86,0],[249,91,0],[249,96,0],[250,101,0],[250,106,0],[250,111,0],[250,116,0],[250,121,0],[251,126,0],[251,131,0],[251,136,0],[251,141,0],[252,146,0],[252,151,0],[252,156,0],[252,156,0],[251,159,0],[250,162,0],[249,165,0],[248,168,0],[247,171,0],[246,174,0],[245,177,0],[245,179,0],[244,182,0],[243,185,0],[242,188,0],[241,191,0],[240,194,0],[239,197,0],[238,200,0],[237,203,0],[236,206,0],[235,209,0],[234,212,0],[233,215,0],[232,218,0],[231,221,0],[230,224,0],[230,226,0],[229,229,0],[228,232,0],[227,235,0],[226,238,0],[225,241,0],[224,244,0],[223,247,0],[165,247,0],[163,244,0],[161,240,0],[158,237,0],[156,233,1],[154,230,1],[152,227,1],[149,223,1],[147,220,1],[145,216,1],[143,213,1],[140,210,2],[138,206,2],[136,203,2],[134,200,2],[132,196,2],[129,193,2],[127,189,2],[125,186,3],[123,183,3],[120,179,3],[118,176,3],[116,172,3],[114,169,3],[111,166,3],[109,162,4],[107,159,4],[105,155,4],[103,152,4],[100,149,4],[98,145,4],[96,142,4],[94,138,5],[91,135,5],[89,132,5],[87,128,5],[85,125,5],[82,121,5],[80,118,5],[78,115,6],[76,111,6],[73,108,6],[71,105,6],[69,101,6],[67,98,6],[65,94,6],[62,91,7],[60,88,7],[58,84,7],[56,81,7],[53,77,7],[51,74,7],[49,71,7],[47,67,8],[44,64,8],[42,60,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8],[40,57,8]],wue=[[36,0,255],[36,0,255],[36,0,255],[36,0,255],[245,20,0],[245,24,0],[245,29,0],[245,31,0],[247,33,0],[247,33,0],[247,37,0],[247,41,0],[247,41,0],[247,41,0],[247,45,0],[247,45,0],[247,47,0],[247,49,0],[247,49,0],[247,54,0],[247,54,0],[247,56,0],[247,58,0],[247,58,0],[250,62,0],[250,62,0],[250,62,0],[250,67,0],[250,67,0],[250,67,0],[250,69,0],[250,71,0],[250,71,0],[250,75,0],[250,75,0],[250,78,0],[250,79,0],[250,79,0],[250,79,0],[250,81,0],[250,83,0],[250,83,0],[250,87,0],[250,87,0],[250,90,0],[250,92,0],[252,93,0],[252,93,0],[252,97,0],[252,97,0],[252,97,0],[252,97,0],[252,101,0],[252,101,0],[252,101,0],[252,101,0],[252,105,0],[252,105,0],[252,107,0],[252,109,0],[252,109,0],[252,113,13],[255,118,20],[255,119,23],[255,121,25],[255,126,33],[255,132,38],[255,133,40],[255,135,43],[255,141,48],[255,144,54],[255,150,59],[255,152,61],[255,153,64],[255,159,69],[255,163,77],[255,165,79],[255,168,82],[255,174,87],[255,176,92],[255,181,97],[255,183,99],[255,186,102],[255,191,107],[255,197,115],[255,201,120],[255,203,123],[255,205,125],[255,209,130],[255,214,138],[255,216,141],[255,218,143],[255,224,150],[255,228,156],[255,234,163],[255,236,165],[255,238,168],[255,243,173],[255,248,181],[255,252,186],[253,252,186],[250,252,187],[244,250,180],[238,247,176],[234,246,173],[231,245,169],[223,240,163],[217,237,157],[211,235,150],[205,233,146],[200,230,142],[195,227,136],[189,224,132],[184,222,126],[180,220,123],[174,217,119],[169,214,114],[163,212,108],[160,210,105],[154,207,101],[148,204,96],[143,201,93],[138,199,88],[134,197,84],[130,194,81],[126,191,77],[117,189,70],[115,186,68],[112,184,64],[106,181,60],[100,179,55],[94,176,49],[92,174,47],[90,173,45],[81,168,37],[75,166,33],[71,163,28],[66,160,24],[62,158,21],[56,156,14],[51,153,0],[51,153,0],[51,153,0],[50,150,0],[50,150,0],[50,150,0],[50,150,0],[49,148,0],[49,148,0],[49,148,0],[48,145,0],[48,145,0],[48,145,0],[48,145,0],[48,143,0],[48,143,0],[48,143,0],[48,143,0],[47,140,0],[47,140,0],[47,140,0],[47,140,0],[46,138,0],[46,138,0],[46,138,0],[46,138,0],[45,135,0],[45,135,0],[45,135,0],[45,135,0],[44,133,0],[44,133,0],[44,133,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[43,130,0],[42,128,0],[42,128,0],[42,128,0],[42,125,0],[42,125,0],[42,125,0],[42,125,0],[41,122,0],[41,122,0],[41,122,0],[41,122,0],[40,120,0],[40,120,0],[40,120,0],[40,120,0],[40,120,0],[39,117,0],[39,117,0],[39,117,0],[39,117,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0],[38,115,0]];function u4(e,t){const n=[],r=[];for(let s=0;s<e.length-1;s++)n.push({type:"algorithmic",algorithm:"esriHSVAlgorithm",fromColor:e[s].slice(1),toColor:e[s+1].slice(1)}),r.push(e[s+1][0]-e[s][0]);const i=e[e.length-1][0];return q$({type:"multipart",colorRamps:n},{numColors:i,weights:t=t??r})}function vue(){return u4([[0,0,191,191],[51,0,0,255],[102,255,0,255],[153,255,0,127],[204,191,63,127],[256,20,20,20]])}function xue(){const e=u4([[0,255,255,255],[70,0,255,0],[80,205,173,193],[100,150,150,150],[110,120,51,100],[130,120,100,200],[140,28,3,144],[160,6,0,55],[180,10,25,30],[201,6,7,27]]);for(let t=e.length;t<256;t++)e.push([6,27,7]);return e}function Sue(){return q$({type:"algorithmic",algorithm:"esriHSVAlgorithm",fromColor:[0,0,0],toColor:[255,255,255]})}function _ue(){const e=[];for(let t=0;t<256;t++){const n=[];for(let r=0;r<3;r++)n.push(Math.round(255*Math.random()));e.push(n)}return e}function Mue(){return u4([[0,38,41,54],[69,79,82,90],[131,156,156,156],[256,253,253,241]],[.268,.238,.495])}function $ue(e){let t;switch(e){case"elevation":t=vue();break;case"gray":t=Sue();break;case"hillshade":t=Mue();break;case"ndvi":t=bue;break;case"ndvi2":t=xue();break;case"ndvi3":t=wue;break;case"random":t=_ue()}return t?(t=t.map((n,r)=>[r,...n]),t):null}let sa=class extends $n{constructor(){super(...arguments),this.functionName="Colormap",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isNoopProcess=!0}_bindSourceRasters(){const t=this.sourceRasterInfos[0];if(t.bandCount>1)return{success:!1,supportsGPU:!1,error:"colormap-function: source data must be single band"};let{colormap:n,colormapName:r,colorRamp:i,colorRampName:s}=this.functionArguments;if(!(n!=null&&n.length))if(i)n=fu(i,{interpolateAlpha:!0});else if(s){const a=Bse(s);a&&(n=fu(a))}else r&&(n=$ue(r));if(!(n!=null&&n.length))return{success:!1,supportsGPU:!1,error:"colormap-function: missing colormap argument"};this.outputPixelType=this._getOutputPixelType("u8");const o=t.clone();return o.pixelType=this.outputPixelType,o.colormap=n,o.bandCount=1,this.rasterInfo=o,{success:!0,supportsGPU:!0}}_processPixels(t){var n;return(n=t.pixelBlocks)==null?void 0:n[0]}};p([b({json:{write:!0,name:"rasterFunction"}})],sa.prototype,"functionName",void 0),p([b({type:yue,json:{write:!0,name:"rasterFunctionArguments"}})],sa.prototype,"functionArguments",void 0),p([b()],sa.prototype,"rasterArgumentNames",void 0),p([b()],sa.prototype,"isNoopProcess",void 0),p([b({json:{write:!0}})],sa.prototype,"indexedColormap",void 0),sa=p([L("esri.layers.support.rasterFunctions.ColormapFunction")],sa);const Tue=sa;var X_;let Qd=X_=class extends Mn{constructor(){super(...arguments),this.rasters=[]}writeRasters(e,t){t.rasters=e.map(n=>typeof n=="number"||typeof n=="string"?n:n.toJSON())}clone(){return new X_({rasters:J(this.rasters)})}};p([b({json:{write:!0}})],Qd.prototype,"rasters",void 0),p([xe("rasters")],Qd.prototype,"writeRasters",null),Qd=X_=p([L("esri.layers.support.rasterFunctions.CompositeBandFunctionArguments")],Qd);const Aue=Qd;let ch=class extends $n{constructor(){super(...arguments),this.functionName="CompositeBand",this.functionArguments=null,this.rasterArgumentNames=["rasters"]}_bindSourceRasters(){const{sourceRasterInfos:t}=this,n=t[0];this.outputPixelType=this._getOutputPixelType(n.pixelType);const r=n.clone();if(r.attributeTable=null,r.colormap=null,r.pixelType=this.outputPixelType,r.bandCount=t.map(({bandCount:s})=>s).reduce((s,o)=>s+o),t.every(({statistics:s})=>s!=null&&s.length)){const s=[];t.forEach(({statistics:o})=>o!=null&&s.push(...o)),r.statistics=s}if(t.every(({histograms:s})=>s!=null&&s.length)){const s=[];t.forEach(({histograms:o})=>o!=null&&s.push(...o)),r.histograms=s}r.bandCount>1&&(r.colormap=null,r.attributeTable=null);const i=t.every(s=>{var o;return(o=s.keyProperties.BandProperties)==null?void 0:o.length})?t.flatMap(s=>s.keyProperties.BandProperties):void 0;return r.keyProperties={...r.keyProperties,BandProperties:i},this.rasterInfo=r,{success:!0,supportsGPU:r.bandCount<=3}}_processPixels(t){const{pixelBlocks:n}=t;return n?(n==null?void 0:n[0])==null?null:_oe(n):null}_getWebGLParameters(){return{bandCount:this.rasterInfo.bandCount}}};p([b({json:{write:!0,name:"rasterFunction"}})],ch.prototype,"functionName",void 0),p([b({type:Aue,json:{write:!0,name:"rasterFunctionArguments"}})],ch.prototype,"functionArguments",void 0),p([b()],ch.prototype,"rasterArgumentNames",void 0),ch=p([L("esri.layers.support.rasterFunctions.CompositeBandFunction")],ch);const Iue=ch;var Q_;let ep=Q_=class extends Mn{constructor(){super(...arguments),this.contrastOffset=0,this.brightnessOffset=0}clone(){return new Q_({contrastOffset:this.contrastOffset,brightnessOffset:this.brightnessOffset,raster:this.raster})}};p([b({json:{write:!0}})],ep.prototype,"contrastOffset",void 0),p([b({json:{write:!0}})],ep.prototype,"brightnessOffset",void 0),ep=Q_=p([L("esri.layers.support.rasterFunctions.ContrastBrightnessFunctionArguments")],ep);const kue=ep,hv=1,Eue=[.299,.587,.114];function JF(e,t=256){t=Math.min(t,256);const{size:n,counts:r}=e,i=new Uint8Array(n),s=r.reduce((u,h)=>u+h/t,0);let o=0,a=0,l=0,c=s;for(let u=0;u<n;u++)if(l+=r[u],!(u<n-1&&l+r[u+1]<c)){for(;o<t-1&&c<l;)o++,c+=s;for(let h=a;h<=u;h++)i[h]=o;a=u+1}for(let u=a;u<n;u++)i[u]=t-1;return i}function e5(e){const{minCutOff:t,maxCutOff:n,gamma:r,pixelType:i,rounding:s}=e,o=e.outMin||0,a=e.outMax||255;if(!["u8","u16","s8","s16"].includes(i))return null;const l=t.length;let c,u,h=0;i==="s8"?h=-127:i==="s16"&&(h=-32767);let f=256;["u16","s16"].includes(i)&&(f=65536);const d=[],g=[],y=a-o;for(c=0;c<l;c++)g[c]=n[c]-t[c],d[c]=g[c]===0?0:y/g[c];let w;const v=[];let x,S,_;if(r&&r.length>=l){const M=f4(l,r);for(c=0;c<l;c++){for(_=[],u=0;u<f;u++)if(g[c]!==0)if(x=u+h,w=(x-t[c])/g[c],S=1,r[c]>1&&(S-=(1/y)**(w*M[c])),x<n[c]&&x>t[c]){const $=S*y*w**(1/r[c])+o;_[u]=s==="floor"?Math.floor($):s==="round"?Math.round($):$}else x>=n[c]?_[u]=a:_[u]=o;else _[u]=o;v[c]=_}}else for(c=0;c<l;c++){for(_=[],u=0;u<f;u++)if(x=u+h,x<=t[c])_[u]=o;else if(x>=n[c])_[u]=a;else{const M=(x-t[c])*d[c]+o;_[u]=s==="floor"?Math.floor(M):s==="round"?Math.round(M):M}v[c]=_}if(e.contrastOffset!=null){const M=ZF(e.contrastOffset,e.brightnessOffset);for(c=0;c<l;c++)for(_=v[c],u=0;u<f;u++)_[u]=M[_[u]]}return{lut:v,offset:h}}function ZF(e,t){const n=Math.min(Math.max(e,-100),100),r=Math.min(Math.max(t??0,-100),100),i=255,s=128;let o=0,a=0;const l=new Uint8Array(256);for(o=0;o<256;o++)n>0&&n<100?a=(200*o-100*i+2*i*r)/(2*(100-n))+s:n<=0&&n>-100?a=(200*o-100*i+2*i*r)*(100+n)/2e4+s:n===100?(a=200*o-100*i+(i+1)*(100-n)+2*i*r,a=a>0?i:0):n===-100&&(a=s),l[o]=a>i?i:a<0?0:a;return l}function Cue(e,t,n){const r=[];for(let i=0;i<t.length;i++){let s=0,o=0,a=0;"min"in t[i]?{min:s,max:o,avg:a}=t[i]:[s,o,a]=t[i];let l=a??0;e!=="u8"&&(l=255*(l-s)/(o-s)),n&&(l*=Eue[i]),r.push(Oue(l))}return r}function Oue(e){if(e<=0||e>=255)return hv;let t=0;e!==150&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));const n=255,r=e+t,i=Math.log(e/n),s=Math.log(r/n);if(s===0)return hv;const o=i/s;return isNaN(o)?hv:Math.min(9.9,Math.max(.01,o))}function Pue(e,t,n,r){let i=1/0,s=-1/0,o=0,a=0,l=0,c=0;const u=e.length,h=new Map,f=[];for(let T=0;T<u;T++){const A=e[T];if(!t||t[T]){f.push(A);const I=(h.get(A)??0)+1;h.set(A,I),I>c&&(c=I,l=A),i=A<i?A:i,s=A>s?A:s,o+=A,a++}}if(a===0)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};const d=o/a;let g=0;for(let T=0;T<u;T++)t&&!t[T]||(g+=(e[T]-d)**2);const y=t?t.filter(T=>T).length:u,w=y<=1?0:Math.sqrt(g/(y-1));f.sort((T,A)=>T-A);const v=a>>>1,x={min:i,max:s,avg:d,stddev:w,mode:l,median:a%2?f[Math.floor(v)]:(f[v-1]+f[v])/2};if(!r)return{statistics:x,histogram:null};if(["u8","s8","u4","u2","u1"].includes(n)){const T=s-i+1,A=new Uint32Array(T);for(let I=0;I<u;I++)t&&!t[I]||A[e[I]-i]++;return{statistics:x,histogram:{min:i-.5,max:s+.5,size:T,counts:A}}}const S=256,_=new Uint32Array(S),M=(s-i)/S;if(M===0)return{statistics:x,histogram:{min:i,max:s,size:1,counts:new Uint32Array(1).fill(a)}};const $=new Uint32Array(S+1);for(let T=0;T<u;T++)t&&!t[T]||$[Math.floor((e[T]-i)/M)]++;for(let T=0;T<S-1;T++)_[T]=$[T];return _[S-1]=$[S-1]+$[S],{statistics:x,histogram:{min:i,max:s,size:S,counts:_}}}function Rue(e){const{pixels:t,mask:n,pixelType:r,bandMasks:i}=e,s=t.map((o,a)=>Pue(o,(i==null?void 0:i[a])??n,r,!0));return{statistics:s.map(({statistics:o})=>o),histograms:s.map(({histogram:o})=>o)}}function YF(e){var I;if(!((I=e==null?void 0:e.pixels)!=null&&I.length))return null;const{pixels:t,mask:n,bandMasks:r,pixelType:i}=e,s=e.width*e.height,o=t.length;let a,l,c,u,h;const f=[],d=[];let g,y,w,v,x,S,_,M,$,T;const A=256;for(u=0;u<o;u++){g=new Uint32Array(A),w=t[u];const E=(r==null?void 0:r[u])??n;if(i==="u8")if(a=-.5,l=255.5,E)for(h=0;h<s;h++)E[h]&&g[w[h]]++;else for(h=0;h<s;h++)g[w[h]]++;else{let O=!1;e.statistics||(e.updateStatistics(),O=!0);const P=e.statistics;if(a=P[u].minValue,l=P[u].maxValue,c=(l-a)/A,c===0){!P||e.validPixelCount||O||e.updateStatistics();const j=(e.validPixelCount||e.width*e.height)/A;for(let V=0;V<A;V++)g[V]=Math.round(j*(V+1))-Math.round(j*V)}else{for(y=new Uint32Array(A+1),h=0;h<s;h++)E&&!E[h]||y[Math.floor((w[h]-a)/c)]++;for(h=0;h<A-1;h++)g[h]=y[h];g[A-1]=y[A-1]+y[A]}}for(f.push({min:a,max:l,size:A,counts:g}),v=0,x=0,M=0,h=0;h<A;h++)v+=g[h],x+=h*g[h];for($=x/v,h=0;h<A;h++)M+=g[h]*(h-$)**2;T=Math.sqrt(M/(v-1)),c=(l-a)/A,S=($+.5)*c+a,_=T*c,d.push({min:a,max:l,avg:S,stddev:_})}return{statistics:d,histograms:f}}function h4(e){const t=[];for(let n=0;n<e.length;n++){const{min:r,max:i,size:s,counts:o}=e[n];let a=0,l=0;for(let g=0;g<s;g++)a+=o[g],l+=g*o[g];const c=l/a;let u=0;for(let g=0;g<s;g++)u+=o[g]*(g-c)**2;const h=(i-r)/s,f=(c+.5)*h+r,d=Math.sqrt(u/(a-1))*h;t.push({min:r,max:i,avg:f,stddev:d})}return t}function ba(e,t){var E;const{pixelBlock:n,bandIds:r,returnHistogramLut:i,rasterInfo:s}=t;let o=null,a=null,l=e.stretchType;if(typeof l=="number"&&(l=U9[l]),e.dra)if(l==="minMax"&&(n!=null&&n.statistics))o=n.statistics.map(O=>[O.minValue,O.maxValue,0,0]);else{const O=YF(n);o=O!=null?O.statistics:null,a=O!=null?O.histograms:null}else o=(E=e.statistics)!=null&&E.length?e.statistics:s.statistics,a="histograms"in e?e.histograms:void 0,a||(a=s.histograms);l!=="percentClip"&&l!=="histogramEqualization"||a!=null&&a.length||(l="minMax");const c=(o==null?void 0:o.length)||(a==null?void 0:a.length)||s.bandCount,u=[],h=[];let f,d,g,y,w,v,x,S,_;o&&!Array.isArray(o[0])&&(o=o.map(O=>[O.min,O.max,O.avg,O.stddev]));const[M,$]=As(s.pixelType);if(!(o!=null&&o.length)){for(o=[],S=0;S<c;S++)o.push([M,$,1,1]);l==="standardDeviation"&&(l="minMax")}switch(l){case"none":for(S=0;S<c;S++)u[S]=M,h[S]=$;break;case"minMax":for(S=0;S<c;S++){const O=o[S];u[S]=O[0],h[S]=O[1]}break;case"standardDeviation":{const{numberOfStandardDeviations:O=2}=e;for(S=0;S<c;S++){const P=o[S];u[S]=P[2]-O*P[3],h[S]=P[2]+O*P[3],u[S]<P[0]&&(u[S]=P[0]),h[S]>P[1]&&(h[S]=P[1])}}break;case"histogramEqualization":for(Ph(a),S=0;S<c;S++)u[S]=a[S].min,h[S]=a[S].max;break;case"percentClip":for(Ph(a),S=0;S<a.length;S++){for(f=a[S],w=new Uint32Array(f.size),y=[...f.counts],y.length>=20&&(y[0]=y[1]=y[2]=y[y.length-1]=y[y.length-2]=0),g=0,d=(f.max-f.min)/f.size,x=f.min===-.5&&d===1?.5:0,_=0;_<f.size;_++)g+=y[_],w[_]=g;for(v=(e.minPercent||0)*g/100,u[S]=f.min+x,_=0;_<f.size;_++)if(w[_]>v){u[S]=f.min+d*(_+x);break}for(v=(1-(e.maxPercent||0)/100)*g,h[S]=f.max+x,_=f.size-2;_>=0;_--)if(w[_]<v){h[S]=f.min+d*(_+2-x);break}if(h[S]<u[S]){const O=u[S];u[S]=h[S],h[S]=O}}break;default:for(S=0;S<c;S++){const O=o[S];u[S]=O[0],h[S]=O[1]}}let T,A,I;return l==="histogramEqualization"?(Ph(a),A=a[0].size||256,T=0,i&&(I=a.map(O=>JF(O)))):(A=e.max||255,T=e.min||0),Nue({minCutOff:u,maxCutOff:h,outMax:A,outMin:T,histogramLut:I},r)}function Nue(e,t){if(t==null||t.length===0)return e;const n=Math.max.apply(null,t),{minCutOff:r,maxCutOff:i,outMin:s,outMax:o,histogramLut:a}=e;return r.length===t.length||r.length<=n?e:{minCutOff:t.map(l=>r[l]),maxCutOff:t.map(l=>i[l]),histogramLut:a?t.map(l=>a[l]):null,outMin:s,outMax:o}}function f4(e,t){const n=new Float32Array(e);for(let r=0;r<e;r++)t[r]>1?t[r]>2?n[r]=6.5+(t[r]-2)**2.5:n[r]=6.5+100*(2-t[r])**4:n[r]=1;return n}function jy(e,t){var T;if(!((T=e==null?void 0:e.pixels)!=null&&T.length))return e;const{mask:n,bandMasks:r,width:i,height:s,pixels:o}=e,{minCutOff:a,maxCutOff:l,gamma:c}=t,u=t.outMin||0,h=t.outMax||255,f=i*s,d=t.outputPixelType||"u8",g=e.pixels.map(()=>ee.createEmptyBand(d,f)),y=g.length,w=h-u,v=[],x=[];for(let A=0;A<y;A++)x[A]=l[A]-a[A],v[A]=x[A]===0?0:w/x[A];const S=d.startsWith("u")||d.startsWith("s"),_=c&&c.length>=y,M=!!t.isRenderer;if(_){const A=f4(y,c);for(let I=0;I<y;I++){const E=(r==null?void 0:r[I])??n;for(let O=0;O<f;O++)if(E==null||E[O]){if(x[I]===0){g[I][O]=u;continue}const P=o[I][O],j=(P-a[I])/x[I];let V=1;if(c[I]>1&&(V-=(1/w)**(j*A[I])),P<l[I]&&P>a[I]){const U=V*w*j**(1/c[I])+u;g[I][O]=M?Math.floor(U):S?Math.round(U):U}else P>=l[I]?g[I][O]=h:g[I][O]=u}}}else for(let A=0;A<y;A++){const I=(r==null?void 0:r[A])??n;for(let E=0;E<f;E++)if(I==null||I[E]){const O=o[A][E];if(O<l[A]&&O>a[A]){const P=(O-a[A])*v[A]+u;g[A][E]=M?Math.floor(P):S?Math.round(P):P}else O>=l[A]?g[A][E]=h:g[A][E]=u}}const $=new ee({width:i,height:s,mask:n,bandMasks:r,pixels:g,pixelType:d});return $.updateStatistics(),$}let Yl=class extends $n{constructor(){super(...arguments),this.functionName="ContrastBrightness",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.lookup=null}_bindSourceRasters(){const{sourceRasterInfos:t}=this,n=t[0];if(n.pixelType!=="u8")return{success:!1,supportsGPU:!1,error:"Only unsigned 8 bit raster is supported by ContrastBrightness function."};this.outputPixelType=this._getOutputPixelType("u8");const r=n.clone();r.colormap=null,r.statistics=null,r.histograms=null,this.rasterInfo=r;const{contrastOffset:i,brightnessOffset:s}=this.functionArguments;return this.lookup=ZF(i,s),{success:!0,supportsGPU:!0}}_processPixels(t){var r;const n=(r=t.pixelBlocks)==null?void 0:r[0];return n==null?null:g0(n,{lut:n.pixels.map(()=>this.lookup),offset:0,outputPixelType:"u8"})}_getWebGLParameters(){const{contrastOffset:t,brightnessOffset:n}=this.functionArguments;return{contrastOffset:t,brightnessOffset:n}}};p([b({json:{write:!0,name:"rasterFunction"}})],Yl.prototype,"functionName",void 0),p([b({type:kue,json:{write:!0,name:"rasterFunctionArguments"}})],Yl.prototype,"functionArguments",void 0),p([b()],Yl.prototype,"rasterArgumentNames",void 0),p([b({json:{write:!0}})],Yl.prototype,"lookup",void 0),Yl=p([L("esri.layers.support.rasterFunctions.ContrastBrightnessFunction")],Yl);const Due=Yl,Ge={userDefined:-1,lineDetectionHorizontal:0,lineDetectionVertical:1,lineDetectionLeftDiagonal:2,lineDetectionRightDiagonal:3,gradientNorth:4,gradientWest:5,gradientEast:6,gradientSouth:7,gradientNorthEast:8,gradientNorthWest:9,smoothArithmeticMean:10,smoothing3x3:11,smoothing5x5:12,sharpening3x3:13,sharpening5x5:14,laplacian3x3:15,laplacian5x5:16,sobelHorizontal:17,sobelVertical:18,sharpen:19,sharpen2:20,pointSpread:21,none:255},Lue={plus:1,minus:2,times:3,sqrt:4,power:5,abs:10,divide:23,exp:25,exp10:26,exp2:27,int:30,float:32,ln:35,log10:36,log2:37,mod:44,negate:45,roundDown:48,roundUp:49,square:53,floatDivide:64,floorDivide:65},ur={bitwiseAnd:11,bitwiseLeftShift:12,bitwiseNot:13,bitwiseOr:14,bitwiseRightShift:15,bitwiseXOr:16,booleanAnd:17,booleanNot:18,booleanOr:19,booleanXOr:20,equalTo:24,greaterThan:28,greaterThanEqual:29,lessThan:33,lessThanEqual:34,isNull:31,notEqual:46},Ai={acos:6,asin:7,atan:8,atanh:9,cos:21,cosh:22,sin:51,sinh:52,tan:56,tanh:57,acosh:59,asinh:60,atan2:61},Fue={majority:38,max:39,mean:40,med:41,min:42,minority:43,range:47,stddev:54,sum:55,variety:58,majorityIgnoreNoData:66,maxIgnoreNoData:67,meanIgnoreNoData:68,medIgnoreNoData:69,minIgnoreNoData:70,minorityIgnoreNoData:71,rangeIgnoreNoData:72,stddevIgnoreNoData:73,sumIgnoreNoData:74,varietyIgnoreNoData:75},KF={setNull:50,conditional:78},Yk={...Lue,...ur,...Ai,...Fue,...KF};function d4(e,t,n,r,i){const s=Math.floor(r/2);for(let a=0;a<s;a++)for(let l=0;l<t;l++)e[a*t+l]=e[(i-1-a)*t+l],e[(n-1-a)*t+l]=e[(n-i+a)*t+l];const o=Math.floor(i/2);for(let a=0;a<n;a++){const l=a*t;for(let c=0;c<o;c++)e[l+c]=e[l+i-1-c],e[l+t-c-1]=e[l+t+c-i]}}const Mt=new Map;function jue(e){const t=Math.sqrt(e.length),n=e.slice(0,t),r=[1];for(let i=1;i<t;i++){let s=null;for(let o=0;o<t;o++){const a=e[o+i*t],l=e[o];if(s==null)if(l===0){if(a)return{separable:!1,row:null,col:null}}else s=a/l;else if(a/l!==s)return{separable:!1,row:null,col:null}}if(s==null)return{separable:!1,row:null,col:null};r.push(s)}return{separable:!0,row:n,col:r}}function Kk(e,t,n,r,i,s,o){const a=new Float32Array(t*n),l=s.length,c=o?0:r,u=o?r:0,h=o?1:t;for(let f=c;f<n-c;f++){const d=f*t;for(let g=u;g<t-u;g++){if(i&&!i[d+g])continue;let y=0;for(let w=0;w<l;w++)y+=e[d+g+(w-r)*h]*s[w];a[d+g]=y}}return a}function zue(e,t,n,r,i,s,o){const a=new Float32Array(t*n),l=Math.floor(r/2),c=Math.floor(i/2);for(let u=l;u<n-l;u++){const h=u*t;for(let f=c;f<t-c;f++){if(s&&!s[h+f])continue;let d=0;for(let g=0;g<r;g++)for(let y=0;y<i;y++)d+=e[h+f+(g-l)*t+y-c]*o[g*i+y];a[h+f]=d}}return a}function Bue(e,t,n=!0){const{pixels:r,width:i,height:s,pixelType:o,mask:a}=e,l=r.length,c=[],{kernel:u,rows:h,cols:f}=t;for(let d=0;d<l;d++){const g=zue(r[d],i,s,h,f,a,u);n&&d4(g,i,s,h,f),c.push(g)}return new ee({width:i,height:s,pixelType:o,pixels:c,mask:a})}function Uue(e,t,n,r=!0){const{pixels:i,width:s,height:o,pixelType:a,mask:l}=e,c=i.length,u=[],h=t.length,f=n.length,d=Math.floor(h/2),g=Math.floor(f/2);for(let y=0;y<c;y++){let w=Kk(i[y],s,o,d,l,t,!0);w=Kk(w,s,o,g,l,n,!1),r&&d4(w,s,o,h,f),u.push(w)}return new ee({width:s,height:o,pixelType:a,pixels:u,mask:l})}function Vue(e,t){const n=jue(t.kernel),r=t.mirrorEdges!==!1,i=n.separable?Uue(e,n.row,n.col,r):Bue(e,t,r),{outputPixelType:s}=t;return s&&i.clamp(s),i}Mt.set(Ge.none,[0,0,0,0,1,0,0,0,0]),Mt.set(Ge.lineDetectionHorizontal,[-1,-1,-1,2,2,2,-1,-1,-1]),Mt.set(Ge.lineDetectionVertical,[-1,2,-1,-1,2,-1,-1,2,-1]),Mt.set(Ge.lineDetectionLeftDiagonal,[2,-1,-1,-1,2,-1,-1,-1,2]),Mt.set(Ge.lineDetectionRightDiagonal,[-1,-1,2,-1,2,-1,2,-1,-1]),Mt.set(Ge.gradientNorth,[-1,-2,-1,0,0,0,1,2,1]),Mt.set(Ge.gradientWest,[-1,0,1,-2,0,2,-1,0,1]),Mt.set(Ge.gradientEast,[1,0,-1,2,0,-2,1,0,-1]),Mt.set(Ge.gradientSouth,[1,2,1,0,0,0,-1,-2,-1]),Mt.set(Ge.gradientNorthEast,[0,-1,-2,1,0,-1,2,1,0]),Mt.set(Ge.gradientNorthWest,[-2,-1,0,-1,0,1,0,1,2]),Mt.set(Ge.smoothArithmeticMean,[.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111]),Mt.set(Ge.smoothing3x3,[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625]),Mt.set(Ge.smoothing5x5,[1,1,1,1,1,1,4,4,4,1,1,4,12,4,1,1,4,4,4,1,1,1,1,1,1]),Mt.set(Ge.sharpening3x3,[-1,-1,-1,-1,9,-1,-1,-1,-1]),Mt.set(Ge.sharpening5x5,[-1,-3,-4,-3,-1,-3,0,6,0,-3,-4,6,21,6,-4,-3,0,6,0,-3,-1,-3,-4,-3,-1]),Mt.set(Ge.laplacian3x3,[0,-1,0,-1,4,-1,0,-1,0]),Mt.set(Ge.laplacian5x5,[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,17,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0]),Mt.set(Ge.sobelHorizontal,[-1,-2,-1,0,0,0,1,2,1]),Mt.set(Ge.sobelVertical,[-1,0,1,-2,0,2,-1,0,1]),Mt.set(Ge.sharpen,[0,-.25,0,-.25,2,-.25,0,-.25,0]),Mt.set(Ge.sharpen2,[-.25,-.25,-.25,-.25,3,-.25,-.25,-.25,-.25]),Mt.set(Ge.pointSpread,[-.627,.352,-.627,.352,2.923,.352,-.627,.352,-.627]);var t5;let Kl=t5=class extends Mn{constructor(){super(...arguments),this.rows=3,this.cols=3,this.kernel=[0,0,0,0,1,0,0,0,0]}set convolutionType(e){this._set("convolutionType",e);const t=Mt.get(e);if(!t||e===Ge.userDefined||e===Ge.none)return;const n=Math.sqrt(t.length);this._set("kernel",t),this._set("cols",n),this._set("rows",n)}clone(){return new t5({cols:this.cols,rows:this.rows,kernel:[...this.kernel],convolutionType:this.convolutionType,raster:J(this.raster)})}};p([b({json:{type:Number,write:!0}})],Kl.prototype,"rows",void 0),p([b({json:{type:Number,write:!0}})],Kl.prototype,"cols",void 0),p([b({json:{name:"type",type:Number,write:!0}})],Kl.prototype,"convolutionType",null),p([b({json:{type:[Number],write:!0}})],Kl.prototype,"kernel",void 0),Kl=t5=p([L("esri.layers.support.rasterFunctions.ConvolutionFunctionArguments")],Kl);const Gue=Kl,Xk=25;let uh=class extends $n{constructor(){super(...arguments),this.functionName="Convolution",this.rasterArgumentNames=["raster"]}_bindSourceRasters(){const{convolutionType:t,rows:n,cols:r,kernel:i}=this.functionArguments;if(!Object.values(Ge).includes(t))return{success:!1,supportsGPU:!1,error:`convolution-function: the specified kernel type is not supported ${t}`};if(t!==Ge.none&&n*r!==i.length)return{success:!1,supportsGPU:!1,error:"convolution-function: the specified rows and cols do not match the length of the kernel"};const s=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType(s.pixelType);const o=s.clone();o.pixelType=this.outputPixelType;const a=[Ge.none,Ge.sharpen,Ge.sharpen2,Ge.sharpening3x3,Ge.sharpening5x5];return this.outputPixelType==="u8"||a.includes(t)||(o.statistics=null,o.histograms=null),o.colormap=null,o.attributeTable=null,this.rasterInfo=o,{success:!0,supportsGPU:i.length<=Xk}}_processPixels(t){var a;const n=(a=t.pixelBlocks)==null?void 0:a[0];if(n==null||this.functionArguments.convolutionType===Ge.none)return n;let{kernel:r,rows:i,cols:s}=this.functionArguments;const o=r.reduce((l,c)=>l+c);return o!==0&&o!==1&&(r=r.map(l=>l/o)),Vue(n,{kernel:r,rows:i,cols:s,outputPixelType:this.outputPixelType})}_getWebGLParameters(){let{kernel:t}=this.functionArguments;const n=t.reduce((i,s)=>i+s);n!==0&&n!==1&&(t=t.map(i=>i/n));const r=new Float32Array(Xk);return r.set(t),{kernelRows:this.functionArguments.rows,kernelCols:this.functionArguments.cols,kernel:r,clampRange:As(this.outputPixelType)}}};p([b({json:{write:!0,name:"rasterFunction"}})],uh.prototype,"functionName",void 0),p([b({type:Gue,json:{write:!0,name:"rasterFunctionArguments"}})],uh.prototype,"functionArguments",void 0),p([b()],uh.prototype,"rasterArgumentNames",void 0),uh=p([L("esri.layers.support.rasterFunctions.ConvolutionFunction")],uh);const Wue=uh;var n5;const XF=new Ne({0:"standard",1:"platform",2:"profile"},{useNumericKeys:!0});let hh=n5=class extends Mn{constructor(){super(...arguments),this.curvatureType="standard",this.zFactor=1}readCurvatureType(e,t){return XF.fromJSON(t.type??t.curvatureType??0)}clone(){return new n5({curvatureType:this.curvatureType,zFactor:this.zFactor,raster:this.raster})}};p([b({json:{write:{target:"type"}}}),pe(XF)],hh.prototype,"curvatureType",void 0),p([ge("curvatureType",["type","curvatureType"])],hh.prototype,"readCurvatureType",null),p([b({type:Number,json:{write:!0}})],hh.prototype,"zFactor",void 0),hh=n5=p([L("esri.layers.support.rasterFunctions.CurvatureFunctionArguments")],hh);const Hue=hh;let Xl=class extends $n{constructor(){super(...arguments),this.functionName="Curvature",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isGCS=!1}_bindSourceRasters(){var n;this.outputPixelType=this._getOutputPixelType("f32");const t=this.sourceRasterInfos[0].clone();return t.pixelType=this.outputPixelType,t.statistics=null,t.histograms=null,t.colormap=null,t.attributeTable=null,t.bandCount=1,this.rasterInfo=t,this.isGCS=((n=t.spatialReference)==null?void 0:n.isGeographic)??!1,{success:!0,supportsGPU:!0}}_processPixels(t){var u;const n=(u=t.pixelBlocks)==null?void 0:u[0];if(n==null)return null;const{zFactor:r,curvatureType:i}=this.functionArguments,{extent:s,primaryPixelSizes:o}=t,a=o==null?void 0:o[0],l=a??(s?{x:s.width/n.width,y:s.height/n.height}:{x:1,y:1}),c=this.isGCS&&r>=1?r*no:r;return Uce(n,{zFactor:c,curvatureType:i,resolution:l})}_getWebGLParameters(){const{zFactor:t,curvatureType:n}=this.functionArguments;return{curvatureType:n,zFactor:this.isGCS&&t>=1?t*no:t}}};p([b({json:{write:!0,name:"rasterFunction"}})],Xl.prototype,"functionName",void 0),p([b({type:Hue,json:{write:!0,name:"rasterFunctionArguments"}})],Xl.prototype,"functionArguments",void 0),p([b()],Xl.prototype,"rasterArgumentNames",void 0),p([b({json:{write:!0}})],Xl.prototype,"isGCS",void 0),Xl=p([L("esri.layers.support.rasterFunctions.CurvatureFunction")],Xl);const que=Xl;var r5;let Ws=r5=class extends Mn{constructor(){super(...arguments),this.bandIds=[],this.bandNames=[],this.bandWavelengths=[],this.missingBandAction=Q1.bestMatch}clone(){var e,t,n;return new r5({bandIds:(e=this.bandIds)==null?void 0:e.slice(),bandNames:(t=this.bandNames)==null?void 0:t.slice(),bandWavelengths:(n=this.bandWavelengths)==null?void 0:n.slice(),missingBandAction:this.missingBandAction,method:this.method,wavelengthMatchTolerance:this.wavelengthMatchTolerance})}};p([b({json:{write:!0}})],Ws.prototype,"bandIds",void 0),p([b({json:{write:!0}})],Ws.prototype,"bandNames",void 0),p([b({json:{write:!0}})],Ws.prototype,"bandWavelengths",void 0),p([pe({0:"name",1:"wavelength",2:"id"})],Ws.prototype,"method",void 0),p([b({json:{write:!0}})],Ws.prototype,"missingBandAction",void 0),p([b({json:{write:!0}})],Ws.prototype,"wavelengthMatchTolerance",void 0),Ws=r5=p([L("esri.layers.support.rasterFunctions.ExtractBandFunctionArguments")],Ws);const Jue=Ws;let fh=class extends $n{constructor(){super(...arguments),this.functionName="ExtractBand",this.functionArguments=null,this.rasterArgumentNames=["raster"]}_bindSourceRasters(){var v;const{functionArguments:t,sourceRasterInfos:n}=this,r=n[0],{method:i,bandNames:s,bandWavelengths:o,bandIds:a,missingBandAction:l}=t,c=(s==null?void 0:s.length)&&(i==="name"||i!=="id"&&!(a!=null&&a.length)),u=(o==null?void 0:o.length)&&(i==="wavelength"||i!=="id"&&!(a!=null&&a.length)),h=l===Q1.fail,f=c?this._matchBandNames(r,s):u?this._matchBandWavelengths(r,o,h):this._matchBandIds(r,a,h);if(f==null)return{success:!1,supportsGPU:!1,error:`extract-band-function: Invalid ${c?"band names":u?"band wavelengths":"band ids"} for the imagery data source`};this.functionArguments.bandIds=f,this.functionArguments.method="id",this.outputPixelType=this._getOutputPixelType("f32");const d=r.clone();d.pixelType=this.outputPixelType,d.bandCount=f.length;const{statistics:g,histograms:y}=d;g!=null&&g.length&&(d.statistics=f.map(x=>g[x]||g[g.length-1])),y!=null&&y.length&&(d.histograms=f.map(x=>y[x]||y[y.length-1]));let w=(v=d.keyProperties)==null?void 0:v.BandProperties;return w!=null&&w.length&&(w=f.map(x=>x>=w.length?w[w.length-1]:w[x]),d.keyProperties={...d.keyProperties,BandProperties:w}),this.rasterInfo=d,{success:!0,supportsGPU:d.bandCount<=3}}_processPixels(t){var s;const n=(s=t.pixelBlocks)==null?void 0:s[0];if(n==null)return null;const r=n.pixels.length,i=this.functionArguments.bandIds.map(o=>o>=r?r-1:o);return n.extractBands(i)}_getWebGLParameters(){let t;if(this.isInputBandIdsSwizzled)t=this.swizzledBandSelection.length?this.swizzledBandSelection:[0,1,2];else{t=[...this.functionArguments.bandIds],t.length===0?t=[0,1,2]:t.length<3&&(t[1]=t[1]??t[0],t[2]=t[2]??t[1]);for(let n=0;n<3;n++)t[n]=Math.min(t[n],2)}return{bandIndexMat3:fn(t)}}_getInputBandIds(t){const n=t.length;return this.functionArguments.bandIds.map(r=>r>=n?n-1:r).map(r=>t[r])}_matchBandNames(t,n){const r=t.bandInfos.map(({name:s})=>s.toLowerCase()),i=[];for(let s=0;s<n.length;s++){const o=n[s].toLowerCase();let a=r.indexOf(o);if(a===-1&&o==="nearinfrared"&&(a=r.findIndex(l=>l.startsWith("nearinfrared_1")),a===-1&&(a=r.findIndex(l=>l.startsWith("nearinfrared")))),a===-1)return null;i.push(a)}return i}_matchBandIds(t,n,r){const{bandCount:i}=t;return!(n!=null&&n.length)||r&&n.some(s=>s<0||s>=i)?null:n}_matchBandWavelengths(t,n,r){const{bandInfos:i}=t,s=[];for(let l=0;l<i.length;l++){const{minWavelength:c,maxWavelength:u}=i[l];if(!c||!u)return null;s.push({minWavelength:c,maxWavelength:u})}const{wavelengthMatchTolerance:o}=this.functionArguments,a=[];for(let l=0;l<n.length;l++){const c=n[l];let u=!1,h=-1,f=Number.MAX_VALUE;for(let d=0;d<s.length;d++){const g=s[d],y=c>=g.minWavelength&&c<=g.maxWavelength,w=Math.abs(c-(g.minWavelength+g.maxWavelength)/2);y?w<f&&(u=!0,h=d,f=w):!u&&w<f&&(h=d,f=w)}if(!u&&o&&f<o&&(u=!0),!u&&r)return null;a.push(h)}return a}};p([b({json:{write:!0,name:"rasterFunction"}})],fh.prototype,"functionName",void 0),p([b({type:Jue,json:{write:!0,name:"rasterFunctionArguments"}})],fh.prototype,"functionArguments",void 0),p([b()],fh.prototype,"rasterArgumentNames",void 0),fh=p([L("esri.layers.support.rasterFunctions.ExtractBandFunction")],fh);const Zue=fh;var i5;let Ql=i5=class extends Mn{constructor(){super(...arguments),this.rasters=[],this.processAsMultiband=!0}writeRasters(e,t){t.rasters=e.map(n=>typeof n=="number"||typeof n=="string"?n:n.toJSON())}clone(){return new i5({operation:this.operation,processAsMultiband:this.processAsMultiband,rasters:J(this.rasters)})}};p([b({json:{write:!0}})],Ql.prototype,"operation",void 0),p([b({json:{write:!0}})],Ql.prototype,"rasters",void 0),p([xe("rasters")],Ql.prototype,"writeRasters",null),p([b({json:{write:!0}})],Ql.prototype,"processAsMultiband",void 0),Ql=i5=p([L("esri.layers.support.rasterFunctions.LocalFunctionArguments")],Ql);const Yue=Ql,dn=new Map;function Kue(e){return dn.get(e)}dn.set(Ai.acos,[0,Math.PI]),dn.set(Ai.asin,[-Math.PI/2,Math.PI/2]),dn.set(Ai.atan,[-Math.PI/2,Math.PI/2]),dn.set(Ai.cos,[-1,1]),dn.set(Ai.sin,[-1,1]),dn.set(ur.booleanAnd,[0,1]),dn.set(ur.booleanNot,[0,1]),dn.set(ur.booleanOr,[0,1]),dn.set(ur.booleanXOr,[0,1]),dn.set(ur.equalTo,[0,1]),dn.set(ur.notEqual,[0,1]),dn.set(ur.greaterThan,[0,1]),dn.set(ur.greaterThanEqual,[0,1]),dn.set(ur.lessThan,[0,1]),dn.set(ur.lessThanEqual,[0,1]),dn.set(ur.isNull,[0,1]);const Qk=[0,2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,2,1,1,1,999,999,1,1,999,1,1,2,999,999,2,2,999,999,999,999,999,999,999,999,999,999,3,999,3];function Xue(e,t=!1){const n=e.map(a=>a.mask),r=n.filter(a=>a!=null),i=e[0].pixels[0].length;if(r.length===0)return new Uint8Array(i).fill(255);const s=r[0],o=new Uint8Array(s);if(r.length===1)return o;if(!t){for(let a=1;a<r.length;a++){const l=r[a];for(let c=0;c<o.length;c++)o[c]&&(o[c]=l[c]?255:0)}return o}if(r.length!==n.length)return new Uint8Array(i).fill(255);for(let a=1;a<r.length;a++){const l=r[a];for(let c=0;c<o.length;c++)o[c]===0&&(o[c]=l[c]?255:0)}return o}function Que(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]+i[a]);return o}function ehe(e,t,n){const[r]=e,i=r.length,s=ee.createEmptyBand("f32",i);return s.set(r),s}function the(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]-i[a]);return o}function nhe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]*i[a]);return o}function rhe(e,t,n){const[r]=e,i=r.length,s=ee.createEmptyBand(n,i);for(let o=0;o<i;o++)t&&!t[o]||(s[o]=Math.sign(r[o])*Math.floor(Math.abs(r[o])));return s}function QF(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]/i[a]);return o}function ihe(e,t,n){return QF(e,t,"f32")}function she(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=Math.floor(r[a]/i[a]));return o}function ohe(e,t,n,r){const i=e[0],s=i.length,o=ee.createEmptyBand(n,s);if(r===Ai.atanh){for(let l=0;l<s;l++)if(t[l]){const c=i[l];Math.abs(c)>=1?t[l]=0:o[l]=Math.atanh(c)}return o}const a=r===Ai.asin?Math.asin:Math.acos;for(let l=0;l<s;l++)if(t[l]){const c=i[l];Math.abs(c)>1?t[l]=0:o[l]=a(c)}return o}function ahe(e,t,n,r){const[i]=e,s=i.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r(i[a]));return o}function lhe(e,t,n,r){const[i,s]=e,o=i.length,a=ee.createEmptyBand(n,o);for(let l=0;l<o;l++)t&&!t[l]||(a[l]=r(i[l],s[l]));return a}function che(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]&i[a]);return o}function uhe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]<<i[a]);return o}function hhe(e,t,n){const[r]=e,i=r.length,s=ee.createEmptyBand(n,i);for(let o=0;o<i;o++)t&&!t[o]||(s[o]=~r[o]);return s}function fhe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]|i[a]);return o}function dhe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]>>i[a]);return o}function phe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]^i[a]);return o}function mhe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]&&i[a]?1:0);return o}function ghe(e,t,n){const[r]=e,i=r.length,s=ee.createEmptyBand(n,i);for(let o=0;o<i;o++)t&&!t[o]||(s[o]=r[o]?0:1);return s}function yhe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]||i[a]?1:0);return o}function bhe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=(r[a]?1:0)^(i[a]?1:0));return o}function whe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]===i[a]?1:0);return o}function p4(e,t,n,r){const[i]=e,s=i.length,o=ee.createEmptyBand(n,s),a=r===Math.E;for(let l=0;l<s;l++)t&&!t[l]||(o[l]=a?Math.exp(i[l]):r**i[l]);return o}function vhe(e,t,n){return p4(e,t,n,10)}function xhe(e,t,n){return p4(e,t,n,2)}function She(e,t,n){return p4(e,t,n,Math.E)}function m4(e,t,n,r){const[i]=e,s=i.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(i[a]<=0?t[a]=0:o[a]=r(i[a]));return o}function _he(e,t,n){return m4(e,t,n,Math.log10)}function Mhe(e,t,n){return m4(e,t,n,Math.log2)}function $he(e,t,n){return m4(e,t,n,Math.log)}function The(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]>i[a]?1:0);return o}function Ahe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]>=i[a]?1:0);return o}function Ihe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]<i[a]?1:0);return o}function khe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]<=i[a]?1:0);return o}function Ehe(e,t,n){const[r]=e,i=r.length,s=ee.createEmptyBand(n,i);if(!t)return s;for(let o=0;o<i;o++)s[o]=t[o]?0:1;return s}function Che(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]%i[a]);return o}function Ohe(e,t,n){const[r]=e,i=r.length,s=ee.createEmptyBand(n,i);for(let o=0;o<i;o++)t&&!t[o]||(s[o]=-r[o]);return s}function Phe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t&&!t[a]||(o[a]=r[a]===i[a]?0:1);return o}function Rhe(e,t,n){const[r,i]=e,s=r.length,o=ee.createEmptyBand(n,s),a=new Uint8Array(s);for(let l=0;l<s;l++)t!=null&&!t[l]||r[l]!==0||(o[l]=i[l],a[l]=255);return{band:o,mask:a}}function eE(e,t,n){const[r,i,s]=e,o=r.length,a=ee.createEmptyBand(n,o);for(let l=0;l<o;l++)t&&!t[l]||(a[l]=r[l]?i[l]:s[l]);return a}function tE(e,t,n){const r=e.length;if(r<2)return e[0];const[i]=e,s=i.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)if(!t||t[a]){let l=i[a];for(let c=1;c<r;c++){const u=e[c][a];l<u&&(l=u)}o[a]=l}return o}function nE(e,t,n){const r=e.length;if(r<2)return e[0];const[i]=e,s=i.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)if(!t||t[a]){let l=i[a];for(let c=1;c<r;c++){const u=e[c][a];l>u&&(l=u)}o[a]=l}return o}function rE(e,t,n){const r=e.length;if(r<2)return e[0];const[i]=e,s=i.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)if(!t||t[a]){let l=i[a],c=l;for(let u=1;u<r;u++){const h=e[u][a];c<h?c=h:l>h&&(l=h)}o[a]=c-l}return o}function iE(e,t,n){const r=e.length;if(r<2)return e[0];const[i]=e,s=i.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)if(!t||t[a]){let l=0;for(let c=0;c<r;c++)l+=e[c][a];o[a]=l/r}return o}function sE(e,t,n){const r=e.length;if(r<2)return e[0];const[i]=e,s=i.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)if(!t||t[a])for(let l=0;l<r;l++){const c=e[l];o[a]+=c[a]}return o}function oE(e,t,n){const r=e.length;if(r<2)return e[0];const[i]=e,s=i.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)if(!t||t[a]){const l=new Float32Array(r);let c=0;for(let h=0;h<r;h++){const f=e[h];c+=f[a],l[h]=f[a]}c/=r;let u=0;for(let h=0;h<r;h++)u+=(l[h]-c)**2;o[a]=Math.sqrt(u/r)}return o}function aE(e,t,n){const r=e.length;if(r<2)return e[0];const i=Math.floor(r/2),[s]=e,o=s.length,a=ee.createEmptyBand(n,o),l=new Float32Array(r),c=r%2==1;for(let u=0;u<o;u++)if(!t||t[u]){for(let h=0;h<r;h++)l[h]=e[h][u];l.sort(),a[u]=c?l[i]:(l[i]+l[i-1])/2}return a}function e7(e,t,n){const[r,i]=e;if(i==null)return r;const s=r.length,o=ee.createEmptyBand(n,s);for(let a=0;a<s;a++)t[a]&&(r[a]===i[a]?o[a]=r[a]:t[a]=0);return o}function lE(e,t,n){const r=e.length;if(r<=2)return e7(e,t,n);const i=e[0].length,s=ee.createEmptyBand(n,i),o=new Map;for(let a=0;a<i;a++)if(!t||t[a]){let l;o.clear();for(let h=0;h<r;h++)l=e[h][a],o.set(l,o.has(l)?o.get(l)+1:1);let c=0,u=0;for(const h of o.keys())c=o.get(h),c>u&&(u=c,l=h);s[a]=l}return s}function cE(e,t,n){const r=e.length;if(r<=2)return e7(e,t,n);const i=e[0].length,s=ee.createEmptyBand(n,i),o=new Map;for(let a=0;a<i;a++)if(!t||t[a]){let l;o.clear();for(let h=0;h<r;h++)l=e[h][a],o.set(l,o.has(l)?o.get(l)+1:1);let c=0,u=e.length;for(const h of o.keys())c=o.get(h),c<u&&(u=c,l=h);s[a]=l}return s}function uE(e,t,n){const r=e.length;if(r<2)return e[0];const[i]=e,s=i.length,o=ee.createEmptyBand(n,s),a=new Set;for(let l=0;l<s;l++)if(!t||t[l]){let c;a.clear();for(let u=0;u<r;u++)c=e[u][l],a.add(c);o[l]=a.size}return o}const Gt=new Map,c2=new Map,De=new Map,$t=new Map;function Nhe(){Gt.size||(Gt.set(4,Math.sqrt),Gt.set(6,Math.acos),Gt.set(7,Math.asin),Gt.set(8,Math.atan),Gt.set(9,Math.atanh),Gt.set(10,Math.abs),Gt.set(21,Math.cos),Gt.set(22,Math.cosh),Gt.set(48,Math.floor),Gt.set(49,Math.ceil),Gt.set(51,Math.sin),Gt.set(52,Math.sinh),Gt.set(56,Math.tan),Gt.set(57,Math.tanh),Gt.set(59,Math.acosh),Gt.set(60,Math.asinh),Gt.set(65,Math.floor),c2.set(5,Math.pow),c2.set(61,Math.atan2),De.set(1,Que),De.set(2,the),De.set(3,nhe),De.set(11,che),De.set(12,uhe),De.set(13,hhe),De.set(14,fhe),De.set(15,dhe),De.set(16,phe),De.set(17,mhe),De.set(18,ghe),De.set(19,yhe),De.set(20,bhe),De.set(23,QF),De.set(24,whe),De.set(25,She),De.set(26,vhe),De.set(27,xhe),De.set(28,The),De.set(29,Ahe),De.set(30,rhe),De.set(31,Ehe),De.set(32,ehe),De.set(33,Ihe),De.set(34,khe),De.set(35,$he),De.set(36,_he),De.set(37,Mhe),De.set(44,Che),De.set(45,Ohe),De.set(46,Phe),De.set(64,ihe),De.set(65,she),De.set(76,eE),De.set(78,eE),$t.set(38,lE),$t.set(39,tE),$t.set(40,iE),$t.set(41,aE),$t.set(42,nE),$t.set(43,cE),$t.set(47,rE),$t.set(54,oE),$t.set(55,sE),$t.set(58,uE),$t.set(66,lE),$t.set(67,tE),$t.set(68,iE),$t.set(69,aE),$t.set(70,nE),$t.set(71,cE),$t.set(72,rE),$t.set(73,oE),$t.set(74,sE),$t.set(75,uE))}function Dhe(e,t,n,r){let[i,s]=As(n);const o=n.startsWith("u")||n.startsWith("s");o&&(i-=1e-5,s+=1e-5);for(let a=0;a<t.length;a++)if(t[a]){const l=e[a];isNaN(l)||l<i||l>s?t[a]=0:r[a]=o?Math.round(l):l}}function Lhe(e,t,n={}){Nhe();let r=Xue(e,t>=66&&t<=75);const{outputPixelType:i="f32"}=n,s=!$t.has(t)||n.processAsMultiband,o=s?e[0].pixels.length:1,a=[];for(let c=0;c<o;c++){const u=$t.has(t)&&!s?e.flatMap(d=>d.pixels):e.map(d=>d.pixels[c]);let h,f=!0;if(t===KF.setNull){const d=Rhe(u,r,i);h=d.band,r=d.mask,f=!1}else De.has(t)?h=De.get(t)(u,r,"f64"):Gt.has(t)?h=t===Ai.asin||t===Ai.acos||t===Ai.atanh?ohe(u,r,"f64",t):ahe(u,r,"f64",Gt.get(t)):c2.has(t)?h=lhe(u,r,"f64",c2.get(t)):$t.has(t)?h=$t.get(t)(u,r,"f64"):(h=u[0],f=!1);if(f&&t!==ur.isNull&&!dn.has(t)){const d=ee.createEmptyBand(i,h.length);r||(r=new Uint8Array(h.length).fill(255)),Dhe(h,r,i,d),h=d}a.push(h)}const l=e[0];return new ee({width:l.width,height:l.height,pixelType:i,mask:t===ur.isNull?null:r,pixels:a})}let dh=class extends $n{constructor(){super(...arguments),this.functionName="Local",this.functionArguments=null,this.rasterArgumentNames=["rasters"]}_bindSourceRasters(){const{sourceRasterInfos:t}=this,n=t[0],{bandCount:r}=n,{processAsMultiband:i}=this.functionArguments;if(t.some(u=>u.bandCount!==r))return{success:!1,supportsGPU:!1,error:"local-function: input rasters do not have same band count"};const{operation:s,rasters:o}=this.functionArguments,a=Qk[s];if(!(a===999||o.length===a||o.length<=1&&a===1))return{success:!1,supportsGPU:!1,error:`local-function: the length of functionArguments.rasters does not match operation's requirement: ${a}`};this.outputPixelType=this._getOutputPixelType("f32");const l=n.clone();l.pixelType=this.outputPixelType,l.statistics=null,l.histograms=null,l.colormap=null,l.attributeTable=null,l.bandCount=a!==999||i?r:1;const c=Kue(s);if(c){l.statistics=[];for(let u=0;u<l.bandCount;u++)l.statistics[u]={min:c[0],max:c[1],avg:(c[0]+c[1])/2,stddev:(c[0]+c[1])/10}}return this.rasterInfo=l,{success:!0,supportsGPU:l.bandCount===1&&a<=3&&(s<11||s>16)}}_processPixels(t){const{pixelBlocks:n}=t;return n==null||n.some(r=>r==null)?null:Lhe(n,this.functionArguments.operation,{processAsMultiband:this.functionArguments.processAsMultiband,outputPixelType:this.outputPixelType??void 0})}_getWebGLParameters(){var l;const{operation:t}=this.functionArguments,n=Qk[t],r=((l=Object.keys(Yk).find(c=>Yk[c]===t))==null?void 0:l.toLowerCase())??"undefined",i=this.outputPixelType??"f32";let[s,o]=As(i);const a=i.startsWith("u")||i.startsWith("s");return a&&(s-=1e-4,o+=1e-4),{imageCount:n,operationName:r,domainRange:[s,o],isOutputRounded:a}}};p([b({json:{write:!0,name:"rasterFunction"}})],dh.prototype,"functionName",void 0),p([b({type:Yue,json:{write:!0,name:"rasterFunctionArguments"}})],dh.prototype,"functionArguments",void 0),p([b()],dh.prototype,"rasterArgumentNames",void 0),dh=p([L("esri.layers.support.rasterFunctions.LocalFunction")],dh);const Fhe=dh;var s5;let ec=s5=class extends Mn{constructor(){super(...arguments),this.includedRanges=null,this.noDataValues=null,this.noDataInterpretation=X1.matchAny}get normalizedNoDataValues(){const{noDataValues:e}=this;if(!(e!=null&&e.length))return null;let t=!1;const n=e.map(r=>{if(typeof r=="number")return t=!0,[r];if(typeof r=="string"){const i=r.trim().split(" ").filter(s=>s.trim()!=="").map(s=>Number(s));return t=t||i.length>0,i.length===0?null:i}return null});return t?n:null}clone(){var e,t;return new s5({includedRanges:((e=this.includedRanges)==null?void 0:e.slice())??[],noDataValues:((t=this.noDataValues)==null?void 0:t.slice())??[],noDataInterpretation:this.noDataInterpretation})}};p([b({json:{write:!0}})],ec.prototype,"includedRanges",void 0),p([b({json:{write:!0}})],ec.prototype,"noDataValues",void 0),p([b()],ec.prototype,"normalizedNoDataValues",null),p([b({json:{write:!0}})],ec.prototype,"noDataInterpretation",void 0),ec=s5=p([L("esri.layers.support.rasterFunctions.MaskFunctionArguments")],ec);const jhe=ec;let tc=class extends $n{constructor(){super(...arguments),this.functionName="Mask",this.functionArguments=null,this.rasterArgumentNames=["raster"]}_bindSourceRasters(){const t=this.sourceRasterInfos[0].clone(),{pixelType:n}=t;this.outputPixelType=this._getOutputPixelType(n),t.pixelType=this.outputPixelType,this.rasterInfo=t;const{includedRanges:r,normalizedNoDataValues:i}=this.functionArguments;if(!(r!=null&&r.length)&&!(i!=null&&i.length))return{success:!1,supportsGPU:!1,error:"missing includedRanges or noDataValues argument"};let s=[];for(let a=0;a<t.bandCount;a++){const l=Ioe(n,r==null?void 0:r.slice(2*a,2*a+2),i==null?void 0:i[a]);if(l==null){s=null;break}s.push(l)}this.lookups=s;const o=i!=null&&i.every(a=>{var l;return(a==null?void 0:a.length)===((l=i[0])==null?void 0:l.length)});return{success:!0,supportsGPU:(!r||r.length<=2*to)&&(!i||o&&i[0].length<=to)}}_processPixels(t){var c;const n=(c=t.pixelBlocks)==null?void 0:c[0];if(n==null)return null;const{outputPixelType:r,lookups:i}=this,{includedRanges:s,noDataInterpretation:o,normalizedNoDataValues:a}=this.functionArguments,l=o===X1.matchAll;return Toe(n,{includedRanges:s,noDataValues:a,outputPixelType:r,matchAll:l,lookups:i})}_getWebGLParameters(){var s;const{includedRanges:t,normalizedNoDataValues:n}=this.functionArguments,r=new Float32Array(to);r.fill(Da),(s=n==null?void 0:n[0])!=null&&s.length&&r.set(n[0]);const i=new Float32Array(to);for(let o=0;o<i.length;o+=2)i[o]=(t==null?void 0:t[o])??-Da,i[o+1]=(t==null?void 0:t[o+1])??Da;return t&&t.length&&i.set(t),{bandCount:this.sourceRasterInfos[0].bandCount,noDataValues:r,includedRanges:i}}};p([b({json:{write:!0,name:"rasterFunction"}})],tc.prototype,"functionName",void 0),p([b({type:jhe,json:{write:!0,name:"rasterFunctionArguments"}})],tc.prototype,"functionArguments",void 0),p([b()],tc.prototype,"rasterArgumentNames",void 0),p([b({json:{write:!0}})],tc.prototype,"lookups",void 0),tc=p([L("esri.layers.support.rasterFunctions.MaskFunction")],tc);const zhe=tc;var o5;let ph=o5=class extends Mn{constructor(){super(...arguments),this.visibleBandID=0,this.infraredBandID=1,this.scientificOutput=!1}clone(){const{visibleBandID:e,infraredBandID:t,scientificOutput:n}=this;return new o5({visibleBandID:e,infraredBandID:t,scientificOutput:n})}};p([b({json:{write:!0}})],ph.prototype,"visibleBandID",void 0),p([b({json:{write:!0}})],ph.prototype,"infraredBandID",void 0),p([b({json:{write:!0}})],ph.prototype,"scientificOutput",void 0),ph=o5=p([L("esri.layers.support.rasterFunctions.NDVIFunctionArguments")],ph);const Bhe=ph;let mh=class extends $n{constructor(){super(...arguments),this.functionName="NDVI",this.functionArguments=null,this.rasterArgumentNames=["raster"]}_bindSourceRasters(){const{scientificOutput:t,visibleBandID:n,infraredBandID:r}=this.functionArguments;this.outputPixelType=this._getOutputPixelType(t?"f32":"u8");const i=this.sourceRasterInfos[0],s=Math.max(n,r);if(i.bandCount<2||s>=i.bandCount)return{success:!1,supportsGPU:!1,error:"ndvi-function: source raster has insufficient amount of raster bands"};const o=i.clone();o.pixelType=this.outputPixelType,o.colormap=null,o.histograms=null,o.bandCount=1,o.keyProperties={...o.keyProperties,BandProperties:void 0};const[a,l,c,u]=t?[-1,1,0,.1]:[0,200,100,10];return o.statistics=[{min:a,max:l,avg:c,stddev:u}],this.rasterInfo=o,{success:!0,supportsGPU:!0}}_processPixels(t){var o;const n=(o=t.pixelBlocks)==null?void 0:o[0];if(n==null)return null;const{visibleBandID:r,infraredBandID:i,scientificOutput:s}=this.functionArguments;return Xce(n,r,i,!s)}_getWebGLParameters(){const{visibleBandID:t,infraredBandID:n,scientificOutput:r}=this.functionArguments,i=this.isInputBandIdsSwizzled?[0,1,2]:[n,t,0];return{bandIndexMat3:fn(i),scaled:!r}}_getInputBandIds(t){const{visibleBandID:n,infraredBandID:r}=this.functionArguments;return[r,n,0].map(i=>t[i])}};p([b({json:{write:!0,name:"rasterFunction"}})],mh.prototype,"functionName",void 0),p([b({type:Bhe,json:{write:!0,name:"rasterFunctionArguments"}})],mh.prototype,"functionArguments",void 0),p([b()],mh.prototype,"rasterArgumentNames",void 0),mh=p([L("esri.layers.support.rasterFunctions.NDVIFunction")],mh);const Uhe=mh;var a5;let oa=a5=class extends Mn{constructor(){super(...arguments),this.inputRanges=null,this.outputValues=null,this.noDataRanges=null,this.allowUnmatched=!1,this.isLastInputRangeInclusive=!1}clone(){return new a5({inputRanges:[...this.inputRanges],outputValues:[...this.outputValues],noDataRanges:[...this.noDataRanges],allowUnmatched:this.allowUnmatched,isLastInputRangeInclusive:this.isLastInputRangeInclusive})}};p([b({json:{write:!0}})],oa.prototype,"inputRanges",void 0),p([b({json:{write:!0}})],oa.prototype,"outputValues",void 0),p([b({json:{write:!0}})],oa.prototype,"noDataRanges",void 0),p([b({json:{write:!0}})],oa.prototype,"allowUnmatched",void 0),p([b({json:{write:!0}})],oa.prototype,"isLastInputRangeInclusive",void 0),oa=a5=p([L("esri.layers.support.rasterFunctions.RemapFunctionArguments")],oa);const Vhe=oa;let nc=class extends $n{constructor(){super(...arguments),this.functionName="Remap",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.lookup=null}_bindSourceRasters(){const t=this.sourceRasterInfos[0].clone(),{pixelType:n}=t;this.outputPixelType=this._getOutputPixelType(n),t.pixelType=this.outputPixelType,t.colormap=null,t.histograms=null,t.bandCount=1,t.attributeTable=null;const{statistics:r}=t,{allowUnmatched:i,outputValues:s,inputRanges:o,noDataRanges:a,isLastInputRangeInclusive:l}=this.functionArguments;if(r!=null&&r.length&&(s!=null&&s.length))if(i){const c=Math.min.apply(null,[...s,r[0].min]),u=Math.max.apply(null,[...s,r[0].max]);t.statistics=[{...r[0],min:c,max:u}]}else{let c=s[0],u=c;for(let h=0;h<s.length;h++)c=c>s[h]?s[h]:c,u=u>s[h]?u:s[h];t.statistics=[{...r[0],min:c,max:u}]}return this.rasterInfo=t,this.lookup=i?null:Aoe({srcPixelType:n,inputRanges:o,outputValues:s,noDataRanges:a,allowUnmatched:i,isLastInputRangeInclusive:l,outputPixelType:this.outputPixelType}),{success:!0,supportsGPU:(!s||s.length<=to)&&(!a||a.length<=to)}}_processPixels(t){var u;const n=(u=t.pixelBlocks)==null?void 0:u[0];if(n==null)return null;const{lookup:r,outputPixelType:i}=this;if(r){const h=g0(n,{lut:[r.lut],offset:r.offset,outputPixelType:i});return h!=null&&r.mask&&(h.mask=K$(n.pixels[0],n.mask,r.mask,r.offset,"u8")),h}const{inputRanges:s,outputValues:o,noDataRanges:a,allowUnmatched:l,isLastInputRangeInclusive:c}=this.functionArguments;return $oe(n,{inputRanges:s,outputValues:o,noDataRanges:a,outputPixelType:i,allowUnmatched:l,isLastInputRangeInclusive:c})}_getWebGLParameters(){const{allowUnmatched:t,noDataRanges:n,isLastInputRangeInclusive:r}=this.functionArguments,i=new Float32Array(3*to),s=1e-5,o=this.functionArguments.inputRanges??[],a=this.functionArguments.outputValues??[],l=a.length;for(let u=0;u<to;u++)i[3*u]=o[2*u]??Da-1,i[3*u+1]=o[2*u+1]??Da,i[3*u+2]=a[u]??0,u<l&&(u>0&&(i[3*u]-=s),(u<l-1||!r)&&(i[3*u+1]-=s));const c=new Float32Array(2*to);return c.fill(Da),n!=null&&n.length&&c.set(n),{allowUnmatched:t,rangeMaps:i,noDataRanges:c,clampRange:As(this.outputPixelType)}}};p([b({json:{write:!0,name:"rasterFunction"}})],nc.prototype,"functionName",void 0),p([b({type:Vhe,json:{write:!0,name:"rasterFunctionArguments"}})],nc.prototype,"functionArguments",void 0),p([b()],nc.prototype,"rasterArgumentNames",void 0),p([b({json:{write:!0}})],nc.prototype,"lookup",void 0),nc=p([L("esri.layers.support.rasterFunctions.RemapFunction")],nc);const Ghe=nc;var l5;const Whe=new Ne({1:"degree",2:"percent-rise",3:"adjusted"},{useNumericKeys:!0});let aa=l5=class extends Mn{constructor(){super(...arguments),this.slopeType="degree",this.zFactor=1,this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.removeEdgeEffect=!1}clone(){return new l5({slopeType:this.slopeType,zFactor:this.zFactor,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,removeEdgeEffect:this.removeEdgeEffect,raster:this.raster})}};p([pe(Whe)],aa.prototype,"slopeType",void 0),p([b({type:Number,json:{write:!0}})],aa.prototype,"zFactor",void 0),p([b({type:Number,json:{name:"psPower",write:!0}})],aa.prototype,"pixelSizePower",void 0),p([b({type:Number,json:{name:"psZFactor",write:!0}})],aa.prototype,"pixelSizeFactor",void 0),p([b({type:Boolean,json:{write:!0}})],aa.prototype,"removeEdgeEffect",void 0),aa=l5=p([L("esri.layers.support.rasterFunctions.SlopeFunctionArguments")],aa);const Hhe=aa;let rc=class extends $n{constructor(){super(...arguments),this.functionName="Slope",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isGCS=!1}_bindSourceRasters(){var n;this.outputPixelType=this._getOutputPixelType("f32");const t=this.sourceRasterInfos[0].clone();return t.pixelType=this.outputPixelType,t.statistics=this.functionArguments.slopeType!=="percent-rise"?[{min:0,max:90,avg:1,stddev:1}]:null,t.histograms=null,t.colormap=null,t.attributeTable=null,t.bandCount=1,this.rasterInfo=t,this.isGCS=((n=t.spatialReference)==null?void 0:n.isGeographic)??!1,{success:!0,supportsGPU:!0}}_processPixels(t){var f;const n=(f=t.pixelBlocks)==null?void 0:f[0];if(n==null)return null;const{zFactor:r,slopeType:i,pixelSizePower:s,pixelSizeFactor:o}=this.functionArguments,{isGCS:a}=this,{extent:l,primaryPixelSizes:c}=t,u=c==null?void 0:c[0],h=u??(l?{x:l.width/n.width,y:l.height/n.height}:{x:1,y:1});return zce(n,{zFactor:r,slopeType:i,pixelSizePower:s,pixelSizeFactor:o,isGCS:a,resolution:h})}_getWebGLParameters(){const{zFactor:t,slopeType:n,pixelSizeFactor:r,pixelSizePower:i}=this.functionArguments;return{zFactor:this.isGCS&&t>=1?t*no:t,slopeType:n,pixelSizeFactor:r??0,pixelSizePower:i??0}}};p([b({json:{write:!0,name:"rasterFunction"}})],rc.prototype,"functionName",void 0),p([b({type:Hhe,json:{write:!0,name:"rasterFunctionArguments"}})],rc.prototype,"functionArguments",void 0),p([b()],rc.prototype,"rasterArgumentNames",void 0),p([b({json:{write:!0}})],rc.prototype,"isGCS",void 0),rc=p([L("esri.layers.support.rasterFunctions.SlopeFunction")],rc);const qhe=rc,hE=new Ne({1:"min",2:"max",3:"mean",4:"stddev",5:"median",6:"majority",7:"minority"},{useNumericKeys:!0});function Jhe(e,t){const{fillNoDataOnly:n}=t,{band:r,width:i,height:s,mask:o,outBand:a}=e;if(n&&!o)return void a.set(r);const{statisticsType:l,kernelRows:c,kernelCols:u}=t,h=l==="stddev",f=i*s,d=new Float64Array(f),g=new Float64Array(f),y=new Uint32Array(f);for(let $=0;$<s;$++){const T=$*i;let A=0,I=0,E=0;for(let O=0;O<u;O++)o&&!o[T+O]||(A+=r[T+O],h&&(I+=r[T+O]**2),E++);d[T]=A,g[T]=I,y[T]=E;for(let O=1;O<=i-u;O++){const P=T+O-1,j=P+u;o?(o[P]&&(E--,A-=r[P],h&&(I-=r[P]**2)),o[j]&&(E++,A+=r[j],h&&(I+=r[j]**2))):(A-=r[P],A+=r[j],h&&(I-=r[P]**2,I+=r[j]**2)),d[T+O]=A,y[T+O]=E,h&&(g[T+O]=I)}}const w=new Float64Array(f),v=new Float64Array(f),x=new Uint32Array(f),S=c*i;for(let $=0;$<=i-u;$++){let T=0,A=0,I=0;for(let E=0;E<c;E++){const O=E*i+$;T+=d[O],I+=y[O],h&&(A+=g[O])}w[$]=T,v[$]=A,x[$]=I;for(let E=1;E<=s-c;E++){const O=(E-1)*i+$,P=O+S;T-=d[O],T+=d[P],I-=y[O],I+=y[P],h&&(A-=g[O],A+=g[P]),w[E*i+$]=T,v[E*i+$]=A,x[E*i+$]=I}}const _=Math.floor(c/2),M=Math.floor(u/2);for(let $=_;$<s-_;$++){const T=$*i;for(let A=M;A<i-M;A++){const I=($-_)*i+A-M,E=x[I];if(E===0||n&&(!o||o[T+A]))continue;const O=w[I]/E,P=h?Math.sqrt((v[I]-w[I]*O)/E):O;a[T+A]=P,o&&(o[T+A]=255)}}}function Zhe(e,t){const{fillNoDataOnly:n}=t,{band:r,width:i,height:s,mask:o,outBand:a}=e;if(n&&!o)return void a.set(r);const{kernelRows:l,kernelCols:c,statisticsType:u}=t,h=Math.floor(l/2),f=Math.floor(c/2),d=u==="min",g=a.slice(),y=new Uint32Array(i*s);for(let w=h;w<s-h;w++){const v=w*i;for(let x=f;x<i-f;x++){let S=d?Number.MAX_VALUE:-Number.MAX_VALUE,_=0;for(let M=0;M<l;M++)for(let $=0;$<c;$++){const T=v+x+(M-h)*i+$-f;o&&!o[T]||(S=d?Math.min(S,r[T]):Math.max(S,r[T]),_++)}o?(g[v+x]=_===0?0:S,y[v+x]=_):a[v+x]=_===0?0:S}}if(o)for(let w=h;w<s-h;w++){const v=w*i;for(let x=f;x<i-f;x++)if(y[v+x]){if(n&&o[v+x])continue;a[v+x]=g[v+x],o[v+x]=255}}}function Yhe(e,t){const{fillNoDataOnly:n}=t,{band:r,width:i,height:s,mask:o,outBand:a}=e;if(n&&!o)return void a.set(r);const{kernelRows:l,kernelCols:c}=t,u=Math.floor(l/2),h=Math.floor(c/2),f=a.slice(),d=new Uint32Array(i*s);for(let g=u;g<s-u;g++){const y=g*i;for(let w=h;w<i-h;w++){if(n&&o&&o[y+w])continue;const v=[];for(let x=0;x<l;x++)for(let S=0;S<c;S++){const _=y+w+(x-u)*i+S-h;o&&!o[_]||v.push(r[_])}v.length&&(v.sort((x,S)=>x-S),o?(f[y+w]=v[Math.floor((v.length-1)/2)],d[y+w]=v.length):a[y+w]=v[Math.floor((v.length-1)/2)])}}if(o)for(let g=u;g<s-u;g++){const y=g*i;for(let w=h;w<i-h;w++)if(d[y+w]){if(n&&o[y+w])continue;a[y+w]=f[y+w],o[y+w]=255}}}function Khe(e,t){const{fillNoDataOnly:n}=t,{band:r,width:i,height:s,mask:o,outBand:a}=e;if(n&&!o)return void a.set(r);const{kernelRows:l,kernelCols:c}=t,u=Math.floor(l/2),h=Math.floor(c/2),f=t.statisticsType==="majority",d=l*c,g=a.slice(),y=new Uint32Array(i*s);for(let w=u;w<s-u;w++){const v=w*i;for(let x=h;x<i-h;x++){if(n&&o&&o[v+x])continue;const S=new Map;for(let T=0;T<l;T++)for(let A=0;A<c;A++){const I=v+x+(T-u)*i+A-h;if(o&&!o[I])continue;const E=r[I];S.set(E,S.has(E)?S.get(E)+1:1)}if(S.size===0)continue;let _=0,M=0,$=f?0:d+1;for(const T of S.keys())M=S.get(T),f===M>$&&($=M,_=T);o?(g[v+x]=_,y[v+x]=S.size):a[v+x]=_}}if(o)for(let w=u;w<s-u;w++){const v=w*i;for(let x=h;x<i-h;x++)if(y[v+x]){if(n&&o[v+x])continue;a[v+x]=g[v+x],o[v+x]=255}}}function Xhe(e,t){const{mask:n}=e,{fillNoDataOnly:r}=t;if(r&&!n)return e;const{pixels:i,width:s,height:o,bandMasks:a,pixelType:l}=e,c=i.length,u=s*o,h=[],{kernelRows:f,kernelCols:d,statisticsType:g,mirrorEdges:y}=t;if(r&&!n)return e;const w=t.outputPixelType??l,v=[];for(let _=0;_<c;_++){const M=i[_],$=ee.createEmptyBand(w,u);r&&$.set(M);const T=(a==null?void 0:a[_])??n,A=(T==null?void 0:T.slice())??null,I={band:M,width:s,height:o,mask:A,outBand:$};switch(g){case"min":case"max":Zhe(I,t);break;case"mean":case"stddev":Jhe(I,t);break;case"median":Yhe(I,t);break;case"majority":case"minority":Khe(I,t)}y&&!r&&d4($,s,o,f,d),h.push($),A&&v.push(A)}let x=v[0]??n;if(v.length!==c&&(v.length=0),c>1&&(a==null?void 0:a.length)){x=new Uint8Array(u),x.set(v[0]);for(let _=1;_<a.length;_++){const M=a[_];for(let $=0;$<M.length;$++)M[$]===0&&(x[$]=0)}}const S=new ee({pixelType:w,width:s,height:o,pixels:h,bandMasks:a&&v.length?v:null,mask:x});return S.updateStatistics(),S}var c5;let ic=c5=class extends Mn{constructor(){super(...arguments),this.rows=3,this.cols=3,this.fillNoDataOnly=!1,this.statisticsType="min"}clone(){return new c5({rows:this.rows,cols:this.cols,fillNoDataOnly:this.fillNoDataOnly,statisticsType:this.statisticsType,raster:J(this.raster)})}};p([b({json:{write:!0,read:{source:["kernelRows","rows"],reader:(e,t)=>Number(e??(t==null?void 0:t.kernelRows)??3)}}})],ic.prototype,"rows",void 0),p([b({json:{write:!0,read:{source:["kernelCols","cols"],reader:(e,t)=>Number(e??(t==null?void 0:t.kernelCols)??3)}}})],ic.prototype,"cols",void 0),p([b({json:{write:!0}})],ic.prototype,"fillNoDataOnly",void 0),p([b({json:{read:{source:["statisticsType","type"],reader:(e,t)=>hE.fromJSON((t==null?void 0:t.statisticsType)??(t==null?void 0:t.type))??"min"},write:{target:"type"}}}),pe(hE)],ic.prototype,"statisticsType",void 0),ic=c5=p([L("esri.layers.support.rasterFunctions.StatisticsFunctionArguments")],ic);const Qhe=ic,efe=new Set(["min","max","mean","median","majority","minority"]);let gh=class extends $n{constructor(){super(...arguments),this.functionName="Statistics",this.rasterArgumentNames=["raster"]}_bindSourceRasters(){const{type:t}=this.functionArguments.toJSON();if(t<1||t>7)return{success:!1,supportsGPU:!1,error:`statistics-function: the given statistics type is not supported ${t}`};const n=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType(n.pixelType);const r=n.clone();r.pixelType=this.outputPixelType;const{statisticsType:i}=this.functionArguments;return efe.has(i)||(r.statistics=null,r.histograms=null,r.colormap=null,r.attributeTable=null),this.rasterInfo=r,{success:!0,supportsGPU:r.bandCount<=3&&t<5}}_processPixels(t){var a;const n=(a=t.pixelBlocks)==null?void 0:a[0];if(n==null)return n;const{statisticsType:r,rows:i,cols:s,fillNoDataOnly:o}=this.functionArguments;return Xhe(n,{kernelRows:i,kernelCols:s,fillNoDataOnly:o,outputPixelType:this.outputPixelType,statisticsType:r,mirrorEdges:!0})}_getWebGLParameters(){const{rows:t,cols:n,statisticsType:r,fillNoDataOnly:i}=this.functionArguments;return{fillNoDataOnly:i,kernelRows:t,kernelCols:n,statisticsType:r,clampRange:As(this.outputPixelType)}}};p([b({json:{write:!0,name:"rasterFunction"}})],gh.prototype,"functionName",void 0),p([b({type:Qhe,json:{write:!0,name:"rasterFunctionArguments"}})],gh.prototype,"functionArguments",void 0),p([b()],gh.prototype,"rasterArgumentNames",void 0),gh=p([L("esri.layers.support.rasterFunctions.StatisticsFunction")],gh);const tfe=gh;var u5;let sc=u5=class extends Mn{constructor(){super(...arguments),this.statistics=null,this.histograms=null}readStatistics(e,t){if(!(e!=null&&e.length))return null;const n=[];return e.forEach(r=>{const i={min:r.min,max:r.max,avg:r.avg??r.mean,stddev:r.stddev??r.standardDeviation};n.push(i)}),n}writeStatistics(e,t,n){if(!(e!=null&&e.length))return;const r=[];e.forEach(i=>{const s={...i,mean:i.avg,standardDeviation:i.stddev};delete s.avg,delete s.stddev,r.push(s)}),t[n]=r}clone(){return new u5({statistics:J(this.statistics),histograms:J(this.histograms)})}};p([b({json:{write:!0}})],sc.prototype,"statistics",void 0),p([ge("statistics")],sc.prototype,"readStatistics",null),p([xe("statistics")],sc.prototype,"writeStatistics",null),p([b({json:{write:!0}})],sc.prototype,"histograms",void 0),sc=u5=p([L("esri.layers.support.rasterFunctions.StatisticsHistogramFunctionArguments")],sc);const nfe=sc;let la=class extends $n{constructor(){super(...arguments),this.functionName="StatisticsHistogram",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isNoopProcess=!0}_bindSourceRasters(){const t=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType("u8");const n=t.clone(),{statistics:r,histograms:i}=this.functionArguments;return i&&(n.histograms=i),r&&(n.statistics=r),this.rasterInfo=n,{success:!0,supportsGPU:!0}}_processPixels(t){var n;return(n=t.pixelBlocks)==null?void 0:n[0]}};p([b({json:{write:!0,name:"rasterFunction"}})],la.prototype,"functionName",void 0),p([b({type:nfe,json:{write:!0,name:"rasterFunctionArguments"}})],la.prototype,"functionArguments",void 0),p([b()],la.prototype,"rasterArgumentNames",void 0),p([b({json:{write:!0}})],la.prototype,"indexedColormap",void 0),p([b()],la.prototype,"isNoopProcess",void 0),la=p([L("esri.layers.support.rasterFunctions.StatisticsHistogramFunction")],la);const rfe=la;var h5;const ife=new Ne({0:"none",3:"standard-deviation",4:"histogram-equalization",5:"min-max",6:"percent-clip",9:"sigmoid"},{useNumericKeys:!0});let vn=h5=class extends Mn{constructor(){super(...arguments),this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.histograms=null,this.statistics=null,this.stretchType="none",this.useGamma=!1}writeStatistics(e,t,n){e!=null&&e.length&&(Array.isArray(e[0])||(e=e.map(r=>[r.min,r.max,r.avg,r.stddev])),t[n]=e)}clone(){return new h5({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:J(this.statistics),gamma:J(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,histograms:J(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment,raster:this.raster})}};p([b({type:Boolean,json:{write:!0}})],vn.prototype,"computeGamma",void 0),p([b({type:Boolean,json:{name:"dra",write:!0}})],vn.prototype,"dynamicRangeAdjustment",void 0),p([b({type:[Number],json:{write:!0}})],vn.prototype,"gamma",void 0),p([b()],vn.prototype,"histograms",void 0),p([b({type:Number,json:{write:!0}})],vn.prototype,"maxPercent",void 0),p([b({type:Number,json:{write:!0}})],vn.prototype,"minPercent",void 0),p([b({type:Number,json:{write:!0}})],vn.prototype,"numberOfStandardDeviations",void 0),p([b({type:Number,json:{name:"max",write:!0}})],vn.prototype,"outputMax",void 0),p([b({type:Number,json:{name:"min",write:!0}})],vn.prototype,"outputMin",void 0),p([b({type:Number,json:{write:!0}})],vn.prototype,"sigmoidStrengthLevel",void 0),p([b({json:{type:[[Number]],write:!0}})],vn.prototype,"statistics",void 0),p([xe("statistics")],vn.prototype,"writeStatistics",null),p([pe(ife)],vn.prototype,"stretchType",void 0),p([b({type:Boolean,json:{write:!0}})],vn.prototype,"useGamma",void 0),vn=h5=p([L("esri.layers.support.rasterFunctions.StretchFunctionArguments")],vn);const sfe=vn;let ca=class extends $n{constructor(){super(...arguments),this.functionName="Stretch",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.lookup=null,this.cutOffs=null}_bindSourceRasters(){this.lookup=null,this.cutOffs=null;const t=this.sourceRasterInfos[0],{pixelType:n}=t,{functionArguments:r}=this,{dynamicRangeAdjustment:i,gamma:s,useGamma:o}=r;if(!i&&["u8","u16","s8","s16"].includes(n)){const l=ba(r.toJSON(),{rasterInfo:t}),c=this._isOutputRoundingNeeded()?"round":"float";this.lookup=e5({pixelType:n,...l,gamma:o?s:null,rounding:c}),this.cutOffs=l}else i||(this.cutOffs=ba(r.toJSON(),{rasterInfo:t}));this.outputPixelType=this._getOutputPixelType(n);const a=t.clone();return a.pixelType=this.outputPixelType,a.statistics=null,a.histograms=null,a.colormap=null,a.attributeTable=null,this.outputPixelType==="u8"&&(a.keyProperties.DataType="processed"),this.rasterInfo=a,{success:!0,supportsGPU:!i}}_processPixels(t){var a;const n=(a=t.pixelBlocks)==null?void 0:a[0];if(n==null)return n;const{lookup:r}=this;if(r)return g0(n,{...r,outputPixelType:this.rasterInfo.pixelType});const{functionArguments:i}=this,s=this.cutOffs||ba(i.toJSON(),{rasterInfo:this.sourceRasterInfos[0],pixelBlock:n}),o=i.useGamma?i.gamma:null;return jy(n,{...s,gamma:o,outputPixelType:this.outputPixelType})}_getWebGLParameters(){const{outputMin:t=0,outputMax:n=255,gamma:r,useGamma:i}=this.functionArguments,s=this.rasterInfo.bandCount>=2?3:1,o=i&&(r!=null&&r.length)?f4(s,r):[1,1,1],{minCutOff:a,maxCutOff:l}=this.cutOffs??{minCutOff:[0,0,0],maxCutOff:[255,255,255]};a.length===1&&(a[1]=a[2]=a[0],l[1]=l[2]=l[0]);const c=new Float32Array(s);let u;for(u=0;u<s;u++)c[u]=(n-t)/(l[u]-a[u]);const h=this._isOutputRoundingNeeded();return{bandCount:s,outMin:t,outMax:n,minCutOff:a,maxCutOff:l,factor:c,useGamma:i,gamma:i&&r?r:[1,1,1],gammaCorrection:i&&o?o:[1,1,1],stretchType:this.functionArguments.stretchType,isOutputRounded:h,type:"stretch"}}};p([b({json:{write:!0,name:"rasterFunction"}})],ca.prototype,"functionName",void 0),p([b({type:sfe,json:{write:!0,name:"rasterFunctionArguments"}})],ca.prototype,"functionArguments",void 0),p([b()],ca.prototype,"rasterArgumentNames",void 0),p([b({json:{write:!0}})],ca.prototype,"lookup",void 0),p([b({json:{write:!0}})],ca.prototype,"cutOffs",void 0),ca=p([L("esri.layers.support.rasterFunctions.StretchFunction")],ca);const ofe=ca;var f5;let zy=f5=class extends Mn{constructor(){super(...arguments),this.attributeTableAsRecordSet=null}clone(){return new f5({attributeTableAsRecordSet:J(this.attributeTableAsRecordSet)})}};p([b({json:{write:!0}})],zy.prototype,"attributeTableAsRecordSet",void 0),zy=f5=p([L("esri.layers.support.rasterFunctions.TableFunctionArguments")],zy);const afe=zy;let oc=class extends $n{constructor(){super(...arguments),this.functionName="Table",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isNoopProcess=!0}_bindSourceRasters(){const t=this.sourceRasterInfos[0];if(t.bandCount>1||t.pixelType.startsWith("f"))return{success:!1,supportsGPU:!1,error:"table-function: Source data must be single band and integer pixel type."};const{attributeTableAsRecordSet:n}=this.functionArguments;if(!n)return{success:!1,supportsGPU:!1,error:"table-function: Missing attributeTableAsRecordSet argument."};this.outputPixelType=this._getOutputPixelType(t.pixelType);const r=t.clone();return r.pixelType=this.outputPixelType,r.bandCount=1,r.dataType!=="thematic"&&(r.keyProperties=r.keyProperties?{...r.keyProperties,DataType:"thematic"}:{DataType:"thematic"}),this.rasterInfo=r,{success:!0,supportsGPU:!0}}_processPixels(t){var n;return(n=t.pixelBlocks)==null?void 0:n[0]}};p([b({json:{write:!0,name:"rasterFunction"}})],oc.prototype,"functionName",void 0),p([b({type:afe,json:{write:!0,name:"rasterFunctionArguments"}})],oc.prototype,"functionArguments",void 0),p([b()],oc.prototype,"rasterArgumentNames",void 0),p([b()],oc.prototype,"isNoopProcess",void 0),oc=p([L("esri.layers.support.rasterFunctions.TableFunction")],oc);const lfe=oc,nn=new Map;function t7(e,t){const{rasterFunctionArguments:n}=e;n&&(n.rasters||[n.raster]).forEach(r=>{r&&typeof r!="number"&&(typeof r=="string"?r.startsWith("http")&&(t.includes(r)||t.push(r)):"rasterFunctionArguments"in r&&t7(r,t))})}function d5(e,t){if(t=t??{},"function"in(e=J(e))&&"arguments"in e&&e.arguments){const n=i7(e,new Map,t);if(g5(n),!n.renderingRule)throw new Y("raster-function-helper","Unsupported raster function json.");e=n.renderingRule}if("rasterFunction"in e)return n7(e=p5(e),t);throw new Y("raster-function-helper","unsupported raster function json.")}function cfe(e,t){return t[0]==="rasters"&&Array.isArray(e.rasters)?e.rasters:t.map(n=>e[n])}function fE(e){return!!(e&&typeof e=="object"&&e.rasterFunction&&e.rasterFunctionArguments)}function p5(e){var i;const{rasterFunction:t,rasterFunctionArguments:n}=e,r={};for(const s in n){let o=n[s];const a=s.toLowerCase();if(a==="rasters"&&Array.isArray(o))r.rasters=o.map(l=>fE(l)?p5(l):l);else switch(fE(o)&&(o=p5(o)),a){case"dra":r.dra=o;break;case"pspower":r.psPower=o;break;case"pszfactor":r.psZFactor=o;break;case"bandids":r.bandIds=o;break;default:r[s[0].toLowerCase()+s.slice(1)]=o}}return t!=="Local"||(i=r.rasters)!=null&&i.length||(r.rasters=["$$"]),{...e,rasterFunctionArguments:r}}function n7(e,t){var f,d;const{rasterFunction:n,rasterFunctionArguments:r}=e,i=(f=e.outputPixelType)==null?void 0:f.toLowerCase();if(n==null||!nn.has(n))throw new Y("raster-function-helper",`unsupported raster function: ${n}`);const s=nn.get(n),o=(typeof s.ctor=="function"?s.ctor:s.ctor.default).fromJSON({...e,outputPixelType:i}),{rasterArgumentNames:a}=o,l=[],c=cfe(r,a),u=a[0]==="rasters",h=[];for(let g=0;g<c.length;g++){const y=c[g];let w;y==null||typeof y=="string"&&y.startsWith("$")?l.push(t==null?void 0:t.raster):typeof y=="string"?t[y]&&l.push(t[y]):typeof y!="number"&&"rasterFunction"in y&&(w=n7(y,t),u||(o.functionArguments[a[g]]=w),l.push(w)),u&&h.push(w??y)}if(u&&(o.functionArguments.rasters=h),t){o.sourceRasters=l;const g=(d=t.raster)==null?void 0:d.url;g&&(o.mainPrimaryRasterId=g)}return o}function r7(e,t){if(e&&t)for(const n in e){const r=e[n];r&&typeof r=="object"&&"type"in r&&(r.type==="RasterFunctionTemplate"?r7(r.arguments,t):r.type==="RasterFunctionVariable"&&t[r.name]!=null&&(r.value=t[r.name]))}}function m5(e,t){var i;if(!e||typeof e!="object")return e;const{value:n}=e;if(!n||typeof n!="object")return e.isDataset?"$$":n;if(Array.isArray(n))return n.length===0?[]:n.map(s=>typeof s=="object"&&s.type==="RasterFunctionVariable"?m5(s,t):s);if("value"in n&&["number","string","boolean"].includes(typeof n.value))return n.value;if(e.isDataset&&n.type!=="Scalar")return"$$";if(!("type"in n))return n;let r=n;switch(n.type){case"Scalar":r=n.value;break;case"AlgorithmicColorRamp":r=dE(n);break;case"MultiPartColorRamp":r={type:"multipart",colorRamps:n.ArrayOfColorRamp.map(dE)};break;case"ArgumentArray":if((i=n.elements)!=null&&i.length&&n.elements[0].type!=="RasterStatistics"){const s=[];for(let o=0;o<n.elements.length;o++){const a=n.elements[o],{type:l}=a;if(l)if(l==="RasterFunctionTemplate"){const{renderingRule:c}=i7(a,t);s.push(c),a._object_id!=null&&t.set(a._object_id,c)}else{if(l!=="RasterFunctionVariable")throw new Y("raster-function-helper","unsupported raster function json.");{const c=m5(a,t);s.push(c),a._object_id!=null&&t.set(a._object_id,c)}}else s.push(a)}r=s}else r=n.elements}return n._object_id!=null&&t.set(n._object_id,r),r}function dE(e){const t=e.algorithm??"esriHSVAlgorithm";let{FromColor:n,ToColor:r}=e;if(!Array.isArray(n)){const{r:i,g:s,b:o}=Ka({h:n.Hue,s:n.Saturation,v:n.Value});n=[i,s,o,n.AlphaValue]}if(!Array.isArray(r)){const{r:i,g:s,b:o}=Ka({h:r.Hue,s:r.Saturation,v:r.Value});r=[i,s,o,r.AlphaValue]}return{type:"algorithmic",algorithm:t,fromColor:n,toColor:r}}function i7(e,t,n){n&&r7(e,n);const r={renderingRule:{},templates:t};return s7(e,r),r}function s7(e,t){if(!e||!t.renderingRule)return;const{renderingRule:n,templates:r}=t,{function:i,arguments:s,_object_id:o}=e;if(!i||!s)return;o!=null&&r.set(o,n),n.rasterFunction=i.type.replace("Function",""),n.outputPixelType=i.pixelType;const a={};n.rasterFunctionArguments=a;for(const l in s){if(l==="type"||l==="object_id"||l==="_object_ref_id")continue;const c=s[l];c&&typeof c=="object"&&"type"in c&&(c.type==="RasterFunctionTemplate"||c.type==="RasterFunctionVariable")?(c.type==="RasterFunctionVariable"?a[l]=m5(c,r):(n.rasterFunctionArguments[l]={},s7(c,{renderingRule:n.rasterFunctionArguments[l],templates:r})),c._object_id!=null&&r.set(c._object_id,a[l])):a[l]=c}switch(a.DEM&&!a.Raster&&(a.Raster=a.DEM,delete a.DEM),n.rasterFunction){case"Stretch":ufe(a);break;case"Colormap":hfe(a);break;case"Convolution":ffe(a);break;case"Mask":dfe(a)}}function g5(e){const{renderingRule:t,templates:n}=e;if(typeof t!="object"||!(t!=null&&t.rasterFunctionArguments)||!n.size)return;const{rasterFunctionArguments:r}=t;for(const i in r){const s=r[i],o=i==="_object_ref_id"?s:s&&typeof s=="object"&&"_object_ref_id"in s?s._object_ref_id:null;if(o==null)s&&typeof s=="object"&&(s.rasterFunctionArguments&&g5({renderingRule:s,templates:n}),Array.isArray(s)&&s.forEach((a,l)=>{if(typeof a=="object")if(a._object_ref_id!=null){if(!n.has(a._object_ref_id))throw new Y("raster-function-helper",`unsupported raster function json. _object_ref_id: ${s} does not exist`);const c=n.get(o);c&&typeof c=="object"?Object.assign(a,c):s[l]=c}else g5({renderingRule:a,templates:n})}));else{if(!n.has(o))throw new Y("raster-function-helper",`unsupported raster function json. _object_ref_id: ${o} does not exist`);const a=n.get(o);i!=="_object_ref_id"?r[i]=a:a&&typeof a=="object"&&Object.assign(r,a)}}}function ufe(e){var t;(t=e.Statistics)!=null&&t.length&&typeof e.Statistics=="object"&&(e.Statistics=e.Statistics.map(n=>[n.min,n.max,n.mean,n.standardDeviation])),e.NumberOfStandardDeviation!=null&&(e.NumberOfStandardDeviations=e.NumberOfStandardDeviation,delete e.NumberOfStandardDeviation)}function hfe(e){var t,n;((n=(t=e.ColorRamp)==null?void 0:t.type)==null?void 0:n.toLowerCase())==="randomcolorramp"&&(delete e.ColorRamp,e.ColormapName="Random"),e.ColorSchemeType===0&&delete e.ColorRamp}function ffe(e){e.ConvolutionType!=null&&(e.Type=e.ConvolutionType,delete e.ConvolutionType)}function dfe(e){var t;(t=e.NoDataValues)!=null&&t.length&&typeof e.NoDataValues[0]=="string"&&(e.NoDataValues=e.NoDataValues.filter(n=>n!=="").map(n=>Number(n)))}nn.set("Aspect",{desc:"Aspect Function",ctor:Vce,rasterArgumentNames:["raster"]}),nn.set("BandArithmetic",{desc:"Band Arithmetic Function",ctor:gue,rasterArgumentNames:["raster"]}),nn.set("Colormap",{desc:"Colormap Function",ctor:Tue,rasterArgumentNames:["raster"]}),nn.set("CompositeBand",{desc:"CompositeBand Function",ctor:Iue,rasterArgumentNames:["rasters"]}),nn.set("Convolution",{desc:"Convolution Function",ctor:Wue,rasterArgumentNames:["raster"]}),nn.set("ContrastBrightness",{desc:"Contrast Brightness Function",ctor:Due,rasterArgumentNames:["raster"]}),nn.set("ExtractBand",{desc:"ExtractBand Function",ctor:Zue,rasterArgumentNames:["raster"]}),nn.set("Curvature",{desc:"Curvature Function",ctor:que,rasterArgumentNames:["raster"]}),nn.set("Local",{desc:"Local Function",ctor:Fhe,rasterArgumentNames:["rasters"]}),nn.set("Mask",{desc:"Mask Function",ctor:zhe,rasterArgumentNames:["raster"]}),nn.set("NDVI",{desc:"NDVI Function",ctor:Uhe,rasterArgumentNames:["raster"]}),nn.set("Remap",{desc:"Remap Function",ctor:Ghe,rasterArgumentNames:["raster"]}),nn.set("Slope",{desc:"Slope Function",ctor:qhe,rasterArgumentNames:["raster"]}),nn.set("Statistics",{desc:"Focal Statistics Function",ctor:tfe,rasterArgumentNames:["raster"]}),nn.set("StatisticsHistogram",{desc:"Statistics Histogram Function",ctor:rfe,rasterArgumentNames:["raster"]}),nn.set("Stretch",{desc:"Stretch Function",ctor:ofe,rasterArgumentNames:["raster"]}),nn.set("Table",{desc:"Attribute Table Function",ctor:lfe,rasterArgumentNames:["raster"]});function pfe(e){var t,n,r;return["u8","s8"].includes(e.pixelType)&&((n=(t=e.statistics)==null?void 0:t[0])==null?void 0:n.min)!=null&&((r=e.statistics[0])==null?void 0:r.max)!=null&&e.bandCount===1}function g4(e,t){const{attributeTable:n,bandCount:r}=e;return n==null&&pfe(e)?!0:!(n==null||r>1||t&&n.fields.find(i=>i.name.toLowerCase()===t.toLowerCase())==null)}function o7(e){const{bandCount:t,dataType:n,pixelType:r}=e;return n==="elevation"||n==="generic"&&t===1&&(r==="s16"||r==="s32"||r==="f32"||r==="f64")}function y4(e,t=!1){const{bandCount:n,colormap:r,pixelType:i}=e;return n===1&&(!!(r!=null&&r.length)||!t&&i==="u8")}function mfe(e,t=!1){const{attributeTable:n,bandCount:r}=e;return r===1&&(!t||n!=null||e.histograms!=null)}function b4(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}function gfe(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}const pE=new Ne({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),mE=new Ne({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let xi=class extends re{constructor(t){super(t),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(t){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",t)}set definedInterval(t){this.classificationMethod==="defined-interval"&&this._set("definedInterval",t)}};p([pe({classBreaksDef:"class-breaks-definition"})],xi.prototype,"type",void 0),p([b({json:{write:!0}})],xi.prototype,"breakCount",void 0),p([b({json:{write:!0}})],xi.prototype,"classificationField",void 0),p([b({type:String,json:{read:pE.read,write:pE.write}})],xi.prototype,"classificationMethod",void 0),p([b({json:{write:!0}})],xi.prototype,"normalizationField",void 0),p([b({json:{read:mE.read,write:mE.write}})],xi.prototype,"normalizationType",void 0),p([b({value:null,json:{write:!0}})],xi.prototype,"standardDeviationInterval",null),p([b({value:null,json:{write:!0}})],xi.prototype,"definedInterval",null),xi=p([L("esri.rest.support.ClassBreaksDefinition")],xi);const T$e=xi,yfe=ie.getLogger("esri.rest.support.generateRendererUtils");function Vu(e,t){return Number(e.toFixed(t))}function A$e(e){const{normalizationTotal:t}=e;return{classBreaks:bfe(e),normalizationTotal:t}}function bfe(e){const t=e.definition,{classificationMethod:n,normalizationType:r,definedInterval:i}=t,s=t.breakCount??1,o=[];let a=e.values;if(a.length===0)return[];a=a.sort((u,h)=>u-h);const l=a[0],c=a[a.length-1];if(n==="equal-interval")if(a.length>=s){const u=(c-l)/s;let h=l;for(let f=1;f<s;f++){const d=Vu(l+f*u,6);o.push({minValue:h,maxValue:d,label:rr(h,d,r)}),h=d}o.push({minValue:h,maxValue:c,label:rr(h,c,r)})}else a.forEach(u=>{o.push({minValue:u,maxValue:u,label:rr(u,u,r)})});else if(n==="natural-breaks"){const u=wfe(a),h=e.valueFrequency||u.valueFrequency,f=vfe(u.uniqueValues,h,s);let d=l;for(let g=1;g<s;g++)if(u.uniqueValues.length>g){const y=Vu(u.uniqueValues[f[g]],6);o.push({minValue:d,maxValue:y,label:rr(d,y,r)}),d=y}o.push({minValue:d,maxValue:c,label:rr(d,c,r)})}else if(n==="quantile")if(a.length>=s&&l!==c){let u=l,h=Math.ceil(a.length/s),f=0;for(let d=1;d<s;d++){let g=h+f-1;g>a.length&&(g=a.length-1),g<0&&(g=0),o.push({minValue:u,maxValue:a[g],label:rr(u,a[g],r)}),u=a[g],f+=h,h=Math.ceil((a.length-f)/(s-d))}o.push({minValue:u,maxValue:c,label:rr(u,c,r)})}else{let u=-1;for(let h=0;h<a.length;h++){const f=a[h];f!==u&&(u=f,o.push({minValue:u,maxValue:f,label:rr(u,f,r)}),u=f)}}else if(n==="standard-deviation"){const u=_fe(a),h=Mfe(a,u);if(h===0)o.push({minValue:a[0],maxValue:a[0],label:rr(a[0],a[0],r)});else{const f=Sfe(l,c,s,u,h)*h;let d=0,g=l;for(let w=s;w>=1;w--){const v=Vu(u-(w-.5)*f,6);o.push({minValue:g,maxValue:v,label:rr(g,v,r)}),g=v,d++}let y=Vu(u+.5*f,6);o.push({minValue:g,maxValue:y,label:rr(g,y,r)}),g=y,d++;for(let w=1;w<=s;w++)y=d===2*s?c:Vu(u+(w+.5)*f,6),o.push({minValue:g,maxValue:y,label:rr(g,y,r)}),g=y,d++}}else if(n==="defined-interval"){if(!i)return o;const u=a[0],h=a[a.length-1],f=Math.ceil((h-u)/i);let d=u;for(let g=1;g<f;g++){const y=Vu(u+g*i,6);o.push({minValue:d,maxValue:y,label:rr(d,y,r)}),d=y}o.push({minValue:d,maxValue:h,label:rr(d,h,r)})}return o}function rr(e,t,n){let r=null;return r=e===t?n&&n==="percent-of-total"?e+"%":e.toString():n&&n==="percent-of-total"?e+"% - "+t+"%":e+" - "+t,r}function wfe(e){const t=[],n=[];let r=Number.MIN_VALUE,i=1,s=-1;for(let o=0;o<e.length;o++){const a=e[o];a===r?(i++,n[s]=i):a!==null&&(t.push(a),r=a,i=1,n.push(i),s++)}return{uniqueValues:t,valueFrequency:n}}function vfe(e,t,n){const r=e.length,i=[];n>r&&(n=r);for(let o=0;o<n;o++)i.push(Math.round(o*r/n-1));i.push(r-1);let s=gE(i,e,t,n);return xfe(s.mean,s.sdcm,i,e,t,n)&&(s=gE(i,e,t,n)),i}function gE(e,t,n,r){let i=[],s=[],o=[],a=0;const l=[],c=[];for(let d=0;d<r;d++){const g=Eh(d,e,t,n);l.push(g.sbMean),c.push(g.sbSdcm),a+=c[d]}let u,h=a,f=!0;for(;f||a<h;){f=!1,i=[];for(let d=0;d<r;d++)i.push(e[d]);for(let d=0;d<r;d++)for(let g=e[d]+1;g<=e[d+1];g++)if(u=t[g],d>0&&g!==e[d+1]&&Math.abs(u-l[d])>Math.abs(u-l[d-1]))e[d]=g;else if(d<r-1&&e[d]!==g-1&&Math.abs(u-l[d])>Math.abs(u-l[d+1])){e[d+1]=g-1;break}h=a,a=0,s=[],o=[];for(let d=0;d<r;d++){s.push(l[d]),o.push(c[d]);const g=Eh(d,e,t,n);l[d]=g.sbMean,c[d]=g.sbSdcm,a+=c[d]}}if(a>h){for(let d=0;d<r;d++)e[d]=i[d],l[d]=s[d],c[d]=o[d];a=h}return{mean:l,sdcm:c}}function xfe(e,t,n,r,i,s){let o=0,a=0,l=0,c=0,u=!0;for(let h=0;h<2&&u;h++){h===0&&(u=!1);for(let f=0;f<s-1;f++)for(;n[f+1]+1!==n[f+2];){n[f+1]=n[f+1]+1;const d=Eh(f,n,r,i);l=d.sbMean,o=d.sbSdcm;const g=Eh(f+1,n,r,i);if(c=g.sbMean,a=g.sbSdcm,!(o+a<t[f]+t[f+1])){n[f+1]=n[f+1]-1;break}t[f]=o,t[f+1]=a,e[f]=l,e[f+1]=c,u=!0}for(let f=s-1;f>0;f--)for(;n[f]!==n[f-1]+1;){n[f]=n[f]-1;const d=Eh(f-1,n,r,i);l=d.sbMean,o=d.sbSdcm;const g=Eh(f,n,r,i);if(c=g.sbMean,a=g.sbSdcm,!(o+a<t[f-1]+t[f])){n[f]=n[f]+1;break}t[f-1]=o,t[f]=a,e[f-1]=l,e[f]=c,u=!0}}return u}function Sfe(e,t,n,r,i){let s=Math.max(r-e,t-r)/i/n;return s=s>=1?1:s>=.5?.5:.25,s}function _fe(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t/=e.length,t}function Mfe(e,t){let n=0;for(let r=0;r<e.length;r++){const i=e[r];n+=(i-t)*(i-t)}return n/=e.length,Math.sqrt(n)}function Eh(e,t,n,r){let i=0,s=0;for(let l=t[e]+1;l<=t[e+1];l++){const c=r[l];i+=n[l]*c,s+=c}s<=0&&yfe.warn("Exception in Natural Breaks calculation");const o=i/s;let a=0;for(let l=t[e]+1;l<=t[e+1];l++)a+=r[l]*(n[l]-o)**2;return{sbMean:o,sbSdcm:a}}const $fe=.25,Tfe=Nb.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),yE=Nb.fromJSON(H$[0]),a7=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function bE(e,t){const{attributeTable:n,colormap:r}=e;if(b4(e)){const i=Nfe(e);if(i!=null)return i}if(r!=null){const i=Pfe(e);if(i!=null)return i}if(n!=null){const i=Cfe(e);if(i!=null)return i}return Ife(e,t)}function I$e(e,t=!1){const n=["raster-stretch"];return y4(e,t)&&n.push("raster-colormap"),g4(e)&&n.push("unique-value"),mfe(e,t)&&n.push("class-breaks"),o7(e)&&n.push("raster-shaded-relief"),b4(e)&&n.push("vector-field"),gfe(e)&&n.push("flow"),n}function Afe(e,t,n){const r=["nearest","bilinear","cubic","majority"].find(i=>i===(n==null?void 0:n.toLowerCase()));return t==="Map"?r??"bilinear":e.dataType==="standard-time"?r??"nearest":e.dataType==="thematic"||e.attributeTable||e.colormap?r==="nearest"||r==="majority"?r:"nearest":r??"bilinear"}function Ife(e,t){e=y5(e,t==null?void 0:t.variableName);const{bandCount:n}=e;let{bandIds:r,stretchType:i}=t||{};r!=null&&r.some(h=>h>=n)&&(r=null);let s=e.statistics,o=e.histograms;n>1?(r=r!=null&&r.length?r:l7(e),s=s==null?null:r==null?void 0:r.map(h=>s[h]),o=o==null?null:r==null?void 0:r.map(h=>o[h])):r=[0],i==null&&(i=Efe(e));let a=!1;switch(i){case"none":a=!1;break;case"percent-clip":a=!(o!=null&&o.length);break;default:a=!(s!=null&&s.length)}const{dataType:l}=e,c=(r==null?void 0:r.length)===1&&a7.has(l)?Tfe:null,u=new Z$({stretchType:i,dynamicRangeAdjustment:a,colorRamp:c,outputMin:0,outputMax:255,gamma:(r==null?void 0:r.length)===1?[1]:[1,1,1],useGamma:!1});return i==="percent-clip"?u.maxPercent=u.minPercent=$fe:i==="standard-deviation"&&(u.numberOfStandardDeviations=2),a||e.multidimensionalInfo==null&&!(t!=null&&t.includeStatisticsInStretch)||(i==="percent-clip"?u.histograms=o:i!=="min-max"&&i!=="standard-deviation"||(u.statistics=s)),u}function y5(e,t){const{multidimensionalInfo:n}=e;if(!t||!n)return e;const r=n.variables.find(i=>i.name===t);if(!r)return e;if(e=e.clone(),r){const{statistics:i,histograms:s}=r;i!=null&&i.length&&(e.statistics=i.map(o=>({min:o.min,max:o.max,avg:o.avg,stddev:o.stddev}))),s!=null&&s.length&&(e.histograms=s)}return e}function l7(e){const t=e.bandCount;if(t===1)return null;if(t===2)return[0];const{bandInfos:n}=e;let r;if(n.length===t){const{red:i,green:s,blue:o,nir:a}=kfe(n);i!=null&&s!=null&&o!=null?r=[i,s,o]:a!=null&&i!=null&&s!=null&&(r=[a,i,s])}return!r&&t>=3&&(r=[0,1,2]),r}function kfe(e){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=r.name.toLowerCase();if(i==="red")t.red=n;else if(i==="green")t.green=n;else if(i==="blue")t.blue=n;else if(i==="nearinfrared"||i==="nearinfrared_1"||i==="nir")t.nir=n;else if(r.maxWavelength&&r.minWavelength){const s=r.minWavelength,o=r.maxWavelength;t.blue==null&&s>=410&&s<=480&&o>=480&&o<=540?t.blue=n:t.green==null&&s>=490&&s<=560&&o>=560&&o<=610?t.green=n:t.red==null&&s>=595&&s<=670&&o>=660&&o<=730?t.red=n:t.nir==null&&s>=700&&s<=860&&o>=800&&o<=950&&(t.nir=n)}}return t}function Efe(e){let t="percent-clip";const{pixelType:n,dataType:r,histograms:i,statistics:s,multidimensionalInfo:o}=e,a=a7.has(r)||r==="generic"&&o!=null;return n!=="u8"||r!=="processed"&&i!=null&&s!=null?n==="u8"||r==="elevation"||a?t="min-max":i!=null?t="percent-clip":s!=null&&(t="min-max"):t="none",t}function Cfe(e,t,n,r){if(!g4(e,t))return null;const{attributeTable:i,statistics:s}=e,o=c7(i,t),a=jp(i,"red"),l=jp(i,"green"),c=jp(i,"blue"),u=new U$,h=[],f=new Set,d=!!(a&&l&&c);if(i!=null)i.features.forEach(g=>{const y=g.attributes[o.name];if(!f.has(g.attributes[o.name])&&y!=null){f.add(y);const w=d&&(a.type==="single"||a.type==="double")&&(l.type==="single"||l.type==="double")&&(c.type==="single"||c.type==="double")&&!i.features.some(x=>x.attributes[a.name]>1||x.attributes[l.name]>1||x.attributes[c.name]>1),v=w?255:1;h.push(new zc({value:g.attributes[o.name],label:g.attributes[o.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:new fe(d?[g.attributes[a.name]*v,g.attributes[l.name]*v,g.attributes[c.name]*v,1]:[0,0,0,0])}}))}});else if(s!=null&&s[0])for(let g=s[0].min;g<=s[0].max;g++)h.push(new zc({value:g,label:g.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new fe([0,0,0,0])}}));if(h.sort((g,y)=>g.value&&typeof g.value.valueOf()=="string"?0:g.value>y.value?1:-1),!d){const g=fu(yE,{numColors:h.length});h.forEach((y,w)=>y.symbol.color=new fe(g[w].slice(1,4))),u.colorRamp=yE}if(n||r){const g=n||fu(r,{numColors:h.length}).map(y=>y.slice(1));h.forEach((y,w)=>y.symbol.color=new fe(g[w])),u.colorRamp=r}return new Y$({field:o.name,uniqueValueInfos:h,authoringInfo:u})}function c7(e,t,n){let r;return e!=null?(r=t?e.fields.find(i=>t.toLowerCase()===i.name.toLowerCase()):Ofe(e.fields),r||(n||(r=e.fields.find(i=>i.type==="string")),r||(r=jp(e,"value")))):r=new ka({name:"value"}),r}function Ofe(e){let t;for(let n=0;n<e.length;n++){const r=e[n].name.toLowerCase();if(e[n].type==="string"){if(r.startsWith("class")){t=e[n];break}t==null&&(r.endsWith("name")||r.endsWith("type"))&&(t=e[n])}}return t}function jp(e,t){return e==null?null:e.fields.find(n=>n.name.toLowerCase()===t)}function Pfe(e){if(!y4(e))return null;let t;const{attributeTable:n,colormap:r}=e;if(n!=null){const i=jp(n,"value"),s=c7(n,null,!0);s.type==="string"&&(t={},n.features.forEach(o=>{const a=o.attributes;t[a[i.name]]=s?a[s.name]:a[i.name]}))}return J$.createFromColormap(r,t)}const Rfe=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function Nfe(e){if(!b4(e))return null;let t;if(e.statistics!=null&&e.statistics.length&&(e.dataType==="vector-magdir"||e.dataType==="vector-uv")){const{minMagnitude:i,maxMagnitude:s}=Dfe(e.dataType,e.statistics);t=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:i,maxDataValue:s}]}const n=e.multidimensionalInfo!=null?Rfe.get(e.multidimensionalInfo.variables[0].unit):null,r=new e4({visualVariables:t,inputUnit:n,rotationType:"geographic"});return r.visualVariables=[...r.sizeVariables,...r.rotationVariables],r}function wE(e){var t;return{color:(t=e.symbolLayers[0].material)==null?void 0:t.color,type:"esriSFS",style:"esriSFSSolid"}}function vE(e){var t,n;if(e.type==="uniqueValue"){const r=e.uniqueValueInfos,i=r==null?void 0:r[0].symbol;return(t=i==null?void 0:i.symbolLayers)!=null&&t.length&&(e.uniqueValueInfos=r==null?void 0:r.map(s=>({value:s.value,label:s.label,symbol:s.symbol?wE(s.symbol):null}))),e}if(e.type==="classBreaks"){const r=e.classBreakInfos,i=r[0].symbol;return(n=i==null?void 0:i.symbolLayers)!=null&&n.length&&(e.classBreakInfos=r.map(s=>({classMinValue:s.classMinValue,classMaxValue:s.classMaxValue,label:s.label,symbol:s.symbol?wE(s.symbol):null}))),e}return e}function Dfe(e,t){let n,r;if(e==="vector-magdir")n=t[0].min,r=t[0].max;else{const i=t[0].min,s=t[0].max,o=t[1].min,a=t[1].max;n=0,r=Math.max(Math.abs(i),Math.abs(o),Math.abs(s),Math.abs(a))}return{minMagnitude:n,maxMagnitude:r}}let ac=class extends re{constructor(e){super(e)}bind(){const{rendererJSON:e}=this;if(!e)return{success:!1};let t;switch(this.lookup={rendererJSON:{}},e.type){case"uniqueValue":t=this._updateUVRenderer(e);break;case"rasterColormap":t=this._updateColormapRenderer(e);break;case"rasterStretch":t=this._updateStretchRenderer(e);break;case"classBreaks":t=this._updateClassBreaksRenderer(e);break;case"rasterShadedRelief":t=this._updateShadedReliefRenderer(e);break;case"vectorField":t=this._updateVectorFieldRenderer();break;case"flowRenderer":t=this._updateFlowRenderer()}return t}symbolize(e){let t=e==null?void 0:e.pixelBlock;if(!xE(t))return t;if(e.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(t,e.simpleStretchParams);try{let n;switch(t.pixels.length>3&&(t=t.extractBands([0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":n=this._symbolizeColormap(t);break;case"classBreaks":n=this._symbolizeClassBreaks(t);break;case"rasterStretch":n=this._symbolizeStretch(t,e.bandIds);break;case"rasterShadedRelief":{const r=e.extent,i=r.spatialReference.isGeographic,s={x:(r.xmax-r.xmin)/t.width,y:(r.ymax-r.ymin)/t.height};n=this._symbolizeShadedRelief(t,{isGCS:i,resolution:s});break}}return n}catch(n){return ie.getLogger(this).error("symbolize",n.message),t}}simpleStretch(e,t){if(!xE(e))return e;try{return e.pixels.length>3&&(e=e.extractBands([0,1,2])),jy(e,{...t,isRenderer:!0})}catch(n){return ie.getLogger(this).error("symbolize",n.message),e}}generateWebGLParameters(e){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:o,offset:a}=this.lookup.colormapLut||{};return{colormap:o,colormapOffset:a,type:"lut"}}const{pixelBlock:t,isGCS:n,resolution:r,bandIds:i}=e,{rendererJSON:s}=this;return s.type==="rasterStretch"?this._generateStretchWebGLParams(t,s,i):s.type==="rasterShadedRelief"?this._generateShadedReliefWebGLParams(s,n,r??void 0):s.type==="vectorField"?this._generateVectorFieldWebGLParams(s):null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(e){return this._isLUTChanged()&&!this.bind().success?e:Yw(e,this.lookup.colormapLut)}_symbolizeClassBreaks(e){const{canUseIndexedLUT:t}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?e:t?Yw(e,this.lookup.colormapLut):Moe(e,this.lookup.remapLut??[])}_symbolizeStretch(e,t){var h,f;const{rasterInfo:n}=this,{pixelType:r,bandCount:i}=n,s=this.rendererJSON,o=["u8","u16","s8","s16"].includes(r);let a,l;const{dra:c}=s,{gamma:u}=this.lookup;if(s.stretchType==="histogramEqualization"){const d=c?null:(h=this.lookup)==null?void 0:h.histogramLut,g=ba(s,{rasterInfo:n,pixelBlock:e,bandIds:t,returnHistogramLut:!d}),y=jy(e,{...g,gamma:u,isRenderer:!0});l=g0(y,{lut:c?g.histogramLut:d,offset:0})}else if(o){if(c){const d=ba(s,{rasterInfo:n,pixelBlock:e,bandIds:t});a=e5({pixelType:r,...d,gamma:u,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return e;a=this.lookup?this.lookup.stretchLut:null}else a=this.lookup?this.lookup.stretchLut:null;if(!a)return e;i>1&&t!=null&&t.length===(e==null?void 0:e.pixels.length)&&(a==null?void 0:a.lut.length)===i&&(a={lut:t.map(d=>a.lut[d]),offset:a.offset}),l=g0(e,a)}else{const d=ba(s,{rasterInfo:n,pixelBlock:e,bandIds:t});l=jy(e,{...d,gamma:u,isRenderer:!0})}if(s.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;l=Yw(l,(f=this.lookup)==null?void 0:f.colormapLut)}return l}_symbolizeShadedRelief(e,t){var a;const n=this.rendererJSON,r={...n,...t},i=Fce(e,r);if(!n.colorRamp)return i;let s;if(this._isLUTChanged(!0)){if(!this.bind().success)return i;s=this.lookup?this.lookup.hsvMap:null}else s=this.lookup?this.lookup.hsvMap:null;if(!s)return i;const o=((a=this.rasterInfo.statistics)==null?void 0:a[0])??{min:0,max:8e3};return jce(i,e,s,o),i}_isVectorFieldData(){const{bandCount:e,dataType:t}=this.rasterInfo;return e===2&&(t==="vector-magdir"||t==="vector-uv")}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(e){var c;const{bandCount:t,attributeTable:n,pixelType:r}=this.rasterInfo,i=e.field1;if(!i)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const s=e.defaultSymbol,o=t===1&&["u8","s8"].includes(r);if(!g4(this.rasterInfo,i)&&!o)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const a=[];if(n!=null){const u=n.fields.find(h=>h.name.toLowerCase()==="value");if(!u)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};n.features.forEach(h=>{var g,y;const f=(g=e.uniqueValueInfos)==null?void 0:g.find(w=>String(w.value)===String(h.attributes[i])),d=(y=f==null?void 0:f.symbol)==null?void 0:y.color;d?a.push([h.attributes[u.name]].concat(d)):s&&a.push([h.attributes[u.name]].concat(s.color))})}else{if(i.toLowerCase()!=="value")return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};(c=e.uniqueValueInfos)==null||c.forEach(u=>{var f;const h=(f=u==null?void 0:u.symbol)==null?void 0:f.color;h?a.push([parseInt(""+u.value,10)].concat(h)):s&&a.push([parseInt(""+u.value,10)].concat(s==null?void 0:s.color))})}if(a.length===0)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const l=nd({colormap:a});return this.lookup={rendererJSON:e,colormapLut:l},this.canRenderInWebGL=this._isColormapSupportedByWebGL(l==null?void 0:l.indexedColormap),{success:!0}}_updateColormapRenderer(e){if(!y4(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const t=e.colormapInfos.map(r=>[r.value].concat(r.color)).sort((r,i)=>r[0]-i[0]);if(!t||t.length===0)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const n=nd({colormap:t});return this.lookup={rendererJSON:e,colormapLut:n},this.canRenderInWebGL=this._isColormapSupportedByWebGL(n==null?void 0:n.indexedColormap),{success:!0}}_updateShadedReliefRenderer(e){if(!o7(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(e.colorRamp){const t=fu(e.colorRamp,{interpolateAlpha:!0}),n=nd({colormap:t}),r=[],i=n.indexedColormap;for(let s=0;s<i.length;s+=4){const o=m0({r:i[s],g:i[s+1],b:i[s+2]});r.push([o.h/60,o.s/100,255*o.v/100])}this.lookup={rendererJSON:e,colormapLut:n,hsvMap:r}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(e){const{attributeTable:t,pixelType:n}=this.rasterInfo,r=t!=null?t.fields.find(o=>o.name.toLowerCase()==="value"):null,i=t!=null?t.fields.find(o=>o.name.toLowerCase()===e.field.toLowerCase()):null,s=r!=null&&i!==null;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(n)||s,tableValueField:r,tableBreakField:i}}_updateClassBreaksRenderer(e){const{attributeTable:t}=this.rasterInfo,{canUseIndexedLUT:n,tableValueField:r,tableBreakField:i}=this._analyzeClassBreaks(e),s=e.classBreakInfos;if(!(s!=null&&s.length))return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const o=s.sort((h,f)=>h.classMaxValue-f.classMaxValue),a=o[o.length-1];let l=e.minValue;if(!n){const h=[];for(let f=0;f<o.length;f++)h.push({value:o[f].classMinValue??l,mappedColor:o[f].symbol.color}),l=o[f].classMaxValue;return h.push({value:a.classMaxValue,mappedColor:a.symbol.color}),this.lookup={rendererJSON:e,remapLut:h},this.canRenderInWebGL=!1,{success:!0}}const c=[];if(t!=null&&r!=null&&i!==null&&r!==i){const h=r.name,f=i.name,d=o[o.length-1],{classMaxValue:g}=d;l=e.minValue;for(const y of t.features){const w=y.attributes[h],v=y.attributes[f],x=v===g?d:v<l?null:o.find(({classMaxValue:S})=>S>v);x&&c.push([w].concat(x.symbol.color))}}else{l=Math.floor(e.minValue);for(let h=0;h<o.length;h++){const f=o[h];for(let d=l;d<f.classMaxValue;d++)c.push([d].concat(f.symbol.color));l=Math.ceil(f.classMaxValue)}a.classMaxValue===l&&c.push([a.classMaxValue].concat(a.symbol.color))}const u=nd({colormap:c,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:u},this.canRenderInWebGL=this._isColormapSupportedByWebGL(u==null?void 0:u.indexedColormap),{success:!0}}_isColormapSupportedByWebGL(e){return!!(e!=null&&e.length)&&e.length<=16384}_isHistogramRequired(e){return e==="percentClip"||e==="histogramEqualization"}_isValidRasterStatistics(e){return e!=null&&e.length>0&&e[0].min!=null&&e[0].max!=null}_updateStretchRenderer(e){var u,h;let{stretchType:t,dra:n}=e;if(!(t==="none"||(u=e.statistics)!=null&&u.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||n))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const r=e.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(e.stretchType)||r!=null&&r.length||n||(t="minMax");const{computeGamma:i,useGamma:s,colorRamp:o}=e;let{gamma:a}=e;if(s&&i&&!(a!=null&&a.length)){const f=(h=e.statistics)!=null&&h.length?e.statistics:this.rasterInfo.statistics;a=Cue(this.rasterInfo.pixelType,f)}const l=this.rasterInfo.pixelType,c=!n&&["u8","u16","s8","s16"].includes(l);if(t==="histogramEqualization"){const f=r.map(d=>JF(d));this.lookup={rendererJSON:e,histogramLut:f}}else if(c){const f=ba(e,{rasterInfo:this.rasterInfo}),d=e5({pixelType:l,...f,gamma:s?a:null,rounding:"floor"});this.lookup={rendererJSON:e,stretchLut:d}}if(o&&!this._isStretchColorRampNoop(o)){const f=fu(o,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=nd({colormap:f}),this.lookup.rendererJSON=e}return this.lookup.gamma=s&&(a!=null&&a.length)?a:null,this.canRenderInWebGL=!0,{success:!0}}_isStretchColorRampNoop(e){return e.type==="algorithmic"&&["0,0,0,255","0,0,0"].includes(e.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(e.toColor.join(","))}_generateStretchWebGLParams(e,t,n){var S;let r=null,i=null;const s=(S=this.lookup)==null?void 0:S.colormapLut;t.colorRamp&&s&&(r=s.indexedColormap,i=s.offset),t.stretchType==="histogramEqualization"&&(t={...t,stretchType:"minMax"});const{gamma:o}=this.lookup,a=!!(t.useGamma&&o&&o.some(_=>_!==1)),{minCutOff:l,maxCutOff:c,outMin:u,outMax:h}=ba(t,{rasterInfo:this.rasterInfo,pixelBlock:e,bandIds:n});let f=0;e!=null&&(f=e.getPlaneCount(),f===2&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));const{bandCount:d}=this.rasterInfo,g=Math.min(3,(n==null?void 0:n.length)||f||d,d),y=new Float32Array(g),w=r||a?1:255;let v;for(v=0;v<l.length;v++)y[v]=c[v]===l[v]?0:(h-u)/(c[v]-l[v])/w;const x=new Float32Array(g);if(a&&o)for(v=0;v<g;v++)o[v]>1?o[v]>2?x[v]=6.5+(o[v]-2)**2.5:x[v]=6.5+100*(2-o[v])**4:x[v]=1;return{bandCount:g,outMin:u/w,outMax:h/w,minCutOff:l,maxCutOff:c,factor:y,useGamma:a,gamma:a?o:[1,1,1],gammaCorrection:a?x:[1,1,1],colormap:r,colormapOffset:i,stretchType:t.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(e,t=!1,n={x:0,y:0}){var c,u;let r=null,i=null;const s=(c=this.lookup)==null?void 0:c.colormapLut;e.colorRamp&&s&&(r=s.indexedColormap,i=s.offset);const o={...e,isGCS:t,resolution:n},a=qF(o),l=(u=this.rasterInfo.statistics)==null?void 0:u[0];return{...a,minValue:(l==null?void 0:l.min)??0,maxValue:(l==null?void 0:l.max)??8e3,hillshadeType:e.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:r,colormapOffset:i}}_generateVectorFieldWebGLParams(e){var v,x,S;const{style:t,inputUnit:n,outputUnit:r,visualVariables:i,symbolTileSize:s,flowRepresentation:o}=e;let a;const l=((v=this.rasterInfo.statistics)==null?void 0:v[0].min)??0,c=((x=this.rasterInfo.statistics)==null?void 0:x[0].max)??50,u=(i==null?void 0:i.find(_=>_.type==="sizeInfo"))??{type:"sizeInfo",field:"Magnitude",maxDataValue:c,maxSize:.8*s,minDataValue:l,minSize:.2*s},h=u.minDataValue??l,f=u.maxDataValue??c,d=u.maxSize!=null&&u.minSize!=null?[u.minSize/s,u.maxSize/s]:[.2,.8];if(t==="wind_speed"){const _=(d[0]+d[1])/2;d[0]=d[1]=_}const g=h!=null&&f!=null?[h,f]:null;if(t==="classified_arrow")if(h!=null&&f!=null&&u!=null){a=[];const _=(u.maxDataValue-u.minDataValue)/5;for(let M=0;M<6;M++)a.push(u.minDataValue+_*M)}else a=[0,1e-6,3.5,7,10.5,14];const y=o==="flow_to"==(t==="ocean_current_kn"||t==="ocean_current_m")?0:Math.PI,w=i==null?void 0:i.find(_=>_.type==="rotationInfo");return{breakValues:a,dataRange:g,inputUnit:n,outputUnit:r,symbolTileSize:s,symbolPercentRange:d,style:t||"single_arrow",rotation:y,rotationType:(S=this.rasterInfo.storageInfo)!=null&&S.tileInfo&&this.rasterInfo.dataType==="vector-uv"?"geographic":(w==null?void 0:w.rotationType)||e.rotationType,type:"vectorField"}}};function xE(e){return dt(e)&&e.validPixelCount!==0}p([b({json:{write:!0}})],ac.prototype,"rendererJSON",void 0),p([b({type:ll,json:{write:!0}})],ac.prototype,"rasterInfo",void 0),p([b({json:{write:!0}})],ac.prototype,"lookup",void 0),p([b()],ac.prototype,"canRenderInWebGL",void 0),ac=p([L("esri.renderers.support.RasterSymbolizer")],ac);const Lfe=ac;var b5;const zp=yn()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),w5=yn()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});function Ffe(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return w5.fromJSON(t)}let Vt=b5=class extends re{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method=null,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=null,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending!=null?t.ascending:t.sortAscending==null||t.sortAscending}get itemRenderingRule(){return s1(ie.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0}),this._get("itemRasterFunction")}set itemRenderingRule(e){s1(ie.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0}),this._set("itemRasterFunction",e)}readMethod(e,t){return Ffe(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,n){e!=null&&(e=e.filter(({variableName:r,dimensionName:i})=>r&&r!=="*"||i)).length&&(t[n]=e.map(r=>r.toJSON()))}readOperation(e,t){var s;const n=t.mosaicOperation,r=(s=t.mosaicOperator)==null?void 0:s.toLowerCase(),i=n||(r?zp.toJSON(r):null);return zp.fromJSON(i)||"first"}castSortValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new b5({ascending:this.ascending,itemRasterFunction:J(this.itemRasterFunction),lockRasterIds:J(this.lockRasterIds),method:this.method,multidimensionalDefinition:J(this.multidimensionalDefinition),objectIds:J(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:J(this.viewpoint),where:this.where})}};p([b({type:Boolean,json:{write:!0}})],Vt.prototype,"ascending",void 0),p([ge("ascending",["ascending","sortAscending"])],Vt.prototype,"readAscending",null),p([b({type:pu,json:{name:"itemRenderingRule",write:!0}})],Vt.prototype,"itemRasterFunction",void 0),p([b({type:pu})],Vt.prototype,"itemRenderingRule",null),p([b({type:[Be],json:{write:{overridePolicy(){return{enabled:this.method==="lock-raster"}}}}})],Vt.prototype,"lockRasterIds",void 0),p([b({type:String,json:{type:w5.jsonValues,write:{target:"mosaicMethod",writer:w5.write}}})],Vt.prototype,"method",void 0),p([ge("method",["mosaicMethod","defaultMosaicMethod"])],Vt.prototype,"readMethod",null),p([b({type:[du],json:{write:!0}})],Vt.prototype,"multidimensionalDefinition",void 0),p([xe("multidimensionalDefinition")],Vt.prototype,"writeMultidimensionalDefinition",null),p([b({type:[Be],json:{name:"fids",write:!0}})],Vt.prototype,"objectIds",void 0),p([b({json:{type:zp.jsonValues,read:{reader:zp.read},write:{target:"mosaicOperation",writer:zp.write}}})],Vt.prototype,"operation",void 0),p([ge("operation",["mosaicOperation","mosaicOperator"])],Vt.prototype,"readOperation",null),p([b({type:String,json:{write:{overridePolicy(){return{enabled:this.method==="attribute"}}}}})],Vt.prototype,"sortField",void 0),p([b({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method==="attribute",allowNull:!0}}}}})],Vt.prototype,"sortValue",void 0),p([gt("sortValue")],Vt.prototype,"castSortValue",null),p([b({type:ce,json:{write:!0}})],Vt.prototype,"viewpoint",void 0),p([b({type:String,json:{write:!0}})],Vt.prototype,"where",void 0),Vt=b5=p([L("esri.layers.support.MosaicRule")],Vt);const jfe=Vt;var v5;let Si=v5=class extends re{constructor(){super(...arguments),this.geometry=null,this.mosaicRule=null,this.rasterFunction=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,n){e!=null&&(t.geometryType=H2(e),t[n]=e.toJSON())}get renderingRule(){return s1(ie.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._get("rasterFunction")}set renderingRule(e){s1(ie.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._set("rasterFunction",e)}clone(){return new v5(J({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};p([b({types:q2,json:{read:$f}})],Si.prototype,"geometry",void 0),p([xe("geometry")],Si.prototype,"writeGeometry",null),p([b({type:jfe,json:{write:!0}})],Si.prototype,"mosaicRule",void 0),p([b({type:pu})],Si.prototype,"renderingRule",null),p([b({type:pu,json:{write:!0,name:"renderingRule"}})],Si.prototype,"rasterFunction",void 0),p([b({type:ce,json:{write:!0}})],Si.prototype,"pixelSize",void 0),p([b({json:{write:!0}})],Si.prototype,"raster",void 0),p([b({type:ws,json:{read:{source:"time"},write:{target:"time"}}})],Si.prototype,"timeExtent",void 0),Si=v5=p([L("esri.rest.support.ImageHistogramParameters")],Si);const zfe=Si,Ti=ie.getLogger("esri.views.2d.engine.flow.dataUtils"),Bfe=10;async function Ufe(e,t,n,r){const i=performance.now(),s=Vfe(t,n),o=performance.now(),a=Wfe(t,s,n.width,n.height),l=performance.now(),c=qfe(a,!0),u=performance.now(),h=e==="Streamlines"?Jfe(c,Bfe):Zfe(c),f=performance.now();return X("esri-2d-profiler")&&(Ti.info("I.1","_createFlowFieldFromData (ms)",Math.round(o-i)),Ti.info("I.2","_getStreamlines (ms)",Math.round(l-o)),Ti.info("I.3","createAnimatedLinesData (ms)",Math.round(u-l)),Ti.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(f-u)),Ti.info("I.5","createFlowMesh (ms)",Math.round(f-i)),Ti.info("I.6","Mesh size (bytes)",h.vertexData.buffer.byteLength+h.indexData.buffer.byteLength)),await Promise.resolve(),Hn(r),h}function Vfe(e,t){const n=Hfe(t.data,t.width,t.height,e.smoothing);return e.interpolate?(r,i)=>{const s=Math.floor(r),o=Math.floor(i);if(s<0||s>=t.width)return[0,0];if(o<0||o>=t.height)return[0,0];const a=r-s,l=i-o,c=s,u=o,h=s<t.width-1?s+1:s,f=o<t.height-1?o+1:o,d=n[2*(u*t.width+c)],g=n[2*(u*t.width+h)],y=n[2*(f*t.width+c)],w=n[2*(f*t.width+h)],v=n[2*(u*t.width+c)+1],x=n[2*(u*t.width+h)+1];return[(d*(1-l)+y*l)*(1-a)+(g*(1-l)+w*l)*a,(v*(1-l)+n[2*(f*t.width+c)+1]*l)*(1-a)+(x*(1-l)+n[2*(f*t.width+h)+1]*l)*a]}:(r,i)=>{const s=Math.round(r),o=Math.round(i);return s<0||s>=t.width||o<0||o>=t.height?[0,0]:[n[2*(o*t.width+s)],n[2*(o*t.width+s)+1]]}}function Gfe(e,t,n,r,i,s,o,a,l){const c=[];let u=n,h=r,f=0,[d,g]=t(u,h);d*=e.velocityScale,g*=e.velocityScale;const y=Math.sqrt(d*d+g*g);let w,v;c.push({x:u,y:h,t:f,speed:y});for(let x=0;x<e.verticesPerLine;x++){let[S,_]=t(u,h);S*=e.velocityScale,_*=e.velocityScale;const M=Math.sqrt(S*S+_*_);if(M<e.minSpeedThreshold)return c;const $=S/M,T=_/M;if(u+=$*e.segmentLength,h+=T*e.segmentLength,f+=e.segmentLength/M,Math.acos($*w+T*v)>e.maxTurnAngle)return c;if(e.collisions){const A=Math.round(u*l),I=Math.round(h*l);if(A<0||A>o-1||I<0||I>a-1)return c;const E=s[I*o+A];if(E!==-1&&E!==i)return c;s[I*o+A]=i}c.push({x:u,y:h,t:f,speed:M}),w=$,v=T}return c}function Wfe(e,t,n,r){const i=[],s=new Oh,o=1/Math.max(e.lineCollisionWidth,1),a=Math.round(n*o),l=Math.round(r*o),c=new Int32Array(a*l);for(let h=0;h<c.length;h++)c[h]=-1;const u=[];for(let h=0;h<r;h+=e.lineSpacing)for(let f=0;f<n;f+=e.lineSpacing)u.push({x:f,y:h,sort:s.getFloat()});u.sort((h,f)=>h.sort-f.sort);for(const{x:h,y:f}of u)if(s.getFloat()<e.density){const d=Gfe(e,t,h,f,i.length,c,a,l,o);if(d.length<2)continue;i.push(d)}return i}function Hfe(e,t,n,r){if(r===0)return e;const i=Math.round(3*r),s=new Array(2*i+1);let o=0;for(let c=-i;c<=i;c++){const u=Math.exp(-c*c/(r*r));s[c+i]=u,o+=u}for(let c=-i;c<=i;c++)s[c+i]/=o;const a=new Float32Array(e.length);for(let c=0;c<n;c++)for(let u=0;u<t;u++){let h=0,f=0;for(let d=-i;d<=i;d++){if(u+d<0||u+d>=t)continue;const g=s[d+i];h+=g*e[2*(c*t+(u+d))],f+=g*e[2*(c*t+(u+d))+1]}a[2*(c*t+u)]=h,a[2*(c*t+u)+1]=f}const l=new Float32Array(e.length);for(let c=0;c<t;c++)for(let u=0;u<n;u++){let h=0,f=0;for(let d=-i;d<=i;d++){if(u+d<0||u+d>=n)continue;const g=s[d+i];h+=g*a[2*((u+d)*t+c)],f+=g*a[2*((u+d)*t+c)+1]}l[2*(u*t+c)]=h,l[2*(u*t+c)+1]=f}return l}function qfe(e,t){const n=new Oh,r=e.reduce((l,c)=>l+c.length,0),i=new Float32Array(4*r),s=new Array(e.length);let o=0,a=0;for(const l of e){const c=o;for(const u of l)i[4*o]=u.x,i[4*o+1]=u.y,i[4*o+2]=u.t,i[4*o+3]=u.speed,o++;s[a++]={startVertex:c,numberOfVertices:l.length,totalTime:l[l.length-1].t,timeSeed:t?n.getFloat():0}}return{lineVertices:i,lineDescriptors:s}}function Jfe(e,t){const{lineVertices:r,lineDescriptors:i}=e;let s=0,o=0;for(const d of i)s+=2*d.numberOfVertices,o+=6*(d.numberOfVertices-1);const a=new Float32Array(s*9),l=new Uint32Array(o);let c=0,u=0;function h(){l[u++]=c-2,l[u++]=c,l[u++]=c-1,l[u++]=c,l[u++]=c+1,l[u++]=c-1}function f(d,g,y,w,v,x,S,_){const M=c*9;let $=0;a[M+$++]=d,a[M+$++]=g,a[M+$++]=1,a[M+$++]=y,a[M+$++]=x,a[M+$++]=S,a[M+$++]=w/2,a[M+$++]=v/2,a[M+$++]=_,c++,a[M+$++]=d,a[M+$++]=g,a[M+$++]=-1,a[M+$++]=y,a[M+$++]=x,a[M+$++]=S,a[M+$++]=-w/2,a[M+$++]=-v/2,a[M+$++]=_,c++}for(const d of i){const{totalTime:g,timeSeed:y}=d;let w=null,v=null,x=null,S=null,_=null,M=null;for(let $=0;$<d.numberOfVertices;$++){const T=r[4*(d.startVertex+$)],A=r[4*(d.startVertex+$)+1],I=r[4*(d.startVertex+$)+2],E=r[4*(d.startVertex+$)+3];let O=null,P=null,j=null,V=null;if($>0){O=T-w,P=A-v;const U=Math.sqrt(O*O+P*P);if(O/=U,P/=U,$>1){let q=O+_,C=P+M;const R=Math.sqrt(q*q+C*C);q/=R,C/=R;const N=Math.min(1/(q*O+C*P),t);q*=N,C*=N,j=-C,V=q}else j=-P,V=O;j!==null&&V!==null&&(f(w,v,x,j,V,g,y,E),h())}w=T,v=A,x=I,_=O,M=P,S=E}f(w,v,x,-M,_,g,y,S)}return{vertexData:a,indexData:l}}function Zfe(e){const{lineVertices:i,lineDescriptors:s}=e;let o=0,a=0;for(const U of s){const q=U.numberOfVertices-1;o+=4*q*2,a+=6*q*2}const l=new Float32Array(o*16),c=new Uint32Array(a);let u,h,f,d,g,y,w,v,x,S,_,M,$,T,A=0,I=0;function E(){c[I++]=A-8,c[I++]=A-7,c[I++]=A-6,c[I++]=A-7,c[I++]=A-5,c[I++]=A-6,c[I++]=A-4,c[I++]=A-3,c[I++]=A-2,c[I++]=A-3,c[I++]=A-1,c[I++]=A-2}function O(U,q,C,R,N,D,z,G,W,K,oe,Se,Ee,Ze){const ye=A*16;let de=0;for(const $e of[1,2])for(const ai of[1,2,3,4])l[ye+de++]=U,l[ye+de++]=q,l[ye+de++]=C,l[ye+de++]=R,l[ye+de++]=z,l[ye+de++]=G,l[ye+de++]=W,l[ye+de++]=K,l[ye+de++]=$e,l[ye+de++]=ai,l[ye+de++]=Ee,l[ye+de++]=Ze,l[ye+de++]=N/2,l[ye+de++]=D/2,l[ye+de++]=oe/2,l[ye+de++]=Se/2,A++}function P(U,q){let C=x+_,R=S+M;const N=Math.sqrt(C*C+R*R);C/=N,R/=N;const D=x*C+S*R;C/=D,R/=D;let z=_+$,G=M+T;const W=Math.sqrt(z*z+G*G);z/=W,G/=W;const K=_*z+M*G;z/=K,G/=K,O(u,h,f,d,-R,C,g,y,w,v,-G,z,U,q),E()}function j(U,q,C,R,N,D){if(x=_,S=M,_=$,M=T,x==null&&S==null&&(x=_,S=M),g!=null&&y!=null){$=U-g,T=q-y;const z=Math.sqrt($*$+T*T);$/=z,T/=z}x!=null&&S!=null&&P(N,D),u=g,h=y,f=w,d=v,g=U,y=q,w=C,v=R}function V(U,q){x=_,S=M,_=$,M=T,x==null&&S==null&&(x=_,S=M),x!=null&&S!=null&&P(U,q)}for(const U of s){u=null,h=null,f=null,d=null,g=null,y=null,w=null,v=null,x=null,S=null,_=null,M=null,$=null,T=null;const{totalTime:q,timeSeed:C}=U;for(let R=0;R<U.numberOfVertices;R++)j(i[4*(U.startVertex+R)],i[4*(U.startVertex+R)+1],i[4*(U.startVertex+R)+2],i[4*(U.startVertex+R)+3],q,C);V(q,C)}return{vertexData:l,indexData:c}}function SE(e,t){const n=t.pixels,{width:r,height:i}=t,s=new Float32Array(r*i*2),o=t.mask||new Uint8Array(r*i*2);if(t.mask||o.fill(255),e==="vector-uv")for(let a=0;a<r*i;a++)s[2*a]=n[0][a],s[2*a+1]=-n[1][a];else if(e==="vector-magdir")for(let a=0;a<r*i;a++){const l=n[0][a],c=j0(n[1][a]),u=Math.cos(c-Math.PI/2),h=Math.sin(c-Math.PI/2);s[2*a]=u*l,s[2*a+1]=h*l}return{data:s,mask:o,width:r,height:i}}async function k$e(e,t,n,r,i,s){const o=performance.now(),a=yr(t.spatialReference);if(!a){const _=await _E(e,t,n,r,i,s);return X("esri-2d-profiler")&&Ti.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-o)),X("esri-2d-profiler")&&Ti.info("I.9","Number of parts",1),_}const[l,c]=a.valid,u=c-l,h=Math.ceil(t.width/u),f=t.width/h,d=Math.round(n/h);let g=t.xmin;const y=[],w=performance.now();for(let _=0;_<h;_++){const M=new Me({xmin:g,xmax:g+f,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference});y.push(_E(e,M,d,r,i,s)),g+=f}const v=await Promise.all(y);X("esri-2d-profiler")&&Ti.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-w)),X("esri-2d-profiler")&&Ti.info("I.9","Number of parts",v.length);const x={data:new Float32Array(n*r*2),mask:new Uint8Array(n*r),width:n,height:r};let S=0;for(const _ of v){for(let M=0;M<_.height;M++)for(let $=0;$<_.width;$++)S+$>=n||(x.data[2*(M*n+S+$)]=_.data[2*(M*_.width+$)],x.data[2*(M*n+S+$)+1]=_.data[2*(M*_.width+$)+1],x.mask[M*n+S+$]=_.mask[M*_.width+$]);S+=_.width}return X("esri-2d-profiler")&&Ti.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-o)),x}async function _E(e,t,n,r,i,s){var c;const o={requestProjectedLocalDirections:!0,signal:s};if(i!=null&&(o.timeExtent=i),e.type==="imagery"){await e.load({signal:s});const u=e.rasterInfo.dataType,h=await e.fetchImage(t,n,r,o);return((c=h==null?void 0:h.pixelData)==null?void 0:c.pixelBlock)==null?{data:new Float32Array(n*r*2),mask:new Uint8Array(n*r),width:n,height:r}:SE(u,h.pixelData.pixelBlock)}await e.load({signal:s});const a=e.rasterInfo.dataType,l=await e.fetchPixels(t,n,r,o);return(l==null?void 0:l.pixelBlock)==null?{data:new Float32Array(n*r*2),mask:new Uint8Array(n*r),width:n,height:r}:SE(a,l.pixelBlock)}const ME=ie.getLogger("esri.layers.mixins.ImageryTileMixin"),Yfe=e=>{let t=class extends e{constructor(...r){var i,s;super(...r),this._isConstructedFromFunctionRaster=!1,this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this.bandIds=null,this.copyright=null,this.interpolation="nearest",this.multidimensionalSubset=null,this.raster=null,this.rasterInfo=null,this.sourceJSON=null,this.spatialReference=null,this.symbolizer=null,this._isConstructedFromFunctionRaster=((s=(i=r[0])==null?void 0:i.raster)==null?void 0:s.datasetFormat)==="Function"}get fullExtent(){var r;return(r=this.rasterInfo)==null?void 0:r.extent}set multidimensionalDefinition(r){this._set("multidimensionalDefinition",r),this.updateRenderer()}set rasterFunction(r){var i;((i=r==null?void 0:r.functionName)==null?void 0:i.toLowerCase())==="none"&&(r=void 0),this._set("rasterFunction",r),this.updateRasterFunction()}set url(r){this._set("url",j$(r,ME))}set renderer(r){r==null&&this.rasterFunction==null?this._configDefaultRenderer("override"):(this._set("renderer",r),this.updateRenderer())}readRenderer(r,i,s){var a,l;const o=(l=(a=i==null?void 0:i.layerDefinition)==null?void 0:a.drawingInfo)==null?void 0:l.renderer;return $ae(o,s)||void 0}async convertVectorFieldData(r,i){if(r==null||!this.rasterInfo)return null;const s=this._rasterJobHandler.instance,o=this.rasterInfo.dataType;return s?s.convertVectorFieldData({pixelBlock:r,dataType:o},i):e2(r,o)}async computeStatisticsHistograms(r,i){r=za(zfe,r).clone();const{rasterInfo:s}=this,{geometry:o}=r;if(o==null)throw new Y("imagery-tile-mixin:compute-statistics-histograms","geometry must be specified");let a=o;const{spatialReference:l}=s;o.spatialReference.equals(l)||(await A_(),a=o.type==="extent"?Uc(o,l):Tle(o,l));const c=r.pixelSize??new ce({x:s.pixelSize.x,y:s.pixelSize.y,spatialReference:l}),{extent:u,width:h,height:f}=Rce(s,a,c),d=await this.fetchPixels(u,h,f,{...i,interpolation:"nearest"});if(d.pixelBlock==null)throw new Y("imagery-tile-mixin:compute-statistics-histograms","failed to fetch pixels");const g=await Ece(d.pixelBlock,u,a),y=this._rasterJobHandler.instance;return y?y.computeStatisticsHistograms({pixelBlock:g},i):Rue(g)}async createFlowMesh(r,i){const s=this._rasterJobHandler.instance;return s?s.createFlowMesh(r,i):Ufe(r.meshType,r.simulationSettings,r.flowData,i.signal!=null?i.signal:new AbortController().signal)}normalizeRasterFetchOptions(r){var a,l;const{multidimensionalInfo:i}=this.rasterInfo??{};if(i==null)return r;let s=r.multidimensionalDefinition||this.multidimensionalDefinition;s!=null&&s.length||(s=Tk(this.raster.rasterInfo,{multidimensionalSubset:this.multidimensionalSubset}));const o=r.timeExtent||this.timeExtent;if(s!=null&&o!=null&&(o.start!=null||o.end!=null)){s=s.map(v=>v.clone());const c=(l=(a=i.variables.find(({name:v})=>v===s[0].variableName))==null?void 0:a.dimensions)==null?void 0:l.find(({name:v})=>v==="StdTime"),u=s.find(({dimensionName:v})=>v==="StdTime");if(!c||!u)return{...r,multidimensionalDefinition:null};const{start:h,end:f}=o,d=h==null?null:h.getTime(),g=f==null?null:f.getTime(),y=d??g,w=g??d;if(c.values!=null){const v=c.values.filter(x=>{if(Array.isArray(x)){if(y===w)return x[0]<=y&&x[1]>=y;const S=x[0]<=y&&x[1]>y||x[0]<w&&x[1]>=w,_=x[0]>=y&&x[1]<=w||x[0]<y&&x[1]>w;return S||_}return y===w?x===y:x>=y&&x<=w});if(v.length){const x=v.sort((S,_)=>{const M=Array.isArray(S)?S[0]:S,$=Array.isArray(S)?S[1]:S,T=Array.isArray(_)?_[0]:_,A=Array.isArray(_)?_[1]:_;return y===w?M-T:Math.abs($-w)-Math.abs(A-w)})[0];u.values=[x]}else s=null}else if(c.hasRegularIntervals&&c.extent){const[v,x]=c.extent;y>x||w<v?s=null:u.values=y===w?[y]:[Math.max(v,y),Math.min(x,w)]}}return s!=null&&n4(s,this.multidimensionalSubset)?{...r,multidimensionalDefinition:null}:{...r,multidimensionalDefinition:s}}async updateRasterFunction(){var u,h,f;if(!this.loaded||this.type!=="imagery-tile"||!this.rasterFunction&&!this._cachedRasterFunctionJson||JSON.stringify(this.rasterFunction)===JSON.stringify(this._cachedRasterFunctionJson))return;if(this._isConstructedFromFunctionRaster&&this.raster.datasetFormat==="Function"){const d=this.raster.rasterFunction.toJSON();return!this.rasterFunction&&d&&this._set("rasterFunction",pu.fromJSON(d)),void(this._cachedRasterFunctionJson=(u=this.rasterFunction)==null?void 0:u.toJSON())}let r,i=this.raster,s=!1;i.datasetFormat==="Function"?(r=i.primaryRasters.rasters,i=r[0],s=!0):r=[i];const{rasterFunction:o}=this;if(o){const d={raster:i};r.length>1&&r.forEach(w=>d[w.url]=w);const g=d5(((h=o.functionDefinition)==null?void 0:h.toJSON())??o.toJSON(),d),y=new G_({rasterFunction:g});y.rasterJobHandler=this._rasterJobHandler.instance,await y.open(),this._cachedRasterFunctionJson=(f=this.rasterFunction)==null?void 0:f.toJSON(),this.raster=y}else this.raster=i,this._cachedRasterFunctionJson=null,await i.when();if(this._cachedRendererJson=null,!s&&!o)return;const{bandIds:a}=this,{bandCount:l}=this.raster.rasterInfo,c=a!=null&&a.length?a.some(d=>d>=l):l>=3;a&&(c||this.renderer&&this.renderer.type!=="raster-stretch")&&this._set("bandIds",null),this._configDefaultRenderer("auto")}async updateRenderer(){const{loaded:r,symbolizer:i}=this;if(!r||!i||!this.renderer)return;const{rasterInfo:s}=this.raster,o=$_(s,{multidimensionalDefinition:this.multidimensionalDefinition,multidimensionalSubset:this.multidimensionalSubset}),a=o==null?void 0:o.name,l=vE({...this.renderer.toJSON(),variableName:a});if(JSON.stringify(this._cachedRendererJson)===JSON.stringify(l))return;const c=this._rasterJobHandler.instance;c&&(i.rasterInfo=y5(s,a),i.rendererJSON=l,i.bind(),await c.updateSymbolizer(i),this._cachedRendererJson=l)}async applyRenderer(r,i){const s=r==null?void 0:r.pixelBlock;if(!(s!=null&&s.pixels&&s.pixels.length>0))return null;let o;await this.updateRenderer();const a=this._rasterJobHandler.instance,l=this.bandIds??[];return o=a?await a.symbolize({...r,simpleStretchParams:i,bandIds:l}):this.symbolizer.symbolize({...r,simpleStretchParams:i,bandIds:l}),o}getTileUrl(r,i,s){return this.raster.datasetFormat==="RasterTileServer"?`${this.url}/tile/${r}/${i}/${s}`:""}getCompatibleTileInfo(r,i,s=!1){if(!this.loaded||i==null)return null;if(s&&r.equals(this.spatialReference))return this.tileInfo;const o=yr(r);return fo.create({size:256,spatialReference:r,origin:o?{x:o.origin[0],y:o.origin[1]}:{x:i.xmin,y:i.ymax}})}getCompatibleFullExtent(r){return this.loaded?(this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(r)||(this._compatibleFullExtent=this.raster.computeExtent(r)),this._compatibleFullExtent):null}async fetchTile(r,i,s,o={}){var l;if(n(this),o.requestAsImageElement){const c=this.getTileUrl(r,i,s);return He(c,{responseType:"image",query:{...this.refreshParameters,...this.raster.ioConfig.customFetchParameters},signal:o.signal}).then(u=>u.data)}const{rasterInfo:a}=this;if(a.multidimensionalInfo!=null&&(o=this.normalizeRasterFetchOptions(o)).multidimensionalDefinition==null){const c=o.tileInfo||a.storageInfo.tileInfo;return{extent:this.raster.getTileExtentFromTileInfo(r,i,s,c),pixelBlock:null}}return await this._initJobHandler(),await this.updateRasterFunction(),((l=this.renderer)==null?void 0:l.type)==="raster-shaded-relief"&&(o={...o,buffer:{cols:1,rows:1}}),this.raster.fetchTile(r,i,s,o)}async fetchPixels(r,i,s,o={}){return this.rasterInfo.multidimensionalInfo!=null&&(o=this.normalizeRasterFetchOptions(o)).multidimensionalDefinition==null?{extent:r,pixelBlock:null}:(await this._initJobHandler(),await this.updateRasterFunction(),i=Math.round(i),s=Math.round(s),this.raster.fetchPixels(r,i,s,o))}async identify(r,i={}){var l;const{raster:s,rasterInfo:o}=this;if(o.multidimensionalInfo!=null&&!(o.hasMultidimensionalTranspose&&(AF(i.multidimensionalDefinition)||i.transposedVariableName||i.timeExtent))&&(i=this.normalizeRasterFetchOptions(i)).multidimensionalDefinition==null)return{location:r,value:null};const a=(l=this.multidimensionalSubset)==null?void 0:l.areaOfInterest;if(a&&!a.contains(r))throw new Y("imagery-tile-mixin:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");return s.identify(r,i)}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}hasStandardTime(){var o,a,l;const r=(o=this.rasterInfo)==null?void 0:o.multidimensionalInfo;if(r==null||((a=this.rasterInfo)==null?void 0:a.dataType)!=="standard-time")return!1;const i=this.multidimensionalDefinition,s=(l=i==null?void 0:i[0])==null?void 0:l.variableName;return r.variables.some(c=>c.name===s&&(!(i!=null&&i[0].dimensionName)||c.dimensions.some(u=>u.name==="StdTime")))}getStandardTimeValue(r){return new Date(24*(r-25569)*3600*1e3).toString()}getMultidimensionalSubsetVariables(r){var s;const i=r??((s=this.rasterInfo)==null?void 0:s.multidimensionalInfo);return gle(this.multidimensionalSubset,i)}_configDefaultSettings(){this._configDefaultInterpolation(),this.multidimensionalDefinition||(this.multidimensionalDefinition=Tk(this.raster.rasterInfo,{multidimensionalSubset:this.multidimensionalSubset})),this.rasterFunction&&this.raster.datasetFormat==="Function"&&(this._cachedRasterFunctionJson=this.rasterFunction.toJSON()),this._configDefaultRenderer()}_initJobHandler(){if(this._rasterJobHandler.connectionPromise!=null)return this._rasterJobHandler.connectionPromise;const r=new hle;return this._rasterJobHandler.connectionPromise=r.initialize().then(async()=>{n(this),this._rasterJobHandler.instance=r,this.raster.rasterJobHandler=r,this.raster.datasetFormat==="Function"&&this.raster.syncJobHandler(),this.rasterFunction&&await this.updateRasterFunction().catch(()=>{}),this.renderer&&this.updateRenderer()}).catch(()=>{}),this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null,this.raster&&(this.raster.rasterJobHandler=null)}_configDefaultInterpolation(){var r;if(this.interpolation==null){n(this);const{raster:i}=this,s=Afe(i.rasterInfo,i.tileType,(r=this.sourceJSON)==null?void 0:r.defaultResamplingMethod);this._set("interpolation",s)}}_configDefaultRenderer(r="no"){var u,h;n(this);const{rasterInfo:i}=this.raster;!this.bandIds&&i.bandCount>1&&(this.bandIds=l7(i));const s=$_(i,{multidimensionalDefinition:this.multidimensionalDefinition,multidimensionalSubset:this.multidimensionalSubset}),o=s==null?void 0:s.name;if(!this.renderer||r==="override"){const f=bE(i,{bandIds:this.bandIds,variableName:o}),d=i.statistics,g=d&&d.length>0?d[0]:null,y=(g==null?void 0:g.max)??0,w=(g==null?void 0:g.min)??0;this.raster.datasetFormat==="WCSServer"&&f.type==="raster-stretch"&&(y>1e24||w<-1e24)&&(f.dynamicRangeAdjustment=!0,f.statistics=null,f.stretchType==="none"&&(f.stretchType="min-max")),this.renderer=f}const a=vE({...this.renderer.toJSON(),variableName:o}),l=y5(i,o);this.symbolizer?(this.symbolizer.rendererJSON=a,this.symbolizer.rasterInfo=l):this.symbolizer=new Lfe({rendererJSON:a,rasterInfo:l});const c=this.symbolizer.bind();if(c.success){if(r==="auto"){const{colormap:f}=this.raster.rasterInfo,d=this.renderer;if(f!=null&&d.type==="raster-colormap"){const g=bE(this.raster.rasterInfo);JSON.stringify(g)!==JSON.stringify(d)&&this._configDefaultRenderer("override")}else if(d.type==="raster-stretch"){const g=(u=this.bandIds)==null?void 0:u.length,y=(h=d.statistics)==null?void 0:h.length;!d.dynamicRangeAdjustment&&y&&g&&y!==g&&this._configDefaultRenderer("override")}}}else ME.warn("imagery-tile-mixin",c.error||"The given renderer is not supported by the layer."),r==="auto"&&this._configDefaultRenderer("override")}};function n(r){if(!r.raster||!r.rasterInfo)throw new Y("imagery-tile","no raster")}return p([b({clonable:!1})],t.prototype,"_cachedRendererJson",void 0),p([b({clonable:!1})],t.prototype,"_cachedRasterFunctionJson",void 0),p([b({clonable:!1})],t.prototype,"_compatibleFullExtent",void 0),p([b({clonable:!1})],t.prototype,"_isConstructedFromFunctionRaster",void 0),p([b({clonable:!1})],t.prototype,"_rasterJobHandler",void 0),p([b()],t.prototype,"bandIds",void 0),p([b({json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),p([b({json:{read:!1}})],t.prototype,"fullExtent",null),p([b()],t.prototype,"interpolation",void 0),p([b()],t.prototype,"ioConfig",void 0),p([b({type:[du],json:{write:!0}})],t.prototype,"multidimensionalDefinition",null),p([b({type:Pae,json:{write:!0}})],t.prototype,"multidimensionalSubset",void 0),p([b()],t.prototype,"raster",void 0),p([b({type:pu,json:{name:"renderingRule",write:!0}})],t.prototype,"rasterFunction",null),p([b()],t.prototype,"rasterInfo",void 0),p([b()],t.prototype,"sourceJSON",void 0),p([b({readOnly:!0,type:we,json:{read:!1}})],t.prototype,"spatialReference",void 0),p([b({type:fo})],t.prototype,"tileInfo",void 0),p([b(mF)],t.prototype,"url",null),p([b({types:m_,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(){var i;const r=((i=this.renderer)==null?void 0:i.type)==="raster-stretch"&&this.renderer.stretchType==="none"&&!this.renderer.useGamma;return{enabled:!this.loaded||this.raster.tileType==="Raster"||!r}}},origins:{"web-scene":{types:g_,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:r=>({enabled:r&&r.type!=="vector-field"&&r.type!=="flow"})}}}}})],t.prototype,"renderer",null),p([ge("renderer")],t.prototype,"readRenderer",null),p([b({clonable:!1})],t.prototype,"symbolizer",void 0),t=p([L("esri.layers.ImageryTileMixin")],t),t},$E={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},TE={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},AE={ArcGISFeatureLayer:!0},Kfe={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":$E,"web-map/basemap":TE,"web-map/tables":AE,"link-chart/operational-layers":{...$E,LinkChartLayer:!0},"link-chart/basemap":TE,"link-chart/tables":AE,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISImageServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0}},Xfe=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(n,r,i){var s;return((s=i==null?void 0:i.portalItem)==null?void 0:s.type)==="Group Layer"?void 0:n}writeListMode(n,r,i,s){(s&&s.layerContainerType==="ground"||n&&_U(this,i,{},s))&&(r[i]=n)}writeOperationalLayerType(n,r,i,s){n&&(s==null?void 0:s.layerContainerType)!=="tables"&&(r.layerType=n)}writeTitle(n,r){r.title=n??"Layer"}read(n,r){r&&(r.layer=this),vU(this,n,i=>super.read(n,i),r)}write(n,r){var o,a;if(!this.persistenceEnabled)return null;if(r!=null&&r.origin){const l=`${r.origin}/${r.layerContainerType||"operational-layers"}`,c=Kfe[l];let u=!!(c!=null&&c[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(u=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(u=!1),!u)return(o=r.messages)==null||o.push(new Y("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const i=super.write(n,{...r,layer:this}),s=!!r&&!!r.messages&&!!r.messages.filter(l=>l instanceof Y&&l.name==="web-document-write:property-required").length;return R2(i==null?void 0:i.url)?((a=r==null?void 0:r.messages)==null||a.push(new Y("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:i}beforeSave(){}};return p([b({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),p([ge("id",["id"])],t.prototype,"readId",null),p([b(Cae)],t.prototype,"listMode",void 0),p([xe("listMode")],t.prototype,"writeListMode",null),p([b({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:oi}}}}})],t.prototype,"operationalLayerType",void 0),p([xe("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),p([b(y_)],t.prototype,"opacity",void 0),p([b({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),p([b({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),p([xe("title"),xe(["web-scene"],"title")],t.prototype,"writeTitle",null),p([b({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:oi}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=p([L("esri.layers.mixins.OperationalLayer")],t),t};let Hs=class extends Yt{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t!=null&&t.portalItem&&t.path?{...t,path:this._normalizePath(t.path,t.portalItem)}:t}set path(t){t!=null&&Nr(t)?ie.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return this._normalizePath(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",n){const r=this.cdnUrl;if(r==null)throw new Y("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:t,query:{token:this.portalItem.apiKey},signal:n==null?void 0:n.signal})}async update(t,n){const{addOrUpdateResource:r}=await ne(()=>import("./resourceUtils-2ae38811.js"),[]);return r(this,"update",t,n)}hasPath(){return this.path!=null}_normalizePath(t,n){return t==null?t:(t=t.replace(/^\/+/,""),n!=null&&Nr(t)&&(t=O2(t,n.itemUrl)),t==null?void 0:t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};p([b()],Hs.prototype,"portalItem",void 0),p([b({type:String,value:null})],Hs.prototype,"path",null),p([gt("path")],Hs.prototype,"_castPath",null),p([b({type:String,readOnly:!0})],Hs.prototype,"url",null),p([b({type:String,readOnly:!0})],Hs.prototype,"cdnUrl",null),p([b({type:String,readOnly:!0})],Hs.prototype,"itemRelativeUrl",null),Hs=p([L("esri.portal.PortalItemResource")],Hs);const Qfe=Hs;let tp=class extends Yt{constructor(t){super(t),this.created=null,this.rating=null}};p([b()],tp.prototype,"created",void 0),p([b()],tp.prototype,"rating",void 0),tp=p([L("esri.portal.PortalRating")],tp);const fv=tp;var lc;const ede=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),tde=new Set(["KML","GeoJson","CSV"]);let Te=lc=class extends lM(L2){static from(e){return za(lc,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let n=e;return e==="Feature Service"||e==="Feature Collection"?n=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?n=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?n="Scene Layer":e==="Video Service"?n="Video Layer":e==="Scene Package"?n="Scene Layer Package":e==="Stream Service"?n="Feature Layer":e==="Geoprocessing Service"?n=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geocoding Service"?n="Locator":e==="Geoenrichment Service"?n="GeoEnrichment Service":e==="Microsoft Powerpoint"?n="Microsoft PowerPoint":e==="GeoJson"?n="GeoJSON":e==="Globe Service"?n="Globe Layer":e==="Vector Tile Service"?n="Tile Layer":e==="netCDF"?n="NetCDF":e==="Map Service"?n=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?n=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?n="Big Data File Share":e==="Compact Tile Package"?n="Tile Package (tpkx)":e==="OGCFeatureServer"?n="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?n="Instant App":e==="Insights Page"?n="Insights Report":e==="Excalibur Imagery Project"&&(n="Excalibur Project"),n}readExtent(e){return e&&e.length?new Me(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var f;const e=((f=this.type)==null?void 0:f.toLowerCase())||"",t=this.typeKeywords||[],n="esri/images/portal/",r="16";let i,s=!1,o=!1,a=!1,l=!1,c=!1,u=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),c=t.includes("Spatiotemporal"),u=t.includes("UtilityNetwork"),i=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":s?"featureshosted":u?"utilitynetwork":"features"):i=e==="map service"||e==="wms"||e==="wmts"?s||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?i="maps":e==="web scene"?i=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?i="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?i="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?i="mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?i="datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?i="appsgray":e==="360 vr experience"?i="360vr":e==="arcgis pro add in"||e==="arcgis pro configuration"?i="addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?i="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?i="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?i="layersgray":e==="scene package"?i="scenepackage":e==="3dtiles package"?i="3dtileslayerpackage":e==="mobile scene package"?i="mobilescenepackage":e==="tile package"||e==="compact tile package"?i="tilepackage":e==="task file"?i="taskfile":e==="report template"?i="report-template":e==="statistical data collection"?i="statisticaldatacollection":e==="insights workbook"?i="workbook":e==="insights model"?i="insightsmodel":e==="insights page"?i="insightspage":e==="insights theme"?i="insightstheme":e==="hub initiative"?i="hubinitiative":e==="hubpage"?i="hubpage":e==="hub event"?i="hubevent":e==="hub site application"?i="hubsite":e==="hub project"?i="hubproject":e==="relational database connection"?i="relationaldatabaseconnection":e==="big data file share"?i="datastorecollection":e==="image collection"?i="imagecollection":e==="style"?i="style":e==="desktop style"?i="desktopstyle":e==="dashboard"?i="dashboard":e==="raster function template"?i="rasterprocessingtemplate":e==="vector tile package"?i="vectortilepackage":e==="ortho mapping project"?i="orthomappingproject":e==="ortho mapping template"?i="orthomappingtemplate":e==="solution"?i="solutions":e==="geopackage"?i="geopackage":e==="deep learning package"?i="deeplearningpackage":e==="real time analytic"?i="realtimeanalytics":e==="big data analytic"?i="bigdataanalytics":e==="feed"?i="feed":e==="excalibur imagery project"?i="excaliburimageryproject":e==="notebook"?i="notebook":e==="storymap"?i="storymap":e==="survey123 add in"?i="survey123addin":e==="mission"?i="mission":e==="mission report"?i="missionreport":e==="mission template"?i="missiontemplate":e==="quickcapture project"?i="quickcaptureproject":e==="pro report"?i="proreport":e==="pro report template"?i="proreporttemplate":e==="urban model"?i="urbanmodel":e==="web experience"?i="experiencebuilder":e==="web experience template"?i="webexperiencetemplate":e==="experience builder widget"?i="experiencebuilderwidget":e==="experience builder widget package"?i="experiencebuilderwidgetpackage":e==="workflow"?i="workflow":e==="insights script"?i="insightsscript":e==="kernel gateway connection"?i="kernelgatewayconnection":e==="hub initiative template"?i="hubinitiativetemplate":e==="storymap theme"?i="storymaptheme":e==="knowledge graph"?i="knowledgegraph":e==="knowledge studio project"?i="knowledgestudio":e==="native application"?i="nativeapp":e==="native application installer"?i="nativeappinstaller":e==="link chart"?i="linkchart":e==="investigation"?i="investigation":e==="ogcfeatureserver"?i="features":e==="pro project"?i="proproject":e==="insights workbook package"?i="insightsworkbookpackage":e==="apache parquet"?i="apacheparquet":e==="notebook code snippets"||e==="notebook code snippet library"?i="notebookcodesnippets":e==="suitability model"?i="suitabilitymodel":e==="esri classifier definition"?i="classifierdefinition":e==="esri classification schema"?i="classificationschema":e==="insights data engineering workbook"?i="dataengineeringworkbook":e==="insights data engineering model"?i="dataengineeringmodel":e==="deep learning studio project"?i="deeplearningproject":e==="discussion"?i="discussion":e==="allsource project"?i="allsourceproject":e==="api key"?i="apikey":e==="data pipeline"?i="datapipelines":e==="group layer"?(h=t.includes("Map"),i=h?"layergroup2d":"layergroup"):i=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":"maps",i?vu(n+i+r+".png"):null}get isLayer(){return this.type!=null&&ede.has(this.type)}get itemCdnUrl(){let e=this.itemUrl;return e&&Le&&!Le.findCredential(e)&&(e=Le._normalizeAGOLorgDomain(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}get itemPageUrl(){var t;const e=(t=this.portal)==null?void 0:t.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){var t;const e=(t=this.portal)==null?void 0:t.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){var n;const e=this.itemUrl,t=this.thumbnail;return e&&t?((n=this.portal)==null?void 0:n.normalizeUrl(`${e}/info/${t}?f=json`))??null:null}get userItemUrl(){var n,r,i;const e=(n=this.portal)==null?void 0:n.restUrl;if(!e)return null;const t=this.owner||((i=(r=this.portal)==null?void 0:r.user)==null?void 0:i.username);return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=si.getDefault()),n=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof fv&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new fv({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:J(this.applicationProxies),avgRating:this.avgRating,categories:J(this.categories),created:J(this.created),culture:this.culture,description:this.description,extent:J(this.extent),groupCategories:J(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:J(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:J(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:J(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:J(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new lc({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){var n;const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=(n=e[r])==null?void 0:n.join(", ");const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new fv(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},lc)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e==null?void 0:e.data,n={method:"post"};n.query=this.createPostQuery();for(const r in n.query)n.query[r]===null&&(n.query[r]="");return n.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?n.query.text=t:typeof t=="object"&&(n.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,n).then(()=>this.reload())}):Promise.reject(new Y("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new Y("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:n}=this;await t.signIn();const{copyResources:r,folder:i,tags:s,title:o}=e||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof i=="string"?i:i==null?void 0:i.id,includeResources:!!r,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await t.request(`${n}/copy`,a);return new lc({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,n=e.filename,r={method:"post"};if(typeof t=="string")wu(t)?r.query={data:t}:r.query={url:Xr(t)},n!=null&&(r.query.filename=n);else{const i=new FormData;n!=null?i.append("file",t,n):i.append("file",t),r.body=i}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Y("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:n}=await ne(()=>import("./resourceUtils-2ae38811.js"),[]);return n(this,e,t)}async addResource(e,t,n){const{addOrUpdateResource:r}=await ne(()=>import("./resourceUtils-2ae38811.js"),[]);return e.portalItem=this,r(e,"add",t,n)}async removeResource(e,t){const{removeResource:n}=await ne(()=>import("./resourceUtils-2ae38811.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new Y("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await ne(()=>import("./resourceUtils-2ae38811.js"),[]);return t(this,e)}resourceFromPath(e){return new Qfe({portalItem:this,path:e})}toJSON(){var n,r;const e=this.extent,t={accessInformation:this.accessInformation,categories:J(this.categories),created:(n=this.created)==null?void 0:n.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:(r=this.modified)==null?void 0:r.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:J(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:J(this.typeKeywords),url:this.url};return RO(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new lc({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};p([b({type:["private","shared","org","public"]})],Te.prototype,"access",void 0),p([b()],Te.prototype,"accessInformation",void 0),p([b({type:String})],Te.prototype,"apiKey",void 0),p([b({json:{read:{source:"appProxies"}}})],Te.prototype,"applicationProxies",void 0),p([b()],Te.prototype,"avgRating",void 0),p([b()],Te.prototype,"categories",void 0),p([b({type:Date})],Te.prototype,"created",void 0),p([b()],Te.prototype,"culture",void 0),p([b()],Te.prototype,"description",void 0),p([b({readOnly:!0})],Te.prototype,"displayName",null),p([b({type:Me})],Te.prototype,"extent",void 0),p([ge("extent")],Te.prototype,"readExtent",null),p([b()],Te.prototype,"groupCategories",void 0),p([b({readOnly:!0})],Te.prototype,"iconUrl",null),p([b()],Te.prototype,"id",void 0),p([b({readOnly:!0})],Te.prototype,"isLayer",null),p([b({type:Boolean,readOnly:!0})],Te.prototype,"isOrgItem",void 0),p([b()],Te.prototype,"itemControl",void 0),p([b({readOnly:!0})],Te.prototype,"itemPageUrl",null),p([b({readOnly:!0})],Te.prototype,"itemUrl",null),p([b()],Te.prototype,"licenseInfo",void 0),p([b({type:Date})],Te.prototype,"modified",void 0),p([b()],Te.prototype,"name",void 0),p([b()],Te.prototype,"numComments",void 0),p([b()],Te.prototype,"numRatings",void 0),p([b()],Te.prototype,"numViews",void 0),p([b()],Te.prototype,"owner",void 0),p([b()],Te.prototype,"ownerFolder",void 0),p([b({type:si})],Te.prototype,"portal",void 0),p([b()],Te.prototype,"screenshots",void 0),p([b()],Te.prototype,"size",void 0),p([b()],Te.prototype,"snippet",void 0),p([b()],Te.prototype,"sourceJSON",void 0),p([b({type:String})],Te.prototype,"sourceUrl",void 0),p([b({type:String})],Te.prototype,"spatialReference",void 0),p([b()],Te.prototype,"tags",void 0),p([b()],Te.prototype,"thumbnail",void 0),p([b({readOnly:!0})],Te.prototype,"thumbnailUrl",null),p([b()],Te.prototype,"title",void 0),p([b()],Te.prototype,"type",void 0),p([b()],Te.prototype,"typeKeywords",void 0),p([b({type:String,json:{read(e,t){var n;if(tde.has(t.type)){const r=(n=this.portal)==null?void 0:n.restUrl;e||(e=r&&this.id?`${r}/content/items/${this.id}/data`:null)}return e}}})],Te.prototype,"url",void 0),p([b({readOnly:!0})],Te.prototype,"userItemUrl",null),Te=lc=p([L("esri.portal.PortalItem")],Te);const By=Te,u7=Object.freeze(Object.defineProperty({__proto__:null,default:By},Symbol.toStringTag,{value:"Module"}));async function nde(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return wh(e);const n=we.WGS84;return await t$(t,n),$s(e,n)}function rde(e,t){if(!h7(e,t)){const n=e.typeKeywords;n?n.push(t):e.typeKeywords=[t]}}function h7(e,t){var n;return!!((n=e.typeKeywords)!=null&&n.includes(t))}function O$e(e){return h7(e,sde.HOSTED_SERVICE)}function ide(e,t){const n=e.typeKeywords;if(n){const r=n.indexOf(t);r>-1&&n.splice(r,1)}}function P$e(e,t,n){n?rde(e,t):ide(e,t)}async function R$e(e){const t=e.clone().normalize();let n;if(t.length>1)for(const r of t)n?r.width>n.width&&(n=r):n=r;else n=t[0];return nde(n)}const sde={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function IE(e){var l;const{portal:t,isOrgItem:n,itemControl:r}=e,i=(l=t.user)==null?void 0:l.privileges;let s=!i||i.includes("features:user:edit"),o=!!n&&!!(i!=null&&i.includes("features:user:fullEdit"));const a=r==="update"||r==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const ode=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=mp(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(n){n!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",n))}readPortalItem(n,r,i){if(r.itemId)return new By({id:r.itemId,portal:i==null?void 0:i.portal})}writePortalItem(n,r){n!=null&&n.id&&(r.itemId=n.id)}async loadFromPortal(n,r){var i;if((i=this.portalItem)!=null&&i.id)try{const{load:s}=await ne(()=>import("./layersLoader-8b38c25c.js"),["assets/layersLoader-8b38c25c.js","assets/fetchService-9c0aadd1.js","assets/lazyLayerLoader-edff256b.js","assets/portalLayers-88006a68.js","assets/associatedFeatureServiceUtils-158b7391.js","assets/layersCreator-0c047b3d.js","assets/styleUtils-a3d96bf6.js","assets/jsonContext-08550f59.js"]);return Hn(r),await s({instance:this,supportedTypes:n.supportedTypes,validateItem:n.validateItem,supportsData:n.supportsData,layerModuleTypeMap:n.layerModuleTypeMap},r)}catch(s){throw wr(s)||ie.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(n){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(n).catch(r=>(hs(r),!0)))}async setUserPrivileges(n,r){if(!ze.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:i,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(n,r);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(i){hs(i)}}async _fetchUserPrivileges(n,r){let i=this.portalItem;if(!n||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(r);const s=n===i.id;if(s&&i.portal.user)return IE(i);let o,a;if(s)o=i.portal.url;else try{o=await bse(this.url,r)}catch(h){hs(h)}if(!o||!VU(o,i.portal.url))return this._fetchFallbackUserPrivileges(r);try{const h=r!=null?r.signal:null;a=await(Le==null?void 0:Le.getCredential(`${o}/sharing`,{prompt:!1,signal:h}))}catch(h){hs(h)}const l=!0,c=!1,u=!1;if(!a)return{features:{edit:l,fullEdit:c},content:{updateItem:u}};try{if(s?await i.reload():(i=new By({id:n,portal:{url:o}}),await i.load(r)),i.portal.user)return IE(i)}catch(h){hs(h)}return{features:{edit:l,fullEdit:c},content:{updateItem:u}}}async _fetchFallbackUserPrivileges(n){let r=!0;try{r=await this._fetchUserHasEditingPrivileges(n)}catch(i){hs(i)}return{features:{edit:r,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(n){const r=this.url?Le==null?void 0:Le.findCredential(this.url):null;if(!r)return!0;const i=bg.credential===r?bg.user:await this._fetchEditingUser(n);return bg.credential=r,bg.user=i,(i==null?void 0:i.privileges)==null||i.privileges.includes("features:user:edit")}async _fetchEditingUser(n){var u,h;const r=(h=(u=this.portalItem)==null?void 0:u.portal)==null?void 0:h.user;if(r)return r;const i=Le.findServerInfo(this.url??"");if(!(i!=null&&i.owningSystemUrl))return null;const s=`${i.owningSystemUrl}/sharing/rest`,o=si.getDefault();if(o&&o.loaded&&Oi(o.restUrl)===Oi(s))return o.user;const a=`${s}/community/self`,l=n!=null?n.signal:null,c=await RG(He(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return c.ok?E$.fromJSON(c.value.data):null}read(n,r){r&&(r.layer=this),super.read(n,r)}write(n,r){var o;const i=r==null?void 0:r.portal,s=((o=this.portalItem)==null?void 0:o.id)&&(this.portalItem.portal||si.getDefault());return i&&s&&!UP(s.restUrl,i.restUrl)?(r.messages&&r.messages.push(new Y("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(n,{...r,layer:this})}};return p([b({type:By})],t.prototype,"portalItem",null),p([ge("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),p([xe("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),p([b({clonable:!1})],t.prototype,"resourceReferences",void 0),p([b({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),p([b({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),p([b({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=p([L("esri.layers.mixins.PortalLayer")],t),t},bg={credential:null,user:null},Ea=new tt,Bp=new WeakMap;function ade(e){cde(e)&&Ea.push(new WeakRef(e))}function lde(e){const t=Ea.find(n=>n.deref()===e);t&&Ea.remove(t)}function cde(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function f7(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:f7(t,e%t):0}let dv=0,wg=0;function ude(){const e=Date.now();let t=!1;for(const n of Ea){const r=n.deref();r?r.refreshInterval&&e-(Bp.get(r)??0)+5>=6e4*r.refreshInterval&&(Bp.set(r,e),r.refresh(e)):t=!0}if(t)for(let n=Ea.length-1;n>=0;n--)Ea.at(n).deref()||Ea.removeAt(n)}TP(()=>{const e=Date.now();let t=0;for(const n of Ea){const r=n.deref();r&&(t=f7(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?Bp.get(r)||Bp.set(r,e):Bp.delete(r))}if(t!==wg){if(wg=t,clearInterval(dv),wg===0)return void(dv=0);dv=setInterval(ude,wg)}});function N$e(e){return e!=null&&typeof e=="object"&&"refreshTimestamp"in e&&"refresh"in e}const kE=.1,hde=e=>{let t=class extends e{constructor(...n){super(...n),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=eM(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||ade(this)},()=>{})}destroy(){lde(this)}castRefreshInterval(n){return n>=kE?n:n<=0?0:kE}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(n=Date.now()){Ov(this._debounceHasDataChanged()).then(r=>{r&&this._set("refreshTimestamp",n),this.emit("refresh",{dataChanged:r})},r=>{ie.getLogger(this).error(r),this.emit("refresh",{dataChanged:!1,error:r})})}async hasDataChanged(){return!0}get test(){const n=this;return{set refreshInterval(r){n._set("refreshInterval",r)}}}};return p([b({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:oi}}}}})],t.prototype,"refreshInterval",void 0),p([gt("refreshInterval")],t.prototype,"castRefreshInterval",null),p([b({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),p([b({readOnly:!0})],t.prototype,"refreshParameters",null),t=p([L("esri.layers.mixins.RefreshableLayer")],t),t},d7=yn()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let np=class extends _n(re){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return kc(this.value,this.unit,"milliseconds")}};p([pe(d7,{nonNullable:!0})],np.prototype,"unit",void 0),p([b({type:Number,json:{write:!0},nonNullable:!0})],np.prototype,"value",void 0),np=p([L("esri.TimeInterval")],np);const u2=np;function EE(e,t){return u2.fromJSON({value:e,unit:t})}let Nn=class extends _n(re){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(t,n){if(!n.timeExtent||!Array.isArray(n.timeExtent)||n.timeExtent.length!==2)return null;const r=new Date(n.timeExtent[0]),i=new Date(n.timeExtent[1]);return new ws({start:r,end:i})}writeFullTimeExtent(t,n){(t==null?void 0:t.start)!=null&&t.end!=null?n.timeExtent=[t.start.getTime(),t.end.getTime()]:n.timeExtent=null}readInterval(t,n){return n.timeInterval&&n.timeIntervalUnits?EE(n.timeInterval,n.timeIntervalUnits):n.defaultTimeInterval&&n.defaultTimeIntervalUnits?EE(n.defaultTimeInterval,n.defaultTimeIntervalUnits):null}writeInterval(t,n){n.timeInterval=(t==null?void 0:t.toJSON().value)??null,n.timeIntervalUnits=(t==null?void 0:t.toJSON().unit)??null}};p([b({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Nn.prototype,"cumulative",void 0),p([b({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Nn.prototype,"endField",void 0),p([b({type:ws,json:{write:{enabled:!0,allowNull:!0}}})],Nn.prototype,"fullTimeExtent",void 0),p([ge("fullTimeExtent",["timeExtent"])],Nn.prototype,"readFullTimeExtent",null),p([xe("fullTimeExtent")],Nn.prototype,"writeFullTimeExtent",null),p([b({type:Boolean,json:{write:!0}})],Nn.prototype,"hasLiveData",void 0),p([b({type:u2,json:{write:{enabled:!0,allowNull:!0}}})],Nn.prototype,"interval",void 0),p([ge("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Nn.prototype,"readInterval",null),p([xe("interval")],Nn.prototype,"writeInterval",null),p([b({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Nn.prototype,"startField",void 0),p([b(hte("timeReference",!0))],Nn.prototype,"timeZone",void 0),p([b({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Nn.prototype,"trackIdField",void 0),p([b({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Nn.prototype,"useTime",void 0),Nn=p([L("esri.layers.support.TimeInfo")],Nn);const fde=Nn,dde=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(n,r){const i=r.timeInfo.exportOptions;if(!i)return null;const s=i.timeOffset,o=d7.fromJSON(i.timeOffsetUnits);return s&&o?new u2({value:s,unit:o}):null}set timeInfo(n){Xte(n,this.fieldsIndex),this._set("timeInfo",n)}};return p([b({type:ws,json:{write:!1}})],t.prototype,"timeExtent",void 0),p([b({type:u2})],t.prototype,"timeOffset",void 0),p([ge("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),p([b({value:null,type:fde,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),p([b({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=p([L("esri.layers.mixins.TemporalLayer")],t),t};function pde(e){const t=e.fields,n=e.records,r=t.some(c=>c.name.toLowerCase()==="oid")?"OBJECTID":"OID",i=[{name:r,type:"esriFieldTypeOID",alias:"OID"}].concat(t.map(c=>({name:c.name,type:"esriFieldType"+c.typeName,alias:c.name}))),s=i.map(c=>c.name),o=[];let a=0,l=0;return n.forEach(c=>{const u={};for(u[r]=a++,l=1;l<s.length;l++)u[s[l]]=c[l-1];o.push({attributes:u})}),{displayFieldName:"",fields:i,features:o}}let p7=class{static get supportedVersions(){return[5]}static parse(t){const n=new DataView(t),r=3&n.getUint8(0);if(r!==3)return{header:{version:r},recordSet:null};const i=n.getUint32(4,!0),s=n.getUint16(8,!0),o=n.getUint16(10,!0),a={version:r,recordCount:i,headerByteCount:s,recordByteCount:o};let l=32;const c=[],u=[];let h;if(r===3){for(;n.getUint8(l)!==13;)h=String.fromCharCode(n.getUint8(l+11)).trim(),c.push({name:C_(new Uint8Array(t,l,11)),type:h,typeName:["String","Date","Double","Boolean","String","Integer"][["C","D","F","L","M","N"].indexOf(h)],length:n.getUint8(l+16)}),l+=32;if(l+=1,c.length>0)for(;u.length<i&&t.byteLength-l>o;){const f=[];n.getUint8(l)===32?(l+=1,c.forEach(d=>{if(d.type==="C")f.push(C_(new Uint8Array(t,l,d.length)).trim());else if(d.type==="N")f.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(t,l,d.length)).trim(),10));else if(d.type==="F")f.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(t,l,d.length)).trim()));else if(d.type==="D"){const g=String.fromCharCode.apply(null,new Uint8Array(t,l,d.length)).trim();f.push(new Date(parseInt(g.substring(0,4),10),parseInt(g.substring(4,6),10)-1,parseInt(g.substring(6,8),10)))}l+=d.length}),u.push(f)):l+=o}}return{header:a,fields:c,records:u,recordSet:pde({fields:c,records:u})}}},rp=class extends re{get affectsPixelSize(){return!1}forwardTransform(t){return t}inverseTransform(t){return t}};p([b()],rp.prototype,"affectsPixelSize",null),p([b({json:{write:!0}})],rp.prototype,"spatialReference",void 0),rp=p([L("esri.layers.support.rasterTransforms.BaseRasterTransform")],rp);const w4=rp;var x5;let ip=x5=class extends w4{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(e){return(e=e.clone()).type==="point"?(e.x>180+this.tolerance&&(e.x-=360),e):(e.xmin>=180-this.tolerance?(e.xmax-=360,e.xmin-=360):e.xmax>180+this.tolerance&&(e.xmin=-180,e.xmax=180),e)}inverseTransform(e){return(e=e.clone()).type==="point"?(e.x<-this.tolerance&&(e.x+=360),e):(e.xmin<-this.tolerance&&(e.xmin+=360,e.xmax+=360),e)}clone(){return new x5({tolerance:this.tolerance})}};p([pe({GCSShiftXform:"gcs-shift"})],ip.prototype,"type",void 0),p([b()],ip.prototype,"tolerance",void 0),ip=x5=p([L("esri.layers.support.rasterTransforms.GCSShiftTransform")],ip);const m7=ip;var S5;let Uy=S5=class extends w4{constructor(){super(...arguments),this.type="identity"}clone(){return new S5}};p([pe({IdentityXform:"identity"})],Uy.prototype,"type",void 0),Uy=S5=p([L("esri.layers.support.rasterTransforms.IdentityTransform")],Uy);const mde=Uy;var _5;function M5(e,t,n){const{x:r,y:i}=t;if(n<2)return{x:e[0]+r*e[2]+i*e[4],y:e[1]+r*e[3]+i*e[5]};if(n===2){const f=r*r,d=i*i,g=r*i;return{x:e[0]+r*e[2]+i*e[4]+f*e[6]+g*e[8]+d*e[10],y:e[1]+r*e[3]+i*e[5]+f*e[7]+g*e[9]+d*e[11]}}const s=r*r,o=i*i,a=r*i,l=s*r,c=s*i,u=r*o,h=i*o;return{x:e[0]+r*e[2]+i*e[4]+s*e[6]+a*e[8]+o*e[10]+l*e[12]+c*e[14]+u*e[16]+h*e[18],y:e[1]+r*e[3]+i*e[5]+s*e[7]+a*e[9]+o*e[11]+l*e[13]+c*e[15]+u*e[17]+h*e[19]}}function CE(e,t,n){const{xmin:r,ymin:i,xmax:s,ymax:o,spatialReference:a}=t;let l=[];if(n<2)l.push({x:r,y:o}),l.push({x:s,y:o}),l.push({x:r,y:i}),l.push({x:s,y:i});else{let h=10;for(let f=0;f<h;f++)l.push({x:r,y:i+(o-i)*f/(h-1)}),l.push({x:s,y:i+(o-i)*f/(h-1)});h=8;for(let f=1;f<=h;f++)l.push({x:r+(s-r)*f/h,y:i}),l.push({x:r+(s-r)*f/h,y:o})}l=l.map(h=>M5(e,h,n));const c=l.map(h=>h.x),u=l.map(h=>h.y);return new Me({xmin:Math.min.apply(null,c),xmax:Math.max.apply(null,c),ymin:Math.min.apply(null,u),ymax:Math.max.apply(null,u),spatialReference:a})}function gde(e){const[t,n,r,i,s,o]=e,a=r*o-s*i,l=s*i-r*o;return[(s*n-t*o)/a,(r*n-t*i)/l,o/a,i/l,-s/a,-r/l]}let Zr=_5=class extends w4{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(e,t){const{coeffX:n,coeffY:r}=t;if(!(n!=null&&n.length)||!(r!=null&&r.length)||n.length!==r.length)return null;const i=[];for(let s=0;s<n.length;s++)i.push(n[s]),i.push(r[s]);return i}writeForwardCoefficients(e,t,n){const r=[],i=[];for(let s=0;s<(e==null?void 0:e.length);s++)s%2==0?r.push(e[s]):i.push(e[s]);t.coeffX=r,t.coeffY=i}get inverseCoefficients(){let e=this._get("inverseCoefficients");const t=this._get("forwardCoefficients");return!e&&t&&this.polynomialOrder<2&&(e=gde(t)),e}set inverseCoefficients(e){this._set("inverseCoefficients",e)}readInverseCoefficients(e,t){const{inverseCoeffX:n,inverseCoeffY:r}=t;if(!(n!=null&&n.length)||!(r!=null&&r.length)||n.length!==r.length)return null;const i=[];for(let s=0;s<n.length;s++)i.push(n[s]),i.push(r[s]);return i}writeInverseCoefficients(e,t,n){const r=[],i=[];for(let s=0;s<(e==null?void 0:e.length);s++)s%2==0?r.push(e[s]):i.push(e[s]);t.inverseCoeffX=r,t.inverseCoeffY=i}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(e){if(e.type==="point"){const t=M5(this.forwardCoefficients,e,this.polynomialOrder);return new ce({x:t.x,y:t.y,spatialReference:e.spatialReference})}return CE(this.forwardCoefficients,e,this.polynomialOrder)}inverseTransform(e){if(e.type==="point"){const t=M5(this.inverseCoefficients,e,this.polynomialOrder);return new ce({x:t.x,y:t.y,spatialReference:e.spatialReference})}return CE(this.inverseCoefficients,e,this.polynomialOrder)}clone(){return new _5({polynomialOrder:this.polynomialOrder,forwardCoefficients:this.forwardCoefficients?[...this.forwardCoefficients]:null,inverseCoefficients:this.inverseCoefficients?[...this.inverseCoefficients]:null})}};p([b({json:{write:!0}})],Zr.prototype,"polynomialOrder",void 0),p([b()],Zr.prototype,"forwardCoefficients",void 0),p([ge("forwardCoefficients",["coeffX","coeffY"])],Zr.prototype,"readForwardCoefficients",null),p([xe("forwardCoefficients")],Zr.prototype,"writeForwardCoefficients",null),p([b({json:{write:!0}})],Zr.prototype,"inverseCoefficients",null),p([ge("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],Zr.prototype,"readInverseCoefficients",null),p([xe("inverseCoefficients")],Zr.prototype,"writeInverseCoefficients",null),p([b()],Zr.prototype,"affectsPixelSize",null),p([pe({PolynomialXform:"polynomial"})],Zr.prototype,"type",void 0),Zr=_5=p([L("esri.layers.support.rasterTransforms.PolynomialTransform")],Zr);const Qb=Zr,g7={GCSShiftXform:m7,IdentityXform:mde,PolynomialXform:Qb},yde=Object.keys(g7);function bde(e){const t=e==null?void 0:e.type;return!e||yde.includes(t)}function wde(e){if(!(e==null?void 0:e.type))return null;const n=g7[e==null?void 0:e.type];if(n){const r=new n;return r.read(e),r}return null}const cc=new Map;cc.set("int16","esriFieldTypeSmallInteger"),cc.set("int32","esriFieldTypeInteger"),cc.set("int64","esriFieldTypeInteger"),cc.set("float32","esriFieldTypeSingle"),cc.set("float64","esriFieldTypeDouble"),cc.set("text","esriFieldTypeString");const OE=8;let sp=class extends Au{constructor(){super(...arguments),this.storageInfo=null,this.datasetFormat="CRF"}async open(t){await this.init();const{data:n}=await this.request(this.url+"/conf.json",{signal:t==null?void 0:t.signal});if(!this._validateHeader(n))throw new Y("cloudraster:open","Invalid or unsupported conf.json.");this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const{storageInfo:r,rasterInfo:i}=this._parseHeader(n);if(i.dataType==="thematic"){const s=await this._fetchAuxiliaryInformation();i.attributeTable=s}this._set("storageInfo",r),this._set("rasterInfo",i),this.ioConfig.retryCount=this.ioConfig.retryCount||0}async fetchRawTile(t,n,r,i={}){const{transposeInfo:s}=this.rasterInfo.storageInfo,{transposedVariableName:o}=i,a=!(!s||!o),l=a?0:this.rasterInfo.storageInfo.maximumPyramidLevel-t;if(l<0)return null;const c=this._buildCacheFilePath(l,n,r,i.multidimensionalDefinition,o),u=this._getIndexRecordFromBundle(n,r,a),h=await this.request(c,{range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer",signal:i.signal});if(!h)return null;const f=new Uint8Array(h.data),d=this._getTileEndAndContentType(f,u);if(d.recordSize===0)return null;const g=await this.request(c,{range:{from:d.position,to:d.position+d.recordSize},responseType:"array-buffer",signal:i.signal});if(!g)return null;const[y,w]=this._getTileSize(a);return this.decodePixelBlock(g.data,{width:y,height:w,planes:null,pixelType:null,returnInterleaved:a})}_validateHeader(t){const n=["origin","extent","geodataXform","LODInfos","blockWidth","blockHeight","bandCount","pixelType","pixelSizeX","pixelSizeY","format","packetSize"];return t&&t.type==="RasterInfo"&&!n.some(r=>!t[r])}_parseHeader(t){var N,D,z,G,W;const n=["u1","u2","u4","u8","s8","u16","s16","u32","s32","f32","f64"][t.pixelType],{bandCount:r,colormap:i,blockWidth:s,blockHeight:o,firstPyramidLevel:a,maximumPyramidLevel:l}=t,c=(N=t.statistics)==null?void 0:N.map(K=>({min:K.min,max:K.max,avg:K.mean,stddev:K.standardDeviation,median:K.median,mode:K.mode})),u=(G=(z=(D=t.histograms)==null?void 0:D[0])==null?void 0:z.counts)!=null&&G.length?t.histograms:null,h=t.extent.spatialReference,f=(W=t.geodataXform)==null?void 0:W.spatialReference,d=new we(h!=null&&h.wkid||h!=null&&h.wkt||h!=null&&h.wkt2?h:f);let g=new Me({xmin:t.extent.xmin,ymin:t.extent.ymin,xmax:t.extent.xmax,ymax:t.extent.ymax,spatialReference:d});const y=new ce({x:t.pixelSizeX,y:t.pixelSizeY,spatialReference:d}),w=Math.round((g.xmax-g.xmin)/y.x),v=Math.round((g.ymax-g.ymin)/y.y),x=this._parseTransform(t.geodataXform),S=x?g:null;x&&(g=x.forwardTransform(g),y.x=(g.xmax-g.xmin)/w,y.y=(g.ymax-g.ymin)/v);const _=t.properties??{},M=t.format.toLowerCase().replace("cache/",""),$=new ce(t.origin.x,t.origin.y,d);let T,A,I,E;if(i!=null&&i.colors)for(T=[],A=0;A<i.colors.length;A++)I=i.colors[A],E=i.values?i.values[A]:A,T.push([E,255&I,I<<16>>>24,I<<8>>>24,I>>>24]);const O=t.LODInfos,P=[];for(A=0;A<O.levels.length;A++)P.push(new Ks({level:O.levels[A],resolution:O.resolutions[A],scale:96/.0254*O.resolutions[A]}));const j=new fo({dpi:96,lods:P,format:M,origin:$,size:[s,o],spatialReference:d}),V={recordSize:OE,packetSize:t.packetSize,headerSize:t.packetSize*t.packetSize*OE+64},U=[{maxCol:Math.ceil(w/s)-1,maxRow:Math.ceil(v/o)-1,minCol:0,minRow:0}];let q=2;if(l>0)for(A=0;A<l;A++)U.push({maxCol:Math.ceil(w/q/s)-1,maxRow:Math.ceil(v/q/o)-1,minCol:0,minRow:0}),q*=2;const C=t.mdInfo;let R=null;if(C&&_._yxs){const K=_._yxs;R={packetSize:K.PacketSize,tileSize:[K.TileXSize,K.TileYSize]}}return{storageInfo:V,rasterInfo:new ll({width:w,height:v,pixelType:n,bandCount:r,extent:g,nativeExtent:S,transform:x,spatialReference:d,pixelSize:y,keyProperties:_,statistics:c,histograms:u,multidimensionalInfo:C,colormap:T,storageInfo:new Df({blockWidth:s,blockHeight:o,pyramidBlockWidth:s,pyramidBlockHeight:o,origin:$,tileInfo:j,transposeInfo:R,firstPyramidLevel:a,maximumPyramidLevel:l,blockBoundary:U})})}}_parseTransform(t){var r,i;if(!bde(t))throw new Y("cloudraster:open","the data contains unsupported geodata transform types");const n=wde(t);if(n.type==="identity")return null;if(n.type!=="polynomial"||!((r=n.forwardCoefficients)!=null&&r.length)||!((i=n.inverseCoefficients)!=null&&i.length))throw new Y("cloudraster:open","the data contains unsupported geodata transforms - both forward and inverse coefficients are required currently");return n}async _fetchAuxiliaryInformation(t){const n=this.request(this.url+"/conf.vat.json",{signal:t}).then(o=>o.data).catch(()=>null),r=this.request(this.url+"/conf.vat.dbf",{responseType:"array-buffer",signal:t}).then(o=>o.data).catch(()=>null),i=await Promise.all([n,r]);let s;if(i[0]){let o=i[0].fields;const a=i[0].values;if(o&&a){o=o.map(c=>({type:c.name==="OID"?"esriFieldTypeOID":cc.get(c.type),name:c.name,alias:c.alias||c.name}));const l=a.map(c=>({attributes:c}));o&&a&&(s={fields:o,features:l})}}return!s&&i[1]&&(s=p7.parse(i[1]).recordSet),Yb.fromJSON(s)}_buildCacheFilePath(t,n,r,i,s){const o=this._getPackageSize(!!s),a=Math.floor(n/o)*o,l=Math.floor(r/o)*o,c="R"+this._toHexString4(a)+"C"+this._toHexString4(l);let u="L";u+=t>=10?t.toString():"0"+t.toString();const{multidimensionalInfo:h}=this.rasterInfo,f=i==null?void 0:i[0];if(h==null||!f)return`${this.url}/_alllayers/${u}/${c}.bundle`;let d="_yxs";if(!s){d=h.variables.find(w=>w.name===f.variableName).dimensions[0].values.indexOf(f.values[0]).toString(16);const y=4-d.length;for(let w=0;w<y;w++)d="0"+d;d="S"+d}const g=this._getVariableFolderName(s||f.variableName);return`${this.url}/_alllayers/${g}/${d}/${u}/${c}.bundle`}_getPackageSize(t=!1){const{transposeInfo:n}=this.rasterInfo.storageInfo;return t&&n!=null?n.packetSize??0:this.storageInfo.packetSize}_getTileSize(t=!1){const{storageInfo:n}=this.rasterInfo,{transposeInfo:r}=n;return t&&r!=null?r.tileSize:n.tileInfo.size}_getVariableFolderName(t){return(t=t.trim())===""?"_v":t.replaceAll(/[\{|\}\-]/g,"_").replace("\\*","_v")}_getIndexRecordFromBundle(t,n,r=!1){const i=this._getPackageSize(r),s=i*(t%i)+n%i;if(s<0)throw new Error("Invalid level / row / col");return 20+s*this.storageInfo.recordSize+44}_getTileEndAndContentType(t,n){const r=t.subarray(n,n+8);let i,s=0;for(i=0;i<5;i++)s|=(255&r[i])<<8*i;const o=0xffffffffff&s;for(s=0,i=5;i<8;i++)s|=(255&r[i])<<8*(i-5);return{position:o,recordSize:0xffffffffff&s}}_toHexString4(t){let n=t.toString(16);if(n.length!==4){let r=4-n.length;for(;r-- >0;)n="0"+n}return n}};p([b({readOnly:!0})],sp.prototype,"storageInfo",void 0),p([b({type:String,json:{write:!0}})],sp.prototype,"datasetFormat",void 0),sp=p([L("esri.layers.support.rasterDatasets.CloudRaster")],sp);const vde=sp;let op=class extends Au{constructor(){super(...arguments),this.datasetFormat="MEMORY",this.data=null}async open(t){await this.init();const n=this.data,{pixelBlock:r,statistics:i,histograms:s,name:o,keyProperties:a,nativeExtent:l,transform:c}=this.data,{width:u,height:h,pixelType:f}=r,d=n.extent??new Me({xmin:-.5,ymin:.5,xmax:u-.5,ymax:h-.5,spatialReference:new we({wkid:3857})}),g=n.isPseudoSpatialReference??!n.extent,y={x:d.width/u,y:d.height/h},w=new ll({width:u,height:h,pixelType:f,extent:d,nativeExtent:l,transform:c,pixelSize:y,spatialReference:d.spatialReference,bandCount:r.pixels.length,keyProperties:a||{},statistics:i,isPseudoSpatialReference:g,histograms:s});this.createRemoteDatasetStorageInfo(w,512,512),this._set("rasterInfo",w),this.updateTileInfo(),await this._buildInMemoryRaster(r,{width:512,height:512},t),this.datasetName=o,this.url="/InMemory/"+o}fetchRawTile(t,n,r,i={}){const s=this._pixelBlockTiles.get(`${t}/${n}/${r}`);return Promise.resolve(s)}async _buildInMemoryRaster(t,n,r){var u,h;const i=this.rasterInfo.storageInfo.maximumPyramidLevel,s=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:t,tileSize:n,maximumPyramidLevel:i},r):Promise.resolve(Noe(t,n,i)),o=this.rasterInfo.statistics!=null,a=this.rasterInfo.histograms!=null,l=o?Promise.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:t},r):Promise.resolve(YF(t)),c=await Sf([s,l]);if(!c[0].value&&c[1].value)throw new Y("inmemory-raster:open","failed to build in memory raster");this._pixelBlockTiles=c[0].value,o||(this.rasterInfo.statistics=(u=c[1].value)==null?void 0:u.statistics),a||(this.rasterInfo.histograms=(h=c[1].value)==null?void 0:h.histograms)}};p([b({type:String,json:{write:!0}})],op.prototype,"datasetFormat",void 0),p([b()],op.prototype,"data",void 0),op=p([L("esri.layers.support.rasterDatasets.InMemoryRaster")],op);const xde=op;function bf(e,t){if(!e||!t)return[];let n=t;t.includes("/")?(n=t.slice(0,t.indexOf("/")),t=t.slice(t.indexOf("/")+1)):t="";const r=[];if(t){const s=bf(e,n);for(let o=0;o<s.length;o++)bf(s[o],t).forEach(a=>r.push(a));return r}const i=e.getElementsByTagNameNS("*",n);if(!i||i.length===0)return[];for(let s=0;s<i.length;s++)r.push(i[s]||i.item(s));return r}function Kr(e,t){if(!e||!t)return null;let n=t;t.includes("/")?(n=t.slice(0,t.indexOf("/")),t=t.slice(t.indexOf("/")+1)):t="";const r=bf(e,n);return r.length>0?t?Kr(r[0],t):r[0]:null}function ms(e,t=null){const n=t?Kr(e,t):e;let r;return n?(r=n.textContent||n.nodeValue,r?r.trim():null):null}function Sde(e,t){const n=bf(e,t),r=[];let i;for(let s=0;s<n.length;s++)i=n[s].textContent||n[s].nodeValue,i&&(i=i.trim(),i!==""&&r.push(i));return r}function vg(e,t){return Sde(e,t).map(n=>Number(n))}function wc(e,t){const n=ms(e,t);return Number(n)}function pv(e,t){var i;const n=(i=e==null?void 0:e.nodeName)==null?void 0:i.toLowerCase(),r=t.toLowerCase();return n.slice(n.lastIndexOf(":")+1)===r}function PE(e,t){if(!e||!t)return null;const n=[];for(let r=0;r<e.length;r++)n.push(e[r]),n.push(t[r]);return n}function _de(e){const t=Kr(e,"GeodataXform"),n=ew(wc(t,"SpatialReference/WKID")||ms(t,"SpatialReference/WKT"));if(t.getAttribute("xsi:type")!=="typens:PolynomialXform")return{spatialReference:n,transform:null};const r=wc(t,"PolynomialOrder")??1,i=vg(t,"CoeffX/Double"),s=vg(t,"CoeffY/Double"),o=vg(t,"InverseCoeffX/Double"),a=vg(t,"InverseCoeffY/Double"),l=PE(i,s),c=PE(o,a);return{spatialReference:n,transform:l&&c&&l.length&&c.length?new Qb({spatialReference:n,polynomialOrder:r,forwardCoefficients:l,inverseCoefficients:c}):null}}function Mde(e){var f;const t=wc(e,"NoDataValue"),n=Kr(e,"Histograms/HistItem"),r=wc(n,"HistMin"),i=wc(n,"HistMax"),s=wc(n,"BucketCount"),o=(f=ms(n,"HistCounts"))==null?void 0:f.split("|").map(d=>Number(d));let a,l,c,u;bf(e,"Metadata/MDI").forEach(d=>{const g=Number(d.textContent??d.nodeValue);switch(d.getAttribute("key").toUpperCase()){case"STATISTICS_MINIMUM":a=g;break;case"STATISTICS_MAXIMUM":l=g;break;case"STATISTICS_MEAN":c=g;break;case"STATISTICS_STDDEV":u=g}});const h=wc(e,"Metadata/SourceBandIndex");return{noDataValue:t,histogram:o!=null&&o.length&&r!=null&&i!=null?{min:r,max:i,size:s||o.length,counts:o}:null,sourceBandIndex:h,statistics:a!=null&&l!=null?{min:a,max:l,avg:c,stddev:u}:null}}function ew(e){if(!e)return null;let t=Number(e);if(!isNaN(t)&&t!==0)return new we({wkid:t});if(e=String(e).trim(),IV(e))return new we({wkt2:e});const n=e.toUpperCase();if(n.startsWith("COMPD_CS")){if(!n.includes("VERTCS")||!n.includes("GEOGCS")&&!n.startsWith("PROJCS"))return null;const r=n.indexOf("VERTCS"),i=n.indexOf("PROJCS"),s=i>-1?i:n.indexOf("GEOGCS");if(s===-1)return null;const o=e.slice(s,e.lastIndexOf("]",r)+1).trim(),a=e.slice(r,e.lastIndexOf("]")).trim();t=mv(o);const l=new we(t?{wkid:t}:{wkt:o}),c=mv(a);return c&&(l.vcsWkid=c),l}return n.startsWith("GEOGCS")||n.startsWith("PROJCS")?(t=mv(e),new we(t!==0?{wkid:t}:{wkt:e})):null}function mv(e){var i;const t=e.replaceAll("]","[").replaceAll('"',"").split("[").map(s=>s.trim()).filter(s=>s!==""),n=t[t.length-1].split(","),r=(i=n[0])==null?void 0:i.toLowerCase();if((r==="epsg"||r==="esri")&&e.endsWith('"]]')){const s=Number(n[1]);if(!isNaN(s)&&s!==0)return s}return 0}function v4(e){var r;if(((r=e==null?void 0:e.documentElement.tagName)==null?void 0:r.toLowerCase())!=="pamdataset")return{};const t={spatialReference:null,transform:null,metadata:{},rasterBands:[],statistics:null,histograms:null};e.documentElement.childNodes.forEach(i=>{if(i.nodeType===1){if(pv(i,"SRS")){if(!t.spatialReference){const s=ms(i);t.spatialReference=ew(s)}}else if(pv(i,"Metadata"))if(i.getAttribute("domain")==="xml:ESRI"){const{spatialReference:s,transform:o}=_de(i);t.transform=o,t.spatialReference||(t.spatialReference=s)}else bf(i,"MDI").forEach(s=>t.metadata[s.getAttribute("key")]=ms(s));else if(pv(i,"PAMRasterBand")){const s=Mde(i);s.sourceBandIndex!=null&&t.rasterBands[s.sourceBandIndex]==null?t.rasterBands[s.sourceBandIndex]=s:t.rasterBands.push(s)}}});const n=t.rasterBands;if(n.length){const i=!!n[0].statistics;t.statistics=i?n.map(o=>o.statistics).filter(ja):null;const s=!!n[0].histogram;t.histograms=s?n.map(o=>o.histogram).filter(ja):null}return t}let Vy=class extends Au{async open(t){await this.init();const n=await this._fetchData(t);let{spatialReference:r,statistics:i,histograms:s,transform:o}=await this._fetchAuxiliaryData(t);const a=!r;a&&(r=new we({wkid:3857})),s!=null&&s.length&&i==null&&(i=h4(s));const{width:l,height:c}=n;let u=new Me({xmin:-.5,ymin:.5-c,xmax:l-.5,ymax:.5,spatialReference:r});const h=o?o.forwardTransform(u):u;let f=!0;if(o){const g=o.forwardCoefficients;f=g&&g[1]===0&&g[2]===0,f&&(o=null,u=h)}const d=new xde({data:{extent:h,nativeExtent:u,transform:o,pixelBlock:n,statistics:i,histograms:s,keyProperties:{DateType:"Processed"},isPseudoSpatialReference:a}});await d.open(),d.data=null,this._set("rasterInfo",d.rasterInfo),this._inMemoryRaster=d}fetchRawTile(t,n,r,i={}){return this._inMemoryRaster.fetchRawTile(t,n,r,i)}async _fetchData(t){const{data:n}=await this.request(this.url,{responseType:"array-buffer",signal:t==null?void 0:t.signal}),r=xce(n).toUpperCase();if(r!=="JPG"&&r!=="PNG"&&r!=="GIF"&&r!=="BMP")throw new Y("image-aux-raster:open","the data is not a supported format");this._set("datasetFormat",r);const i=r.toLowerCase(),s=i==="gif"||i==="bmp"||!X("ios"),o=await this.decodePixelBlock(n,{format:i,useCanvas:s,hasNoZlibMask:!0});if(o==null)throw new Y("image-aux-raster:open","the data cannot be decoded");return o}async _fetchAuxiliaryData(t){var u;const n=t==null?void 0:t.signal,r=this.ioConfig.skipExtensions??[],i=r.includes("aux.xml")?null:this.request(this.url+".aux.xml",{responseType:"xml",signal:n}),s=this.datasetFormat,o=s==="JPG"?"jgw":s==="PNG"?"pgw":s==="BMP"?"bpw":null,a=o&&r.includes(o)?null:this.request(this.url.slice(0,this.url.lastIndexOf("."))+"."+o,{responseType:"text",signal:n}),l=await Sf([i,a]);if(n!=null&&n.aborted)throw Ot();const c=v4((u=l[0].value)==null?void 0:u.data);if(!c.transform){const h=l[1].value?l[1].value.data.split(`
`).slice(0,6).map(f=>Number(f)):null;c.transform=(h==null?void 0:h.length)===6?new Qb({forwardCoefficients:[h[4],h[5],h[0],-h[1],h[2],-h[3]]}):null}return c}};p([b({type:String,json:{write:!0}})],Vy.prototype,"datasetFormat",void 0),Vy=p([L("esri.layers.support.rasterDatasets.ImageAuxRaster")],Vy);const xg=Vy;function $de(e,t=!1){return e<=xs?t?new Array(e).fill(0):new Array(e):new Uint32Array(e)}class v0{constructor(t){this._validateJSON(t);const{location:n,data:r}=t;this.location=Object.freeze(J(n));const i=this.location.width,s=this.location.height;let o=!0,a=!0;const l=Math.ceil(i*s/32),c=$de(l);let u=0;for(let h=0;h<r.length;h++){const f=h%32;r[h]?(a=!1,c[u]|=1<<f):o=!1,f===31&&++u}a?(this._availability="unavailable",this.byteSize=40):o?(this._availability="available",this.byteSize=40):(this._availability=c,this.byteSize=40+Az(c))}getAvailability(t,n){if(this._availability==="unavailable"||this._availability==="available")return this._availability;const r=(t-this.location.top)*this.location.width+(n-this.location.left),i=r%32,s=r>>5,o=this._availability;return s<0||s>o.length?"unknown":o[s]&1<<i?"available":"unavailable"}static fromDefinition(t,n){const r=t.service.request||He,{row:i,col:s,width:o,height:a}=t,l={query:{f:"json"}};return n=n?{...l,...n}:l,r(Tde(t),n).then(c=>c.data).catch(c=>{if(c&&c.details&&c.details.httpStatus===422)return{location:{top:i,left:s,width:o,height:a},valid:!0,data:vz(o*a,0)};throw c}).then(c=>{if(c.location&&(c.location.top!==i||c.location.left!==s||c.location.width!==o||c.location.height!==a))throw new Y("tilemap:location-mismatch","Tilemap response for different location than requested",{response:c,definition:{top:i,left:s,width:o,height:a}});return v0.fromJSON(c)})}static fromJSON(t){return Object.freeze(new v0(t))}_validateJSON(t){if(!(t!=null&&t.location))throw new Y("tilemap:missing-location","Location missing from tilemap response");if(t.valid===!1)throw new Y("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new Y("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new Y("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new Y("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function RE(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function Tde(e){var r;let t;if((r=e.service.tileServers)!=null&&r.length){const i=e.service.tileServers;t=`${i&&i.length?i[e.row%i.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}else t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;const n=e.service.query;return n&&(t=`${t}?${n}`),t}var vc;let as=vc=class extends Yt{constructor(e){super(e),this._pendingTilemapRequests={},this.request=He,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new aF(2*C1.MEGABYTES),this.addHandles([co(()=>{const{layer:e}=this;return[e==null?void 0:e.parsedUrl,e==null?void 0:e.tileServers,e==null?void 0:e.apiKey,e==null?void 0:e.customParameters]},()=>this._initializeTilemapDefinition(),k6)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(e,t,n,r){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new Y("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const i=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,n,i);if(s)return Promise.resolve(s);const o=r==null?void 0:r.signal;return r={...r,signal:null},new Promise((a,l)=>{po(o,()=>l(Ot()));const c=RE(i);let u=this._pendingTilemapRequests[c];if(!u){u=v0.fromDefinition(i,r).then(f=>(this._tilemapCache.put(c,f,f.byteSize),f));const h=()=>{delete this._pendingTilemapRequests[c]};this._pendingTilemapRequests[c]=u,u.then(h,h)}u.then(a,l)})}getAvailability(e,t,n){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return"unavailable";const r=this._tilemapFromCache(e,t,n,this._tmpTilemapDefinition);return r?r.getAvailability(t,n):"unknown"}fetchAvailability(e,t,n,r){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(new Y("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:n})):this.fetchTilemap(e,t,n,r).catch(i=>i).then(i=>{if(i instanceof v0){const s=i.getAvailability(t,n);if(s==="unavailable")throw new Y("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:n});return s}if(wr(i))throw i;return"unknown"})}fetchAvailabilityUpsample(e,t,n,r,i){r.level=e,r.row=t,r.col=n;const s=this.layer.tileInfo;s.updateTileInfo(r);const o=this.fetchAvailability(e,t,n,i).catch(a=>{if(wr(a))throw a;if(s.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,i);throw a});return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,n,i,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,n,r,i,s){if(!this._prefetchingEnabled||e==null)return;const o=`prefetch-${e}`;if(this.hasHandles(o))return;const a=new AbortController;s.then(()=>a.abort(),()=>a.abort());let l=!1;const c=It(()=>{l||(l=!0,a.abort())});if(this.addHandles(c,o),await ZB(10,a.signal).catch(()=>{}),l||(l=!0,this.removeHandles(o)),ri(a))return;const u=new SF(e,t,n,r),h={...i,signal:a.signal},f=this.layer.tileInfo;for(let d=0;vc._prefetches.length<vc._maxPrefetch&&f.upsampleTile(u);++d){const g=this.fetchAvailability(u.level,u.row,u.col,h);vc._prefetches.push(g);const y=()=>{vc._prefetches.removeUnordered(g)};g.then(y,y)}}_initializeTilemapDefinition(){var r;if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:n}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:Kh({...e.query,...n,token:t??((r=e.query)==null?void 0:r.token)}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,n,r){r.level=e,r.row=t-t%this.size,r.col=n-n%this.size;const i=RE(r);return this._tilemapCache.get(i)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,n,r)=>!!e._tilemapFromCache(t,n,r,e._tmpTilemapDefinition)}}};as._maxPrefetch=4,as._prefetches=new Yh({initialSize:vc._maxPrefetch}),p([b({constructOnly:!0})],as.prototype,"layer",void 0),p([b({constructOnly:!0})],as.prototype,"minLOD",void 0),p([b({constructOnly:!0})],as.prototype,"maxLOD",void 0),p([b({constructOnly:!0})],as.prototype,"request",void 0),p([b({constructOnly:!0})],as.prototype,"size",void 0),as=vc=p([L("esri.layers.support.TilemapCache")],as);async function y7(e,t,n){var C,R,N,D,z,G,W,K,oe,Se;const r=q9(e),{rasterFunction:i,sourceJSON:s}=t||{},o=i?JSON.stringify(i.rasterFunctionDefinition||i):null,a=J9({...r.query,renderingRule:o,f:"json"}),l=uoe(a,n);e=r.path;const c=s||await He(e,l).then(Ee=>Ee.data),u=c.hasRasterAttributeTable?He(`${e}/rasterAttributeTable`,l):null,h=c.hasColormap?He(`${e}/colormap`,l):null,f=c.hasHistograms?He(`${e}/histograms`,l):null,d=c.currentVersion>=10.3?He(`${e}/keyProperties`,l):null,g=c.hasMultidimensions?He(`${e}/multidimensionalInfo`,l):null,y=await Promise.allSettled([u,h,f,d,g]);let w=null;if(c.minValues&&c.minValues.length===c.bandCount){w=[];for(let Ee=0;Ee<c.minValues.length;Ee++)w.push({min:c.minValues[Ee],max:c.maxValues[Ee],avg:c.meanValues[Ee],stddev:c.stdvValues[Ee]})}const v=Me.fromJSON(c.extent),x=Math.ceil(v.width/c.pixelSizeX-.1),S=Math.ceil(v.height/c.pixelSizeY-.1),_=we.fromJSON(c.spatialReference||c.extent.spatialReference),M=y[0].status==="fulfilled"?(C=y[0].value)==null?void 0:C.data:null,$=(R=M==null?void 0:M.features)!=null&&R.length?Yb.fromJSON(M):null,T=y[1].status==="fulfilled"?(N=y[1].value)==null?void 0:N.data.colormap:null,A=T!=null&&T.length?T:null,I=y[2].status==="fulfilled"?(D=y[2].value)==null?void 0:D.data.histograms:null,E=(G=(z=I==null?void 0:I[0])==null?void 0:z.counts)!=null&&G.length?I:null,O=y[3].status==="fulfilled"?((W=y[3].value)==null?void 0:W.data)??{}:{},P=y[4].status==="fulfilled"?(K=y[4].value)==null?void 0:K.data.multidimensionalInfo:null,j=(oe=P==null?void 0:P.variables)!=null&&oe.length?P:null;j&&j.variables.forEach(Ee=>{var Ze;(Ze=Ee.statistics)!=null&&Ze.length&&Ee.statistics.forEach(ye=>{ye.avg=ye.mean,ye.stddev=ye.standardDeviation})});const{defaultVariable:V,serviceDataType:U}=c;V&&V!==O.DefaultVariable&&(O.DefaultVariable=V),U!=null&&U.includes("esriImageServiceDataTypeVector")&&!U.includes(O.DataType)&&(O.DataType=U.replace("esriImageServiceDataType",""));let q=c.noDataValue;return(Se=c.noDataValues)!=null&&Se.length&&c.noDataValues.some(Ee=>Ee!==q)&&(q=c.noDataValues),new ll({width:x,height:S,bandCount:c.bandCount,extent:Me.fromJSON(c.extent),spatialReference:_,pixelSize:new ce({x:c.pixelSizeX,y:c.pixelSizeY,spatialReference:_}),pixelType:c.pixelType.toLowerCase(),statistics:w,attributeTable:$,colormap:A,histograms:E,keyProperties:O,noDataValue:q,multidimensionalInfo:j})}function Ade(e,t,n){return y7(e,{sourceJSON:t},n)}function V$e(e,t,n){return y7(e,{rasterFunction:t},n)}function Ide(e,t){e.attributeTable||(t.hasRasterAttributeTable=!1),e.histograms||(t.hasHistograms=!1),e.colormap||(t.hasColormap=!1),e.multidimensionalInfo||(t.hasMultidimensions=!1)}let ap=class extends Au{constructor(){super(...arguments),this._levelOffset=0,this._tilemapCache=null,this._slices=null,this.datasetFormat="RasterTileServer",this.tileType=null}async open(t){var A,I;await this.init();const n=t==null?void 0:t.signal,r=this.sourceJSON?{data:this.sourceJSON}:await this.request(this.url,{query:{f:"json"},signal:n});r.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));const i=r.data;if(this.sourceJSON=i,!i)throw new Y("imageserverraster:open","cannot initialize tiled image service, missing service info");if(!i.tileInfo)throw new Y("imageserverraster:open","use ImageryLayer to open non-tiled image services");this._fixScaleInServiceInfo();const s=["jpg","jpeg","png","png8","png24","png32","mixed"];this.tileType=i.cacheType,this.tileType==null&&(s.includes(i.tileInfo.format.toLowerCase())?this.tileType="Map":i.tileInfo.format.toLowerCase()==="lerc"?this.tileType="Elevation":this.tileType="Raster"),this.datasetName=((A=i.name)==null?void 0:A.slice(i.name.indexOf("/")+1))??"";const o=await this._fetchRasterInfo({signal:n});if(o==null)throw new Y("image-server-raster:open","cannot initialize image service");Ide(o,i);const a=this.tileType==="Map"?kde(i.tileInfo,i):fo.fromJSON(i.tileInfo);Ph(a);const[l,c]=this._computeMinMaxLOD(o,a),{extent:u,pixelSize:h}=o,f=.5/o.width*h.x,d=Math.max(h.x,h.y),{lods:g}=a;(this.tileType!=="Map"&&i.maxScale!==0||Math.abs(h.x-h.y)>f||!g.some(E=>Math.abs(E.resolution-d)<f))&&(h.x=h.y=l.resolution,o.width=Math.ceil((u.xmax-u.xmin)/h.x-.1),o.height=Math.ceil((u.ymax-u.ymin)/h.y-.1));const y=l.level-c.level,[w,v]=a.size,x=[],S=[];g.forEach((E,O)=>{E.level>=c.level&&E.level<=l.level&&x.push({x:E.resolution,y:E.resolution}),O<g.length-1&&S.push(Math.round(10*E.resolution/g[O+1].resolution)/10)}),x.sort((E,O)=>E.x-O.x);const _=this.computeBlockBoundary(u,w,v,a.origin,x,y),M=x.length>1?x.slice(1):null;let $;i.transposeInfo&&($={tileSize:[i.transposeInfo.rows,i.transposeInfo.cols],packetSize:((I=o.keyProperties)==null?void 0:I._yxs.PacketSize)??0});const T=S.length<=1||S.length>=3&&S.slice(0,-1).every(E=>E===S[0])?S[0]??2:Math.round(10/(c.resolution/l.resolution)**(-1/y))/10;if(o.storageInfo=new Df({blockWidth:a.size[0],blockHeight:a.size[1],pyramidBlockWidth:a.size[0],pyramidBlockHeight:a.size[1],pyramidResolutions:M,pyramidScalingFactor:T,compression:a.format,origin:a.origin,firstPyramidLevel:1,maximumPyramidLevel:y,tileInfo:a,transposeInfo:$,blockBoundary:_}),this._fixGCSShift(o),this._set("rasterInfo",o),i.capabilities.toLowerCase().includes("tilemap")){const E={tileInfo:o.storageInfo.tileInfo,parsedUrl:_r(this.url),url:this.url,tileServers:[]};this._tilemapCache=new as({layer:E})}}async fetchRawTile(t,n,r,i={}){const{storageInfo:s,extent:o}=this.rasterInfo,{transposeInfo:a}=s,l=a!=null&&!!i.transposedVariableName;if(this._slices&&!l&&i.sliceId==null)return null;const c=l?0:s.maximumPyramidLevel-t+this._levelOffset,u=`${this.url}/tile/${c}/${n}/${r}`,h=this._slices?l?{variable:i.transposedVariableName}:{sliceId:i.sliceId||0}:null,{data:f}=await this.request(u,{query:h,responseType:"array-buffer",signal:i.signal});if(!f)return null;const d=l?a.tileSize:s.tileInfo.size,g=await this.decodePixelBlock(f,{width:d[0],height:d[1],planes:null,pixelType:null,isPoint:this.tileType==="Elevation",returnInterleaved:l,noDataValue:this.rasterInfo.noDataValue});if(g==null)return null;const y=s.blockBoundary[t];if(s.compression!=="jpg"||r>y.minCol&&r<y.maxCol&&n>y.minRow&&n<y.maxRow)return g;const{origin:w,blockWidth:v,blockHeight:x}=s,{x:S,y:_}=this.getPyramidPixelSize(t),M=Math.round((o.xmin-w.x)/S)%v,$=Math.round((o.xmax-w.x)/S)%v||v,T=Math.round((w.y-o.ymax)/_)%x,A=Math.round((w.y-o.ymin)/_)%x||x,I=r===y.minCol?M:0,E=n===y.minRow?T:0,O=r===y.maxCol?$:v,P=n===y.maxRow?A:x;return Coe(g,{x:I,y:E},{width:O-I,height:P-E}),g}getSliceIndex(t){if(!this._slices||t==null||t.length===0)return null;const n=t;for(let r=0;r<this._slices.length;r++){const i=this._slices[r].multidimensionalDefinition;if(i.length===n.length&&!i.some(s=>{const o=n.find(a=>s.variableName===a.variableName&&a.dimensionName===s.dimensionName);return o?(Array.isArray(s.values[0])?`${s.values[0][0]}-${s.values[0][1]}`:s.values[0])!==(Array.isArray(o.values[0])?`${o.values[0][0]}-${o.values[0][1]}`:o.values[0]):!0}))return r}return null}async fetchVariableStatisticsHistograms(t,n){var o,a,l;const r=this.request(this.url+"/statistics",{query:{variable:t,f:"json"},signal:n}).then(c=>{var u;return(u=c.data)==null?void 0:u.statistics}),i=this.request(this.url+"/histograms",{query:{variable:t,f:"json"},signal:n}).then(c=>{var u;return(u=c.data)==null?void 0:u.histograms}),s=await Promise.all([r,i]);return s[0]&&s[0].forEach(c=>{c.avg=c.mean,c.stddev=c.standardDeviation}),(l=(a=(o=s[1])==null?void 0:o[0])==null?void 0:a.counts)!=null&&l.length||(s[1]=null),{statistics:s[0]||null,histograms:s[1]||null}}async computeBestPyramidLevelForLocation(t,n={}){if(!this._tilemapCache)return 0;let r=this.identifyPixelLocation(t,0,n.datumTransformation);if(r===null)return null;let i=0;const{maximumPyramidLevel:s}=this.rasterInfo.storageInfo;let o=s-i+this._levelOffset;const a=r.srcLocation;for(;o>=0;){try{if(await this._tilemapCache.fetchAvailability(o,r.row,r.col,n)==="available")break}catch{}if(o--,i++,r=this.identifyPixelLocation(a,i,n.datumTransformation),r===null)return null}return o===-1||r==null?null:i}async _fetchRasterInfo(t){const n=this.sourceJSON;if(this.tileType==="Map"){const a=n.fullExtent||n.extent,l=Math.ceil((a.xmax-a.xmin)/n.pixelSizeX-.1),c=Math.ceil((a.ymax-a.ymin)/n.pixelSizeY-.1),u=we.fromJSON(n.spatialReference||a.spatialReference),h=new ce({x:n.pixelSizeX,y:n.pixelSizeY,spatialReference:u});return new ll({width:l,height:c,bandCount:3,extent:Me.fromJSON(a),spatialReference:u,pixelSize:h,pixelType:"u8",statistics:null,keyProperties:{DataType:"processed"}})}const{signal:r}=t,i=Ade(this.url,this.sourceJSON,{signal:r,query:this.ioConfig.customFetchParameters}),s=n.hasMultidimensions?this.request(`${this.url}/slices`,{query:{f:"json"},signal:r}).then(a=>{var l;return(l=a.data)==null?void 0:l.slices}).catch(()=>null):null,o=await Promise.all([i,s]);return this._slices=o[1],o[0]}_fixScaleInServiceInfo(){const{sourceJSON:t}=this;t.minScale&&t.minScale<0&&(t.minScale=0),t.maxScale&&t.maxScale<0&&(t.maxScale=0)}_fixGCSShift(t){const{extent:n,spatialReference:r}=t;n.xmin>-1&&n.xmax>181&&(r!=null&&r.wkid)&&r.isGeographic&&(t.nativeExtent=t.extent,t.transform=new m7,t.extent=t.transform.forwardTransform(n))}_computeMinMaxLOD(t,n){const{pixelSize:r}=t,i=.5/t.width*r.x,{lods:s}=n,o=n.lodAt(Math.max.apply(null,s.map(d=>d.level))),a=n.lodAt(Math.min.apply(null,s.map(d=>d.level))),{tileType:l}=this;if(l==="Map")return this._levelOffset=s[0].level,[o,a];if(l==="Raster")return[s.find(d=>d.resolution===r.x)??o,a];const{minScale:c,maxScale:u}=this.sourceJSON;let h=o;u>0&&(h=s.find(d=>Math.abs(d.scale-u)<i),h||(h=s.filter(d=>d.scale>u).sort((d,g)=>d.scale>g.scale?1:-1)[0]??o));let f=a;return c>0&&(f=s.find(d=>Math.abs(d.scale-c)<i)??a,this._levelOffset=f.level-a.level),[h,f]}};function kde(e,t){if(!e)return null;const{minScale:n,maxScale:r,minLOD:i,maxLOD:s}=t;if(i!=null&&s!=null)return fo.fromJSON({...e,lods:e.lods.filter(({level:o})=>o!=null&&o>=i&&o<=s)});if(n!==0&&r!==0){const o=c=>Math.round(1e4*c)/1e4,a=n?o(n):1/0,l=r?o(r):-1/0;return fo.fromJSON({...e,lods:e.lods.filter(c=>{const u=o(c.scale);return u<=a&&u>=l})})}return fo.fromJSON(e)}p([b({type:String,json:{write:!0}})],ap.prototype,"datasetFormat",void 0),p([b()],ap.prototype,"tileType",void 0),ap=p([L("esri.layers.support.rasterDatasets.ImageServerRaster")],ap);const Ede=ap,ls=new Map;ls.set("Int8","s8"),ls.set("UInt8","u8"),ls.set("Int16","s16"),ls.set("UInt16","u16"),ls.set("Int32","s32"),ls.set("UInt32","u32"),ls.set("Float32","f32"),ls.set("Float64","f32"),ls.set("Double64","f32");const Ca=new Map;Ca.set("none",{blobExtension:".til",isOneSegment:!0,decoderFormat:"bip"}),Ca.set("lerc",{blobExtension:".lrc",isOneSegment:!1,decoderFormat:"lerc"}),Ca.set("deflate",{blobExtension:".pzp",isOneSegment:!0,decoderFormat:"deflate"}),Ca.set("jpeg",{blobExtension:".pjg",isOneSegment:!0,decoderFormat:"jpg"});let yh=class extends Au{constructor(){super(...arguments),this._files=null,this._storageIndex=null,this.datasetFormat="MRF"}async open(t){var w;await this.init(),this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const n=t?t.signal:null,r=await this.request(this.url,{responseType:"xml",signal:n}),{rasterInfo:i,files:s}=this._parseHeader(r.data);if(((w=this.ioConfig.skipExtensions)==null?void 0:w.indexOf("aux.xml"))===-1){const v=await this._fetchAuxiliaryData(t);v!=null&&(i.statistics=v.statistics??i.statistics,i.histograms=v.histograms,v.histograms&&i.statistics==null&&(i.statistics=h4(v.histograms)))}this._set("rasterInfo",i),this._files=s;const o=await this.request(s.index,{responseType:"array-buffer",signal:n});this._storageIndex=this._parseIndex(o.data);const{blockWidth:a,blockHeight:l}=this.rasterInfo.storageInfo,c=this.rasterInfo.storageInfo.pyramidScalingFactor,{width:u,height:h}=this.rasterInfo,f=[],d=this._getBandSegmentCount();let g=0,y=-1;for(;g<this._storageIndex.length;){y++;const v=Math.ceil(u/a/c**y)-1,x=Math.ceil(h/l/c**y)-1;g+=(v+1)*(x+1)*d*4,f.push({maxRow:x,maxCol:v,minCol:0,minRow:0})}this.rasterInfo.storageInfo.blockBoundary=f,y>0&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=y),this.updateTileInfo()}async fetchRawTile(t,n,r,i={}){const{blockWidth:s,blockHeight:o,blockBoundary:a}=this.rasterInfo.storageInfo,l=a[t];if(!l||l.maxRow<n||l.maxCol<r||l.minRow>n||l.minCol>r)return null;const{bandCount:c,pixelType:u}=this.rasterInfo,{ranges:h,actualTileWidth:f,actualTileHeight:d}=this._getTileLocation(t,n,r);if(!h||h.length===0)return null;if(h[0].from===0&&h[0].to===0){const O=new Uint8Array(s*o);return new ee({width:s,height:o,pixels:null,mask:O,validPixelCount:0})}const{bandIds:g}=this.ioConfig,y=this._getBandSegmentCount(),w=[];let v=0;for(v=0;v<y;v++)g&&!g.includes(v)||w.push(this.request(this._files.data,{range:{from:h[v].from,to:h[v].to},responseType:"array-buffer",signal:i.signal}));const x=await Promise.all(w),S=x.map(O=>O.data.byteLength).reduce((O,P)=>O+P),_=new Uint8Array(S);let M=0;for(v=0;v<y;v++)_.set(new Uint8Array(x[v].data),M),M+=x[v].data.byteLength;const $=Ca.get(this.rasterInfo.storageInfo.compression).decoderFormat,T=await this.decodePixelBlock(_.buffer,{width:s,height:o,format:$,planes:(g==null?void 0:g.length)||c,pixelType:u});if(T==null)return null;let{noDataValue:A}=this.rasterInfo;if(A!=null&&$!=="lerc"&&!T.mask&&(A=A[0],A!=null)){const O=T.width*T.height,P=new Uint8Array(O);if(Math.abs(A)>1e24)for(v=0;v<O;v++)Math.abs((T.pixels[0][v]-A)/A)>1e-6&&(P[v]=1);else for(v=0;v<O;v++)T.pixels[0][v]!==A&&(P[v]=1);T.mask=P}let I=0,E=0;if(f!==s||d!==o){let O=T.mask;if(O)for(v=0;v<o;v++)if(E=v*s,v<d)for(I=f;I<s;I++)O[E+I]=0;else for(I=0;I<s;I++)O[E+I]=0;else for(O=new Uint8Array(s*o),T.mask=O,v=0;v<d;v++)for(E=v*s,I=0;I<f;I++)O[E+I]=1}return T}_parseIndex(t){if(t.byteLength%16>0)throw new Error("invalid array buffer must be multiples of 16");let n,r,i,s,o,a;if(Hb){for(r=new Uint8Array(t),s=new ArrayBuffer(t.byteLength),i=new Uint8Array(s),o=0;o<t.byteLength/4;o++)for(a=0;a<4;a++)i[4*o+a]=r[4*o+3-a];n=new Uint32Array(s)}else n=new Uint32Array(t);return n}_getBandSegmentCount(){return Ca.get(this.rasterInfo.storageInfo.compression).isOneSegment?1:this.rasterInfo.bandCount}_getTileLocation(t,n,r){const{blockWidth:i,blockHeight:s,pyramidScalingFactor:o}=this.rasterInfo.storageInfo,{width:a,height:l}=this.rasterInfo,c=this._getBandSegmentCount();let u,h,f,d=0,g=0;for(f=0;f<t;f++)g=o**f,u=Math.ceil(a/i/g),h=Math.ceil(l/s/g),d+=u*h;g=o**t,u=Math.ceil(a/i/g),h=Math.ceil(l/s/g),d+=n*u+r,d*=4*c;const y=this._storageIndex.subarray(d,d+4*c);let w=0,v=0;const x=[];for(let S=0;S<c;S++)w=y[4*S]*2**32+y[4*S+1],v=w+y[4*S+2]*2**32+y[4*S+3],x.push({from:w,to:v});return{ranges:x,actualTileWidth:r<u-1?i:Math.ceil(a/g)-i*(u-1),actualTileHeight:n<h-1?s:Math.ceil(l/g)-s*(h-1)}}_parseHeader(t){const n=Kr(t,"MRF_META/Raster");if(!n)throw new Y("mrf:open","not a valid MRF format");const r=Kr(n,"Size"),i=parseInt(r.getAttribute("x"),10),s=parseInt(r.getAttribute("y"),10),o=parseInt(r.getAttribute("c"),10),a=(ms(n,"Compression")||"none").toLowerCase();if(!Ca.has(a))throw new Y("mrf:open","currently does not support compression "+a);const l=ms(n,"DataType")||"UInt8",c=ls.get(l);if(c==null)throw new Y("mrf:open","currently does not support pixel type "+l);const u=Kr(n,"PageSize"),h=parseInt(u.getAttribute("x"),10),f=parseInt(u.getAttribute("y"),10),d=Kr(n,"DataValues");let g,y;if(d&&(y=d.getAttribute("NoData"),y!=null&&(g=y.trim().split(" ").map(P=>parseFloat(P)))),Kr(t,"MRF_META/CachedSource"))throw new Y("mrf:open","currently does not support MRF referencing other data files");const w=Kr(t,"MRF_META/GeoTags"),v=Kr(w,"BoundingBox");let x,S=!1;if(v!=null){const P=parseFloat(v.getAttribute("minx")),j=parseFloat(v.getAttribute("miny")),V=parseFloat(v.getAttribute("maxx")),U=parseFloat(v.getAttribute("maxy")),q=ms(w,"Projection")||"";let C=we.WGS84;if(q!=="LOCAL_CS[]")if(q.toLowerCase().startsWith("epsg:")){const R=Number(q.slice(5));isNaN(R)||R===0||(C=new we({wkid:R}))}else C=ew(q)??we.WGS84;else S=!0,C=new we({wkid:3857});x=new Me(P,j,V,U),x.spatialReference=C}else S=!0,x=new Me({xmin:-.5,ymin:.5-s,xmax:i-.5,ymax:.5,spatialReference:new we({wkid:3857})});const _=Kr(t,"MRF_META/Rsets"),M=parseInt((_==null?void 0:_.getAttribute("scale"))||"2",10),$=x.spatialReference,T=new Df({origin:new ce({x:x.xmin,y:x.ymax,spatialReference:$}),blockWidth:h,blockHeight:f,pyramidBlockWidth:h,pyramidBlockHeight:f,compression:a,pyramidScalingFactor:M}),A=new ce({x:x.width/i,y:x.height/s,spatialReference:$}),I=new ll({width:i,height:s,extent:x,isPseudoSpatialReference:S,spatialReference:$,bandCount:o,pixelType:c,pixelSize:A,noDataValue:g,storageInfo:T}),E=ms(t,"datafile"),O=ms(t,"IndexFile");return{rasterInfo:I,files:{mrf:this.url,index:O||this.url.replace(".mrf",".idx"),data:E||this.url.replace(".mrf",Ca.get(a).blobExtension)}}}async _fetchAuxiliaryData(t){try{const{data:n}=await this.request(this.url+".aux.xml",{responseType:"xml",signal:t==null?void 0:t.signal});return v4(n)}catch{return null}}};p([b()],yh.prototype,"_files",void 0),p([b()],yh.prototype,"_storageIndex",void 0),p([b({type:String,json:{write:!0}})],yh.prototype,"datasetFormat",void 0),yh=p([L("esri.layers.support.rasterIO.MRFRaster")],yh);const Cde=yh,gv=(e,t)=>{var n;return(n=e.get(t))==null?void 0:n.values},ad=(e,t)=>{var n,r;return(r=(n=e.get(t))==null?void 0:n.values)==null?void 0:r[0]};let uc=class extends Au{constructor(){super(...arguments),this._files=null,this._headerInfo=null,this._bufferSize=1048576,this.datasetFormat="TIFF"}async open(e){var g,y,w,v;await this.init();const t=e?e.signal:null,{data:n}=await this.request(this.url,{range:{from:0,to:this._bufferSize},responseType:"array-buffer",signal:t});if(!n)throw new Y("tiffraster:open","failed to open url "+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1,this.url.lastIndexOf("."));const{littleEndian:r,firstIFDPos:i,isBigTiff:s}=jF(n),o=[];await this._readIFDs(o,n,r,i,0,s?8:4,t);const{imageInfo:a,rasterInfo:l}=this._parseIFDs(o),c=a4(o),u=l4(o);if(this._headerInfo={littleEndian:r,isBigTiff:s,ifds:o,pyramidIFDs:c,maskIFDs:u,...a},this._set("rasterInfo",l),!a.isSupported)throw new Y("tiffraster:open","this tiff is not supported: "+a.message);if(!a.tileWidth)throw new Y("tiffraster:open","none-tiled tiff is not optimized for access, convert to COG and retry.");l.isPseudoSpatialReference&&ie.getLogger(this).warn("The spatial reference for this tiff is unsupported. Only EPSG spatial reference codes and Esri WKTs are supported.");const h=(y=(g=o[0].get("PREDICTOR"))==null?void 0:g.values)==null?void 0:y[0];if(((v=(w=o[0].get("SAMPLEFORMAT"))==null?void 0:w.values)==null?void 0:v[0])===3&&h===2)throw new Y("tiffraster:open","unsupported horizontal difference encoding. Predictor=3 is supported for floatting point data");const{skipExtensions:d=[]}=this.ioConfig;if(!d.includes("aux.xml")){const x=await this._fetchAuxiliaryMetaData(e);x!=null&&this._processPAMInfo(x,l)}d.includes("vat.dbf")||l.bandCount!==1||l.pixelType!=="u8"||(l.attributeTable=await this._fetchAuxiliaryTable(e),l.attributeTable!=null&&(l.keyProperties.DataType="thematic")),this.updateTileInfo()}async fetchRawTile(e,t,n,r={}){var s;if(!((s=this._headerInfo)!=null&&s.isSupported)||this.isBlockOutside(e,t,n))return null;const i=await this._fetchRawTiffTile(e,t,n,!1,r);if(i!=null&&this._headerInfo.hasMaskBand){const o=await this._fetchRawTiffTile(e,t,n,!0,r);o!=null&&o.pixels[0]instanceof Uint8Array&&(i.mask=o.pixels[0])}return i}_parseIFDs(e){var P,j;const t=Jb(e),{width:n,height:r,tileWidth:i,tileHeight:s,planes:o,pixelType:a,compression:l,firstPyramidLevel:c,maximumPyramidLevel:u,pyramidBlockWidth:h,pyramidBlockHeight:f,tileBoundary:d,affine:g,metadata:y}=t,w=((P=t.extent.spatialReference)==null?void 0:P.wkt)||((j=t.extent.spatialReference)==null?void 0:j.wkid);let v=ew(w),x=!!t.isPseudoGeographic;v==null&&(x=!0,v=new we({wkid:3857}));const S=new Me({...t.extent,spatialReference:v}),_=new ce(S?{x:S.xmin,y:S.ymax,spatialReference:v}:{x:0,y:0}),M=new Df({blockWidth:i,blockHeight:s,pyramidBlockWidth:h,pyramidBlockHeight:f,compression:l,origin:_,firstPyramidLevel:c,maximumPyramidLevel:u,blockBoundary:d}),$=new ce({x:(S.xmax-S.xmin)/n,y:(S.ymax-S.ymin)/r,spatialReference:v}),T=y?{BandProperties:y.bandProperties,DataType:y.dataType}:{};let A=null;const I=ad(e[0],"PHOTOMETRICINTERPRETATION"),E=gv(e[0],"COLORMAP");if(I<=3&&(E==null?void 0:E.length)>3&&E.length%3==0){A=[];const V=E.length/3;for(let U=0;U<V;U++)A.push([U,E[U]>>>8,E[U+V]>>>8,E[U+2*V]>>>8])}const O=new ll({width:n,height:r,bandCount:o,pixelType:a,pixelSize:$,storageInfo:M,spatialReference:v,isPseudoSpatialReference:x,keyProperties:T,extent:S,colormap:A,statistics:y?y.statistics:null});return g!=null&&g.length&&(O.nativeExtent=new Me({xmin:-.5,ymin:.5-r,xmax:n-.5,ymax:.5,spatialReference:v}),O.transform=new Qb({polynomialOrder:1,forwardCoefficients:[g[2]+g[0]/2,g[5]-g[3]/2,g[0],g[3],-g[1],-g[4]]}),O.extent=O.transform.forwardTransform(O.nativeExtent),O.pixelSize=new ce({x:(S.xmax-S.xmin)/n,y:(S.ymax-S.ymin)/r,spatialReference:v}),M.origin.x=-.5,M.origin.y=.5),{imageInfo:t,rasterInfo:O}}_processPAMInfo(e,t){if(t.statistics=e.statistics??t.statistics,t.histograms=e.histograms,e.histograms&&t.statistics==null&&(t.statistics=h4(e.histograms)),e.transform&&t.transform==null){t.transform=e.transform,t.nativeExtent=t.extent;const n=t.transform.forwardTransform(t.nativeExtent);t.pixelSize=new ce({x:(n.xmax-n.xmin)/t.width,y:(n.ymax-n.ymin)/t.height,spatialReference:t.spatialReference}),t.extent=n}t.isPseudoSpatialReference&&e.spatialReference&&(t.spatialReference=e.spatialReference,t.extent.spatialReference=t.nativeExtent.spatialReference=t.storageInfo.origin.spatialReference=t.spatialReference)}async _readIFDs(e,t,n,r,i,s=4,o){if(!r)return null;(r>=t.byteLength||r<0)&&(t=(await this.request(this.url,{range:{from:r+i,to:r+i+this._bufferSize},responseType:"array-buffer",signal:o})).data,i=r+i,r=0);const a=await this._readIFD(t,n,r,i,gs.tiffTags,s,o);if(e.push(a.ifd),!a.nextIFD)return null;await this._readIFDs(e,t,n,a.nextIFD-i,i,s,o)}async _readIFD(e,t,n,r,i=gs.tiffTags,s=4,o){var l,c;if(!e)return null;const a=zF(e,t,n,r,i,s);if(a.success){const u=[];if((l=a.ifd)==null||l.forEach(h=>{h.values||u.push(h)}),u.length>0){const h=u.map(d=>d.offlineOffsetSize).filter(ja),f=Math.min.apply(null,h.map(d=>d[0]));if(Math.min.apply(null,h.map(d=>d[0]+d[1]))-f<=this._bufferSize){const{data:d}=await this.request(this.url,{range:{from:f,to:f+this._bufferSize},responseType:"array-buffer",signal:o});e=d,r=f,u.forEach(g=>FF(e,t,g,r))}}if((c=a.ifd)!=null&&c.has("GEOKEYDIRECTORY")){const h=a.ifd.get("GEOKEYDIRECTORY"),f=h==null?void 0:h.values;if(f&&f.length>4){const d=f[0]+"."+f[1]+"."+f[2],g=await this._readIFD(e,t,h.valueOffset+6-r,r,gs.geoKeys,2,o);h.data=g.ifd,h.data&&h.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[d]})}}return a}if(a.requiredBufferSize&&a.requiredBufferSize!==e.byteLength)return(e=(await this.request(this.url,{range:{from:r,to:r+a.requiredBufferSize+4},responseType:"array-buffer",signal:o})).data).byteLength<a.requiredBufferSize?null:this._readIFD(e,t,0,r,gs.tiffTags,4,o)}async _fetchRawTiffTile(e,t,n,r,i={}){const s=this._getTileLocation(e,t,n,r);if(!s)return null;const{ranges:o,actualTileWidth:a,actualTileHeight:l,ifd:c}=s,u=o.map($=>this.request(this.url,{range:$,responseType:"array-buffer",signal:i.signal})),h=await Promise.all(u),f=h.map($=>$.data.byteLength).reduce(($,T)=>$+T),d=h.length===1?h[0].data:new ArrayBuffer(f),g=[0],y=[0];if(h.length>1){const $=new Uint8Array(d);for(let T=0,A=0;T<h.length;T++){const I=h[T].data;$.set(new Uint8Array(I),A),g[T]=A,A+=I.byteLength,y[T]=I.byteLength}}const{blockWidth:w,blockHeight:v}=this.getBlockWidthHeight(e),x=await this.decodePixelBlock(d,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:c,offsets:g,sizes:y},width:w,height:v,planes:null,pixelType:null});if(x==null)return null;let S,_,M;if(a!==w||l!==v){let $=x.mask;if($)for(S=0;S<v;S++)if(M=S*w,S<l)for(_=a;_<w;_++)$[M+_]=0;else for(_=0;_<w;_++)$[M+_]=0;else for($=new Uint8Array(w*v),x.mask=$,S=0;S<l;S++)for(M=S*w,_=0;_<a;_++)$[M+_]=1}return x}_getTileLocation(e,t,n,r=!1){const{firstPyramidLevel:i,blockBoundary:s}=this.rasterInfo.storageInfo,o=e===0?0:e-(i-1),{_headerInfo:a}=this;if(!a)return null;const l=r?a.maskIFDs[o]:o===0?a==null?void 0:a.ifds[0]:a==null?void 0:a.pyramidIFDs[o-1];if(!l)return null;const c=om(l,a),u=gv(l,"TILEOFFSETS");if(u===void 0)return null;const h=gv(l,"TILEBYTECOUNTS"),{minRow:f,minCol:d,maxRow:g,maxCol:y}=s[o];if(t>g||n>y||t<f||n<d)return null;const w=ad(l,"IMAGEWIDTH"),v=ad(l,"IMAGELENGTH"),x=ad(l,"TILEWIDTH"),S=ad(l,"TILELENGTH"),_=[];if(c){const{bandCount:M}=this.rasterInfo;for(let $=0;$<M;$++){const T=$*(g+1)*(y+1)+t*(y+1)+n;_[$]={from:u[T],to:u[T]+h[T]-1}}}else{const M=t*(y+1)+n;_.push({from:u[M],to:u[M]+h[M]-1})}for(let M=0;M<_.length;M++)if(_[M].from==null||!_[M].to||_[M].to<0)return null;return{ranges:_,ifd:l,actualTileWidth:n===y&&w%x||x,actualTileHeight:t===g&&v%S||S}}async _fetchAuxiliaryMetaData(e){try{const{data:t}=await this.request(this.url+".aux.xml",{responseType:"xml",signal:e==null?void 0:e.signal});return v4(t)}catch{return null}}async _fetchAuxiliaryTable(e){try{const{data:t}=await this.request(this.url+".vat.dbf",{responseType:"array-buffer",signal:e==null?void 0:e.signal}),n=p7.parse(t);return n!=null&&n.recordSet?Yb.fromJSON(n.recordSet):null}catch{return null}}};p([b()],uc.prototype,"_files",void 0),p([b()],uc.prototype,"_headerInfo",void 0),p([b()],uc.prototype,"_bufferSize",void 0),p([b({type:String,json:{write:!0}})],uc.prototype,"datasetFormat",void 0),uc=p([L("esri.layers.support.rasterDatasets.TIFFRaster")],uc);const Ode=uc,hr=new Map;hr.set("CRF",{desc:"Cloud Raster Format",constructor:vde}),hr.set("MRF",{desc:"Meta Raster Format",constructor:Cde}),hr.set("TIFF",{desc:"GeoTIFF",constructor:Ode}),hr.set("RasterTileServer",{desc:"Raster Tile Server",constructor:Ede}),hr.set("JPG",{desc:"JPG Raster Format",constructor:xg}),hr.set("PNG",{desc:"PNG Raster Format",constructor:xg}),hr.set("GIF",{desc:"GIF Raster Format",constructor:xg}),hr.set("BMP",{desc:"BMP Raster Format",constructor:xg});class Pde{static get supportedFormats(){const t=new Set;return hr.forEach((n,r)=>t.add(r)),t}static async open(t){const{url:n,ioConfig:r,sourceJSON:i}=t;let s=t.datasetFormat;s==null&&n.lastIndexOf(".")&&(s=n.slice(n.lastIndexOf(".")+1).toUpperCase()),s==="OVR"||s==="TIF"?s="TIFF":s!=="JPG"&&s!=="JPEG"&&s!=="JFIF"||(s="JPG"),n.toLowerCase().includes("/imageserver")&&!n.toLowerCase().includes("/wcsserver")&&(s="RasterTileServer");const o={url:n,sourceJSON:i,datasetFormat:s,ioConfig:r??{bandIds:null,sampling:null}};let a,l;if(s&&this.supportedFormats.has(s)){if(s==="CRF"&&!(r!=null&&r.enableCRF))throw new Y("rasterfactory:open",`cannot open raster: ${n}`);return a=hr.get(s).constructor,l=new a(o),await l.open({signal:t.signal}),l}if(s)throw new Y("rasterfactory:open","not a supported format "+s);const c=Array.from(hr.keys());let u=0;const h=()=>(s=c[u++],s&&(s!=="CRF"||r!=null&&r.enableCRF)?(a=hr.get(s).constructor,l=new a(o),l.open({signal:t.signal}).then(()=>l).catch(()=>h())):null);return h()}static register(t,n,r){hr.has(t.toUpperCase())||hr.set(t.toUpperCase(),{desc:n,constructor:r})}}function Rde({displayField:e,editFieldsInfo:t,fields:n,objectIdField:r,title:i},s){if(!n)return null;const o=Fde({editFieldsInfo:t,fields:n,objectIdField:r},s);if(!o.length)return null;const a=Bde({titleBase:i,fields:n,displayField:e}),l=zde();return new $$({title:a,content:l,fieldInfos:o})}const Nde=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):une(e,t);function Dde(e,t){const n=e;return t&&(e=e.filter(r=>!t.includes(r.type))),e===n&&(e=e.slice()),e.sort(Lde),e}function Lde(e,t){return e.type==="oid"?-1:t.type==="oid"?1:NE(e)?-1:NE(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function Fde(e,t){const n=t==null?void 0:t.visibleFieldNames;return Dde(e.fields??[],(t==null?void 0:t.ignoreFieldTypes)||Ude).map(r=>new x$({fieldName:r.name,isEditable:cne(r,e),label:r.alias,format:jde(r),visible:Nde(r,{...e,visibleFieldNames:n})}))}function jde(e){switch(e.type){case"small-integer":case"integer":case"single":return new iy({digitSeparator:!0,places:0});case"double":return new iy({digitSeparator:!0,places:2});case"string":return Cne(e.name)?new iy({digitSeparator:!0,places:0}):null;default:return null}}function zde(){return[new d0,new f0]}function Bde(e){const t=Qte(e),{titleBase:n}=e;return t?`${n}: {${t.trim()}}`:n??""}function NE(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"}const Ude=["geometry","blob","raster","guid","xml"];var Ch;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Ch||(Ch={}));let tn=class extends i9(s9(Xfe(ode(Bie(Yfe(dde(zie(hde(u9(_n(GL))))))))))){constructor(...e){super(...e),this._primaryRasters=[],this.bandIds=null,this.interpolation=null,this.legendEnabled=!0,this.isReference=null,this.listMode="show",this.sourceJSON=null,this.version=null,this.type="imagery-tile",this.operationalLayerType="ArcGISTiledImageServiceLayer",this.popupEnabled=!0,this.popupTemplate=null,this.fields=null,this._debouncedSaveOperations=eM(async(t,n,r)=>{const{save:i,saveAs:s}=await ne(()=>import("./imageryUtils-c3da997b.js"),["assets/imageryUtils-c3da997b.js","assets/utils-2132f574.js","assets/originUtils-cfe4feaf.js","assets/multiOriginJSONSupportUtils-c978f4c3.js","assets/jsonContext-08550f59.js","assets/saveAPIKeyUtils-b849c848.js"]);switch(t){case Ch.SAVE:return i(this,n);case Ch.SAVE_AS:return s(this,r,n)}})}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).catch(hs).then(()=>this._openRaster(t))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}get rasterFields(){var a;const e=[new ka({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"}),new ka({name:"Raster.ServicePixelValue.Raw",alias:"Raw Pixel Value",domain:null,editable:!1,length:50,type:"string"})],{rasterInfo:t}=this,n=t==null?void 0:t.attributeTable,r=n!=null?n.fields:null,i="Raster.";if(r){const l=r.filter(c=>c.type!=="oid"&&c.name.toLowerCase()!=="value").map(c=>{const u=c.clone();return u.name=i+c.name,u});e.push(...l)}const s=t==null?void 0:t.dataType,o=t==null?void 0:t.multidimensionalInfo;if((s==="vector-magdir"||s==="vector-uv")&&o!=null){const l=(a=o.variables[0].unit)==null?void 0:a.trim(),c="Magnitude"+(l?` (${l})`:"");e.push(new ka({name:"Raster.Magnitude",alias:c,domain:null,editable:!1,type:"double"})),e.push(new ka({name:"Raster.Direction",alias:"Direction (Â°)",domain:null,editable:!1,type:"double"}))}return e}createPopupTemplate(e){const{rasterFields:t}=this,n=new Set(t.map(({name:r})=>r).filter(r=>r.toLowerCase()!=="raster.servicepixelvalue.raw"));return Rde({fields:t,title:this.title},{...e,visibleFieldNames:n})}async generateRasterInfo(e,t){var n;if(!(e=za(pu,e)))return this.rasterInfo;try{const r={raster:this._primaryRasters[0]};this._primaryRasters.length>1&&this._primaryRasters.forEach(o=>r[o.url]=o);const i=d5(((n=e.functionDefinition)==null?void 0:n.toJSON())??e.toJSON(),r),s=new G_({rasterFunction:i});return await s.open(t),s.rasterInfo}catch(r){throw r instanceof Y?r:new Y("imagery-tile-layer","the given raster function is not supported")}}async save(e){return this._debouncedSaveOperations(Ch.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Ch.SAVE_AS,t,e)}write(e,t){const n=this._primaryRasters[0]??this.raster;if(this.loaded?n.datasetFormat==="RasterTileServer"&&(n.tileType==="Raster"||n.tileType==="Map"):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))return super.write(e,t);if(t!=null&&t.messages){const r=`${t.origin}/${t.layerContainerType||"operational-layers"}`;t.messages.push(new Y("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${r}'`,{layer:this}))}return null}async _openRaster(e){var r;let t=!1;if(this.raster)this.raster.rasterInfo||await this.raster.open(),this.raster.datasetFormat==="Function"?(t=!0,this._primaryRasters=this.raster.primaryRasters.rasters):this._primaryRasters=[this.raster],this.url=this.raster.url;else{const{rasterFunction:i}=this,s=[this.url];i&&t7(i.toJSON(),s);const o=await Promise.all(s.map(l=>Pde.open({url:l,sourceJSON:this.sourceJSON,ioConfig:{sampling:"closest",...this.ioConfig,customFetchParameters:this.customParameters},signal:e}))),a=o.findIndex(l=>l==null);if(a>-1)throw new Y("imagery-tile-layer:open",`cannot open raster: ${s[a]}`);if(this._primaryRasters=o,i){const l={raster:this._primaryRasters[0]};this._primaryRasters.length>1&&this._primaryRasters.forEach(h=>l[h.url]=h);const c=d5(((r=i.functionDefinition)==null?void 0:r.toJSON())??i.toJSON(),l),u=new G_({rasterFunction:c});try{await u.open(),this.raster=u}catch(h){const f=ie.getLogger(this);h instanceof Y&&f.error("imagery-tile-layer:open",h.message),f.warn("imagery-tile-layer:open","the raster function cannot be applied and is removed"),this._set("rasterFunction",null),this.raster=o[0]}}else this.raster=o[0]}const n=this.raster.rasterInfo;if(!n)throw new Y("imagery-tile-layer:load","cannot load resources on "+this.url);if(this._set("rasterInfo",t?n:this._primaryRasters[0].rasterInfo),this._set("spatialReference",n.spatialReference),this.sourceJSON=this.sourceJSON||this.raster.sourceJSON,this.sourceJSON!=null){const i=this.raster.tileType==="Map"&&this.sourceJSON.minLOD!=null&&this.sourceJSON.maxLOD!=null?this.sourceJSON:{...this.sourceJSON,minScale:0,maxScale:0};this.read(i,{origin:"service"})}else this.read({tileInfo:this.rasterInfo.storageInfo.tileInfo.toJSON()},{origin:"service"});this.title||(this.title=this.raster.datasetName),this.raster.tileType==="Map"&&(this.popupEnabled=!1),this._configDefaultSettings(),this.addHandles(co(()=>this.customParameters,i=>{this.raster&&(this.raster.ioConfig.customFetchParameters=i)}))}};p([b({clonable:!1})],tn.prototype,"_primaryRasters",void 0),p([b({type:[Be],json:{write:{overridePolicy(){var e;return{enabled:!this.loaded||this.raster.tileType==="Raster"||((e=this.bandIds)==null?void 0:e.join(","))!=="0,1,2"}}}}})],tn.prototype,"bandIds",void 0),p([b({json:{write:{overridePolicy(){return{enabled:!this.loaded||this.raster.tileType==="Raster"||this.interpolation!=="bilinear"}}}}}),pe(Rae)],tn.prototype,"interpolation",void 0),p([b(Eae)],tn.prototype,"legendEnabled",void 0),p([b({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],tn.prototype,"isReference",void 0),p([b({type:["show","hide"]})],tn.prototype,"listMode",void 0),p([b({json:{read:!0,write:!0}})],tn.prototype,"blendMode",void 0),p([b()],tn.prototype,"sourceJSON",void 0),p([b({readOnly:!0,json:{origins:{service:{read:{source:"currentVersion"}}}}})],tn.prototype,"version",void 0),p([b({readOnly:!0,json:{read:!1}})],tn.prototype,"type",void 0),p([b({type:["ArcGISTiledImageServiceLayer"]})],tn.prototype,"operationalLayerType",void 0),p([b({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy(){return{enabled:!this.loaded||this.raster.tileType==="Raster"}},writer(e,t,n){t[n]=!e}}}})],tn.prototype,"popupEnabled",void 0),p([b({type:$$,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy(){return{enabled:!this.loaded||this.raster.tileType==="Raster"}}}}})],tn.prototype,"popupTemplate",void 0),p([b({readOnly:!0})],tn.prototype,"defaultPopupTemplate",null),p([b({readOnly:!0,type:[ka]})],tn.prototype,"fields",void 0),p([b({readOnly:!0,type:[ka]})],tn.prototype,"rasterFields",null),tn=p([L("esri.layers.ImageryTileLayer")],tn);const b7=tn,H$e=Object.freeze(Object.defineProperty({__proto__:null,default:b7},Symbol.toStringTag,{value:"Module"}));/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function am(e){return e+.5|0}const Oa=(e,t,n)=>Math.max(Math.min(e,n),t);function lp(e){return Oa(am(e*2.55),0,255)}function La(e){return Oa(am(e*255),0,255)}function Xs(e){return Oa(am(e/2.55)/100,0,1)}function DE(e){return Oa(am(e*100),0,100)}const Vr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$5=[..."0123456789ABCDEF"],Vde=e=>$5[e&15],Gde=e=>$5[(e&240)>>4]+$5[e&15],Sg=e=>(e&240)>>4===(e&15),Wde=e=>Sg(e.r)&&Sg(e.g)&&Sg(e.b)&&Sg(e.a);function Hde(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Vr[e[1]]*17,g:255&Vr[e[2]]*17,b:255&Vr[e[3]]*17,a:t===5?Vr[e[4]]*17:255}:(t===7||t===9)&&(n={r:Vr[e[1]]<<4|Vr[e[2]],g:Vr[e[3]]<<4|Vr[e[4]],b:Vr[e[5]]<<4|Vr[e[6]],a:t===9?Vr[e[7]]<<4|Vr[e[8]]:255})),n}const qde=(e,t)=>e<255?t(e):"";function Jde(e){var t=Wde(e)?Vde:Gde;return e?"#"+t(e.r)+t(e.g)+t(e.b)+qde(e.a,t):void 0}const Zde=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function w7(e,t,n){const r=t*Math.min(n,1-n),i=(s,o=(s+e/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Yde(e,t,n){const r=(i,s=(i+e/60)%6)=>n-n*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Kde(e,t,n){const r=w7(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function Xde(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}function x4(e){const n=e.r/255,r=e.g/255,i=e.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Xde(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function S4(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(La)}function _4(e,t,n){return S4(w7,e,t,n)}function Qde(e,t,n){return S4(Kde,e,t,n)}function epe(e,t,n){return S4(Yde,e,t,n)}function v7(e){return(e%360+360)%360}function tpe(e){const t=Zde.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?lp(+t[5]):La(+t[5]));const i=v7(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?r=Qde(i,s,o):t[1]==="hsv"?r=epe(i,s,o):r=_4(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function npe(e,t){var n=x4(e);n[0]=v7(n[0]+t),n=_4(n),e.r=n[0],e.g=n[1],e.b=n[2]}function rpe(e){if(!e)return;const t=x4(e),n=t[0],r=DE(t[1]),i=DE(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${i}%, ${Xs(e.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const LE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},FE={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ipe(){const e={},t=Object.keys(FE),n=Object.keys(LE);let r,i,s,o,a;for(r=0;r<t.length;r++){for(o=a=t[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,LE[s]);s=parseInt(FE[o],16),e[a]=[s>>16&255,s>>8&255,s&255]}return e}let _g;function spe(e){_g||(_g=ipe(),_g.transparent=[0,0,0,0]);const t=_g[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const ope=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ape(e){const t=ope.exec(e);let n=255,r,i,s;if(t){if(t[7]!==r){const o=+t[7];n=t[8]?lp(o):Oa(o*255,0,255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?lp(r):Oa(r,0,255)),i=255&(t[4]?lp(i):Oa(i,0,255)),s=255&(t[6]?lp(s):Oa(s,0,255)),{r,g:i,b:s,a:n}}}function lpe(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Xs(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const yv=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Gu=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function cpe(e,t,n){const r=Gu(Xs(e.r)),i=Gu(Xs(e.g)),s=Gu(Xs(e.b));return{r:La(yv(r+n*(Gu(Xs(t.r))-r))),g:La(yv(i+n*(Gu(Xs(t.g))-i))),b:La(yv(s+n*(Gu(Xs(t.b))-s))),a:e.a+n*(t.a-e.a)}}function Mg(e,t,n){if(e){let r=x4(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=_4(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function x7(e,t){return e&&Object.assign(t||{},e)}function jE(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=La(e[3]))):(t=x7(e,{r:0,g:0,b:0,a:1}),t.a=La(t.a)),t}function upe(e){return e.charAt(0)==="r"?ape(e):tpe(e)}class x0{constructor(t){if(t instanceof x0)return t;const n=typeof t;let r;n==="object"?r=jE(t):n==="string"&&(r=Hde(t)||spe(t)||upe(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=x7(this._rgb);return t&&(t.a=Xs(t.a)),t}set rgb(t){this._rgb=jE(t)}rgbString(){return this._valid?lpe(this._rgb):void 0}hexString(){return this._valid?Jde(this._rgb):void 0}hslString(){return this._valid?rpe(this._rgb):void 0}mix(t,n){if(t){const r=this.rgb,i=t.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(t,n){return t&&(this._rgb=cpe(this._rgb,t._rgb,n)),this}clone(){return new x0(this.rgb)}alpha(t){return this._rgb.a=La(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=am(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Mg(this._rgb,2,t),this}darken(t){return Mg(this._rgb,2,-t),this}saturate(t){return Mg(this._rgb,1,t),this}desaturate(t){return Mg(this._rgb,1,-t),this}rotate(t){return npe(this._rgb,t),this}}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Rs(){}const hpe=(()=>{let e=0;return()=>e++})();function qe(e){return e===null||typeof e>"u"}function wt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Fe(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Et(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function kr(e,t){return Et(e)?e:t}function Oe(e,t){return typeof e>"u"?t:e}const fpe=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,S7=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function mt(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function st(e,t,n,r){let i,s,o;if(wt(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(Fe(e))for(o=Object.keys(e),s=o.length,i=0;i<s;i++)t.call(n,e[o[i]],o[i])}function h2(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function f2(e){if(wt(e))return e.map(f2);if(Fe(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=f2(e[n[i]]);return t}return e}function _7(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function dpe(e,t,n,r){if(!_7(e))return;const i=t[e],s=n[e];Fe(i)&&Fe(s)?S0(i,s,r):t[e]=f2(s)}function S0(e,t,n){const r=wt(t)?t:[t],i=r.length;if(!Fe(e))return e;n=n||{};const s=n.merger||dpe;let o;for(let a=0;a<i;++a){if(o=r[a],!Fe(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],e,o,n)}return e}function Up(e,t){return S0(e,t,{merger:ppe})}function ppe(e,t,n){if(!_7(e))return;const r=t[e],i=n[e];Fe(r)&&Fe(i)?Up(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=f2(i))}const zE={"":e=>e,x:e=>e.x,y:e=>e.y};function mpe(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function gpe(e){const t=mpe(e);return n=>{for(const r of t){if(r==="")break;n=n&&n[r]}return n}}function el(e,t){return(zE[t]||(zE[t]=gpe(t)))(e)}function M4(e){return e.charAt(0).toUpperCase()+e.slice(1)}const _0=e=>typeof e<"u",tl=e=>typeof e=="function",BE=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function ype(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const xt=Math.PI,vt=2*xt,bpe=vt+xt,d2=Number.POSITIVE_INFINITY,wpe=xt/180,Dt=xt/2,bl=xt/4,UE=xt*2/3,Pa=Math.log10,vs=Math.sign;function Vp(e,t,n){return Math.abs(e-t)<n}function VE(e){const t=Math.round(e);e=Vp(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Pa(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function vpe(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((i,s)=>i-s).pop(),t}function wf(e){return!isNaN(parseFloat(e))&&isFinite(e)}function xpe(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function M7(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Ei(e){return e*(xt/180)}function $4(e){return e*(180/xt)}function GE(e){if(!Et(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function $7(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*xt&&(s+=vt),{angle:s,distance:i}}function T5(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Spe(e,t){return(e-t+bpe)%vt-xt}function Cr(e){return(e%vt+vt)%vt}function M0(e,t,n,r){const i=Cr(e),s=Cr(t),o=Cr(n),a=Cr(s-i),l=Cr(o-i),c=Cr(i-s),u=Cr(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function mn(e,t,n){return Math.max(t,Math.min(n,e))}function _pe(e){return mn(e,-32768,32767)}function ro(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function T4(e,t,n){n=n||(o=>e[o]<t);let r=e.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const io=(e,t,n,r)=>T4(e,n,r?i=>{const s=e[i][t];return s<n||s===n&&e[i+1][t]===n}:i=>e[i][t]<n),Mpe=(e,t,n)=>T4(e,n,r=>e[r][t]>=n);function $pe(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}const T7=["push","pop","shift","splice","unshift"];function Tpe(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),T7.forEach(n=>{const r="_onData"+M4(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return e._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function WE(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(T7.forEach(s=>{delete e[s]}),delete e._chartjs)}function A7(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const I7=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function k7(e,t){let n=[],r=!1;return function(...i){n=i,r||(r=!0,I7.call(window,()=>{r=!1,e.apply(t,n)}))}}function Ape(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const A4=e=>e==="start"?"left":e==="end"?"right":"center",Ln=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,Ipe=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function E7(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:f}=o.getUserBounds();h&&(i=mn(Math.min(io(a,l,c).lo,n?r:io(t,l,o.getPixelForValue(c)).lo),0,r-1)),f?s=mn(Math.max(io(a,o.axis,u,!0).hi+1,n?0:io(t,l,o.getPixelForValue(u),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function C7(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const $g=e=>e===0||e===1,HE=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*vt/n)),qE=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*vt/n)+1,Gp={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*Dt)+1,easeOutSine:e=>Math.sin(e*Dt),easeInOutSine:e=>-.5*(Math.cos(xt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>$g(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>$g(e)?e:HE(e,.075,.3),easeOutElastic:e=>$g(e)?e:qE(e,.075,.3),easeInOutElastic(e){return $g(e)?e:e<.5?.5*HE(e*2,.1125,.45):.5+.5*qE(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Gp.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Gp.easeInBounce(e*2)*.5:Gp.easeOutBounce(e*2-1)*.5+.5};function I4(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function JE(e){return I4(e)?e:new x0(e)}function bv(e){return I4(e)?e:new x0(e).saturate(.5).darken(.1).hexString()}const kpe=["x","y","borderWidth","radius","tension"],Epe=["color","borderColor","backgroundColor"];function Cpe(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:Epe},numbers:{type:"number",properties:kpe}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Ope(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ZE=new Map;function Ppe(e,t){t=t||{};const n=e+JSON.stringify(t);let r=ZE.get(n);return r||(r=new Intl.NumberFormat(e,t),ZE.set(n,r)),r}function lm(e,t,n){return Ppe(t,n).format(e)}const O7={values(e){return wt(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=Rpe(e,n)}const o=Pa(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),lm(e,r,l)},logarithmic(e,t,n){if(e===0)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Pa(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?O7.numeric.call(this,e,t,n):""}};function Rpe(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var tw={formatters:O7};function Npe(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const gu=Object.create(null),A5=Object.create(null);function Wp(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];e=e[s]||(e[s]=Object.create(null))}return e}function wv(e,t,n){return typeof t=="string"?S0(Wp(e,t),n):S0(Wp(e,""),t)}class Dpe{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>bv(i.backgroundColor),this.hoverBorderColor=(r,i)=>bv(i.borderColor),this.hoverColor=(r,i)=>bv(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return wv(this,t,n)}get(t){return Wp(this,t)}describe(t,n){return wv(A5,t,n)}override(t,n){return wv(gu,t,n)}route(t,n,r,i){const s=Wp(this,t),o=Wp(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Fe(l)?Object.assign({},c,l):Oe(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(n=>n(this))}}var Ct=new Dpe({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Cpe,Ope,Npe]);function Lpe(e){return!e||qe(e.size)||qe(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function p2(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Fpe(e,t,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,f;for(l=0;l<a;l++)if(h=n[l],h!=null&&!wt(h))o=p2(e,i,s,o,h);else if(wt(h))for(c=0,u=h.length;c<u;c++)f=h[c],f!=null&&!wt(f)&&(o=p2(e,i,s,o,f));e.restore();const d=s.length/2;if(d>n.length){for(l=0;l<d;l++)delete i[s[l]];s.splice(0,d)}return o}function wl(e,t,n){const r=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function YE(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function I5(e,t,n,r){P7(e,t,n,r,null)}function P7(e,t,n,r,i){let s,o,a,l,c,u,h,f;const d=t.pointStyle,g=t.rotation,y=t.radius;let w=(g||0)*wpe;if(d&&typeof d=="object"&&(s=d.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(w),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),e.restore();return}if(!(isNaN(y)||y<=0)){switch(e.beginPath(),d){default:i?e.ellipse(n,r,i/2,y,0,0,vt):e.arc(n,r,y,0,vt),e.closePath();break;case"triangle":u=i?i/2:y,e.moveTo(n+Math.sin(w)*u,r-Math.cos(w)*y),w+=UE,e.lineTo(n+Math.sin(w)*u,r-Math.cos(w)*y),w+=UE,e.lineTo(n+Math.sin(w)*u,r-Math.cos(w)*y),e.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(w+bl)*l,h=Math.cos(w+bl)*(i?i/2-c:l),a=Math.sin(w+bl)*l,f=Math.sin(w+bl)*(i?i/2-c:l),e.arc(n-h,r-a,c,w-xt,w-Dt),e.arc(n+f,r-o,c,w-Dt,w),e.arc(n+h,r+a,c,w,w+Dt),e.arc(n-f,r+o,c,w+Dt,w+xt),e.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*y,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}w+=bl;case"rectRot":h=Math.cos(w)*(i?i/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,f=Math.sin(w)*(i?i/2:y),e.moveTo(n-h,r-a),e.lineTo(n+f,r-o),e.lineTo(n+h,r+a),e.lineTo(n-f,r+o),e.closePath();break;case"crossRot":w+=bl;case"cross":h=Math.cos(w)*(i?i/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,f=Math.sin(w)*(i?i/2:y),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"star":h=Math.cos(w)*(i?i/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,f=Math.sin(w)*(i?i/2:y),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o),w+=bl,h=Math.cos(w)*(i?i/2:y),o=Math.cos(w)*y,a=Math.sin(w)*y,f=Math.sin(w)*(i?i/2:y),e.moveTo(n-h,r-a),e.lineTo(n+h,r+a),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(w)*y,a=Math.sin(w)*y,e.moveTo(n-o,r-a),e.lineTo(n+o,r+a);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(w)*(i?i/2:y),r+Math.sin(w)*y);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function so(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function nw(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function rw(e){e.restore()}function jpe(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const s=(t.x+n.x)/2;e.lineTo(s,t.y),e.lineTo(s,n.y)}else i==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function zpe(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Bpe(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),qe(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function Upe(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function Vpe(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function yu(e,t,n,r,i,s={}){const o=wt(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(e.save(),e.font=i.string,Bpe(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Vpe(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),qe(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),Upe(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function $0(e,t){const{x:n,y:r,w:i,h:s,radius:o}=t;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*xt,xt,!0),e.lineTo(n,r+s-o.bottomLeft),e.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,xt,Dt,!0),e.lineTo(n+i-o.bottomRight,r+s),e.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Dt,0,!0),e.lineTo(n+i,r+o.topRight),e.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Dt,!0),e.lineTo(n+o.topLeft,r)}const Gpe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Wpe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Hpe(e,t){const n=(""+e).match(Gpe);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const qpe=e=>+e||0;function k4(e,t){const n={},r=Fe(t),i=r?Object.keys(t):t,s=Fe(e)?r?o=>Oe(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=qpe(s(o));return n}function R7(e){return k4(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Gc(e){return k4(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Jn(e){const t=R7(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function on(e,t){e=e||{},t=t||Ct.font;let n=Oe(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=Oe(e.style,t.style);r&&!(""+r).match(Wpe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Oe(e.family,t.family),lineHeight:Hpe(Oe(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Oe(e.weight,t.weight),string:""};return i.string=Lpe(i),i}function cp(e,t,n,r){let i=!0,s,o,a;for(s=0,o=e.length;s<o;++s)if(a=e[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),i=!1),n!==void 0&&wt(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function Jpe(e,t,n){const{min:r,max:i}=e,s=S7(t,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function cl(e,t){return Object.assign(Object.create(e),t)}function E4(e,t=[""],n,r,i=()=>e[0]){const s=n||e;typeof r>"u"&&(r=F7("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>E4([a,...e],t,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete e[0][l],!0},get(a,l){return D7(a,l,()=>n0e(l,t,e,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,l){return XE(a).includes(l)},ownKeys(a){return XE(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function vf(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:N7(e,r),setContext:s=>vf(e,s,n,r),override:s=>vf(e.override(s),t,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete e[o],!0},get(s,o,a){return D7(s,o,()=>Ype(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(s,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(s,o,a){return e[o]=a,delete s[o],!0}})}function N7(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:tl(n)?n:()=>n,isIndexable:tl(r)?r:()=>r}}const Zpe=(e,t)=>e?e+M4(t):t,C4=(e,t)=>Fe(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function D7(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=n();return e[t]=r,r}function Ype(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=e;let a=r[t];return tl(a)&&o.isScriptable(t)&&(a=Kpe(t,a,e,n)),wt(a)&&a.length&&(a=Xpe(t,a,e,o.isIndexable)),C4(t,a)&&(a=vf(a,i,s&&s[t],o)),a}function Kpe(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||r);return a.delete(e),C4(e,l)&&(l=O4(i._scopes,i,e,l)),l}function Xpe(e,t,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(e))return t[s.index%t.length];if(Fe(t[0])){const l=t,c=i._scopes.filter(u=>u!==l);t=[];for(const u of l){const h=O4(c,i,e,u);t.push(vf(h,s,o&&o[e],a))}}return t}function L7(e,t,n){return tl(e)?e(t,n):e}const Qpe=(e,t)=>e===!0?t:typeof e=="string"?el(t,e):void 0;function e0e(e,t,n,r,i){for(const s of t){const o=Qpe(n,s);if(o){e.add(o);const a=L7(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function O4(e,t,n,r){const i=t._rootScopes,s=L7(t._fallback,n,r),o=[...e,...i],a=new Set;a.add(r);let l=KE(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=KE(a,o,s,l,r),l===null)?!1:E4(Array.from(a),[""],i,s,()=>t0e(t,n,r))}function KE(e,t,n,r,i){for(;n;)n=e0e(e,t,n,r,i);return n}function t0e(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];return wt(i)&&Fe(n)?n:i||{}}function n0e(e,t,n,r){let i;for(const s of t)if(i=F7(Zpe(s,e),n),typeof i<"u")return C4(e,i)?O4(n,r,e,i):i}function F7(e,t){for(const n of t){if(!n)continue;const r=n[e];if(typeof r<"u")return r}}function XE(e){let t=e._keys;return t||(t=e._keys=r0e(e._scopes)),t}function r0e(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}function j7(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,u;for(a=0,l=r;a<l;++a)c=a+n,u=t[c],o[a]={r:i.parse(el(u,s),c)};return o}const i0e=Number.EPSILON||1e-14,xf=(e,t)=>t<e.length&&!e[t].skip&&e[t],z7=e=>e==="x"?"y":"x";function s0e(e,t,n,r){const i=e.skip?t:e,s=t,o=n.skip?t:n,a=T5(s,i),l=T5(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,f=r*u;return{previous:{x:s.x-h*(o.x-i.x),y:s.y-h*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function o0e(e,t,n){const r=e.length;let i,s,o,a,l,c=xf(e,0);for(let u=0;u<r-1;++u)if(l=c,c=xf(e,u+1),!(!l||!c)){if(Vp(t[u],0,i0e)){n[u]=n[u+1]=0;continue}i=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*t[u],n[u+1]=s*o*t[u])}}function a0e(e,t,n="x"){const r=z7(n),i=e.length;let s,o,a,l=xf(e,0);for(let c=0;c<i;++c){if(o=a,a=l,l=xf(e,c+1),!a)continue;const u=a[n],h=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=h-s*t[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=h+s*t[c])}}function l0e(e,t="x"){const n=z7(t),r=e.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=xf(e,0);for(o=0;o<r;++o)if(a=l,l=c,c=xf(e,o+1),!!l){if(c){const u=c[t]-l[t];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?vs(i[o-1])!==vs(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}o0e(e,i,s),a0e(e,s,t)}function Tg(e,t,n){return Math.max(Math.min(e,n),t)}function c0e(e,t){let n,r,i,s,o,a=so(e[0],t);for(n=0,r=e.length;n<r;++n)o=s,s=a,a=n<r-1&&so(e[n+1],t),s&&(i=e[n],o&&(i.cp1x=Tg(i.cp1x,t.left,t.right),i.cp1y=Tg(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Tg(i.cp2x,t.left,t.right),i.cp2y=Tg(i.cp2y,t.top,t.bottom)))}function u0e(e,t,n,r,i){let s,o,a,l;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")l0e(e,i);else{let c=r?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=s0e(c,a,e[Math.min(s+1,o-(r?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&c0e(e,n)}function B7(){return typeof window<"u"&&typeof document<"u"}function P4(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function m2(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const iw=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function h0e(e,t){return iw(e).getPropertyValue(t)}const f0e=["top","right","bottom","left"];function Wc(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=f0e[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const d0e=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function p0e(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(d0e(i,s,e.target))a=i,l=s;else{const c=t.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function hc(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=iw(n),s=i.boxSizing==="border-box",o=Wc(i,"padding"),a=Wc(i,"border","width"),{x:l,y:c,box:u}=p0e(e,n),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:d,height:g}=t;return s&&(d-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/d*n.width/r),y:Math.round((c-f)/g*n.height/r)}}function m0e(e,t,n){let r,i;if(t===void 0||n===void 0){const s=P4(e);if(!s)t=e.clientWidth,n=e.clientHeight;else{const o=s.getBoundingClientRect(),a=iw(s),l=Wc(a,"border","width"),c=Wc(a,"padding");t=o.width-c.width-l.width,n=o.height-c.height-l.height,r=m2(a.maxWidth,s,"clientWidth"),i=m2(a.maxHeight,s,"clientHeight")}}return{width:t,height:n,maxWidth:r||d2,maxHeight:i||d2}}const Ag=e=>Math.round(e*10)/10;function g0e(e,t,n,r){const i=iw(e),s=Wc(i,"margin"),o=m2(i.maxWidth,e,"clientWidth")||d2,a=m2(i.maxHeight,e,"clientHeight")||d2,l=m0e(e,t,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=Wc(i,"border","width"),d=Wc(i,"padding");c-=d.width+f.width,u-=d.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Ag(Math.min(c,o,l.maxWidth)),u=Ag(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ag(c/2)),(t!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Ag(Math.floor(u*r))),{width:c,height:u}}function QE(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(e.currentDevicePixelRatio=r,o.height=i,o.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const y0e=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function eC(e,t){const n=h0e(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function fc(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function b0e(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function w0e(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=fc(e,i,n),a=fc(i,s,n),l=fc(s,t,n),c=fc(o,a,n),u=fc(a,l,n);return fc(c,u,n)}const v0e=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},x0e=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function qh(e,t,n){return e?v0e(t,n):x0e()}function U7(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function V7(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function G7(e){return e==="angle"?{between:M0,compare:Spe,normalize:Cr}:{between:ro,compare:(t,n)=>t-n,normalize:t=>t}}function tC({start:e,end:t,count:n,loop:r,style:i}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n===0,style:i}}function S0e(e,t,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=G7(r),l=t.length;let{start:c,end:u,loop:h}=e,f,d;if(h){for(c+=l,u+=l,f=0,d=l;f<d&&o(a(t[c%l][r]),i,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:e.style}}function W7(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=G7(r),{start:u,end:h,loop:f,style:d}=S0e(e,t,n),g=[];let y=!1,w=null,v,x,S;const _=()=>l(i,S,v)&&a(i,S)!==0,M=()=>a(s,v)===0||l(s,S,v),$=()=>y||_(),T=()=>!y||M();for(let A=u,I=u;A<=h;++A)x=t[A%o],!x.skip&&(v=c(x[r]),v!==S&&(y=l(v,i,s),w===null&&$()&&(w=a(v,i)===0?A:I),w!==null&&T()&&(g.push(tC({start:w,end:A,loop:f,count:o,style:d})),w=null),I=A,S=v));return w!==null&&g.push(tC({start:w,end:h,loop:f,count:o,style:d})),g}function H7(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=W7(r[i],e.points,t);s.length&&n.push(...s)}return n}function _0e(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}function M0e(e,t,n,r){const i=e.length,s=[];let o=t,a=e[t],l;for(l=t+1;l<=n;++l){const c=e[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:t%i,end:(l-1)%i,loop:r}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&s.push({start:t%i,end:o%i,loop:r}),s}function $0e(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:o,end:a}=_0e(n,i,s,r);if(r===!0)return nC(e,[{start:o,end:a,loop:s}],n,t);const l=a<o?a+i:a,c=!!e._fullLoop&&o===0&&a===i-1;return nC(e,M0e(n,o,l,c),n,t)}function nC(e,t,n,r){return!r||!r.setContext||!n?t:T0e(e,t,n,r)}function T0e(e,t,n,r){const i=e._chart.getContext(),s=rC(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,h=t[0].start,f=h;function d(g,y,w,v){const x=a?-1:1;if(g!==y){for(g+=l;n[g%l].skip;)g-=x;for(;n[y%l].skip;)y+=x;g%l!==y%l&&(c.push({start:g%l,end:y%l,loop:w,style:v}),u=v,h=y%l)}}for(const g of t){h=a?h:g.start;let y=n[h%l],w;for(f=h+1;f<=g.end;f++){const v=n[f%l];w=rC(r.setContext(cl(i,{type:"segment",p0:y,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),A0e(w,u)&&d(h,f-1,g.loop,u),y=v,u=w}h<f-1&&d(h,f-1,g.loop,u)}return c}function rC(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function A0e(e,t){if(!t)return!1;const n=[],r=function(i,s){return I4(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(e,r)!==JSON.stringify(t,r)}/*!
 * Chart.js v4.4.0
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class I0e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=I7.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),n+=s.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var qs=new I0e;const iC="transparent",k0e={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=JE(e||iC),i=r.valid&&JE(t||iC);return i&&i.valid?i.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class E0e{constructor(t,n,r,i){const s=n[r];i=cp([t.to,i,s,t.from]);const o=cp([t.from,s,i]);this._active=!0,this._fn=t.fn||k0e[t.type||typeof o],this._easing=Gp[t.easing]||Gp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=cp([t.to,n,i,t.from]),this._from=cp([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class q7{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Fe(t))return;const n=Object.keys(Ct.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!Fe(s))return;const o={};for(const a of n)o[a]=s[a];(wt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(t,n){const r=n.options,i=O0e(t,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&C0e(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,n){const r=this._properties,i=[],s=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,n));continue}const u=n[c];let h=s[c];const f=r.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){t[c]=u;continue}s[c]=h=new E0e(f,t,c,u),i.push(h)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return qs.add(this._chart,r),!0}}function C0e(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const s=e[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function O0e(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function sC(e,t){const n=e&&e.options||{},r=n.reverse,i=n.min===void 0?t:0,s=n.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function P0e(e,t,n){if(n===!1)return!1;const r=sC(e,n),i=sC(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function R0e(e){let t,n,r,i;return Fe(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:e===!1}}function J7(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function oC(e,t,n,r={}){const i=e.keys,s=r.mode==="single";let o,a,l,c;if(t!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=e.values[l],Et(c)&&(s||t===0||vs(t)===vs(c))&&(t+=c)}return t}}function N0e(e){const t=Object.keys(e),n=new Array(t.length);let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],n[r]={x:s,y:e[s]};return n}function aC(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function D0e(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function L0e(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function F0e(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function lC(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const s=e[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function cC(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=D0e(s,o,r),h=t.length;let f;for(let d=0;d<h;++d){const g=t[d],{[l]:y,[c]:w}=g,v=g._stacks||(g._stacks={});f=v[c]=F0e(i,u,y),f[a]=w,f._top=lC(f,o,!0,r.type),f._bottom=lC(f,o,!1,r.type);const x=f._visualValues||(f._visualValues={});x[a]=w}}function vv(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function j0e(e,t){return cl(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function z0e(e,t,n){return cl(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function ld(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const i of t){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const xv=e=>e==="reset"||e==="none",uC=(e,t)=>t?e:Object.assign({},e),B0e=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:J7(n,!0),values:null};class Ni{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=aC(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ld(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(h,f,d,g)=>h==="x"?f:h==="r"?g:d,s=n.xAxisID=Oe(r.xAxisID,vv(t,"x")),o=n.yAxisID=Oe(r.yAxisID,vv(t,"y")),a=n.rAxisID=Oe(r.rAxisID,vv(t,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&WE(this._data,this),t._stacked&&ld(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(Fe(n))this._data=N0e(n);else if(r!==n){if(r){WE(r,this);const i=this._cachedMeta;ld(i),i._parsed=[]}n&&Object.isExtensible(n)&&Tpe(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=aC(n.vScale,n),n.stack!==r.stack&&(i=!0,ld(n),n.stack=r.stack),this._resyncElements(t),(i||s!==n._stacked)&&cC(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=t===0&&n===i.length?!0:r._sorted,c=t>0&&r._parsed[t-1],u,h,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{wt(i[t])?f=this.parseArrayData(r,i,t,n):Fe(i[t])?f=this.parseObjectData(r,i,t,n):f=this.parsePrimitiveData(r,i,t,n);const d=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)r._parsed[u+t]=h=f[u],l&&(d()&&(l=!1),c=h);r._sorted=l}o&&cC(this,f)}parsePrimitiveData(t,n,r,i){const{iScale:s,vScale:o}=t,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(i);let f,d,g;for(f=0,d=i;f<d;++f)g=f+r,h[f]={[a]:u||s.parse(c[g],g),[l]:o.parse(n[g],g)};return h}parseArrayData(t,n,r,i){const{xScale:s,yScale:o}=t,a=new Array(i);let l,c,u,h;for(l=0,c=i;l<c;++l)u=l+r,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(t,n,r,i){const{xScale:s,yScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,h,f,d;for(u=0,h=i;u<h;++u)f=u+r,d=n[f],c[u]={x:s.parse(el(d,a),f),y:o.parse(el(d,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const i=this.chart,s=this._cachedMeta,o=n[t.axis],a={keys:J7(i,!0),values:n._stacks[t.axis]._visualValues};return oC(a,o,s.index,{mode:r})}updateRangeFromParsed(t,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=oC(i,s,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&t===r.iScale,o=i.length,a=this._getOtherScale(t),l=B0e(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=L0e(a);let f,d;function g(){d=i[f];const y=d[a.axis];return!Et(d[t.axis])||u>y||h<y}for(f=0;f<o&&!(!g()&&(this.updateRangeFromParsed(c,t,d,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(c,t,d,l);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][t.axis],Et(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(t);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=R0e(Oe(this.options.clip,P0e(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(t,s,a,l),u=a;u<a+l;++u){const h=i[u];h.hidden||(h.active&&c?o.push(h):h.draw(t,s))}for(u=0;u<o.length;++u)o[u].draw(t,s)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const i=this.getDataset();let s;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];s=o.$context||(o.$context=z0e(this.getContext(),t,o)),s.parsed=this.getParsed(t),s.raw=i.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=j0e(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=t+"-"+n,a=s[o],l=this.enableOptionSharing&&_0(r);if(a)return uC(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,t),h=i?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),u),d=Object.keys(Ct.elements[t]),g=()=>this.getContext(r,i,n),y=c.resolveNamedOptions(f,d,g,h);return y.$shared&&(y.$shared=l,s[o]=Object.freeze(uC(y,l))),y}_resolveAnimations(t,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(t,r,n))}const c=new q7(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||xv(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const r=this.resolveDataElementOptions(t,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(t,n,r,i){xv(i)?Object.assign(t,r):this._resolveAnimations(n,i).update(t,r)}updateSharedOptions(t,n,r){t&&!xv(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,i){t.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(t,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,t):s<i&&this._removeElements(s,i-s)}_insertElements(t,n,r=!0){const i=this._cachedMeta,s=i.data,o=t+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=t;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,n),r&&this.updateElements(s,t,n,"reset")}updateElements(t,n,r,i){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,n);r._stacked&&ld(r,i)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,i]=t;this[n](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ae(Ni,"defaults",{}),ae(Ni,"datasetElementType",null),ae(Ni,"dataElementType",null);function U0e(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(e));e._cache.$bar=A7(r.sort((i,s)=>i-s))}return e._cache.$bar}function V0e(e){const t=e.iScale,n=U0e(t,e.type);let r=t._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(_0(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=t.ticks.length;i<s;++i)o=t.getPixelForTick(i),l();return r}function G0e(e,t,n,r){const i=n.barThickness;let s,o;return qe(i)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:t.pixels[e]-s/2}}function W0e(e,t,n,r){const i=t.pixels,s=i[e];let o=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function H0e(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function Z7(e,t,n,r){return wt(e)?H0e(e,t,n,r):t[n.axis]=n.parse(e,r),t}function hC(e,t,n,r){const i=e.iScale,s=e.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,h,f;for(c=n,u=n+r;c<u;++c)f=t[c],h={},h[i.axis]=a||i.parse(o[c],c),l.push(Z7(f,h,s,c));return l}function Sv(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function q0e(e,t,n){return e!==0?vs(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function J0e(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}function Z0e(e,t,n,r){let i=t.borderSkipped;const s={};if(!i){e.borderSkipped=s;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=J0e(e);i==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[fC(u,o,a,l)]=!0,i=c)),s[fC(i,o,a,l)]=!0,e.borderSkipped=s}function fC(e,t,n,r){return r?(e=Y0e(e,t,n),e=dC(e,n,t)):e=dC(e,t,n),e}function Y0e(e,t,n){return e===t?n:e===n?t:e}function dC(e,t,n){return e==="start"?t:e==="end"?n:e}function K0e(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class Gy extends Ni{parsePrimitiveData(t,n,r,i){return hC(t,n,r,i)}parseArrayData(t,n,r,i){return hC(t,n,r,i)}parseObjectData(t,n,r,i){const{iScale:s,vScale:o}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,d,g,y;for(f=r,d=r+i;f<d;++f)y=n[f],g={},g[s.axis]=s.parse(el(y,c),f),h.push(Z7(el(y,u),g,o,f));return h}updateRangeFromParsed(t,n,r,i){super.updateRangeFromParsed(t,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(t),o=s._custom,a=Sv(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,i);for(let d=n;d<n+r;d++){const g=this.getParsed(d),y=s||qe(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),w=this._calculateBarIndexPixels(d,u),v=(g._stacks||{})[a.axis],x={horizontal:c,base:y.base,enableBorderRadius:!v||Sv(g._custom)||o===v._top||o===v._bottom,x:c?y.head:w.center,y:c?w.center:y.head,height:c?w.size:Math.abs(y.size),width:c?Math.abs(y.size):w.size};f&&(x.options=h||this.resolveDataElementOptions(d,t[d].active?"active":i));const S=x.options||t[d].options;Z0e(x,S,v,o),K0e(x,S,u.ratio),this.updateElement(t[d],d,x,i)}}_getStacks(t,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(qe(u)||isNaN(u))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,r){const i=this._getStacks(t,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const t=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=t.barThickness;return{min:a||V0e(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(t),c=l._custom,u=Sv(c);let h=l[n.axis],f=0,d=r?this.applyStack(n,l,r):h,g,y;d!==h&&(f=d-h,d=h),u&&(h=c.barStart,d=c.barEnd-c.barStart,h!==0&&vs(h)!==vs(c.barEnd)&&(f=0),f+=h);const w=!qe(s)&&!u?s:f;let v=n.getPixelForValue(w);if(this.chart.getDataVisibility(t)?g=n.getPixelForValue(f+d):g=v,y=g-v,Math.abs(y)<o){y=q0e(y,n,a)*o,h===a&&(v-=y/2);const x=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),_=Math.min(x,S),M=Math.max(x,S);v=Math.max(Math.min(v,M),_),g=v+y,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(g)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const x=vs(y)*n.getLineWidthForValue(a)/2;v+=x,y-=x}return{size:y,base:v,head:g,center:g+y/2}}_calculateBarIndexPixels(t,n){const r=n.scale,i=this.options,s=i.skipNull,o=Oe(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(t):n.stackCount,u=i.barThickness==="flex"?W0e(t,n,i,c):G0e(t,n,i,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,r=t.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}ae(Gy,"id","bar"),ae(Gy,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ae(Gy,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Wy extends Ni{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,r,i){const s=super.parsePrimitiveData(t,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(t,n,r,i){const s=super.parseArrayData(t,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Oe(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(t,n,r,i){const s=super.parseObjectData(t,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Oe(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let r=t.length-1;r>=0;--r)n=Math.max(n,t[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),u=o.axis,h=a.axis;for(let f=n;f<n+r;f++){const d=t[f],g=!s&&this.getParsed(f),y={},w=y[u]=s?o.getPixelForDecimal(.5):o.getPixelForValue(g[u]),v=y[h]=s?a.getBasePixel():a.getPixelForValue(g[h]);y.skip=isNaN(w)||isNaN(v),c&&(y.options=l||this.resolveDataElementOptions(f,d.active?"active":i),s&&(y.options.radius=0)),this.updateElement(d,f,y,i)}}resolveDataElementOptions(t,n){const r=this.getParsed(t);let i=super.resolveDataElementOptions(t,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Oe(r&&r._custom,s),i}}ae(Wy,"id","bubble"),ae(Wy,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ae(Wy,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function X0e(e,t,n){let r=1,i=1,s=0,o=0;if(t<vt){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),d=(S,_,M)=>M0(S,a,l,!0)?1:Math.max(_,_*n,M,M*n),g=(S,_,M)=>M0(S,a,l,!0)?-1:Math.min(_,_*n,M,M*n),y=d(0,c,h),w=d(Dt,u,f),v=g(xt,c,h),x=g(xt+Dt,u,f);r=(y-v)/2,i=(w-x)/2,s=-(y+v)/2,o=-(w+x)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Cc extends Ni{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Fe(r[t])){const{key:l="value"}=this._parsing;s=c=>+el(r[c],l)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return Ei(this.options.rotation-90)}_getCircumference(){return Ei(this.options.circumference)}_getRotationExtents(){let t=vt,n=-vt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();t=Math.min(t,s),n=Math.max(n,s+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(fpe(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:d,offsetX:g,offsetY:y}=X0e(h,u,l),w=(r.width-o)/f,v=(r.height-o)/d,x=Math.max(Math.min(w,v)/2,0),S=S7(this.options.radius,x),_=Math.max(S*l,0),M=(S-_)/this._getVisibleDatasetWeightTotal();this.offsetX=g*S,this.offsetY=y*S,i.total=this.calculateTotal(),this.outerRadius=S-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(s,0,s.length,t)}_circumference(t,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*s/vt)}updateElements(t,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=s&&c.animateScale,d=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:y,includeOptions:w}=this._getSharedOptions(n,i);let v=this._getRotation(),x;for(x=0;x<n;++x)v+=this._circumference(x,s);for(x=n;x<n+r;++x){const S=this._circumference(x,s),_=t[x],M={x:u+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+S,circumference:S,outerRadius:g,innerRadius:d};w&&(M.options=y||this.resolveDataElementOptions(x,_.active?"active":i)),v+=S,this.updateElement(_,x,M,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let r=0,i;for(i=0;i<n.length;i++){const s=t._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?vt*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=lm(n._parsed[t],r.options.locale);return{label:i[t]||"",value:s}}getMaxBorderWidth(t){let n=0;const r=this.chart;let i,s,o,a,l;if(!t){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,s=t.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,i=t.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(Oe(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ae(Cc,"id","doughnut"),ae(Cc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ae(Cc,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),ae(Cc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return n.labels.map((s,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Hy extends Ni{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=E7(n,i,o);this._drawStart=a,this._drawCount=l,C7(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},t),this.updateElements(i,a,l,t)}updateElements(t,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,i),f=o.axis,d=a.axis,{spanGaps:g,segment:y}=this.options,w=wf(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",x=n+r,S=t.length;let _=n>0&&this.getParsed(n-1);for(let M=0;M<S;++M){const $=t[M],T=v?$:{};if(M<n||M>=x){T.skip=!0;continue}const A=this.getParsed(M),I=qe(A[d]),E=T[f]=o.getPixelForValue(A[f],M),O=T[d]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,A,l):A[d],M);T.skip=isNaN(E)||isNaN(O)||I,T.stop=M>0&&Math.abs(A[f]-_[f])>w,y&&(T.parsed=A,T.raw=c.data[M]),h&&(T.options=u||this.resolveDataElementOptions(M,$.active?"active":i)),v||this.updateElement($,M,T,i),_=A}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ae(Hy,"id","line"),ae(Hy,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ae(Hy,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Hp extends Ni{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=lm(n._parsed[t].r,r.options.locale);return{label:i[t]||"",value:s}}parseObjectData(t,n,r,i){return j7.bind(this)(t,n,r,i)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,r=t.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/t.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,h=c.yCenter,f=c.getIndexAngle(0)-.5*xt;let d=f,g;const y=360/this.countVisibleElements();for(g=0;g<n;++g)d+=this._computeAngle(g,i,y);for(g=n;g<n+r;g++){const w=t[g];let v=d,x=d+this._computeAngle(g,i,y),S=o.getDataVisibility(g)?c.getDistanceFromCenterForValue(this.getParsed(g).r):0;d=x,s&&(l.animateScale&&(S=0),l.animateRotate&&(v=x=f));const _={x:u,y:h,innerRadius:0,outerRadius:S,startAngle:v,endAngle:x,options:this.resolveDataElementOptions(g,w.active?"active":i)};this.updateElement(w,g,_,i)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(t,n,r){return this.chart.getDataVisibility(t)?Ei(this.resolveDataElementOptions(t,n).angle||r):0}}ae(Hp,"id","polarArea"),ae(Hp,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ae(Hp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return n.labels.map((s,o)=>{const l=t.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class k5 extends Cc{}ae(k5,"id","pie"),ae(k5,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class qy extends Ni{getLabelAndValue(t){const n=this._cachedMeta.vScale,r=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(t,n,r,i){return j7.bind(this)(t,n,r,i)}update(t){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":i),u=s.getPointPositionForValue(a,this.getParsed(a).r),h=o?s.xCenter:u.x,f=o?s.yCenter:u.y,d={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:c};this.updateElement(l,a,d,i)}}}ae(qy,"id","radar"),ae(qy,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ae(qy,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Jy extends Ni{getLabelAndValue(t){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(t),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[t]||"",value:"("+a+", "+l+")"}}update(t){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=E7(n,r,i);if(this._drawStart=s,this._drawCount=o,C7(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,i),h=this.getSharedOptions(u),f=this.includeOptions(i,h),d=o.axis,g=a.axis,{spanGaps:y,segment:w}=this.options,v=wf(y)?y:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||i==="none";let S=n>0&&this.getParsed(n-1);for(let _=n;_<n+r;++_){const M=t[_],$=this.getParsed(_),T=x?M:{},A=qe($[g]),I=T[d]=o.getPixelForValue($[d],_),E=T[g]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,$,l):$[g],_);T.skip=isNaN(I)||isNaN(E)||A,T.stop=_>0&&Math.abs($[d]-S[d])>v,w&&(T.parsed=$,T.raw=c.data[_]),f&&(T.options=h||this.resolveDataElementOptions(_,M.active?"active":i)),x||this.updateElement(M,_,T,i),S=$}this.updateSharedOptions(h,i,u)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=t.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}ae(Jy,"id","scatter"),ae(Jy,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ae(Jy,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Q0e=Object.freeze({__proto__:null,BarController:Gy,BubbleController:Wy,DoughnutController:Cc,LineController:Hy,PieController:k5,PolarAreaController:Hp,RadarController:qy,ScatterController:Jy});function vl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class R4{constructor(t){ae(this,"options");this.options=t||{}}static override(t){Object.assign(R4.prototype,t)}init(){}formats(){return vl()}parse(){return vl()}format(){return vl()}add(){return vl()}diff(){return vl()}startOf(){return vl()}endOf(){return vl()}}var eme={_date:R4};function tme(e,t,n,r){const{controller:i,data:s,_sorted:o}=e,a=i._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&s.length){const l=a._reversePixels?Mpe:io;if(r){if(i._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(t);if(u){const h=l(s,t,n-u),f=l(s,t,n+u);return{lo:h.lo,hi:f.hi}}}}else return l(s,t,n)}return{lo:0,hi:s.length-1}}function cm(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:f}=tme(s[a],t,o,i);for(let d=h;d<=f;++d){const g=u[d];g.skip||r(g,c,d)}}}function nme(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,i){const s=t?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function _v(e,t,n,r,i){const s=[];return!i&&!e.isPointInArea(t)||cm(e,n,t,function(a,l,c){!i&&!so(a,e.chartArea,0)||a.inRange(t.x,t.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function rme(e,t,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:h}=$7(o,{x:t.x,y:t.y});M0(h,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return cm(e,n,t,s),i}function ime(e,t,n,r,i,s){let o=[];const a=nme(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const d=u.inRange(t.x,t.y,i);if(r&&!d)return;const g=u.getCenterPoint(i);if(!(!!s||e.isPointInArea(g))&&!d)return;const w=a(t,g);w<l?(o=[{element:u,datasetIndex:h,index:f}],l=w):w===l&&o.push({element:u,datasetIndex:h,index:f})}return cm(e,n,t,c),o}function Mv(e,t,n,r,i,s){return!s&&!e.isPointInArea(t)?[]:n==="r"&&!r?rme(e,t,n,i):ime(e,t,n,r,i,s)}function pC(e,t,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return cm(e,n,t,(l,c,u)=>{l[o](t[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),r&&!a?[]:s}var sme={evaluateInteractionItems:cm,modes:{index(e,t,n,r){const i=hc(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?_v(e,i,s,r,o):Mv(e,i,s,!1,r,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(e,t,n,r){const i=hc(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?_v(e,i,s,r,o):Mv(e,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=e.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(e,t,n,r){const i=hc(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return _v(e,i,s,r,o)},nearest(e,t,n,r){const i=hc(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return Mv(e,i,s,n.intersect,r,o)},x(e,t,n,r){const i=hc(t,e);return pC(e,i,"x",n.intersect,r)},y(e,t,n,r){const i=hc(t,e);return pC(e,i,"y",n.intersect,r)}}};const Y7=["left","top","right","bottom"];function cd(e,t){return e.filter(n=>n.pos===t)}function mC(e,t){return e.filter(n=>Y7.indexOf(n.pos)===-1&&n.box.axis===t)}function ud(e,t){return e.sort((n,r)=>{const i=t?r:n,s=t?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function ome(e){const t=[];let n,r,i,s,o,a;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return t}function ame(e){const t={};for(const n of e){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!Y7.includes(i))continue;const o=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function lme(e,t){const n=ame(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&t.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&t.availableHeight)}return n}function cme(e){const t=ome(e),n=ud(t.filter(c=>c.box.fullSize),!0),r=ud(cd(t,"left"),!0),i=ud(cd(t,"right")),s=ud(cd(t,"top"),!0),o=ud(cd(t,"bottom")),a=mC(t,"x"),l=mC(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:cd(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function gC(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function K7(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ume(e,t,n,r){const{pos:i,box:s}=n,o=e.maxPadding;if(!Fe(i)){n.size&&(e[i]-=n.size);const h=r[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,e[i]+=n.size}s.getPadding&&K7(o,s.getPadding());const a=Math.max(0,t.outerWidth-gC(o,e,"left","right")),l=Math.max(0,t.outerHeight-gC(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function hme(e){const t=e.maxPadding;function n(r){const i=Math.max(t[r]-e[r],0);return e[r]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function fme(e,t){const n=t.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(t[o],n[o])}),s}return r(e?["left","right"]:["top","bottom"])}function up(e,t,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,fme(a.horizontal,t));const{same:h,other:f}=ume(t,n,a,r);c|=h&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&up(i,t,n,r)||u}function Ig(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function yC(e,t,n,r){const i=n.padding;let{x:s,y:o}=t;for(const a of e){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=t.w*u,f=c.size||l.height;_0(c.start)&&(o=c.start),l.fullSize?Ig(l,i.left,o,n.outerWidth-i.right-i.left,f):Ig(l,t.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=t.h*u,f=c.size||l.width;_0(c.start)&&(s=c.start),l.fullSize?Ig(l,s,i.top,f,n.outerHeight-i.bottom-i.top):Ig(l,s,t.top+c.placed,f,h),c.start=s,c.placed+=h,s=l.right}}t.x=s,t.y=o}var Gn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=Jn(e.options.layout.padding),s=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=cme(e.boxes),l=a.vertical,c=a.horizontal;st(e.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,w)=>w.box.options&&w.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);K7(f,Jn(r));const d=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),g=lme(l.concat(c),h);up(a.fullSize,d,h,g),up(l,d,h,g),up(c,d,h,g)&&up(l,d,h,g),hme(d),yC(a.leftAndTop,d,h,g),d.x+=d.w,d.y+=d.h,yC(a.rightAndBottom,d,h,g),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},st(a.chartArea,y=>{const w=y.box;Object.assign(w,e.chartArea),w.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class X7{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,i){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(t){return!0}updateConfig(t){}}class dme extends X7{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Zy="$chartjs",pme={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bC=e=>e===null||e==="";function mme(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[Zy]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",bC(i)){const s=eC(e,"width");s!==void 0&&(e.width=s)}if(bC(r))if(e.style.height==="")e.height=e.width/(t||2);else{const s=eC(e,"height");s!==void 0&&(e.height=s)}return e}const Q7=y0e?{passive:!0}:!1;function gme(e,t,n){e.addEventListener(t,n,Q7)}function yme(e,t,n){e.canvas.removeEventListener(t,n,Q7)}function bme(e,t){const n=pme[e.type]||e.type,{x:r,y:i}=hc(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:i!==void 0?i:null}}function g2(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function wme(e,t,n){const r=e.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||g2(a.addedNodes,r),o=o&&!g2(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function vme(e,t,n){const r=e.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||g2(a.removedNodes,r),o=o&&!g2(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const T0=new Map;let wC=0;function ej(){const e=window.devicePixelRatio;e!==wC&&(wC=e,T0.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function xme(e,t){T0.size||window.addEventListener("resize",ej),T0.set(e,t)}function Sme(e){T0.delete(e),T0.size||window.removeEventListener("resize",ej)}function _me(e,t,n){const r=e.canvas,i=r&&P4(r);if(!i)return;const s=k7((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),xme(e,s),o}function $v(e,t,n){n&&n.disconnect(),t==="resize"&&Sme(e)}function Mme(e,t,n){const r=e.canvas,i=k7(s=>{e.ctx!==null&&n(bme(s,e))},e);return gme(r,t,i),i}class $me extends X7{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(mme(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[Zy])return!1;const r=n[Zy].initial;["height","width"].forEach(s=>{const o=r[s];qe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Zy],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:wme,detach:vme,resize:_me}[n]||Mme;i[n]=o(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),i=r[n];if(!i)return;({attach:$v,detach:$v,resize:$v}[n]||yme)(t,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,i){return g0e(t,n,r,i)}isAttached(t){const n=P4(t);return!!(n&&n.isConnected)}}function Tme(e){return!B7()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?dme:$me}class ji{constructor(){ae(this,"x");ae(this,"y");ae(this,"active",!1);ae(this,"options");ae(this,"$animations")}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return wf(this.x)&&wf(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}ae(ji,"defaults",{}),ae(ji,"defaultRoutes");function Ame(e,t){const n=e.options.ticks,r=Ime(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?Eme(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return Cme(t,c,s,o/i),c;const u=kme(s,t,i);if(o>0){let h,f;const d=o>1?Math.round((l-a)/(o-1)):null;for(kg(t,c,u,qe(d)?0:a-d,a),h=0,f=o-1;h<f;h++)kg(t,c,u,s[h],s[h+1]);return kg(t,c,u,l,qe(d)?t.length:l+d),c}return kg(t,c,u),c}function Ime(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}function kme(e,t,n){const r=Ome(e),i=t.length/n;if(!r)return Math.max(i,1);const s=vpe(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function Eme(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function Cme(e,t,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<e.length;o++)o===s&&(t.push(e[o]),i++,s=n[i*r])}function kg(e,t,n,r,i){const s=Oe(r,0),o=Math.min(Oe(i,e.length),e.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(e[c]),a++,u=Math.round(s+a*n))}function Ome(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const Pme=e=>e==="left"?"right":e==="right"?"left":e,vC=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,xC=(e,t)=>Math.min(t||e,e);function SC(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function Rme(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l=e.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):t===0?c=(e.getPixelForTick(1)-l)/2:c=(l-e.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<s-a||l>o+a)))return l}function Nme(e,t){st(e,n=>{const r=n.gc,i=r.length/2;let s;if(i>t){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function hd(e){return e.drawTicks?e.tickLength:0}function _C(e,t){if(!e.display)return 0;const n=on(e.font,t),r=Jn(e.padding);return(wt(e.text)?e.text.length:1)*n.lineHeight+r.height}function Dme(e,t){return cl(e,{scale:t,type:"scale"})}function Lme(e,t,n){return cl(e,{tick:n,index:t,type:"tick"})}function Fme(e,t,n){let r=A4(e);return(n&&t!=="right"||!n&&t==="right")&&(r=Pme(r)),r}function jme(e,t,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h=0,f,d,g;const y=o-i,w=a-s;if(e.isHorizontal()){if(d=Ln(r,s,a),Fe(n)){const v=Object.keys(n)[0],x=n[v];g=u[v].getPixelForValue(x)+y-t}else n==="center"?g=(c.bottom+c.top)/2+y-t:g=vC(e,n,t);f=a-s}else{if(Fe(n)){const v=Object.keys(n)[0],x=n[v];d=u[v].getPixelForValue(x)-w+t}else n==="center"?d=(c.left+c.right)/2-w+t:d=vC(e,n,t);g=Ln(r,o,i),h=n==="left"?-Dt:Dt}return{titleX:d,titleY:g,maxWidth:f,rotation:h}}class Iu extends ji{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return t=kr(t,Number.POSITIVE_INFINITY),n=kr(n,Number.NEGATIVE_INFINITY),r=kr(r,Number.POSITIVE_INFINITY),i=kr(i,Number.NEGATIVE_INFINITY),{min:kr(t,r),max:kr(n,i),minDefined:Et(t),maxDefined:Et(n)}}getMinMax(t){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:kr(n,kr(r,n)),max:kr(r,kr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){mt(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Jpe(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?SC(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Ame(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){mt(this.options.afterUpdate,[this])}beforeSetDimensions(){mt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){mt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),mt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){mt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=mt(n.callback,[s.value,r,t],this)}afterTickToLabelConversion(){mt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){mt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=xC(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,d=mn(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/r:d/(r-1),h+6>a&&(a=d/(r-(t.offset?.5:1)),l=this.maxHeight-hd(t.grid)-n.padding-_C(t.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=$4(Math.min(Math.asin(mn((u.highest.height+6)/a,-1,1)),Math.asin(mn(l/c,-1,1))-Math.asin(mn(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){mt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){mt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=_C(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=hd(s)+l):(t.height=this.maxHeight,t.width=hd(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),d=r.padding*2,g=Ei(this.labelRotation),y=Math.cos(g),w=Math.sin(g);if(a){const v=r.mirror?0:w*h.width+y*f.height;t.height=Math.min(this.maxHeight,t.height+v+d)}else{const v=r.mirror?0:y*h.width+w*f.height;t.width=Math.min(this.maxWidth,t.width+v+d)}this._calculatePadding(c,u,w,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,d=0;l?c?(f=i*t.width,d=r*n.height):(f=r*t.height,d=i*n.width):s==="start"?d=n.width:s==="end"?f=t.width:s!=="inner"&&(f=t.width/2,d=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=t.height/2;s==="start"?(u=0,h=t.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){mt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)qe(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=SC(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/xC(n,r));let c=0,u=0,h,f,d,g,y,w,v,x,S,_,M;for(h=0;h<n;h+=l){if(g=t[h].label,y=this._resolveTickFontOptions(h),i.font=w=y.string,v=s[w]=s[w]||{data:{},gc:[]},x=y.lineHeight,S=_=0,!qe(g)&&!wt(g))S=p2(i,v.data,v.gc,S,g),_=x;else if(wt(g))for(f=0,d=g.length;f<d;++f)M=g[f],!qe(M)&&!wt(M)&&(S=p2(i,v.data,v.gc,S,M),_+=x);o.push(S),a.push(_),c=Math.max(S,c),u=Math.max(_,u)}Nme(s,n);const $=o.indexOf(c),T=a.indexOf(u),A=I=>({width:o[I]||0,height:a[I]||0});return{first:A(0),last:A(n-1),widest:A($),highest:A(T),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return _pe(this._alignToPixels?wl(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=Lme(this.getContext(),t,r))}return this.$context||(this.$context=Dme(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Ei(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=hd(s),d=[],g=a.setContext(this.getContext()),y=g.display?g.width:0,w=y/2,v=function(q){return wl(r,q,y)};let x,S,_,M,$,T,A,I,E,O,P,j;if(o==="top")x=v(this.bottom),T=this.bottom-f,I=x-w,O=v(t.top)+w,j=t.bottom;else if(o==="bottom")x=v(this.top),O=t.top,j=v(t.bottom)-w,T=x+w,I=this.top+f;else if(o==="left")x=v(this.right),$=this.right-f,A=x-w,E=v(t.left)+w,P=t.right;else if(o==="right")x=v(this.left),E=t.left,P=v(t.right)-w,$=x+w,A=this.left+f;else if(n==="x"){if(o==="center")x=v((t.top+t.bottom)/2+.5);else if(Fe(o)){const q=Object.keys(o)[0],C=o[q];x=v(this.chart.scales[q].getPixelForValue(C))}O=t.top,j=t.bottom,T=x+w,I=T+f}else if(n==="y"){if(o==="center")x=v((t.left+t.right)/2);else if(Fe(o)){const q=Object.keys(o)[0],C=o[q];x=v(this.chart.scales[q].getPixelForValue(C))}$=x-w,A=$-f,E=t.left,P=t.right}const V=Oe(i.ticks.maxTicksLimit,h),U=Math.max(1,Math.ceil(h/V));for(S=0;S<h;S+=U){const q=this.getContext(S),C=s.setContext(q),R=a.setContext(q),N=C.lineWidth,D=C.color,z=R.dash||[],G=R.dashOffset,W=C.tickWidth,K=C.tickColor,oe=C.tickBorderDash||[],Se=C.tickBorderDashOffset;_=Rme(this,S,l),_!==void 0&&(M=wl(r,_,N),c?$=A=E=P=M:T=I=O=j=M,d.push({tx1:$,ty1:T,tx2:A,ty2:I,x1:E,y1:O,x2:P,y2:j,width:N,color:D,borderDash:z,borderDashOffset:G,tickWidth:W,tickColor:K,tickBorderDash:oe,tickBorderDashOffset:Se}))}return this._ticksLength=h,this._borderValue=x,d}_computeLabelItems(t){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,f=hd(r.grid),d=f+u,g=h?-u:d,y=-Ei(this.labelRotation),w=[];let v,x,S,_,M,$,T,A,I,E,O,P,j="middle";if(i==="top")$=this.bottom-g,T=this._getXAxisLabelAlignment();else if(i==="bottom")$=this.top+g,T=this._getXAxisLabelAlignment();else if(i==="left"){const U=this._getYAxisLabelAlignment(f);T=U.textAlign,M=U.x}else if(i==="right"){const U=this._getYAxisLabelAlignment(f);T=U.textAlign,M=U.x}else if(n==="x"){if(i==="center")$=(t.top+t.bottom)/2+d;else if(Fe(i)){const U=Object.keys(i)[0],q=i[U];$=this.chart.scales[U].getPixelForValue(q)+d}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")M=(t.left+t.right)/2-d;else if(Fe(i)){const U=Object.keys(i)[0],q=i[U];M=this.chart.scales[U].getPixelForValue(q)}T=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const V=this._getLabelSizes();for(v=0,x=a.length;v<x;++v){S=a[v],_=S.label;const U=s.setContext(this.getContext(v));A=this.getPixelForTick(v)+s.labelOffset,I=this._resolveTickFontOptions(v),E=I.lineHeight,O=wt(_)?_.length:1;const q=O/2,C=U.color,R=U.textStrokeColor,N=U.textStrokeWidth;let D=T;o?(M=A,T==="inner"&&(v===x-1?D=this.options.reverse?"left":"right":v===0?D=this.options.reverse?"right":"left":D="center"),i==="top"?c==="near"||y!==0?P=-O*E+E/2:c==="center"?P=-V.highest.height/2-q*E+E:P=-V.highest.height+E/2:c==="near"||y!==0?P=E/2:c==="center"?P=V.highest.height/2-q*E:P=V.highest.height-O*E,h&&(P*=-1),y!==0&&!U.showLabelBackdrop&&(M+=E/2*Math.sin(y))):($=A,P=(1-O)*E/2);let z;if(U.showLabelBackdrop){const G=Jn(U.backdropPadding),W=V.heights[v],K=V.widths[v];let oe=P-G.top,Se=0-G.left;switch(j){case"middle":oe-=W/2;break;case"bottom":oe-=W;break}switch(T){case"center":Se-=K/2;break;case"right":Se-=K;break}z={left:Se,top:oe,width:K+G.width,height:W+G.height,color:U.backdropColor}}w.push({label:_,font:I,textOffset:P,options:{rotation:y,color:C,strokeColor:R,strokeWidth:N,textAlign:D,textBaseline:j,translation:[M,$],backdrop:z}})}return w}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Ei(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,i,s,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=wl(t,this.left,o)-o/2,u=wl(t,this.right,a)+a/2,h=f=l):(h=wl(t,this.top,o)-o/2,f=wl(t,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&nw(r,i);const s=this.getLabelItems(t);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;yu(r,c,0,u,l,a)}i&&rw(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=on(r.font),o=Jn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Fe(n)?(l+=o.bottom,wt(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=jme(this,l,n,a);yu(t,r.text,0,0,s,{color:r.color,maxWidth:h,rotation:f,textAlign:Fme(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=Oe(t.grid&&t.grid.z,-1),i=Oe(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Iu.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return on(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Eg{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;Ume(n)&&(r=this.register(n));const i=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,zme(t,o,r),this.override&&Ct.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,i=this.scope;r in n&&delete n[r],i&&r in Ct[i]&&(delete Ct[i][r],this.override&&delete gu[r])}}function zme(e,t,n){const r=S0(Object.create(null),[n?Ct.get(n):{},Ct.get(t),e.defaults]);Ct.set(t,r),e.defaultRoutes&&Bme(t,e.defaultRoutes),e.descriptors&&Ct.describe(t,e.descriptors)}function Bme(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");Ct.route(s,i,l,a)})}function Ume(e){return"id"in e&&"defaults"in e}class Vme{constructor(){this.controllers=new Eg(Ni,"datasets",!0),this.elements=new Eg(ji,"elements"),this.plugins=new Eg(Object,"plugins"),this.scales=new Eg(Iu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):st(i,o=>{const a=r||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,r){const i=M4(t);mt(r["before"+i],[],r),n[t](r),mt(r["after"+i],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var us=new Vme;class Gme{constructor(){this._init=[]}notify(t,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(s,t,n,r);return n==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,r,i){i=i||{};for(const s of t){const o=s.plugin,a=o[r],l=[n,i,s.options];if(mt(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){qe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,i=Oe(r.options&&r.options.plugins,{}),s=Wme(r);return i===!1&&!n?[]:qme(t,s,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),t,"stop"),this._notify(i(r,n),t,"start")}}function Wme(e){const t={},n=[],r=Object.keys(us.plugins.items);for(let s=0;s<r.length;s++)n.push(us.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function Hme(e,t){return!t&&e===!1?null:e===!0?{}:e}function qme(e,{plugins:t,localIds:n},r,i){const s=[],o=e.getContext();for(const a of t){const l=a.id,c=Hme(r[l],i);c!==null&&s.push({plugin:a,options:Jme(e.config,{plugin:a,local:n[l]},c,o)})}return s}function Jme(e,{plugin:t,local:n},r,i){const s=e.pluginScopeKeys(t),o=e.getOptionScopes(r,s);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function E5(e,t){const n=Ct.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Zme(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Yme(e,t){return e===t?"_index_":"_value_"}function MC(e){if(e==="x"||e==="y"||e==="r")return e}function Kme(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function C5(e,...t){if(MC(e))return e;for(const n of t){const r=n.axis||Kme(n.position)||e.length>1&&MC(e[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function $C(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Xme(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(r=>r.xAxisID===e||r.yAxisID===e);if(n.length)return $C(e,"x",n[0])||$C(e,"y",n[0])}return{}}function Qme(e,t){const n=gu[e.type]||{scales:{}},r=t.scales||{},i=E5(e.type,t),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Fe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=C5(o,a,Xme(o,e),Ct.scales[a.type]),c=Yme(l,i),u=n.scales||{};s[o]=Up(Object.create(null),[{axis:l},a,u[l],u[c]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,l=o.indexAxis||E5(a,t),u=(gu[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=Zme(h,l),d=o[f+"AxisID"]||f;s[d]=s[d]||Object.create(null),Up(s[d],[{axis:f},r[d],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Up(a,[Ct.scales[a.type],Ct.scale])}),s}function tj(e){const t=e.options||(e.options={});t.plugins=Oe(t.plugins,{}),t.scales=Qme(e,t)}function nj(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function ege(e){return e=e||{},e.data=nj(e.data),tj(e),e}const TC=new Map,rj=new Set;function Cg(e,t){let n=TC.get(e);return n||(n=t(),TC.set(e,n),rj.add(n)),n}const fd=(e,t,n)=>{const r=el(t,n);r!==void 0&&e.add(r)};class tge{constructor(t){this._config=ege(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=nj(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),tj(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Cg(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Cg(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Cg(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return Cg(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let i=r.get(t);return(!i||n)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,n,r){const{options:i,type:s}=this,o=this._cachedScopes(t,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{t&&(l.add(t),u.forEach(h=>fd(l,t,h))),u.forEach(h=>fd(l,i,h)),u.forEach(h=>fd(l,gu[s]||{},h)),u.forEach(h=>fd(l,Ct,h)),u.forEach(h=>fd(l,A5,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),rj.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,gu[n]||{},Ct.datasets[n]||{},{type:n},Ct,A5]}resolveNamedOptions(t,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=AC(this._resolverCache,t,i);let l=o;if(rge(o,n)){s.$shared=!1,r=tl(r)?r():r;const c=this.createResolver(t,r,a);l=vf(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(t,n,r=[""],i){const{resolver:s}=AC(this._resolverCache,t,r);return Fe(n)?vf(s,n,void 0,i):s}}function AC(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);return s||(s={resolver:E4(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const nge=e=>Fe(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||tl(e[n]),!1);function rge(e,t){const{isScriptable:n,isIndexable:r}=N7(e);for(const i of t){const s=n(i),o=r(i),a=(o||s)&&e[i];if(s&&(tl(a)||nge(a))||o&&wt(a))return!0}return!1}var ige="4.4.0";const sge=["top","bottom","left","right","chartArea"];function IC(e,t){return e==="top"||e==="bottom"||sge.indexOf(e)===-1&&t==="x"}function kC(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function EC(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),mt(n&&n.onComplete,[e],t)}function oge(e){const t=e.chart,n=t.options.animation;mt(n&&n.onProgress,[e],t)}function ij(e){return B7()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Yy={},CC=e=>{const t=ij(e);return Object.values(Yy).filter(n=>n.canvas===t).pop()};function age(e,t,n){const r=Object.keys(e);for(const i of r){const s=+i;if(s>=t){const o=e[i];delete e[i],(n>0||s>t)&&(e[s+n]=o)}}}function lge(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}function Og(e,t,n){return e.options.clip?e[n]:t[n]}function cge(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:Og(n,t,"left"),right:Og(n,t,"right"),top:Og(r,t,"top"),bottom:Og(r,t,"bottom")}:t}class ds{static register(...t){us.add(...t),OC()}static unregister(...t){us.remove(...t),OC()}constructor(t,n){const r=this.config=new tge(n),i=ij(t),s=CC(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Tme(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=hpe(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Gme,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ape(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Yy[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}qs.listen(this,"complete",EC),qs.listen(this,"progress",oge),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return qe(t)?n&&s?s:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return us}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():QE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return YE(this.canvas,this.ctx),this}stop(){return qs.stop(this),this}resize(t,n){qs.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,QE(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),mt(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};st(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=C5(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),st(s,o=>{const a=o.options,l=a.id,c=C5(l,a),u=Oe(a.type,o.dtype);(a.position===void 0||IC(a.position,c)!==IC(o.dposition))&&(a.position=o.dposition),i[l]=!0;let h=null;if(l in r&&r[l].type===u)h=r[l];else{const f=us.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(a,t)}),st(i,(o,a)=>{o||delete r[a]}),st(r,o=>{Gn.configure(this,o,o.options),Gn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(kC("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||E5(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=us.getController(a),{datasetElementType:c,dataElementType:u}=Ct.datasets[a];Object.assign(l,{dataElementType:us.getElement(u),datasetElementType:c&&us.getElement(c)}),o.controller=new l(this,r),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){st(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!i&&s.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||st(s,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(kC("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){st(this.scales,t=>{Gn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!BE(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;age(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(t.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!BE(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Gn.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],st(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,tl(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qs.has(this)?this.attached&&!qs.running(this)&&qs.start(this):(this.draw(),EC({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!t||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r=t._clip,i=!r.disabled,s=cge(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&nw(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),t.controller.draw(),i&&rw(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return so(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,r,i){const s=sme.modes[n];return typeof s=="function"?s(this,t,r,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=cl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,i);_0(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),qs.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),YE(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Yy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),t[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};st(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),t[l]=c},i=(l,c)=>{t[l]&&(n.removeEventListener(this,l,c),delete t[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){st(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},st(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){o=t[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!h2(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,t),a=r?t:s(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(t,i,r,o),l=ype(t),c=lge(t,this._lastEvent,r,l);r&&(this._lastEvent=null,mt(s.onHover,[t,a,this],this),l&&mt(s.onClick,[t,a,this],this));const u=!h2(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(t,n,r,i){if(t.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,i)}}ae(ds,"defaults",Ct),ae(ds,"instances",Yy),ae(ds,"overrides",gu),ae(ds,"registry",us),ae(ds,"version",ige),ae(ds,"getChart",CC);function OC(){return st(ds.instances,e=>e._plugins.invalidate())}function uge(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=i/a;e.beginPath(),e.arc(s,o,a,r-c,n+c),l>i?(c=i/l,e.arc(s,o,l,n+c,r-c,!0)):e.arc(s,o,i,n+Dt,r-Dt),e.closePath(),e.clip()}function hge(e){return k4(e,["outerStart","outerEnd","innerStart","innerEnd"])}function fge(e,t,n,r){const i=hge(e.options.borderRadius),s=(n-t)/2,o=Math.min(s,r*t/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return mn(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:mn(i.innerStart,0,o),innerEnd:mn(i.innerEnd,0,o)}}function Wu(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function y2(e,t,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+r+n-c,0),f=u>0?u+r+n+c:0;let d=0;const g=i-l;if(r){const U=u>0?u-r:0,q=h>0?h-r:0,C=(U+q)/2,R=C!==0?g*C/(C+r):g;d=(g-R)/2}const y=Math.max(.001,g*h-n/xt)/h,w=(g-y)/2,v=l+w+d,x=i-w-d,{outerStart:S,outerEnd:_,innerStart:M,innerEnd:$}=fge(t,f,h,x-v),T=h-S,A=h-_,I=v+S/T,E=x-_/A,O=f+M,P=f+$,j=v+M/O,V=x-$/P;if(e.beginPath(),s){const U=(I+E)/2;if(e.arc(o,a,h,I,U),e.arc(o,a,h,U,E),_>0){const N=Wu(A,E,o,a);e.arc(N.x,N.y,_,E,x+Dt)}const q=Wu(P,x,o,a);if(e.lineTo(q.x,q.y),$>0){const N=Wu(P,V,o,a);e.arc(N.x,N.y,$,x+Dt,V+Math.PI)}const C=(x-$/f+(v+M/f))/2;if(e.arc(o,a,f,x-$/f,C,!0),e.arc(o,a,f,C,v+M/f,!0),M>0){const N=Wu(O,j,o,a);e.arc(N.x,N.y,M,j+Math.PI,v-Dt)}const R=Wu(T,v,o,a);if(e.lineTo(R.x,R.y),S>0){const N=Wu(T,I,o,a);e.arc(N.x,N.y,S,v-Dt,I)}}else{e.moveTo(o,a);const U=Math.cos(I)*h+o,q=Math.sin(I)*h+a;e.lineTo(U,q);const C=Math.cos(E)*h+o,R=Math.sin(E)*h+a;e.lineTo(C,R)}e.closePath()}function dge(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){y2(e,t,n,r,l,i);for(let c=0;c<s;++c)e.fill();isNaN(a)||(l=o+(a%vt||vt))}return y2(e,t,n,r,l,i),e.fill(),l}function pge(e,t,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=l,d=l.borderAlign==="inner";if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=f,d?(e.lineWidth=c*2,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(s){y2(e,t,n,r,g,i);for(let y=0;y<s;++y)e.stroke();isNaN(a)||(g=o+(a%vt||vt))}d&&uge(e,t,g),s||(y2(e,t,n,r,g,i),e.stroke())}class hp extends ji{constructor(n){super();ae(this,"circumference");ae(this,"endAngle");ae(this,"fullCircles");ae(this,"innerRadius");ae(this,"outerRadius");ae(this,"pixelMargin");ae(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=$7(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,y=Oe(f,c-l)>=vt||M0(o,l,c),w=ro(a,u+d,h+d);return y&&w}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(s+o)/2,f=(a+l+u+c)/2;return{x:r+Math.cos(h)*f,y:i+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>vt?Math.floor(i/vt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(xt,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,dge(n,this,u,o,a),pge(n,this,u,o,a),n.restore()}}ae(hp,"id","arc"),ae(hp,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ae(hp,"defaultRoutes",{backgroundColor:"backgroundColor"}),ae(hp,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function sj(e,t,n=t){e.lineCap=Oe(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Oe(n.borderDash,t.borderDash)),e.lineDashOffset=Oe(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Oe(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Oe(n.borderWidth,t.borderWidth),e.strokeStyle=Oe(n.borderColor,t.borderColor)}function mge(e,t,n){e.lineTo(n.x,n.y)}function gge(e){return e.stepped?jpe:e.tension||e.cubicInterpolationMode==="monotone"?zpe:mge}function oj(e,t,n={}){const r=e.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function yge(e,t,n,r){const{points:i,options:s}=t,{count:o,start:a,loop:l,ilen:c}=oj(i,n,r),u=gge(s);let{move:h=!0,reverse:f}=r||{},d,g,y;for(d=0;d<=c;++d)g=i[(a+(f?c-d:d))%o],!g.skip&&(h?(e.moveTo(g.x,g.y),h=!1):u(e,y,g,f,s.stepped),y=g);return l&&(g=i[(a+(f?c:0))%o],u(e,y,g,f,s.stepped)),!!l}function bge(e,t,n,r){const i=t.points,{count:s,start:o,ilen:a}=oj(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,h=0,f,d,g,y,w,v;const x=_=>(o+(c?a-_:_))%s,S=()=>{y!==w&&(e.lineTo(u,w),e.lineTo(u,y),e.lineTo(u,v))};for(l&&(d=i[x(0)],e.moveTo(d.x,d.y)),f=0;f<=a;++f){if(d=i[x(f)],d.skip)continue;const _=d.x,M=d.y,$=_|0;$===g?(M<y?y=M:M>w&&(w=M),u=(h*u+_)/++h):(S(),e.lineTo(_,M),g=$,h=0,y=w=M),v=M}S()}function O5(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?bge:yge}function wge(e){return e.stepped?b0e:e.tension||e.cubicInterpolationMode==="monotone"?w0e:fc}function vge(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),sj(e,t.options),e.stroke(i)}function xge(e,t,n,r){const{segments:i,options:s}=t,o=O5(t);for(const a of i)sj(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const Sge=typeof Path2D=="function";function _ge(e,t,n,r){Sge&&!t.options.segment?vge(e,t,n,r):xge(e,t,n,r)}class Ra extends ji{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;u0e(this._points,r,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$0e(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,i=t[n],s=this.points,o=H7(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=wge(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:f}=o[c],d=s[h],g=s[f];if(d===g){a.push(d);continue}const y=Math.abs((i-d[n])/(g[n]-d[n])),w=l(d,g,y,r.stepped);w[n]=t[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(t,n,r){return O5(this)(t,this,n,r)}path(t,n,r){const i=this.segments,s=O5(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(t,this,a,{start:n,end:n+r-1});return!!o}draw(t,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),_ge(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ae(Ra,"id","line"),ae(Ra,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ae(Ra,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ae(Ra,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function PC(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}class Ky extends ji{constructor(n){super();ae(this,"parsed");ae(this,"skip");ae(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return PC(this,n,"x",r)}inYRange(n,r){return PC(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!so(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,I5(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ae(Ky,"id","point"),ae(Ky,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ae(Ky,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function aj(e,t){const{x:n,y:r,base:i,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,a=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function Na(e,t,n,r){return e?0:mn(t,n,r)}function Mge(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=R7(r);return{t:Na(i.top,s.top,0,n),r:Na(i.right,s.right,0,t),b:Na(i.bottom,s.bottom,0,n),l:Na(i.left,s.left,0,t)}}function $ge(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=Gc(i),o=Math.min(t,n),a=e.borderSkipped,l=r||Fe(i);return{topLeft:Na(!l||a.top||a.left,s.topLeft,0,o),topRight:Na(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Na(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Na(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Tge(e){const t=aj(e),n=t.right-t.left,r=t.bottom-t.top,i=Mge(e,n/2,r/2),s=$ge(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Tv(e,t,n,r){const i=t===null,s=n===null,a=e&&!(i&&s)&&aj(e,r);return a&&(i||ro(t,a.left,a.right))&&(s||ro(n,a.top,a.bottom))}function Age(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Ige(e,t){e.rect(t.x,t.y,t.w,t.h)}function Av(e,t,n={}){const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+o,radius:e.radius}}class Xy extends ji{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Tge(this),a=Age(o.radius)?$0:Ige;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,Av(o,n,s)),t.clip(),a(t,Av(s,-n,o)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),a(t,Av(s,n)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,n,r){return Tv(this,t,n,r)}inXRange(t,n){return Tv(this,t,null,n)}inYRange(t,n){return Tv(this,null,t,n)}getCenterPoint(t){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}ae(Xy,"id","bar"),ae(Xy,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ae(Xy,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var kge=Object.freeze({__proto__:null,ArcElement:hp,BarElement:Xy,LineElement:Ra,PointElement:Ky});const P5=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],RC=P5.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function lj(e){return P5[e%P5.length]}function cj(e){return RC[e%RC.length]}function Ege(e,t){return e.borderColor=lj(t),e.backgroundColor=cj(t),++t}function Cge(e,t){return e.backgroundColor=e.data.map(()=>lj(t++)),t}function Oge(e,t){return e.backgroundColor=e.data.map(()=>cj(t++)),t}function Pge(e){let t=0;return(n,r)=>{const i=e.getDatasetMeta(r).controller;i instanceof Cc?t=Cge(n,t):i instanceof Hp?t=Oge(n,t):i&&(t=Ege(n,t))}}function NC(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function Rge(e){return e&&(e.borderColor||e.backgroundColor)}var Nge={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=e.config,{elements:s}=i;if(!n.forceOverride&&(NC(r)||Rge(i)||s&&NC(s)))return;const o=Pge(e);r.forEach(o)}};function Dge(e,t,n,r,i){const s=i.samples||r;if(s>=n)return e.slice(t,t+n);const o=[],a=(n-2)/(s-2);let l=0;const c=t+n-1;let u=t,h,f,d,g,y;for(o[l++]=e[u],h=0;h<s-2;h++){let w=0,v=0,x;const S=Math.floor((h+1)*a)+1+t,_=Math.min(Math.floor((h+2)*a)+1,n)+t,M=_-S;for(x=S;x<_;x++)w+=e[x].x,v+=e[x].y;w/=M,v/=M;const $=Math.floor(h*a)+1+t,T=Math.min(Math.floor((h+1)*a)+1,n)+t,{x:A,y:I}=e[u];for(d=g=-1,x=$;x<T;x++)g=.5*Math.abs((A-w)*(e[x].y-I)-(A-e[x].x)*(v-I)),g>d&&(d=g,f=e[x],y=x);o[l++]=f,u=y}return o[l++]=e[c],o}function Lge(e,t,n,r){let i=0,s=0,o,a,l,c,u,h,f,d,g,y;const w=[],v=t+n-1,x=e[t].x,_=e[v].x-x;for(o=t;o<t+n;++o){a=e[o],l=(a.x-x)/_*r,c=a.y;const M=l|0;if(M===u)c<g?(g=c,h=o):c>y&&(y=c,f=o),i=(s*i+a.x)/++s;else{const $=o-1;if(!qe(h)&&!qe(f)){const T=Math.min(h,f),A=Math.max(h,f);T!==d&&T!==$&&w.push({...e[T],x:i}),A!==d&&A!==$&&w.push({...e[A],x:i})}o>0&&$!==d&&w.push(e[$]),w.push(a),u=M,s=0,g=y=c,h=f=d=o}}return w}function uj(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function DC(e){e.data.datasets.forEach(t=>{uj(t)})}function Fge(e,t){const n=t.length;let r=0,i;const{iScale:s}=e,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=mn(io(t,s.axis,o).lo,0,n-1)),c?i=mn(io(t,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var jge={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){DC(e);return}const r=e.width;e.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=e.getDatasetMeta(s),c=o||i.data;if(cp([a,e.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=e.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||e.options.parsing)return;let{start:h,count:f}=Fge(l,c);const d=n.threshold||4*r;if(f<=d){uj(i);return}qe(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let g;switch(n.algorithm){case"lttb":g=Dge(c,h,f,r,n);break;case"min-max":g=Lge(c,h,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=g})},destroy(e){DC(e)}};function zge(e,t,n){const r=e.segments,i=e.points,s=t.points,o=[];for(const a of r){let{start:l,end:c}=a;c=N4(l,c,i);const u=R5(n,i[l],i[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const h=H7(t,u);for(const f of h){const d=R5(n,s[f.start],s[f.end],f.loop),g=W7(a,i,d);for(const y of g)o.push({source:y,target:f,start:{[n]:LC(u,d,"start",Math.max)},end:{[n]:LC(u,d,"end",Math.min)}})}}return o}function R5(e,t,n,r){if(r)return;let i=t[e],s=n[e];return e==="angle"&&(i=Cr(i),s=Cr(s)),{property:e,start:i,end:s}}function Bge(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=N4(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function N4(e,t,n){for(;t>e;t--){const r=n[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function LC(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function hj(e,t){let n=[],r=!1;return wt(e)?(r=!0,n=e):n=Bge(e,t),n.length?new Ra({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function FC(e){return e&&e.fill!==!1}function Uge(e,t,n){let i=e[t].fill;const s=[t];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Et(i))return i;if(o=e[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Vge(e,t,n){const r=qge(e);if(Fe(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Et(i)&&Math.floor(i)===i?Gge(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Gge(e,t,n,r){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=r?!1:n}function Wge(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Fe(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function Hge(e,t,n){let r;return e==="start"?r=n:e==="end"?r=t.options.reverse?t.min:t.max:Fe(e)?r=e.value:r=t.getBaseValue(),r}function qge(e){const t=e.options,n=t.fill;let r=Oe(n&&n.target,n);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Jge(e){const{scale:t,index:n,line:r}=e,i=[],s=r.segments,o=r.points,a=Zge(t,n);a.push(hj({x:null,y:t.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)Yge(i,o[u],a)}return new Ra({points:i,options:{}})}function Zge(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===t)break;s.hidden||n.unshift(s.dataset)}return n}function Yge(e,t,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=Kge(s,t,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(e.push(l),!a)break}}e.push(...r)}function Kge(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],s=e.segments,o=e.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],h=o[u.start][n],f=o[u.end][n];if(ro(i,h,f)){a=i===h,l=i===f;break}}return{first:a,last:l,point:r}}class fj{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:vt},t.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(t){const{x:n,y:r,radius:i}=this,s=t.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Xge(e){const{chart:t,fill:n,line:r}=e;if(Et(n))return Qge(t,n);if(n==="stack")return Jge(e);if(n==="shape")return!0;const i=eye(e);return i instanceof fj?i:hj(i,r)}function Qge(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function eye(e){return(e.scale||{}).getPointPositionForValue?nye(e):tye(e)}function tye(e){const{scale:t={},fill:n}=e,r=Wge(n,t);if(Et(r)){const i=t.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function nye(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,s=r.reverse?t.max:t.min,o=Hge(n,t,s),a=[];if(r.grid.circular){const l=t.getPointPositionForValue(0,s);return new fj({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,o));return a}function Iv(e,t,n){const r=Xge(t),{line:i,scale:s,axis:o}=t,a=i.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};r&&i.points.length&&(nw(e,n),rye(e,{line:i,target:r,above:u,below:h,area:n,scale:s,axis:o}),rw(e))}function rye(e,t){const{line:n,target:r,above:i,below:s,area:o,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),l==="x"&&s!==i&&(jC(e,r,o.top),zC(e,{line:n,target:r,color:i,scale:a,property:l}),e.restore(),e.save(),jC(e,r,o.bottom)),zC(e,{line:n,target:r,color:s,scale:a,property:l}),e.restore()}function jC(e,t,n){const{segments:r,points:i}=t;let s=!0,o=!1;e.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],h=i[N4(l,c,i)];s?(e.moveTo(u.x,u.y),s=!1):(e.lineTo(u.x,n),e.lineTo(u.x,u.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(h.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function zC(e,t){const{line:n,target:r,property:i,color:s,scale:o}=t,a=zge(n,r,i);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:f=s}={}}=l,d=r!==!0;e.save(),e.fillStyle=f,iye(e,o,d&&R5(i,u,h)),e.beginPath();const g=!!n.pathSegment(e,l);let y;if(d){g?e.closePath():BC(e,r,h,i);const w=!!r.pathSegment(e,c,{move:g,reverse:!0});y=g&&w,y||BC(e,r,u,i)}e.closePath(),e.fill(y?"evenodd":"nonzero"),e.restore()}}function iye(e,t,n){const{top:r,bottom:i}=t.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(e.beginPath(),e.rect(o,r,a-o,i-r),e.clip())}function BC(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var sye={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=e.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Ra&&(l={visible:e.isDatasetVisible(o),index:o,fill:Vge(a,o,r),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=Uge(i,o,n.propagate))},beforeDraw(e,t,n){const r=n.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&Iv(e.ctx,a,s))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;FC(s)&&Iv(e.ctx,s,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;!FC(r)||n.drawTime!=="beforeDatasetDraw"||Iv(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const UC=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},oye=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class VC extends ji{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=mt(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=on(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=UC(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let h=t;s.textAlign="left",s.textBaseline="middle";let f=-1,d=-u;return this.legendItems.forEach((g,y)=>{const w=r+n/2+s.measureText(g.text).width;(y===0||c[c.length-1]+w+2*a>o)&&(h+=u,c[c.length-(y>0?0:1)]=0,d+=u,f++),l[y]={left:0,top:d,row:f,width:w,height:i},c[c.length-1]+=w+a}),h}_fitCols(t,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t;let h=a,f=0,d=0,g=0,y=0;return this.legendItems.forEach((w,v)=>{const{itemWidth:x,itemHeight:S}=aye(r,n,s,w,i);v>0&&d+S+2*a>u&&(h+=f+a,c.push({width:f,height:d}),g+=f+a,y++,f=d=0),l[v]={left:g,top:d,col:y,width:x,height:S},f=Math.max(f,x),d+=S+a}),h+=f,c.push({width:f,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=qh(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ln(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ln(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Ln(r,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ln(r,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;nw(t,this),this._draw(),rw(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=t,a=Ct.color,l=qh(t.rtl,this.left,this.width),c=on(o.font),{padding:u}=o,h=c.size,f=h/2;let d;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:g,boxHeight:y,itemHeight:w}=UC(o,h),v=function($,T,A){if(isNaN(g)||g<=0||isNaN(y)||y<0)return;i.save();const I=Oe(A.lineWidth,1);if(i.fillStyle=Oe(A.fillStyle,a),i.lineCap=Oe(A.lineCap,"butt"),i.lineDashOffset=Oe(A.lineDashOffset,0),i.lineJoin=Oe(A.lineJoin,"miter"),i.lineWidth=I,i.strokeStyle=Oe(A.strokeStyle,a),i.setLineDash(Oe(A.lineDash,[])),o.usePointStyle){const E={radius:y*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:I},O=l.xPlus($,g/2),P=T+f;P7(i,E,O,P,o.pointStyleWidth&&g)}else{const E=T+Math.max((h-y)/2,0),O=l.leftForLtr($,g),P=Gc(A.borderRadius);i.beginPath(),Object.values(P).some(j=>j!==0)?$0(i,{x:O,y:E,w:g,h:y,radius:P}):i.rect(O,E,g,y),i.fill(),I!==0&&i.stroke()}i.restore()},x=function($,T,A){yu(i,A.text,$,T+w/2,c,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},S=this.isHorizontal(),_=this._computeTitleHeight();S?d={x:Ln(s,this.left+u,this.right-r[0]),y:this.top+u+_,line:0}:d={x:this.left+u,y:Ln(s,this.top+_+u,this.bottom-n[0].height),line:0},U7(this.ctx,t.textDirection);const M=w+u;this.legendItems.forEach(($,T)=>{i.strokeStyle=$.fontColor,i.fillStyle=$.fontColor;const A=i.measureText($.text).width,I=l.textAlign($.textAlign||($.textAlign=o.textAlign)),E=g+f+A;let O=d.x,P=d.y;l.setWidth(this.width),S?T>0&&O+E+u>this.right&&(P=d.y+=M,d.line++,O=d.x=Ln(s,this.left+u,this.right-r[d.line])):T>0&&P+M>this.bottom&&(O=d.x=O+n[d.line].width+u,d.line++,P=d.y=Ln(s,this.top+_+u,this.bottom-n[d.line].height));const j=l.x(O);if(v(j,P,$),O=Ipe(I,O+g+f,S?O+E:this.right,t.rtl),x(l.x(O),P,$),S)d.x+=E+u;else if(typeof $.text!="string"){const V=c.lineHeight;d.y+=dj($,V)+u}else d.y+=M}),V7(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=on(n.font),i=Jn(n.padding);if(!n.display)return;const s=qh(t.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Ln(t.align,h,this.right-f);else{const g=this.columnSizes.reduce((y,w)=>Math.max(y,w.height),0);u=c+Ln(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const d=Ln(a,h,h+f);o.textAlign=s.textAlign(A4(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,yu(o,n.text,d,u,r)}_computeTitleHeight(){const t=this.options.title,n=on(t.font),r=Jn(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,i,s;if(ro(t,this.left,this.right)&&ro(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ro(t,i.left,i.left+i.width)&&ro(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!uye(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,s=oye(i,r);i&&!s&&mt(n.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&mt(n.onHover,[t,r,this],this)}else r&&mt(n.onClick,[t,r,this],this)}}function aye(e,t,n,r,i){const s=lye(r,e,t,n),o=cye(i,r,t.lineHeight);return{itemWidth:s,itemHeight:o}}function lye(e,t,n,r){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),t+n.size/2+r.measureText(i).width}function cye(e,t,n){let r=e;return typeof t.text!="string"&&(r=dj(t,n)),r}function dj(e,t){const n=e.text?e.text.length:0;return t*n}function uye(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var hye={id:"legend",_element:VC,start(e,t,n){const r=e.legend=new VC({ctx:e.ctx,options:n,chart:e});Gn.configure(e,r,n),Gn.addBox(e,r)},stop(e){Gn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;Gn.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Jn(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class D4 extends ji{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=wt(r.text)?r.text.length:1;this._padding=Jn(r.padding);const s=i*on(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Ln(a,r,s),h=n+t,c=s-r):(o.position==="left"?(u=r+t,h=Ln(a,i,n),l=xt*-.5):(u=s-t,h=Ln(a,n,i),l=xt*.5),c=i-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const r=on(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);yu(t,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:A4(n.align),textBaseline:"middle",translation:[o,a]})}}function fye(e,t){const n=new D4({ctx:e.ctx,options:t,chart:e});Gn.configure(e,n,t),Gn.addBox(e,n),e.titleBlock=n}var dye={id:"title",_element:D4,start(e,t,n){fye(e,n)},stop(e){const t=e.titleBlock;Gn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;Gn.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pg=new WeakMap;var pye={id:"subtitle",start(e,t,n){const r=new D4({ctx:e.ctx,options:n,chart:e});Gn.configure(e,r,n),Gn.addBox(e,r),Pg.set(e,r)},stop(e){Gn.removeBox(e,Pg.get(e)),Pg.delete(e)},beforeUpdate(e,t,n){const r=Pg.get(e);Gn.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fp={average(e){if(!e.length)return!1;let t,n,r=0,i=0,s=0;for(t=0,n=e.length;t<n;++t){const o=e[t].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=e.length;s<o;++s){const l=e[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=T5(t,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function cs(e,t){return t&&(wt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Js(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function mye(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:e,label:o,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function GC(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=on(t.bodyFont),c=on(t.titleFont),u=on(t.footerFont),h=s.length,f=i.length,d=r.length,g=Jn(t.padding);let y=g.height,w=0,v=r.reduce((_,M)=>_+M.before.length+M.lines.length+M.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,h&&(y+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),v){const _=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=d*_+(v-d)*l.lineHeight+(v-1)*t.bodySpacing}f&&(y+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let x=0;const S=function(_){w=Math.max(w,n.measureText(_).width+x)};return n.save(),n.font=c.string,st(e.title,S),n.font=l.string,st(e.beforeBody.concat(e.afterBody),S),x=t.displayColors?o+2+t.boxPadding:0,st(r,_=>{st(_.before,S),st(_.lines,S),st(_.after,S)}),x=0,n.font=u.string,st(e.footer,S),n.restore(),w+=g.width,{width:w,height:y}}function gye(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function yye(e,t,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(e==="left"&&i+s+o>t.width||e==="right"&&i-s-o<0)return!0}function bye(e,t,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),yye(c,e,t,n)&&(c="center"),c}function WC(e,t,n){const r=n.yAlign||t.yAlign||gye(e,n);return{xAlign:n.xAlign||t.xAlign||bye(e,t,n,r),yAlign:r}}function wye(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function vye(e,t,n){let{y:r,height:i}=e;return t==="top"?r+=n:t==="bottom"?r-=i+n:r-=i/2,r}function HC(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:d}=Gc(o);let g=wye(t,a);const y=vye(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,f)+i:a==="right"&&(g+=Math.max(h,d)+i),{x:mn(g,0,r.width-t.width),y:mn(y,0,r.height-t.height)}}function Rg(e,t,n){const r=Jn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function qC(e){return cs([],Js(e))}function xye(e,t,n){return cl(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function JC(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const pj={beforeTitle:Rs,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:Rs,beforeBody:Rs,beforeLabel:Rs,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return qe(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Rs,afterBody:Rs,beforeFooter:Rs,footer:Rs,afterFooter:Rs};function ir(e,t,n,r){const i=e[t].call(n,r);return typeof i>"u"?pj[t].call(n,r):i}class N5 extends ji{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new q7(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=xye(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,i=ir(r,"beforeTitle",this,t),s=ir(r,"title",this,t),o=ir(r,"afterTitle",this,t);let a=[];return a=cs(a,Js(i)),a=cs(a,Js(s)),a=cs(a,Js(o)),a}getBeforeBody(t,n){return qC(ir(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:r}=n,i=[];return st(t,s=>{const o={before:[],lines:[],after:[]},a=JC(r,s);cs(o.before,Js(ir(a,"beforeLabel",this,s))),cs(o.lines,ir(a,"label",this,s)),cs(o.after,Js(ir(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(t,n){return qC(ir(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:r}=n,i=ir(r,"beforeFooter",this,t),s=ir(r,"footer",this,t),o=ir(r,"afterFooter",this,t);let a=[];return a=cs(a,Js(i)),a=cs(a,Js(s)),a=cs(a,Js(o)),a}_createItems(t){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(mye(this.chart,n[l]));return t.filter&&(a=a.filter((u,h,f)=>t.filter(u,h,f,r))),t.itemSort&&(a=a.sort((u,h)=>t.itemSort(u,h,r))),st(a,u=>{const h=JC(t.callbacks,u);i.push(ir(h,"labelColor",this,u)),s.push(ir(h,"labelPointStyle",this,u)),o.push(ir(h,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=fp[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=GC(this,r),c=Object.assign({},a,l),u=WC(this.chart,r,c),h=HC(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,i){const s=this.getCaretPosition(t,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(t,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Gc(a),{x:f,y:d}=t,{width:g,height:y}=n;let w,v,x,S,_,M;return s==="center"?(_=d+y/2,i==="left"?(w=f,v=w-o,S=_+o,M=_-o):(w=f+g,v=w+o,S=_-o,M=_+o),x=w):(i==="left"?v=f+Math.max(l,u)+o:i==="right"?v=f+g-Math.max(c,h)-o:v=this.caretX,s==="top"?(S=d,_=S-o,w=v-o,x=v+o):(S=d+y,_=S+o,w=v+o,x=v-o),M=S),{x1:w,x2:v,x3:x,y1:S,y2:_,y3:M}}drawTitle(t,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=qh(r.rtl,this.x,this.width);for(t.x=Rg(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=on(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,l+1===s&&(t.y+=r.titleMarginBottom-a)}}_drawColorBox(t,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=on(s.bodyFont),h=Rg(this,"left",s),f=i.x(h),d=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+d;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=i.leftForLtr(f,c)+c/2,v=g+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,I5(t,y,w,v),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,I5(t,y,w,v)}else{t.lineWidth=Fe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const y=i.leftForLtr(f,c),w=i.leftForLtr(i.xPlus(f,1),c-2),v=Gc(o.borderRadius);Object.values(v).some(x=>x!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,$0(t,{x:y,y:g,w:c,h:l,radius:v}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),$0(t,{x:w,y:g+1,w:c-2,h:l-2,radius:v}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(y,g,c,l),t.strokeRect(y,g,c,l),t.fillStyle=o.backgroundColor,t.fillRect(w,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,h=on(r.bodyFont);let f=h.lineHeight,d=0;const g=qh(r.rtl,this.x,this.width),y=function(A){n.fillText(A,g.x(t.x+d),t.y+f/2),t.y+=f+s},w=g.textAlign(o);let v,x,S,_,M,$,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=Rg(this,w,r),n.fillStyle=r.bodyColor,st(this.beforeBody,y),d=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,_=0,$=i.length;_<$;++_){for(v=i[_],x=this.labelTextColors[_],n.fillStyle=x,st(v.before,y),S=v.lines,a&&S.length&&(this._drawColorBox(n,t,_,g,r),f=Math.max(h.lineHeight,l)),M=0,T=S.length;M<T;++M)y(S[M]),f=h.lineHeight;st(v.after,y)}d=0,f=h.lineHeight,st(this.afterBody,y),t.y-=s}drawFooter(t,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=qh(r.rtl,this.x,this.width);for(t.x=Rg(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=on(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r.footerSpacing}}drawBackground(t,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=t,{width:c,height:u}=r,{topLeft:h,topRight:f,bottomLeft:d,bottomRight:g}=Gc(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(t,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(t,n,r,i),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(t,n,r,i),n.lineTo(a+d,l+u),n.quadraticCurveTo(a,l+u,a,l+u-d),o==="center"&&s==="left"&&this.drawCaret(t,n,r,i),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=fp[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=GC(this,t),l=Object.assign({},o,this._size),c=WC(n,t,l),u=HC(t,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Jn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=r,this.drawBackground(s,t,i,n),U7(t,n.textDirection),s.y+=o.top,this.drawTitle(s,t,n),this.drawBody(s,t,n),this.drawFooter(s,t,n),V7(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,i=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!h2(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(t,s,n,r),a=this._positionChanged(o,t),l=n||!h2(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,r,i){const s=this.options;if(t.type==="mouseout")return[];if(!i)return n;const o=this.chart.getElementsAtEventForMode(t,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:r,caretY:i,options:s}=this,o=fp[s.position].call(this,t,n);return o!==!1&&(r!==o.x||i!==o.y)}}ae(N5,"positioners",fp);var Sye={id:"tooltip",_element:N5,positioners:fp,afterInit(e,t,n){n&&(e.tooltip=new N5({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pj},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},_ye=Object.freeze({__proto__:null,Colors:Nge,Decimation:jge,Filler:sye,Legend:hye,SubTitle:pye,Title:dye,Tooltip:Sye});const Mye=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function $ye(e,t,n,r){const i=e.indexOf(t);if(i===-1)return Mye(e,t,n,r);const s=e.lastIndexOf(t);return i!==s?n:i}const Tye=(e,t)=>e===null?null:mn(Math.round(e),0,t);function ZC(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class D5 extends Iu{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(qe(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:$ye(r,t,Oe(n,t),this._addedLabels),Tye(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=t===0&&n===s.length-1?s:s.slice(t,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return ZC.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ae(D5,"id","category"),ae(D5,"defaults",{ticks:{callback:ZC}});function Aye(e,t){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=e,d=s||1,g=u-1,{min:y,max:w}=t,v=!qe(o),x=!qe(a),S=!qe(c),_=(w-y)/(h+1);let M=VE((w-y)/g/d)*d,$,T,A,I;if(M<1e-14&&!v&&!x)return[{value:y},{value:w}];I=Math.ceil(w/M)-Math.floor(y/M),I>g&&(M=VE(I*M/g/d)*d),qe(l)||($=Math.pow(10,l),M=Math.ceil(M*$)/$),i==="ticks"?(T=Math.floor(y/M)*M,A=Math.ceil(w/M)*M):(T=y,A=w),v&&x&&s&&xpe((a-o)/s,M/1e3)?(I=Math.round(Math.min((a-o)/M,u)),M=(a-o)/I,T=o,A=a):S?(T=v?o:T,A=x?a:A,I=c-1,M=(A-T)/I):(I=(A-T)/M,Vp(I,Math.round(I),M/1e3)?I=Math.round(I):I=Math.ceil(I));const E=Math.max(GE(M),GE(T));$=Math.pow(10,qe(l)?E:l),T=Math.round(T*$)/$,A=Math.round(A*$)/$;let O=0;for(v&&(f&&T!==o?(n.push({value:o}),T<o&&O++,Vp(Math.round((T+O*M)*$)/$,o,YC(o,_,e))&&O++):T<o&&O++);O<I;++O){const P=Math.round((T+O*M)*$)/$;if(x&&P>a)break;n.push({value:P})}return x&&f&&A!==a?n.length&&Vp(n[n.length-1].value,a,YC(a,_,e))?n[n.length-1].value=a:n.push({value:a}):(!x||A===a)&&n.push({value:A}),n}function YC(e,t,{horizontal:n,minRotation:r}){const i=Ei(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/s,o)}class b2 extends Iu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return qe(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(t){const l=vs(i),c=vs(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(i-l)}this.min=i,this.max=s}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Aye(i,s);return t.bounds==="ticks"&&M7(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-n)/Math.max(t.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return lm(t,this.chart.options.locale,this.options.ticks.format)}}class L5 extends b2{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Et(t)?t:0,this.max=Et(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=Ei(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}ae(L5,"id","linear"),ae(L5,"defaults",{ticks:{callback:tw.formatters.numeric}});const A0=e=>Math.floor(Pa(e)),xl=(e,t)=>Math.pow(10,A0(e)+t);function KC(e){return e/Math.pow(10,A0(e))===1}function XC(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function Iye(e,t){const n=t-e;let r=A0(n);for(;XC(e,t,r)>10;)r++;for(;XC(e,t,r)<10;)r--;return Math.min(r,A0(e))}function kye(e,{min:t,max:n}){t=kr(e.min,t);const r=[],i=A0(t);let s=Iye(t,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),f=kr(e.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;f<n;)r.push({value:f,major:KC(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),f=Math.round((l+u+h*Math.pow(10,s))*o)/o;const d=kr(e.max,f);return r.push({value:d,major:KC(d),significand:h}),r}class F5 extends Iu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const r=b2.prototype.parse.apply(this,[t,n]);if(r===0){this._zero=!0;return}return Et(r)&&r>0?r:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Et(t)?Math.max(0,t):null,this.max=Et(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Et(this._userMin)&&(this.min=t===xl(this.min,0)?xl(this.min,-1):xl(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=t?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(xl(r,-1)),o(xl(i,1)))),r<=0&&s(xl(i,-1)),i<=0&&o(xl(r,1)),this.min=r,this.max=i}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},r=kye(n,this);return t.bounds==="ticks"&&M7(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(t){return t===void 0?"0":lm(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Pa(t),this._valueRange=Pa(this.max)-Pa(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Pa(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}ae(F5,"id","logarithmic"),ae(F5,"defaults",{ticks:{callback:tw.formatters.logarithmic,major:{enabled:!0}}});function j5(e){const t=e.ticks;if(t.display&&e.display){const n=Jn(t.backdropPadding);return Oe(t.font&&t.font.size,Ct.font.size)+n.height}return 0}function Eye(e,t,n){return n=wt(n)?n:[n],{w:Fpe(e,t.string,n),h:n.length*t.lineHeight}}function QC(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function Cye(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?xt/s:0;for(let l=0;l<s;l++){const c=o.setContext(e.getPointLabelContext(l));i[l]=c.padding;const u=e.getPointPosition(l,e.drawingArea+i[l],a),h=on(c.font),f=Eye(e.ctx,h,e._pointLabels[l]);r[l]=f;const d=Cr(e.getIndexAngle(l)+a),g=Math.round($4(d)),y=QC(g,u.x,f.w,0,180),w=QC(g,u.y,f.h,90,270);Oye(n,t,d,y,w)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=Nye(e,r,i)}function Oye(e,t,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<t.l?(a=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function Pye(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,r+i+o,s),c=Math.round($4(Cr(l.angle+Dt))),u=Fye(l.y,a.h,c),h=Dye(c),f=Lye(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function Rye(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(so({x:n,y:r},t)||so({x:n,y:s},t)||so({x:i,y:r},t)||so({x:i,y:s},t))}function Nye(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:j5(s)/2,additionalAngle:o?xt/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const h=Pye(e,u,l);r.push(h),a==="auto"&&(h.visible=Rye(h,c),h.visible&&(c=h))}return r}function Dye(e){return e===0||e===180?"center":e<180?"left":"right"}function Lye(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function Fye(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function jye(e,t,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=t;if(!qe(a)){const l=Gc(t.borderRadius),c=Jn(t.backdropPadding);e.fillStyle=a;const u=r-c.left,h=i-c.top,f=s-r+c.width,d=o-i+c.height;Object.values(l).some(g=>g!==0)?(e.beginPath(),$0(e,{x:u,y:h,w:f,h:d,radius:l}),e.fill()):e.fillRect(u,h,f,d)}}function zye(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const s=e._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(e.getPointLabelContext(i));jye(n,o,s);const a=on(o.font),{x:l,y:c,textAlign:u}=s;yu(n,e._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function mj(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,vt);else{let s=e.getPointPosition(0,t);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=e.getPointPosition(o,t),i.lineTo(s.x,s.y)}}function Bye(e,t,n,r,i){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),mj(e,n,o,r),s.closePath(),s.stroke(),s.restore())}function Uye(e,t,n){return cl(e,{label:n,index:t,type:"pointLabel"})}class dp extends b2{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Jn(j5(this.options)/2),n=this.width=this.maxWidth-t.width,r=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+r/2+t.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Et(t)&&!isNaN(t)?t:0,this.max=Et(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/j5(this.options))}generateTickLabels(t){b2.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,r)=>{const i=mt(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const t=this.options;t.display&&t.pointLabels.display?Cye(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,r,i){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,r,i))}getIndexAngle(t){const n=vt/(this._pointLabels.length||1),r=this.options.startAngle||0;return Cr(t*n+Ei(r))}getDistanceFromCenterForValue(t){if(qe(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(qe(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const r=n[t];return Uye(this.getContext(),t,r)}}getPointPosition(t,n,r=0){const i=this.getIndexAngle(t)-Dt+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[t];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const r=this.ctx;r.save(),r.beginPath(),mj(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&zye(this,o),i.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),d=i.setContext(f),g=s.setContext(f);Bye(this,d,l,o,g)}}),r.display){for(t.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(t.lineWidth=f,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=on(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const h=Jn(c.backdropPadding);t.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}yu(t,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}ae(dp,"id","radialLinear"),ae(dp,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:tw.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),ae(dp,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ae(dp,"descriptors",{angleLines:{_fallback:"grid"}});const sw={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},mr=Object.keys(sw);function eO(e,t){return e-t}function tO(e,t){if(qe(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let o=t;return typeof r=="function"&&(o=r(o)),Et(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(wf(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function nO(e,t,n,r){const i=mr.length;for(let s=mr.indexOf(e);s<i-1;++s){const o=sw[mr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=r)return mr[s]}return mr[i-1]}function Vye(e,t,n,r,i){for(let s=mr.length-1;s>=mr.indexOf(n);s--){const o=mr[s];if(sw[o].common&&e._adapter.diff(i,r,o)>=t-1)return o}return mr[n?mr.indexOf(n):0]}function Gye(e){for(let t=mr.indexOf(e)+1,n=mr.length;t<n;++t)if(sw[mr[t]].common)return mr[t]}function rO(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:i}=T4(n,t),s=n[r]>=t?n[r]:n[i];e[s]=!0}}function Wye(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(t[l].major=!0);return t}function iO(e,t,n){const r=[],i={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:Wye(e,r,i,n)}class I0 extends Iu{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const r=t.time||(t.time={}),i=this._adapter=new eme._date(t.adapters.date);i.init(n),Up(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:tO(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Et(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Et(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=$pe(i,s,o);return this._unit=n.unit||(r.autoSkip?nO(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Vye(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Gye(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),iO(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,r=0,i,s;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?r=s:r=(s-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=mn(n,0,o),r=mn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||nO(s.minUnit,n,r,this._getLabelCapacity(n)),a=Oe(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=wf(l)||l===!0,u={};let h=n,f,d;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":o),t.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(f=h,d=0;f<r;f=+t.add(f,a,o),d++)rO(u,f,g);return(f===r||i.bounds==="ticks"||d===1)&&rO(u,f,g),Object.keys(u).sort(eO).map(y=>+y)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(t,o)}_tickFormatFunction(t,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return mt(o,[t,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=r[n],d=c&&h&&f&&f.major;return this._adapter.format(t,i||(d?h:u))}generateTickLabels(t){let n,r,i;for(n=0,r=t.length;n<r;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,i=Ei(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(t,0,iO(this,[t],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)t.push(tO(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return A7(t.sort(eO))}}ae(I0,"id","time"),ae(I0,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ng(e,t,n){let r=0,i=e.length-1,s,o,a,l;n?(t>=e[r].pos&&t<=e[i].pos&&({lo:r,hi:i}=io(e,"pos",t)),{pos:s,time:a}=e[r],{pos:o,time:l}=e[i]):(t>=e[r].time&&t<=e[i].time&&({lo:r,hi:i}=io(e,"time",t)),{time:s,pos:a}=e[r],{time:o,pos:l}=e[i]);const c=o-s;return c?a+(l-a)*(t-s)/c:a}class z5 extends I0{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ng(n,this.min),this._tableRange=Ng(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const t=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Ng(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return Ng(this._table,r*this._tableRange+this._minPos,!0)}}ae(z5,"id","timeseries"),ae(z5,"defaults",I0.defaults);var Hye=Object.freeze({__proto__:null,CategoryScale:D5,LinearScale:L5,LogarithmicScale:F5,RadialLinearScale:dp,TimeScale:I0,TimeSeriesScale:z5});const qye=[Q0e,kge,_ye,Hye],Jye="arcgis-map-components";let gj=!1,B5=!1;const vo=(e,t="")=>()=>{},Zye=(e,t)=>()=>{},Yye="{visibility:hidden}[hydrated]{visibility:inherit}",sO={},L4=e=>(e=typeof e,e==="object"||e==="function");function yj(e){var t,n,r;return(r=(n=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const Kye=(e,t,...n)=>{let r=null,i=!1,s=!1;const o=[],a=c=>{for(let u=0;u<c.length;u++)r=c[u],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((i=typeof e!="function"&&!L4(r))&&(r=String(r)),i&&s?o[o.length-1].$text$+=r:o.push(i?U5(null,r):r),s=i)};if(a(n),t){const c=t.className||t.class;c&&(t.class=typeof c!="object"?c:Object.keys(c).filter(u=>c[u]).join(" "))}const l=U5(e,null);return l.$attrs$=t,o.length>0&&(l.$children$=o),l},U5=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n},Xye={},Qye=e=>e&&e.$tag$===Xye,e1e=(e,t)=>e!=null&&!L4(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,t1e=e=>ku(e).$hostElement$,q$e=(e,t,n)=>{const r=t1e(e);return{emit:i=>bj(r,t,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:i})}},bj=(e,t,n)=>{const r=pr.ce(t,n);return e.dispatchEvent(r),r},oO=new WeakMap,n1e=(e,t,n)=>{let r=v2.get(e);S1e&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,v2.set(e,r)},r1e=(e,t,n,r)=>{var i;let s=wj(t);const o=v2.get(s);if(e=e.nodeType===11?e:oo,o)if(typeof o=="string"){e=e.head||e;let a=oO.get(e),l;if(a||oO.set(e,a=new Set),!a.has(s)){{l=oo.createElement("style"),l.innerHTML=o;const c=(i=pr.$nonce$)!==null&&i!==void 0?i:yj(oo);c!=null&&l.setAttribute("nonce",c),e.insertBefore(l,e.querySelector("link"))}a&&a.add(s)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return s},i1e=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=vo("attachStyles",t.$tagName$);r1e(n.getRootNode(),t),r()},wj=(e,t)=>"sc-"+e.$tagName$,aO=(e,t,n,r,i,s)=>{if(n!==r){let o=v1e(e,t);if(t.toLowerCase(),t==="class"){const a=e.classList,l=lO(n),c=lO(r);a.remove(...l.filter(u=>u&&!c.includes(u))),a.add(...c.filter(u=>u&&!l.includes(u)))}else if(t==="ref")r&&r(e);else{const a=L4(r);if((o||a&&r!==null)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{const l=r??"";t==="list"?o=!1:(n==null||e[t]!=l)&&(e[t]=l)}}catch{}r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&e.removeAttribute(t):(!o||s&4||i)&&!a&&(r=r===!0?"":r,e.setAttribute(t,r))}}},s1e=/\s/,lO=e=>e?e.split(s1e):[],vj=(e,t,n,r)=>{const i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||sO,o=t.$attrs$||sO;for(r in s)r in o||aO(i,r,s[r],void 0,n,t.$flags$);for(r in o)aO(i,r,s[r],o[r],n,t.$flags$)},F4=(e,t,n,r)=>{const i=t.$children$[n];let s=0,o,a;if(o=i.$elm$=oo.createElement(i.$tag$),vj(null,i,gj),i.$children$)for(s=0;s<i.$children$.length;++s)a=F4(e,i,s),a&&o.appendChild(a);return o},xj=(e,t,n,r,i,s)=>{let o=e,a;for(;i<=s;++i)r[i]&&(a=F4(null,n,i),a&&(r[i].$elm$=a,o.insertBefore(a,t)))},Sj=(e,t,n,r,i)=>{for(;t<=n;++t)(r=e[t])&&(i=r.$elm$,_j(r),i.remove())},o1e=(e,t,n,r)=>{let i=0,s=0,o=t.length-1,a=t[0],l=t[o],c=r.length-1,u=r[0],h=r[c],f;for(;i<=o&&s<=c;)a==null?a=t[++i]:l==null?l=t[--o]:u==null?u=r[++s]:h==null?h=r[--c]:Dg(a,u)?(pp(a,u),a=t[++i],u=r[++s]):Dg(l,h)?(pp(l,h),l=t[--o],h=r[--c]):Dg(a,h)?(pp(a,h),e.insertBefore(a.$elm$,l.$elm$.nextSibling),a=t[++i],h=r[--c]):Dg(l,u)?(pp(l,u),e.insertBefore(l.$elm$,a.$elm$),l=t[--o],u=r[++s]):(f=F4(t&&t[s],n,s),u=r[++s],f&&a.$elm$.parentNode.insertBefore(f,a.$elm$));i>o?xj(e,r[c+1]==null?null:r[c+1].$elm$,n,r,s,c):s>c&&Sj(t,i,o)},Dg=(e,t)=>e.$tag$===t.$tag$,pp=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,i=t.$children$;vj(e,t,gj),r!==null&&i!==null?o1e(n,r,t,i):i!==null?xj(n,null,t,i,0,i.length-1):r!==null&&Sj(r,0,r.length-1)},_j=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(_j)},a1e=(e,t)=>{const n=e.$hostElement$,r=e.$cmpMeta$,i=e.$vnode$||U5(null,null),s=Qye(t)?t:Kye(null,null,t);r.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},r.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=n[o])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=i.$elm$=n,pp(i,s)},Mj=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(n=>e.$onRenderResolve$=n))},j4=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}return Mj(e,e.$ancestorComponent$),M1e(()=>l1e(e,t))},l1e=(e,t)=>{const n=vo("scheduleUpdate",e.$cmpMeta$.$tagName$),r=e.$lazyInstance$;let i;return t&&(i=w2(r,"componentWillLoad")),n(),f1e(i,()=>c1e(e,r,t))},c1e=async(e,t,n)=>{const r=e.$hostElement$,i=vo("update",e.$cmpMeta$.$tagName$),s=r["s-rc"];n&&i1e(e);const o=vo("render",e.$cmpMeta$.$tagName$);u1e(e,t),s&&(s.map(a=>a()),r["s-rc"]=void 0),o(),i();{const a=r["s-p"],l=()=>h1e(e);a.length===0?l():(Promise.all(a).then(l),e.$flags$|=4,a.length=0)}},u1e=(e,t,n)=>{try{t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,a1e(e,t)}catch(r){be(r,e.$hostElement$)}return null},h1e=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=vo("postUpdate",t),i=e.$lazyInstance$,s=e.$ancestorComponent$;w2(i,"componentDidRender"),e.$flags$&64?r():(e.$flags$|=64,Tj(n),w2(i,"componentDidLoad"),r(),e.$onReadyResolve$(n),s||$j()),e.$onInstanceResolve$(n),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&U4(()=>j4(e,!1)),e.$flags$&=-517},$j=e=>{Tj(oo.documentElement),U4(()=>bj(B4,"appload",{detail:{namespace:Jye}}))},w2=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){be(r)}},f1e=(e,t)=>e&&e.then?e.then(t):t(),Tj=e=>e.setAttribute("hydrated",""),d1e=(e,t)=>ku(e).$instanceValues$.get(t),p1e=(e,t,n,r)=>{const i=ku(e),s=i.$hostElement$,o=i.$instanceValues$.get(t),a=i.$flags$,l=i.$lazyInstance$;n=e1e(n,r.$members$[t][0]);const c=Number.isNaN(o)&&Number.isNaN(n),u=n!==o&&!c;if((!(a&8)||o===void 0)&&u&&(i.$instanceValues$.set(t,n),l)){if(r.$watchers$&&a&128){const h=r.$watchers$[t];h&&h.map(f=>{try{l[f](n,o,t)}catch(d){be(d,s)}})}(a&18)===2&&j4(i,!1)}},Aj=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),i=e.prototype;if(r.map(([s,[o]])=>{o&31||n&2&&o&32?Object.defineProperty(i,s,{get(){return d1e(this,s)},set(a){p1e(this,s,a,t)},configurable:!0,enumerable:!0}):n&1&&o&64&&Object.defineProperty(i,s,{value(...a){const l=ku(this);return l.$onInstancePromise$.then(()=>l.$lazyInstance$[s](...a))}})}),n&1){const s=new Map;i.attributeChangedCallback=function(o,a,l){pr.jmp(()=>{const c=s.get(o);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(i.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},e.observedAttributes=r.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&t.$attrsToReflect$.push([o,l]),l})}}return e},m1e=async(e,t,n,r,i)=>{if(!(t.$flags$&32)){{if(t.$flags$|=32,i=x1e(n),i.then){const l=Zye();i=await i,l()}i.isProxied||(n.$watchers$=i.watchers,Aj(i,n,2),i.isProxied=!0);const a=vo("createInstance",n.$tagName$);t.$flags$|=8;try{new i(t)}catch(l){be(l)}t.$flags$&=-9,t.$flags$|=128,a()}if(i.style){let a=i.style;const l=wj(n);if(!v2.has(l)){const c=vo("registerStyles",n.$tagName$);n1e(l,a,!!(n.$flags$&1)),c()}}}const s=t.$ancestorComponent$,o=()=>j4(t,!0);s&&s["s-rc"]?s["s-rc"].push(o):o()},g1e=e=>{if(!(pr.$flags$&1)){const t=ku(e),n=t.$cmpMeta$,r=vo("connectedCallback",n.$tagName$);if(!(t.$flags$&1)){t.$flags$|=1;{let i=e;for(;i=i.parentNode||i.host;)if(i["s-p"]){Mj(t,t.$ancestorComponent$=i);break}}n.$members$&&Object.entries(n.$members$).map(([i,[s]])=>{if(s&31&&e.hasOwnProperty(i)){const o=e[i];delete e[i],e[i]=o}}),m1e(e,t,n)}r()}},y1e=e=>{if(!(pr.$flags$&1)){const n=ku(e).$lazyInstance$;w2(n,"disconnectedCallback")}},b1e=(e,t={})=>{var n;const r=vo(),i=[],s=t.exclude||[],o=B4.customElements,a=oo.head,l=a.querySelector("meta[charset]"),c=oo.createElement("style"),u=[];let h,f=!0;Object.assign(pr,t),pr.$resourcesUrl$=new URL(t.resourcesUrl||"./",oo.baseURI).href,e.map(d=>{d[1].map(g=>{const y={$flags$:g[0],$tagName$:g[1],$members$:g[2],$listeners$:g[3]};y.$members$=g[2],y.$attrsToReflect$=[],y.$watchers$={};const w=y.$tagName$,v=class extends HTMLElement{constructor(x){super(x),x=this,w1e(x,y)}connectedCallback(){h&&(clearTimeout(h),h=null),f?u.push(this):pr.jmp(()=>g1e(this))}disconnectedCallback(){pr.jmp(()=>y1e(this))}componentOnReady(){return ku(this).$onReadyPromise$}};y.$lazyBundleId$=d[0],!s.includes(w)&&!o.get(w)&&(i.push(w),o.define(w,Aj(v,y,1)))})});{c.innerHTML=i+Yye,c.setAttribute("data-styles","");const d=(n=pr.$nonce$)!==null&&n!==void 0?n:yj(oo);d!=null&&c.setAttribute("nonce",d),a.insertBefore(c,l?l.nextSibling:a.firstChild)}f=!1,u.length?u.map(d=>d.connectedCallback()):pr.jmp(()=>h=setTimeout($j,30)),r()},z4=new WeakMap,ku=e=>z4.get(e),J$e=(e,t)=>z4.set(t.$lazyInstance$=e,t),w1e=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onInstancePromise$=new Promise(r=>n.$onInstanceResolve$=r),n.$onReadyPromise$=new Promise(r=>n.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[],z4.set(e,n)},v1e=(e,t)=>t in e,be=(e,t)=>(0,console.error)(e,t),kv=new Map,x1e=(e,t,n)=>{const r=e.$tagName$.replace(/-/g,"_"),i=e.$lazyBundleId$,s=kv.get(i);if(s)return s[r];if(!n||!BUILD.hotModuleReplacement){const o=a=>(kv.set(i,a),a[r]);switch(i){case"arcgis-expand_4":return ne(()=>import("./arcgis-expand_4.entry-3c039bc6.js"),["assets/arcgis-expand_4.entry-3c039bc6.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js","assets/mapping-utils-26beb904-81783ae9.js"]).then(o,be);case"arcgis-area-measurement-2d":return ne(()=>import("./arcgis-area-measurement-2d.entry-74bcf815.js"),["assets/arcgis-area-measurement-2d.entry-74bcf815.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-area-measurement-3d":return ne(()=>import("./arcgis-area-measurement-3d.entry-074e6df4.js"),["assets/arcgis-area-measurement-3d.entry-074e6df4.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-attachments":return ne(()=>import("./arcgis-attachments.entry-911dc168.js"),["assets/arcgis-attachments.entry-911dc168.js","assets/index-c227d296-dd1efda8.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-basemap-gallery":return ne(()=>import("./arcgis-basemap-gallery.entry-a120afa1.js"),["assets/arcgis-basemap-gallery.entry-a120afa1.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-basemap-layer-list":return ne(()=>import("./arcgis-basemap-layer-list.entry-948e7b8c.js"),["assets/arcgis-basemap-layer-list.entry-948e7b8c.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-basemap-toggle":return ne(()=>import("./arcgis-basemap-toggle.entry-128018d1.js"),["assets/arcgis-basemap-toggle.entry-128018d1.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-bookmarks":return ne(()=>import("./arcgis-bookmarks.entry-1538e792.js"),["assets/arcgis-bookmarks.entry-1538e792.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-building-explorer":return ne(()=>import("./arcgis-building-explorer.entry-53078246.js"),["assets/arcgis-building-explorer.entry-53078246.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-compass":return ne(()=>import("./arcgis-compass.entry-cdf5db1e.js"),["assets/arcgis-compass.entry-cdf5db1e.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-coordinate-conversion":return ne(()=>import("./arcgis-coordinate-conversion.entry-054d8b13.js"),["assets/arcgis-coordinate-conversion.entry-054d8b13.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-daylight":return ne(()=>import("./arcgis-daylight.entry-8313ef0f.js"),["assets/arcgis-daylight.entry-8313ef0f.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-directions":return ne(()=>import("./arcgis-directions.entry-7fad445b.js"),["assets/arcgis-directions.entry-7fad445b.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-directline-measurement-3d":return ne(()=>import("./arcgis-directline-measurement-3d.entry-90fe546e.js"),["assets/arcgis-directline-measurement-3d.entry-90fe546e.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-distance-measurement-2d":return ne(()=>import("./arcgis-distance-measurement-2d.entry-e3abe15b.js"),["assets/arcgis-distance-measurement-2d.entry-e3abe15b.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-editor":return ne(()=>import("./arcgis-editor.entry-b51a7069.js"),["assets/arcgis-editor.entry-b51a7069.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-elevation-profile":return ne(()=>import("./arcgis-elevation-profile.entry-ea0bf360.js"),["assets/arcgis-elevation-profile.entry-ea0bf360.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-feature":return ne(()=>import("./arcgis-feature.entry-6ce3eb5d.js"),["assets/arcgis-feature.entry-6ce3eb5d.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-feature-form":return ne(()=>import("./arcgis-feature-form.entry-8c684ca5.js"),["assets/arcgis-feature-form.entry-8c684ca5.js","assets/index-c227d296-dd1efda8.js"]).then(o,be);case"arcgis-feature-templates":return ne(()=>import("./arcgis-feature-templates.entry-5cc349e9.js"),["assets/arcgis-feature-templates.entry-5cc349e9.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-features":return ne(()=>import("./arcgis-features.entry-23c8e418.js"),["assets/arcgis-features.entry-23c8e418.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-floor-filter":return ne(()=>import("./arcgis-floor-filter.entry-88594be7.js"),["assets/arcgis-floor-filter.entry-88594be7.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-fullscreen":return ne(()=>import("./arcgis-fullscreen.entry-65078fd6.js"),["assets/arcgis-fullscreen.entry-65078fd6.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-histogram":return ne(()=>import("./arcgis-histogram.entry-bf6e2beb.js"),["assets/arcgis-histogram.entry-bf6e2beb.js","assets/index-c227d296-dd1efda8.js"]).then(o,be);case"arcgis-histogram-range-slider":return ne(()=>import("./arcgis-histogram-range-slider.entry-290dae6a.js"),["assets/arcgis-histogram-range-slider.entry-290dae6a.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-home":return ne(()=>import("./arcgis-home.entry-06d250cc.js"),["assets/arcgis-home.entry-06d250cc.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-layer-list":return ne(()=>import("./arcgis-layer-list.entry-02546195.js"),["assets/arcgis-layer-list.entry-02546195.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-legend":return ne(()=>import("./arcgis-legend.entry-93ad29c8.js"),["assets/arcgis-legend.entry-93ad29c8.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-line-of-sight":return ne(()=>import("./arcgis-line-of-sight.entry-12dbab41.js"),["assets/arcgis-line-of-sight.entry-12dbab41.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-locate":return ne(()=>import("./arcgis-locate.entry-87ede9e9.js"),["assets/arcgis-locate.entry-87ede9e9.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-measurement":return ne(()=>import("./arcgis-measurement.entry-7f577433.js"),["assets/arcgis-measurement.entry-7f577433.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-navigation-toggle":return ne(()=>import("./arcgis-navigation-toggle.entry-4b4c56ca.js"),["assets/arcgis-navigation-toggle.entry-4b4c56ca.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-print":return ne(()=>import("./arcgis-print.entry-555d208d.js"),["assets/arcgis-print.entry-555d208d.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-scale-bar":return ne(()=>import("./arcgis-scale-bar.entry-aea0c818.js"),["assets/arcgis-scale-bar.entry-aea0c818.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-scale-range-slider":return ne(()=>import("./arcgis-scale-range-slider.entry-328f9940.js"),["assets/arcgis-scale-range-slider.entry-328f9940.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-scene":return ne(()=>import("./arcgis-scene.entry-6a89c928.js"),["assets/arcgis-scene.entry-6a89c928.js","assets/index-c227d296-dd1efda8.js","assets/mapping-utils-26beb904-81783ae9.js"]).then(o,be);case"arcgis-shadow-cast":return ne(()=>import("./arcgis-shadow-cast.entry-ce1c0982.js"),["assets/arcgis-shadow-cast.entry-ce1c0982.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-sketch":return ne(()=>import("./arcgis-sketch.entry-f43ab8d5.js"),["assets/arcgis-sketch.entry-f43ab8d5.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-slice":return ne(()=>import("./arcgis-slice.entry-7509cc32.js"),["assets/arcgis-slice.entry-7509cc32.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-slider":return ne(()=>import("./arcgis-slider.entry-56c5484b.js"),["assets/arcgis-slider.entry-56c5484b.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-swipe":return ne(()=>import("./arcgis-swipe.entry-3294f361.js"),["assets/arcgis-swipe.entry-3294f361.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-table-list":return ne(()=>import("./arcgis-table-list.entry-5ae82a90.js"),["assets/arcgis-table-list.entry-5ae82a90.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-time-slider":return ne(()=>import("./arcgis-time-slider.entry-44443b25.js"),["assets/arcgis-time-slider.entry-44443b25.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-track":return ne(()=>import("./arcgis-track.entry-ab1ce0f1.js"),["assets/arcgis-track.entry-ab1ce0f1.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-utility-network-associations":return ne(()=>import("./arcgis-utility-network-associations.entry-11348c4d.js"),["assets/arcgis-utility-network-associations.entry-11348c4d.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-utility-network-trace":return ne(()=>import("./arcgis-utility-network-trace.entry-638979c4.js"),["assets/arcgis-utility-network-trace.entry-638979c4.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-utility-network-validate-topology":return ne(()=>import("./arcgis-utility-network-validate-topology.entry-9d95de21.js"),["assets/arcgis-utility-network-validate-topology.entry-9d95de21.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-value-picker":return ne(()=>import("./arcgis-value-picker.entry-7ae3c510.js"),["assets/arcgis-value-picker.entry-7ae3c510.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-weather":return ne(()=>import("./arcgis-weather.entry-8fe96339.js"),["assets/arcgis-weather.entry-8fe96339.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be);case"arcgis-zoom":return ne(()=>import("./arcgis-zoom.entry-e820428b.js"),["assets/arcgis-zoom.entry-e820428b.js","assets/index-c227d296-dd1efda8.js","assets/component-utils-2ebdae59-b855ce5d.js","assets/disconnected-bc5fc8bc-72f6378d.js"]).then(o,be)}}return ne(()=>import(`./${i}.entry.js`),[]).then(o=>(kv.set(i,o),o[r]),be)},v2=new Map,B4=typeof window<"u"?window:{},oo=B4.document||{head:{}},pr={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},Ij=e=>Promise.resolve(e),S1e=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),cO=[],kj=[],_1e=(e,t)=>n=>{e.push(n),B5||(B5=!0,t&&pr.$flags$&4?U4(V5):pr.raf(V5))},uO=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){be(n)}e.length=0},V5=()=>{uO(cO),uO(kj),(B5=cO.length>0)&&pr.raf(V5)},U4=e=>Ij().then(e),M1e=_1e(kj,!0),$1e=()=>Ij(),T1e=(e,t)=>typeof window>"u"?Promise.resolve():$1e().then(()=>b1e(JSON.parse('[["arcgis-expand_4",[[0,"arcgis-search",{"referenceElement":[1,"reference-element"],"activeMenu":[1,"active-menu"],"activeSource":[1040],"activeSourceIndex":[1026,"active-source-index"],"allPlaceholder":[1,"all-placeholder"],"allSources":[1040],"autoSelect":[4,"auto-select"],"defaultSources":[1040],"includeDefaultSources":[4,"include-default-sources"],"locationEnabled":[4,"location-enabled"],"maxResults":[2,"max-results"],"maxSuggestions":[2,"max-suggestions"],"minSuggestCharacters":[2,"min-suggest-characters"],"popupEnabled":[4,"popup-enabled"],"popupTemplate":[16],"portal":[16],"resultGraphic":[1040],"resultGraphicEnabled":[4,"result-graphic-enabled"],"results":[1040],"searchAllEnabled":[4,"search-all-enabled"],"searchTerm":[1,"search-term"],"selectedResult":[1040],"sources":[16],"suggestions":[16],"suggestionsEnabled":[4,"suggestions-enabled"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040],"blurSearch":[64],"clearSearch":[64],"focusSearch":[64],"search":[64],"suggest":[64]}],[0,"arcgis-feature-table",{"referenceElement":[1,"reference-element"],"activeFilters":[1040],"activeSortOrders":[1040],"attachmentsEnabled":[4,"attachments-enabled"],"autoRefreshEnabled":[4,"auto-refresh-enabled"],"columnReorderingEnabled":[4,"column-reordering-enabled"],"columns":[1040],"editingEnabled":[4,"editing-enabled"],"filterGeometry":[16],"hiddenFields":[16],"highlightEnabled":[4,"highlight-enabled"],"highlightIds":[16],"layer":[1040],"menu":[16],"menuConfig":[16],"multiSortEnabled":[4,"multi-sort-enabled"],"pageSize":[2,"page-size"],"state":[1025],"tableTemplate":[16],"itemId":[1,"item-id"],"position":[1],"url":[1],"view":[1040],"widget":[1040],"clearSelectionFilter":[64],"deleteSelection":[64],"filterBySelection":[64],"findColumn":[64],"hideColumn":[64],"refresh":[64],"scrollToIndex":[64],"showAllColumns":[64],"showColumn":[64],"sortColumn":[64]}],[0,"arcgis-map",{"apiKey":[1,"api-key"],"basemap":[1],"disableNavigation":[4,"disable-navigation"],"itemId":[1,"item-id"],"zoom":[1538],"center":[1537],"view":[1040]}],[0,"arcgis-expand",{"referenceElement":[1,"reference-element"],"position":[1],"view":[1040],"widget":[1040]}]]],["arcgis-area-measurement-2d",[[0,"arcgis-area-measurement-2d",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"unit":[1025],"unitOptions":[16],"view":[1040],"widget":[1040]}]]],["arcgis-area-measurement-3d",[[0,"arcgis-area-measurement-3d",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"unit":[1025],"unitOptions":[16],"view":[1040],"widget":[1040]}]]],["arcgis-attachments",[[0,"arcgis-attachments",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"graphic":[16],"widget":[1040]}]]],["arcgis-basemap-gallery",[[0,"arcgis-basemap-gallery",{"referenceElement":[1,"reference-element"],"activeBasemap":[1040],"position":[1],"expandable":[4],"source":[1040],"view":[1040],"widget":[1040]}]]],["arcgis-basemap-layer-list",[[0,"arcgis-basemap-layer-list",{"referenceElement":[1,"reference-element"],"basemapTitle":[513,"basemap-title"],"baseItems":[1040],"editingEnabled":[516,"editing-enabled"],"mulitpleSelectionEnabled":[516,"mulitple-selection-enabled"],"position":[1],"expandable":[4],"referenceItems":[1040],"selectedItems":[1040],"view":[1040],"widget":[1040]}]]],["arcgis-basemap-toggle",[[0,"arcgis-basemap-toggle",{"referenceElement":[1,"reference-element"],"activeBasemap":[16],"nextBasemap":[1025,"next-basemap"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040],"toggle":[64]}]]],["arcgis-bookmarks",[[0,"arcgis-bookmarks",{"referenceElement":[1,"reference-element"],"bookmarks":[16],"defaultCreateOptions":[16],"defaultEditOptions":[16],"editingEnabled":[516,"editing-enabled"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040]}]]],["arcgis-building-explorer",[[0,"arcgis-building-explorer",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"widget":[1040],"view":[1040]}]]],["arcgis-coordinate-conversion",[[0,"arcgis-coordinate-conversion",{"referenceElement":[1,"reference-element"],"conversions":[16],"currentLocation":[1040],"formats":[16],"locationSymbol":[16],"mode":[1],"multipleConversions":[4,"multiple-conversions"],"orientation":[1],"storageEnabled":[4,"storage-enabled"],"storageType":[1,"storage-type"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040],"reverseConvert":[64]}]]],["arcgis-daylight",[[0,"arcgis-daylight",{"referenceElement":[1,"reference-element"],"dateOrSeason":[1,"date-or-season"],"playSpeedMultiplier":[2,"play-speed-multiplier"],"timeSliderSteps":[2,"time-slider-steps"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040]}]]],["arcgis-directions",[[0,"arcgis-directions",{"referenceElement":[1,"reference-element"],"apiKey":[1,"api-key"],"routeLayerItemId":[1,"route-layer-item-id"],"lastRoute":[1040],"layer":[16],"maxStops":[2,"max-stops"],"searchProperties":[16],"unit":[1],"position":[1],"expandable":[4],"view":[1040],"widget":[1040],"getDirections":[64],"save":[64],"saveAs":[64],"zoomToRoute":[64]}]]],["arcgis-directline-measurement-3d",[[0,"arcgis-directline-measurement-3d",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"analysis":[1040],"unit":[1],"unitOptions":[16],"widget":[1040],"view":[1040]}]]],["arcgis-distance-measurement-2d",[[0,"arcgis-distance-measurement-2d",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"unit":[1],"unitOptions":[16],"widget":[1040],"view":[1040]}]]],["arcgis-editor",[[0,"arcgis-editor",{"referenceElement":[1,"reference-element"],"activeWorkflow":[1040],"allowedWorkflows":[1,"allowed-workflows"],"labelOptions":[16],"layerInfos":[16],"snappingOptions":[16],"supportingWidgetDefaults":[16],"tooltipOptions":[16],"position":[1],"expandable":[4],"view":[1040],"widget":[1040],"cancelWorkflow":[64],"deleteFeatureFromWorkflow":[64],"startCreateFeaturesWorkflowAtFeatureCreation":[64],"startCreateFeaturesWorkflowAtFeatureTypeSelection":[64],"startUpdateWorkflowAtFeatureEdit":[64],"startUpdateWorkflowAtFeatureSelection":[64],"startUpdateWorkflowAtMultipleFeatureSelection":[64]}]]],["arcgis-elevation-profile",[[0,"arcgis-elevation-profile",{"referenceElement":[1,"reference-element"],"geodesicDistanceThreshold":[2,"geodesic-distance-threshold"],"input":[16],"profiles":[16],"position":[1],"expandable":[4],"unit":[1],"unitOptions":[16],"view":[1040],"widget":[1040]}]]],["arcgis-feature",[[0,"arcgis-feature",{"referenceElement":[1,"reference-element"],"defaultPopupTemplateEnabled":[4,"default-popup-template-enabled"],"graphic":[16],"position":[1],"expandable":[4],"view":[1040],"widget":[1040]}]]],["arcgis-feature-templates",[[0,"arcgis-feature-templates",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"widget":[1040],"layers":[16]}]]],["arcgis-features",[[0,"arcgis-features",{"referenceElement":[1,"reference-element"],"view":[1040],"position":[1],"expandable":[4],"content":[1],"features":[16],"selectedFeature":[1040],"selectedFeatureIndex":[1026,"selected-feature-index"],"selectedFeatureWidget":[1040],"widget":[1040],"fetchFeatures":[64],"clear":[64],"close":[64],"next":[64],"open":[64],"previous":[64]}]]],["arcgis-floor-filter",[[0,"arcgis-floor-filter",{"referenceElement":[1,"reference-element"],"facility":[1],"level":[1],"longNames":[4,"long-names"],"site":[1],"position":[1],"expandable":[4],"widget":[1040],"view":[1040],"updateWebDocument":[64]}]]],["arcgis-histogram-range-slider",[[0,"arcgis-histogram-range-slider",{"referenceElement":[1,"reference-element"],"max":[2],"min":[2],"position":[1],"expandable":[4],"widget":[1040]}]]],["arcgis-layer-list",[[0,"arcgis-layer-list",{"referenceElement":[1,"reference-element"],"multipleSelectionEnabled":[4,"multiple-selection-enabled"],"operationalItems":[1040],"selectedItems":[16],"selectionEnabled":[4,"selection-enabled"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040],"triggerAction":[64]}]]],["arcgis-legend",[[0,"arcgis-legend",{"referenceElement":[1,"reference-element"],"activeLayerInfos":[16],"basemapLegendVisible":[4,"basemap-legend-visible"],"hideLayersNotInCurrentView":[4,"hide-layers-not-in-current-view"],"layerInfos":[16],"respectLayerVisibility":[4,"respect-layer-visibility"],"legendStyle":[1,"legend-style"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040]}]]],["arcgis-line-of-sight",[[0,"arcgis-line-of-sight",{"referenceElement":[1,"reference-element"],"analysis":[1040],"position":[1],"expandable":[4],"view":[1040],"widget":[1040]}]]],["arcgis-measurement",[[0,"arcgis-measurement",{"referenceElement":[1,"reference-element"],"activeTool":[1,"active-tool"],"activeWidget":[1040],"areaUnit":[1,"area-unit"],"linearUnit":[1,"linear-unit"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040],"startMeasurement":[64]}]]],["arcgis-print",[[0,"arcgis-print",{"referenceElement":[1,"reference-element"],"allowedFormats":[1,"allowed-formats"],"allowedLayouts":[1,"allowed-layouts"],"exportedLinks":[1040],"extraParameters":[8,"extra-parameters"],"includeDefaultTemplates":[4,"include-default-templates"],"portal":[16],"printServiceUrl":[1,"print-service-url"],"templateCustomTextElements":[16],"templateOptions":[16],"position":[1],"expandable":[4],"view":[1040],"widget":[1040]}]]],["arcgis-scale-bar",[[0,"arcgis-scale-bar",{"referenceElement":[1,"reference-element"],"view":[1040],"position":[1],"expandable":[4],"barStyle":[1,"bar-style"],"unit":[1],"widget":[1040]}]]],["arcgis-scale-range-slider",[[0,"arcgis-scale-range-slider",{"referenceElement":[1,"reference-element"],"view":[1040],"position":[1],"expandable":[4],"widget":[1040],"layer":[16],"maxScale":[2,"max-scale"],"maxScaleLimit":[2,"max-scale-limit"],"minScale":[2,"min-scale"],"minScaleLimit":[2,"min-scale-limit"],"region":[1]}]]],["arcgis-shadow-cast",[[0,"arcgis-shadow-cast",{"referenceElement":[1,"reference-element"],"view":[1040],"position":[1],"expandable":[4],"widget":[1040],"headingLevel":[2,"heading-level"]}]]],["arcgis-sketch",[[0,"arcgis-sketch",{"referenceElement":[1,"reference-element"],"activeTool":[1537,"active-tool"],"availableCreateTools":[16],"createGraphic":[1040],"creationMode":[1,"creation-mode"],"defaultCreateOptions":[16],"defaultUpdateOptions":[16],"labelOptions":[16],"layer":[1040],"layout":[1],"snappingOptions":[16],"tooltipOptions":[16],"updateGraphics":[1040],"view":[1040],"position":[1],"expandable":[4],"widget":[1040]}]]],["arcgis-slice",[[0,"arcgis-slice",{"referenceElement":[1,"reference-element"],"analysis":[1040],"view":[1040],"position":[1],"expandable":[4],"widget":[1040],"headingLevel":[2,"heading-level"]}]]],["arcgis-slider",[[0,"arcgis-slider",{"referenceElement":[1,"reference-element"],"draggableSegmentsEnabled":[4,"draggable-segments-enabled"],"effectiveMax":[2,"effective-max"],"effectiveMin":[2,"effective-min"],"effectiveSegmentElements":[1040],"labelElements":[1040],"labelInputsEnabled":[4,"label-inputs-enabled"],"labels":[16],"layout":[1],"min":[2],"max":[2],"maxLabelElement":[1040],"minLabelElement":[1040],"precision":[2],"rangeLabelInputsEnabled":[4,"range-label-inputs-enabled"],"segmentElements":[1040],"snapOnClickEnabled":[4,"snap-on-click-enabled"],"syncedSegmentsEnabled":[4,"synced-segments-enabled"],"thumbElements":[1040],"thumbsConstrained":[4,"thumbs-constrained"],"tickConfigs":[16],"tickElements":[1040],"trackElement":[1040],"steps":[8],"values":[1],"position":[1],"expandable":[4],"widget":[1040]}]]],["arcgis-table-list",[[0,"arcgis-table-list",{"referenceElement":[1,"reference-element"],"multipleSelectionEnabled":[4,"multiple-selection-enabled"],"selectionEnabled":[4,"selection-enabled"],"selectedItems":[1040],"tableItems":[1040],"view":[1040],"position":[1],"expandable":[4],"widget":[1040]}]]],["arcgis-time-slider",[[0,"arcgis-time-slider",{"referenceElement":[1,"reference-element"],"actions":[16],"effectiveStops":[1040],"fullTimeExtent":[16],"layout":[1],"loop":[4],"mode":[1],"playRate":[2,"play-rate"],"stops":[16],"tickConfigs":[16],"timeExtent":[16],"timeVisible":[4,"time-visible"],"view":[1040],"position":[1],"expandable":[4],"widget":[1040],"next":[64],"play":[64],"previous":[64],"stop":[64]}]]],["arcgis-utility-network-associations",[[0,"arcgis-utility-network-associations",{"referenceElement":[1,"reference-element"],"autoRefreshAssociations":[4,"auto-refresh-associations"],"connectivityAssociationsLineSymbol":[16],"includeConnectivityAssociations":[4,"include-connectivity-associations"],"includeStructuralAttachmentAssociations":[4,"include-structural-attachment-associations"],"maxAllowableAssociations":[2,"max-allowable-associations"],"maxAllowableAssociationsSliderMax":[2,"max-allowable-associations-slider-max"],"maxAllowableAssociationsSliderMin":[2,"max-allowable-associations-slider-min"],"maxAllowableAssociationsSliderStep":[2,"max-allowable-associations-slider-step"],"showArrowsConnectivity":[4,"show-arrows-connectivity"],"showArrowsStructuralAttachment":[4,"show-arrows-structural-attachment"],"showAssociationsEnabled":[4,"show-associations-enabled"],"structuralAttachmentAssociationsLineSymbol":[16],"utilityNetwork":[16],"view":[1040],"position":[1],"expandable":[4],"widget":[1040]}]]],["arcgis-utility-network-trace",[[0,"arcgis-utility-network-trace",{"referenceElement":[1,"reference-element"],"defaultGraphicColor":[16],"flags":[16],"gdbVersion":[1,"gdb-version"],"inputSettings":[16],"selectedTraces":[16],"selectOnComplete":[4,"select-on-complete"],"showGraphicsOnComplete":[4,"show-graphics-on-complete"],"showSelectionAttributes":[4,"show-selection-attributes"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040],"checkCanTrace":[64],"confirmReset":[64]}]]],["arcgis-utility-network-validate-topology",[[0,"arcgis-utility-network-validate-topology",{"referenceElement":[1,"reference-element"],"extentToValidate":[1,"extent-to-validate"],"utilityNetwork":[16],"view":[1040],"position":[1],"expandable":[4],"widget":[1040]}]]],["arcgis-value-picker",[[0,"arcgis-value-picker",{"referenceElement":[1,"reference-element"],"view":[1040],"position":[1],"expandable":[4],"widget":[1040],"canNext":[516,"can-next"],"canPlay":[516,"can-play"],"canPrevious":[516,"can-previous"],"caption":[1],"component":[16],"layout":[1],"loop":[4],"playRate":[2,"play-rate"],"values":[1040],"next":[64],"pause":[64],"play":[64],"previous":[64]}]]],["arcgis-weather",[[0,"arcgis-weather",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"view":[1040],"widget":[1040]}]]],["arcgis-compass",[[0,"arcgis-compass",{"referenceElement":[1,"reference-element"],"position":[1],"widget":[1040],"view":[1040],"reset":[64]}]]],["arcgis-feature-form",[[0,"arcgis-feature-form",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"widget":[1040]}]]],["arcgis-fullscreen",[[0,"arcgis-fullscreen",{"referenceElement":[1,"reference-element"],"element":[16],"position":[1],"view":[1040],"widget":[1040]}]]],["arcgis-histogram",[[0,"arcgis-histogram",{"referenceElement":[1,"reference-element"],"position":[1],"expandable":[4],"widget":[1040]}]]],["arcgis-home",[[0,"arcgis-home",{"referenceElement":[1,"reference-element"],"viewpoint":[16],"view":[1040],"position":[1],"widget":[1040],"cancelGo":[64],"go":[64]}]]],["arcgis-locate",[[0,"arcgis-locate",{"referenceElement":[1,"reference-element"],"geolocationOptions":[8,"geolocation-options"],"goToLocationEnabled":[4,"go-to-location-enabled"],"graphic":[16],"popupEnabled":[4,"popup-enabled"],"scale":[2],"position":[1],"view":[1040],"widget":[1040],"useHeadingEnabled":[1028,"use-heading-enabled"],"cancelLocate":[64],"locate":[64]}]]],["arcgis-navigation-toggle",[[0,"arcgis-navigation-toggle",{"referenceElement":[1,"reference-element"],"layout":[1537],"position":[1],"view":[1040],"widget":[1040],"toggle":[64]}]]],["arcgis-scene",[[0,"arcgis-scene",{"apiKey":[1,"api-key"],"itemId":[1,"item-id"],"zoom":[1538],"center":[1537],"view":[1040],"disableNavigation":[4,"disable-navigation"]}]]],["arcgis-swipe",[[0,"arcgis-swipe",{"referenceElement":[1,"reference-element"],"direction":[1],"dragLabel":[1,"drag-label"],"leadingLayers":[16],"swipePosition":[2,"swipe-position"],"trailingLayers":[16],"view":[1040],"position":[1],"widget":[1040]}]]],["arcgis-track",[[0,"arcgis-track",{"referenceElement":[1,"reference-element"],"geolocationOptions":[8,"geolocation-options"],"goToLocationEnabled":[4,"go-to-location-enabled"],"graphic":[16],"scale":[2],"tracking":[1540],"useHeadingEnabled":[4,"use-heading-enabled"],"position":[1],"view":[1040],"widget":[1040]}]]],["arcgis-zoom",[[0,"arcgis-zoom",{"referenceElement":[1,"reference-element"],"layout":[1],"view":[1040],"position":[1],"widget":[1040],"zoomIn":[64],"zoomOut":[64]}]]]]'),t));(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();T1e();let hO,Fa,_i,qp,fO,dO,G5;var _O;(_O=document.querySelector("arcgis-scene"))==null||_O.addEventListener("viewReady",async e=>{Fa=e.detail.view,hO=Fa.map,console.log("Got view and map from the DOM",Fa,hO),D1e()});const A1e=()=>{Fa.extent={spatialReference:{latestWkid:3857,wkid:102100},xmin:-4891786441670591e-9-1e3,ymin:-2307257926811594e-9,xmax:-4891427934010591e-9+1e3,ymax:-2.3069633097615945e6+1e3*2},Fa.camera={position:{spatialReference:{latestWkid:3857,wkid:102100},x:-4891793969308218e-9,y:-2307727852329162e-9,z:1884.7450796905905},heading:15.783027823378896,tilt:46.010725830776614}},I1e=async()=>{_i=new b7({id:"Elevation in bands",url:"https://tiledimageservices.arcgis.com/OLiydejKCZTGhvWg/arcgis/rest/services/VarzeaMin_DOMs/ImageServer",opacity:.9}),qp=new a9({id:"volumetricGraphics"});const e={mode:"relative-to-ground",unit:"meters"};qp.elevationInfo=e,Fa.map.addMany([_i,qp]),k1e()},k1e=()=>{var e,t,n,r;fO=(t=(e=_i==null?void 0:_i.rasterInfo)==null?void 0:e.pixelSize)==null?void 0:t.x,dO=(r=(n=_i==null?void 0:_i.rasterInfo)==null?void 0:n.pixelSize)==null?void 0:r.y,console.log("LayerView for imagery created!",_i,fO,dO),_i.renderer={computeGamma:!1,dra:!1,gamma:[1],maxPercent:.25,minPercent:.25,max:255,min:0,statistics:[[1197.58837890625,1481.50732421875,1315.2153212003386,58.96735004736977]],useGamma:!1,stretchType:"min-max",type:"raster-stretch"},Fa.on("click",i=>{E1e(i).catch(s=>{if(console.error(s),!wr(s))throw s})})},E1e=eM(async e=>{const t=e.mapPoint,n=150,r=150,i=new Me({xmin:t.x,ymin:t.y,xmax:t.x+n,ymax:t.y+r,spatialReference:{wkid:102100}}),s=await _i.fetchPixels(i,i.xmax-i.xmin,i.ymax-i.ymin),o=i.width/s.pixelBlock.width,a=i.height/s.pixelBlock.height;console.log("resolution",o,a),console.log("pixelData",s),N1e(s.pixelBlock.pixels),C1e(s)}),C1e=e=>{qp.removeAll();const t=[],n=pO(e,e.pixelBlock.pixels[0],"#FFD700");t.push(...n);const r=pO(e,e.pixelBlock.pixels[1],"#D700FF");t.push(...r),qp.addMany(t),Fa.goTo({target:n,tilt:80})},O1e=(e,t,n,r=!1)=>{const i=t%2==0?n%2==0?[...e[t][n],...e[t][n+2],...e[t+1][n+1]]:[...e[t][n+1],...e[t+1][n],...e[t+1][n+2]]:n%2==0?[...e[t][n+1],...e[t+1][n],...e[t+1][n+2]]:[...e[t][n],...e[t][n+2],...e[t+1][n+1]];if(r){const s=t%2==0?n%2==0?[`${t}.${n}`,`${t}.${n+2}`,`${t+1}.${n+1}`]:[`${t}.${n+1}`,`${t+1}.${n}`,`${t+1}.${n+2}`]:n%2==0?[`${t}.${n+1}`,`${t+1}.${n}`,`${t+1}.${n+2}`]:[`${t}.${n+1}`,`${t+1}.${n}`,`${t+1}.${n+2}`];console.log(n,s.join(", "))}return i},P1e=(e,t,n,r=!1)=>{const i=[...e[t][n],...e[t][n+1],...e[t+1][n],...e[t][n+1],...e[t+1][n],...e[t+1][n+1]];if(r){const s=[`${t}.${n}`,`${t}.${n+1}`,`${t+1}.${n}`,`${t}.${n+1}`,`${t+1}.${n}`,`${t+1}.${n+1}`];console.log(n,s.join(", "))}return i},pO=(e,t,n,r=!1)=>{const i=[],s=[];t.forEach((c,u)=>{const h=Math.floor(u/e.pixelBlock.height),f=Math.floor(u%e.pixelBlock.height);s[h]||(s[h]=[]),s[h][f]=[e.extent.xmin+f,e.extent.ymin+h,c+-1200>-1e3?c+-1200:0]});for(let c=0;c<s.length-3;c++)for(let u=0;u<s[0].length-3;u++){const h=r?O1e(s,c,u):P1e(s,c,u);i.push(...h)}const a=i.slice(0,i.length-i.length%9);return[new hu({geometry:new CN({spatialReference:e.extent.spatialReference,vertexAttributes:{position:a}}),symbol:{type:"mesh-3d",symbolLayers:[{type:"fill",material:{color:n},outline:{color:n},edges:{type:"solid",color:[50,50,50,.5]}}]}})]},R1e=()=>{ds.register(...qye);const e=document.getElementById("chart-canvas");G5=new ds(e,{type:"scatter",data:{datasets:[{label:"Elevation difference by frequency",data:[]}]},options:{scales:{x:{type:"linear",position:"bottom"}}}})},N1e=e=>{ds.defaults.color="#fff";const n=e[0].map((i,s)=>Math.round(e[1][s])-Math.round(i)).reduce((i,s)=>(i[s]=i[s]===void 0?1:i[s]+=1,i),{}),r=Object.keys(n).map(i=>({x:parseInt(i),y:n[i]}));G5.data.datasets[0].data=r,G5.update()},D1e=()=>{A1e(),I1e(),R1e()};export{zie as $,WM as A,ce as B,ii as C,Ii as D,W2 as E,soe as F,Mf as G,ooe as H,_r as I,T5e as J,o5e as K,uu as L,Me as M,Op as N,wS as O,I5e as P,A5e as Q,WP as R,By as S,Ybe as T,L2 as U,tt as V,Q_e as W,J as X,gB as Y,M2 as Z,ne as _,Z_e as a,B0 as a$,Xfe as a0,ode as a1,u9 as a2,b2e as a3,Kh as a4,p as a5,b as a6,ge as a7,mF as a8,L as a9,Ewe as aA,Ph as aB,W3e as aC,tL as aD,Z3e as aE,Y3e as aF,U3e as aG,lu as aH,OD as aI,Sn as aJ,jz as aK,J3e as aL,d1 as aM,P3e as aN,fte as aO,ti as aP,h2e as aQ,U2e as aR,aF as aS,NSe as aT,I$ as aU,QSe as aV,ue as aW,QR as aX,bo as aY,Th as aZ,sR as a_,GL as aa,yn as ab,e2e as ac,xe as ad,re as ae,ZV as af,YV as ag,we as ah,fo as ai,as as aj,X4 as ak,wr as al,ule as am,ie as an,It as ao,_z as ap,P2 as aq,xbe as ar,Li as as,W0 as at,t8 as au,Lh as av,n8 as aw,e8 as ax,gI as ay,qSe as az,wbe as b,FK as b$,Un as b0,H3e as b1,q3e as b2,m3e as b3,Zm as b4,Za as b5,Ste as b6,xte as b7,vte as b8,mp as b9,Yt as bA,pK as bB,mK as bC,go as bD,gK as bE,yK as bF,wK as bG,xK as bH,SK as bI,yo as bJ,_K as bK,bK as bL,vK as bM,MK as bN,$K as bO,TK as bP,AK as bQ,IK as bR,kK as bS,EK as bT,CK as bU,OK as bV,PK as bW,RK as bX,NK as bY,DK as bZ,LK as b_,vr as ba,Pc as bb,Xr as bc,w_e as bd,Oi as be,v2e as bf,x6 as bg,ja as bh,HSe as bi,Wa as bj,bh as bk,bp as bl,gn as bm,qc as bn,Bg as bo,Xc as bp,kx as bq,t$ as br,Bn as bs,Ywe as bt,Yh as bu,Ev as bv,$O as bw,kz as bx,IM as by,_e as bz,h7 as c,m8 as c$,jK as c0,zK as c1,BK as c2,UK as c3,VK as c4,GK as c5,WK as c6,HK as c7,qK as c8,vh as c9,Oc as cA,Az as cB,Nwe as cC,MM as cD,o2e as cE,Ss as cF,$H as cG,MW as cH,Su as cI,ee as cJ,e2 as cK,Rue as cL,Sce as cM,Lfe as cN,d5 as cO,YF as cP,Noe as cQ,Cy as cR,Q9 as cS,Doe as cT,Loe as cU,Ufe as cV,N1 as cW,IF as cX,A_ as cY,wde as cZ,Ele as c_,sN as ca,co as cb,zG as cc,F2 as cd,I6 as ce,vP as cf,_n as cg,Ne as ch,uY as ci,O0 as cj,OV as ck,Ace as cl,V3e as cm,NG as cn,H2 as co,Qp as cp,_ne as cq,eSe as cr,Sne as cs,X3e as ct,$we as cu,GSe as cv,CSe as cw,s2e as cx,Mve as cy,ka as cz,jie as d,PMe as d$,Eve as d0,nt as d1,ut as d2,X2 as d3,ru as d4,RJ as d5,pxe as d6,zJ as d7,Sr as d8,U0 as d9,fe as dA,mf as dB,O3e as dC,Mb as dD,Be as dE,rM as dF,Bre as dG,iQ as dH,Y$ as dI,Kbe as dJ,bse as dK,Tce as dL,k_e as dM,sx as dN,bu as dO,Tie as dP,Aie as dQ,X5 as dR,Rf as dS,Io as dT,Eb as dU,nm as dV,q2 as dW,ws as dX,lM as dY,_$ as dZ,hde as d_,tf as da,Fr as db,NJ as dc,C2e as dd,JU as de,Xh as df,gM as dg,O2e as dh,$s as di,A_e as dj,i9 as dk,s9 as dl,eM as dm,Re as dn,Ch as dp,xr as dq,WG as dr,TP as ds,M2e as dt,Sf as du,S_e as dv,qD as dw,pe as dx,z3e as dy,BO as dz,q$e as e,J2 as e$,Eae as e0,Mr as e1,Fc as e2,Yb as e3,q9 as e4,rP as e5,E2 as e6,BM as e7,su as e8,i0 as e9,Ibe as eA,xw as eB,CMe as eC,f3e as eD,Rwe as eE,Xwe as eF,Owe as eG,hu as eH,_u as eI,hf as eJ,Y9 as eK,a9 as eL,DT as eM,yr as eN,lg as eO,eve as eP,H9 as eQ,ZG as eR,Ic as eS,Ks as eT,gt as eU,Zn as eV,r5e as eW,i5e as eX,bN as eY,wN as eZ,qM as e_,va as ea,Nr as eb,tq as ec,R2 as ed,nq as ee,gbe as ef,lve as eg,ou as eh,$Y as ei,pw as ej,yI as ek,nve as el,ASe as em,ZSe as en,$$ as eo,$L as ep,TL as eq,$b as er,yY as es,kSe as et,TSe as eu,dde as ev,Bie as ew,o6 as ex,hte as ey,tr as ez,sde as f,eY as f$,V0 as f0,Pr as f1,Wve as f2,YJ as f3,Yve as f4,et as f5,kt as f6,x8 as f7,Xve as f8,z2 as f9,Nve as fA,fq as fB,Wn as fC,H6 as fD,mW as fE,pW as fF,gW as fG,yW as fH,UZ as fI,xu as fJ,VM as fK,Kc as fL,aR as fM,lR as fN,j0 as fO,$f as fP,S2 as fQ,_2 as fR,E3e as fS,WD as fT,G1 as fU,RM as fV,wSe as fW,K2 as fX,ySe as fY,NY as fZ,xY as f_,qn as fa,Qve as fb,EW as fc,B2 as fd,at as fe,exe as ff,Ove as fg,nxe as fh,sxe as fi,uZ as fj,rt as fk,Tw as fl,_xe as fm,vp as fn,G2 as fo,So as fp,nf as fq,lxe as fr,Jve as fs,GM as ft,Zt as fu,Lt as fv,L0 as fw,mo as fx,il as fy,NV as fz,t1e as g,pf as g$,IZ as g0,A8 as g1,Iz as g2,y2e as g3,gJ as g4,Jh as g5,PO as g6,Ebe as g7,zbe as g8,rn as g9,KJ as gA,Pve as gB,SJ as gC,oR as gD,n0 as gE,Sxe as gF,wW as gG,er as gH,$xe as gI,_o as gJ,ESe as gK,t0 as gL,BR as gM,zR as gN,M8 as gO,gc as gP,fSe as gQ,HY as gR,mSe as gS,tSe as gT,Cne as gU,g3e as gV,Dh as gW,d2e as gX,M3e as gY,_3e as gZ,L_e as g_,zxe as ga,vM as gb,Uxe as gc,Bxe as gd,swe as ge,rf as gf,Z8 as gg,JY as gh,Z2 as gi,WO as gj,Ci as gk,Ov as gl,tN as gm,qY as gn,VY as go,DY as gp,eN as gq,UY as gr,UG as gs,ri as gt,Gve as gu,_s as gv,bSe as gw,Ave as gx,dSe as gy,SY as gz,Kye as h,XB as h$,W1 as h0,y3e as h1,H1 as h2,k6 as h3,M$ as h4,Bne as h5,Une as h6,g2e as h7,n9 as h8,sie as h9,Mbe as hA,ave as hB,wwe as hC,B5e as hD,Rp as hE,$M as hF,N3e as hG,B3e as hH,D3e as hI,F3e as hJ,L3e as hK,j3e as hL,h0 as hM,ni as hN,Ple as hO,xle as hP,x2 as hQ,Ac as hR,R$ as hS,EL as hT,Nre as hU,Of as hV,tH as hW,dI as hX,Sx as hY,_5e as hZ,Je as h_,oie as ha,xse as hb,td as hc,Dz as hd,I2 as he,uoe as hf,J9 as hg,xo as hh,iV as hi,k0 as hj,Zse as hk,q1e as hl,ide as hm,P$e as hn,e5e as ho,K3e as hp,za as hq,xve as hr,jR as hs,k1 as ht,CN as hu,af as hv,n3e as hw,s3e as hx,MN as hy,pbe as hz,rde as i,xJ as i$,pz as i0,Ene as i1,$5e as i2,t5e as i3,jbe as i4,XJ as i5,oxe as i6,Ixe as i7,ZR as i8,IY as i9,hF as iA,Dse as iB,aMe as iC,e_e as iD,T2e as iE,MMe as iF,Cq as iG,A$e as iH,T$e as iI,CV as iJ,uk as iK,Ot as iL,wP as iM,IB as iN,K4 as iO,zae as iP,HO as iQ,iwe as iR,tve as iS,sH as iT,dwe as iU,qG as iV,ax as iW,Mxe as iX,WJ as iY,Cve as iZ,_J as i_,qxe as ia,po as ib,Fbe as ic,Lbe as id,eMe as ie,z5e as ig,F5e as ih,Ah as ii,Qoe as ij,j5e as ik,wh as il,VU as im,EI as io,P_e as ip,qO as iq,Lz as ir,mMe as is,t3e as it,$2 as iu,VG as iv,cwe as iw,U6 as ix,gMe as iy,oMe as iz,si as j,rl as j$,cx as j0,vJ as j1,ixe as j2,eb as j3,rxe as j4,vu as j5,SF as j6,kMe as j7,Rde as j8,o9 as j9,RW as jA,Ha as jB,px as jC,R3e as jD,Xte as jE,IMe as jF,AMe as jG,y_ as jH,$Me as jI,f2e as jJ,iu as jK,_x as jL,J8 as jM,CZ as jN,Cwe as jO,$ve as jP,QU as jQ,nl as jR,NMe as jS,RMe as jT,m9 as jU,Vb as jV,fde as jW,EMe as jX,F_e as jY,Y1 as jZ,hL as j_,TMe as ja,I_e as jb,p9 as jc,E_e as jd,C_e as je,ff as jf,q5 as jg,Z5 as jh,K1e as ji,Z1e as jj,EV as jk,IH as jl,BZ as jm,FM as jn,CW as jo,rZ as jp,Pwe as jq,Wwe as jr,ot as js,m_e as jt,g_e as ju,s5e as jv,yse as jw,mH as jx,G6 as jy,Z6 as jz,X as k,rb as k$,Rve as k0,XV as k1,doe as k2,hR as k3,ix as k4,GV as k5,HV as k6,Nbe as k7,Dbe as k8,C1 as k9,s2 as kA,fM as kB,U2 as kC,V2 as kD,E1 as kE,CG as kF,qwe as kG,l0 as kH,oJ as kI,aJ as kJ,QT as kK,V2e as kL,G2e as kM,l5e as kN,h5e as kO,f5e as kP,wp as kQ,X1e as kR,IX as kS,a3e as kT,l3e as kU,Sbe as kV,d3e as kW,NO as kX,ua as kY,Sve as kZ,sl as k_,WV as ka,qV as kb,Q8 as kc,u5e as kd,Zh as ke,Ba as kf,Bc as kg,kc as kh,ve as ki,Fz as kj,Hwe as kk,p3e as kl,b3e as km,s1 as kn,kbe as ko,h6 as kp,U_e as kq,Jse as kr,O5e as ks,kZ as kt,PZ as ku,NZ as kv,RZ as kw,Rb as kx,DZ as ky,x2e as kz,R$e as l,EY as l$,F8 as l0,O$e as l1,tM as l2,a1 as l3,O_e as l4,_U as l5,X8 as l6,Iq as l7,PSe as l8,Uve as l9,k3e as lA,Wte as lB,KV as lC,boe as lD,u2 as lE,Ja as lF,Hc as lG,hk as lH,au as lI,c3e as lJ,r3e as lK,bwe as lL,g6 as lM,xG as lN,A2e as lO,Jq as lP,dG as lQ,ef as lR,GY as lS,pSe as lT,Bve as lU,zve as lV,oN as lW,Dn as lX,xp as lY,iq as lZ,of as l_,z0 as la,bq as lb,wq as lc,vq as ld,ZY as le,Y2 as lf,XR as lg,_a as lh,cJ as li,tY as lj,hK as lk,R1 as ll,$Z as lm,Zq as ln,Tb as lo,r_ as lp,Hte as lq,sQ as lr,une as ls,YD as lt,GF as lu,Zd as lv,Q3e as lw,v3e as lx,I3e as ly,A3e as lz,ze as m,Ua as m$,G0 as m0,CY as m1,Awe as m2,PY as m3,OY as m4,Sp as m5,S6 as m6,Gh as m7,oi as m8,Cae as m9,aZ as mA,sA as mB,jH as mC,MH as mD,m2e as mE,g5e as mF,p5e as mG,m5e as mH,pMe as mI,m0 as mJ,Ka as mK,lMe as mL,uMe as mM,aae as mN,hMe as mO,s_e as mP,t_e as mQ,dMe as mR,xae as mS,Sae as mT,fMe as mU,W1e as mV,rre as mW,R5e as mX,N5e as mY,Uc as mZ,aM as m_,p_e as ma,zb as mb,kh as mc,U$ as md,Yie as me,z6 as mf,Nc as mg,J5 as mh,J1e as mi,nA as mj,CM as mk,H1e as ml,wte as mm,Gm as mn,At as mo,N0 as mp,ft as mq,WSe as mr,xs as ms,Y1e as mt,Oh as mu,qT as mv,k as mw,Abe as mx,USe as my,VSe as mz,bM as n,AY as n$,gz as n0,Z2e as n1,xq as n2,lJ as n3,QB as n4,Q2e as n5,X2e as n6,ebe as n7,K2e as n8,Tz as n9,tx as nA,v1 as nB,nx as nC,x1 as nD,Or as nE,je as nF,bMe as nG,wMe as nH,xMe as nI,SMe as nJ,vMe as nK,n5e as nL,p6 as nM,JV as nN,kb as nO,Q0 as nP,W_e as nQ,G_e as nR,V_e as nS,Qte as nT,vwe as nU,H_e as nV,Fne as nW,HP as nX,BB as nY,obe as nZ,abe as n_,Lwe as na,d5e as nb,r2e as nc,Qw as nd,Jc as ne,al as nf,zwe as ng,Mq as nh,yq as ni,J6 as nj,RSe as nk,JSe as nl,Kwe as nm,o0 as nn,Y0 as no,X0 as np,K0 as nq,gSe as nr,Txe as ns,Vwe as nt,XM as nu,W8 as nv,zSe as nw,q_e as nx,B_e as ny,gse as nz,Qh as o,Hve as o$,P0 as o0,R0 as o1,Wbe as o2,hG as o3,Mwe as o4,Da as o5,Gwe as o6,kV as o7,AV as o8,RO as o9,gq as oA,xxe as oB,cZ as oC,x3e as oD,lne as oE,AB as oF,Ive as oG,tMe as oH,bJ as oI,LH as oJ,yH as oK,L6 as oL,iN as oM,I1 as oN,KK as oO,TH as oP,bbe as oQ,jc as oR,Jie as oS,j$ as oT,LSe as oU,ure as oV,yZ as oW,KSe as oX,jSe as oY,DSe as oZ,hre as o_,mbe as oa,kU as ob,C2 as oc,_be as od,pH as oe,EZ as of,tK as og,xwe as oh,cW as oi,aSe as oj,ybe as ok,GO as ol,OO as om,dbe as on,PV as oo,wT as op,DR as oq,uwe as or,YG as os,nK as ot,wJ as ou,AW as ov,oK as ow,jY as ox,zY as oy,_Me as oz,F$ as p,sK as p$,Fve as p0,JJ as p1,s0 as p2,Aq as p3,kW as p4,kve as p5,Uwe as p6,E6 as p7,_R as p8,rve as p9,Fte as pA,zte as pB,S3e as pC,Ute as pD,$3e as pE,T3e as pF,LZ as pG,k$e as pH,D5e as pI,Hoe as pJ,Rbe as pK,Pbe as pL,A6 as pM,Y5 as pN,H8 as pO,l2e as pP,c2e as pQ,a2e as pR,WU as pS,Sq as pT,qR as pU,AR as pV,KR as pW,CO as pX,Xq as pY,bZ as pZ,mJ as p_,XG as pa,fwe as pb,bG as pc,$G as pd,m6 as pe,Hbe as pf,nae as pg,nMe as ph,D1 as pi,fL as pj,OMe as pk,Bb as pl,Fi as pm,A2 as pn,A9 as po,cMe as pp,PS as pq,As as pr,Kie as ps,BI as pt,n_ as pu,Iwe as pv,vU as pw,JP as px,G3e as py,fs as pz,hs as q,jb as q$,F0 as q0,TJ as q1,Kve as q2,Ib as q3,tm as q4,ere as q5,Exe as q6,I2e as q7,ag as q8,hA as q9,$2e as qA,CJ as qB,Bwe as qC,AO as qD,W5 as qE,$be as qF,Qwe as qG,n2e as qH,kwe as qI,S2e as qJ,Hie as qK,lx as qL,sn as qM,x$ as qN,Rne as qO,Pne as qP,q1 as qQ,Z1 as qR,d0 as qS,yMe as qT,We as qU,ywe as qV,r0 as qW,uW as qX,W6 as qY,yz as qZ,Q5 as q_,Ab as qa,$u as qb,a0 as qc,L8 as qd,cY as qe,B as qf,uA as qg,fre as qh,t2e as qi,_we as qj,gH as qk,Vxe as ql,Pf as qm,x9 as qn,S9 as qo,D8 as qp,lY as qq,Qe as qr,Sh as qs,lf as qt,oV as qu,EJ as qv,M5e as qw,HJ as qx,iA as qy,Xbe as qz,J$e as r,HMe as r$,V$ as r0,ase as r1,k5e as r2,ove as r3,vbe as r4,C3e as r5,Yae as r6,w5e as r7,_2e as r8,axe as r9,tv as rA,$ae as rB,zfe as rC,V$e as rD,ZMe as rE,gle as rF,Ade as rG,Ide as rH,du as rI,I$e as rJ,l7 as rK,bE as rL,vE as rM,xce as rN,Tk as rO,Q$ as rP,iB as rQ,hle as rR,KG as rS,V1e as rT,G1e as rU,$ce as rV,lL as rW,owe as rX,pG as rY,t6 as rZ,uT as r_,lK as ra,pJ as rb,NW as rc,cxe as rd,txe as re,FJ as rf,IJ as rg,HM as rh,GG as ri,pu as rj,y5e as rk,fu as rl,Ey as rm,zse as rn,b5e as ro,Rae as rp,DMe as rq,jfe as rr,Ube as rs,Bbe as rt,Vbe as ru,Df as rv,ll as rw,Pae as rx,m_ as ry,g_ as rz,Y as s,E5e as s$,gY as s0,o1 as s1,Xie as s2,U1e as s3,j1e as s4,tbe as s5,hq as s6,uq as s7,XY as s8,qoe as s9,UP as sA,HG as sB,pwe as sC,U5e as sD,Q5e as sE,Z5e as sF,J5e as sG,Y5e as sH,K5e as sI,sk as sJ,ak as sK,ok as sL,H5e as sM,q5e as sN,t2 as sO,G5e as sP,W5e as sQ,X5e as sR,Zoe as sS,Yoe as sT,rF as sU,V5e as sV,Koe as sW,b$ as sX,xy as sY,Gre as sZ,C5e as s_,e$e as sa,QMe as sb,gr as sc,KMe as sd,XMe as se,Rk as sf,L5e as sg,n4 as sh,VV as si,Cbe as sj,Obe as sk,eA as sl,Mz as sm,q8 as sn,dz as so,F1e as sp,BSe as sq,c5e as sr,qq as ss,hwe as st,zi as su,sve as sv,HH as sw,WH as sx,fx as sy,Xa as sz,wu as t,Vve as t$,Gq as t0,Vq as t1,rA as t2,Cxe as t3,Oxe as t4,Zs as t5,ive as t6,eR as t7,Oq as t8,HR as t9,Dwe as tA,lse as tB,Lxe as tC,FSe as tD,dq as tE,ISe as tF,JK as tG,ob as tH,ZK as tI,ub as tJ,i$ as tK,B1e as tL,z1e as tM,Lve as tN,Pxe as tO,XSe as tP,_ve as tQ,Swe as tR,KY as tS,qve as tT,Rxe as tU,Nxe as tV,Fxe as tW,Dxe as tX,Zve as tY,jwe as tZ,Xn as t_,iK as ta,nR as tb,Dq as tc,lwe as td,awe as te,QG as tf,x_e as tg,wZ as th,vZ as ti,Dve as tj,Zwe as tk,Fwe as tl,wxe as tm,Axe as tn,yxe as to,dxe as tp,mxe as tq,W2e as tr,bxe as ts,eH as tt,Nq as tu,AJ as tv,u_e as tw,c_e as tx,i2e as ty,OSe as tz,oA as u,Twe as u0,Lq as u1,gxe as u2,dW as u3,Tbe as u4,Q2 as u5,y8 as u6,PJ as u7,qJ as u8,WR as u9,Gxe as uA,Hxe as uB,e3e as uC,h3e as uD,SSe as uE,f_e as uF,d_e as uG,M_e as uH,j_e as uI,H$e as uJ,VJ as ua,eZ as ub,Jwe as uc,Tc as ud,jve as ue,Xg as uf,tA as ug,Y6 as uh,D6 as ui,J_e as uj,YSe as uk,X_e as ul,N$e as um,nbe as un,lo as uo,Va as up,dH as uq,gwe as ur,mwe as us,oZ as ut,Y2e as uu,w2e as uv,K_e as uw,Y_e as ux,u2e as uy,rwe as uz,He as v,Le as w,RG as x,Hn as y,Zc as z};
