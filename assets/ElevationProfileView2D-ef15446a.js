import{gj as n,gk as a,cn as l,y as d,iN as g,cb as s,dr as m,b9 as h}from"./index-b516d057.js";import{t as u}from"./ElevationProfile-d4733872.js";import{a as _}from"./HoveredPoints-5a66c77c.js";import{n as c}from"./layerViewUtils-6ebe90f4.js";import"./memoize-3e55df82.js";import"./jsxFactory-92036771.js";import"./uuid-709b6c67.js";import"./intersectorUtilsConversions-d05d75a3.js";import"./Intersector-fa865806.js";import"./ViewingMode-5d7d590b.js";import"./boundedPlane-1da2f094.js";import"./verticalOffsetUtils-e5214af9.js";import"./orientedBoundingBox-67c5cd22.js";import"./Intersector-2e1d9db3.js";import"./Intersector-a291e778.js";import"./defaultUnit-414db021.js";import"./getDefaultUnitForView-d1ffbf16.js";import"./throttle-7bf02de9.js";import"./elevationInfoUtils-be36d866.js";import"./Material-5f4156ac.js";import"./interfaces-8918b36f.js";import"./geodesicUtils-822c19ca.js";import"./QueueProcessor-4b9d43d3.js";import"./signal-51ed66f5.js";import"./Scheduler-ff5943a4.js";import"./debugFlags-9a30f077.js";import"./RenderState-1d6218ee.js";import"./traversalUtils-bbdec2e9.js";import"./Ground-ed93a93a.js";import"./loadAll-5e767cfa.js";import"./ElevationQuery-4be4efe0.js";import"./ElevationSamplerData-9f34f589.js";import"./SketchViewModel-fedf7932.js";import"./layerUtils-437666a3.js";import"./screenUtils-8dc4a7f9.js";import"./snappingUtils-93e84fbe.js";import"./dehydratedPoint-5a1dfed5.js";import"./Query-071039d7.js";import"./FullTextSearch-12e0754c.js";import"./QuantizationParameters-f983cf8d.js";import"./SketchTooltipOptions-cc43c059.js";import"./SnappingManager-aa70fdd4.js";import"./UpdatingHandles-7949a657.js";import"./geometry2dUtils-a99dcf3d.js";import"./FeatureFilter-55dd341e.js";import"./floorFilterUtils-080a7cd2.js";import"./viewUtils-9f810d02.js";import"./hitTestSelectUtils-d512707e.js";import"./unitFormatUtils-67047561.js";import"./Cyclical-4c223a04.js";import"./UnitSelect-52961079.js";import"./globalCss-94006b67.js";import"./AnchorElementViewModel-8d35dd28.js";class v{constructor(t){this._params=t,this._highlightTask=null,this._highlightHandle=null}destroy(){this.remove()}remove(){this._highlightTask=n(this._highlightTask),this._highlightHandle=a(this._highlightHandle)}update(t){if(this.remove(),t==null||!w(t))return;const o=t.layer;this._highlightTask=l(async i=>{const e=await this._params.view.whenLayerView(o);d(i);const p=c(e)?e:null;p&&(this._highlightHandle=p.highlight(t))})}}function w(r){return r.geometry!=null&&r.geometry.type==="polyline"}class wt{constructor(t,o){this._handles=new g,this._inputRepresentation=new v({view:t}),this._hoveredPoints=new _({view:t}),this._handles.add([s(()=>o.viewModel.hoveredPoints,i=>this._hoveredPoints.update(i),m),s(()=>{const{state:i,highlightEnabled:e,viewModel:p}=o;return{input:p.input,state:i,highlightEnabled:e}},i=>this._updateInputRepresentation(i),m)])}destroy(){this._handles=h(this._handles),this._inputRepresentation=h(this._inputRepresentation),this._hoveredPoints=h(this._hoveredPoints)}_updateInputRepresentation({input:t,state:o,highlightEnabled:i}){o===u.Selected&&i?this._inputRepresentation.update(t):this._inputRepresentation.remove()}}export{wt as ElevationProfileView2D};
