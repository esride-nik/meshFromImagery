import{bg as _t,V as ut,cb as F,h3 as B,dr as gt,_ as W,dX as y,kj as xt,gs as wt,al as bt,an as Tt,kg as mt,a5 as i,a6 as o,ba as st,lE as Z,a9 as dt,aI as Et,lF as kt,b5 as O,lG as $t,b4 as Mt,lH as St,g_ as Ct}from"./index-b516d057.js";import{L as Ft}from"./Slider-50915901.js";import{i as k,e as lt,O as jt,r as Dt,n as r,I as At}from"./jsxFactory-92036771.js";import{e as g}from"./globalCss-94006b67.js";import{t as V}from"./accessibleHandler-e91101b2.js";import{e as Rt}from"./vmEvent-d773b6c5.js";import{c as It}from"./themeUtils-7dcf5b71.js";import{c as Lt,n as Ot}from"./Widgets-8bad11f2.js";import"./uuid-709b6c67.js";const c="esri-time-slider",a={widgetIcon:k.timeClock,timeSlider:`${c}`,timeSliderOutOfBounds:`${c}--out-of-bounds`,timeSliderMode:`${c}__mode--`,timeSliderLayout:`${c}__layout--`,timeSliderRow:`${c}__row`,animation:`${c}__animation`,animationButton:`${c}__animation-button`,timeExtent:`${c}__time-extent`,timeExtentGroup:`${c}__time-extent-group`,timeExtentDate:`${c}__time-extent-date`,timeExtentTime:`${c}__time-extent-time`,timeExtentSeparator:`${c}__time-extent-separator`,playbackControls:`${c}__playback-controls`,min:`${c}__min`,minDate:`${c}__min-date`,minTime:`${c}__min-time`,slider:`${c}__slider`,sliderMajorTick:"majorTick",sliderMinorTick:"minorTick",max:`${c}__max`,maxDate:`${c}__max-date`,maxTime:`${c}__max-time`,previous:`${c}__previous`,previousButton:`${c}__previous-button`,next:`${c}__next`,nextButton:`${c}__next-button`,warning:`${c}__warning`,warningText:`${c}__warning-text`,hasActions:`${c}--has-actions`,actions:`${c}__actions`,actionsButton:`${c}__actions-button`},at=1e4;function P(t){return t!=null&&t.count!==void 0}function D(t){return t!=null&&t.interval!==void 0}function ot(t){return t!=null&&t.dates!==void 0}function rt(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}let v=class extends _t.EventedAccessor{constructor(t){super(t),this._animationController=null,this._isViewTimeExtentInitialized=!1,this._timerId=null,this.actions=new ut,this.fullTimeExtent=null,this.loop=!1,this.mode="time-window",this.stops={count:10},this.timeExtent=null,this.view=null}initialize(){this.addHandles([F(()=>this.effectiveStops,()=>{this.timeExtent==null&&(this.timeExtent=this._getDefaultTimeExtent())},B),F(()=>this.view,(t,e)=>{this._unregisterWidget(e),this._registerWidget(t)},gt),F(()=>this.timeExtent,t=>{if(this.view==null)return;const e=this.view.timeExtent;(t!=null&&!t.isAllTime||e!=null&&!e.isAllTime)&&(t!=null&&e!=null&&t.equals(e)||(this.view.timeExtent=t))},B),F(()=>{var t;return(t=this.view)==null?void 0:t.timeExtent},t=>{this._isViewTimeExtentInitialized?(t!=null&&!t.isAllTime||this.timeExtent!=null&&!this.timeExtent.isAllTime)&&(t!=null&&this.timeExtent!=null&&t.equals(this.timeExtent)||(this.timeExtent=t)):this._isViewTimeExtentInitialized=!0})])}destroy(){this._timerId!=null&&(clearInterval(this._timerId),this._timerId=null),this._unregisterWidget(this.view),this.view=null,this._animationController!=null&&(this._animationController.abort(),this._animationController=null)}get effectiveStops(){const{fullTimeExtent:t,stops:e}=this;if(ot(e)){const{dates:s}=e;if(s==null||s.length===0)return null;const u=s.sort((p,d)=>p.getTime()-d.getTime());if(t==null)return u;const{start:n,end:h}=t;return n==null||h==null?u:u.filter(p=>!(p.getTime()<n.getTime()||p.getTime()>h.getTime()))}if(P(e)){const s=e.timeExtent??t;return this._divideTimeExtentByCount(s,e.count)}if(D(e)){const s=e.timeExtent??t;return this._divideTimeExtentByInterval(s,e.interval)}return[]}set playRate(t){t<=0||t>36e5||(this.state==="playing"&&this._startAnimation(),this._set("playRate",t))}get state(){return this.fullTimeExtent==null?"disabled":this._animationController!=null?"playing":"ready"}get timeExtentValues(){const{mode:t,timeExtent:e}=this;if(e==null||e.isAllTime||e.isEmpty)return null;const{start:s,end:u}=e;switch(t){case"cumulative-from-end":case"instant":return s!=null?[s.getTime()]:null;case"cumulative-from-start":return u!=null?[u.getTime()]:null;case"time-window":return s!=null&&u!=null?[s.getTime(),u.getTime()]:null}}static async getPropertiesFromWebMap(t,e){var l;if(t==null||!rt(t))return null;await t.load({signal:e});const s=(l=t==null?void 0:t.widgets)==null?void 0:l.timeSlider;if(!s)return null;const{getFullTimeExtentFromWebDocument:u,getModeFromTimeSlider:n,getStopsFromTimeSlider:h,getTimeExtentFromTimeSlider:p}=await W(()=>import("./utils-04f722b6.js"),["assets/utils-04f722b6.js","assets/index-b516d057.js","assets/index-b252abd2.css"]),d=await u(t,e),T=s.loop,x=n(s);return{fullTimeExtent:d,loop:T,mode:x,playRate:s.stopDelay??2e3,stops:h(s),timeExtent:p(s,x)}}next(){this._step({forward:!0,allowRestart:!1})}play(){this._startAnimation()}previous(){this._step({forward:!1,allowRestart:!1})}stop(){this._stopAnimation()}triggerAction(t){this.emit("trigger-action",{action:t})}updateWebDocument(t){if(rt(t)){const e=new Lt({currentTimeExtent:this.timeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:P(this.stops)?this.stops.count:null,numThumbs:this.mode==="time-window"?2:1,stopDelay:this.playRate,stopInterval:D(this.stops)?this.stops.interval:null,stops:ot(this.stops)?this.stops.dates:null});t.widgets?t.widgets.timeSlider=e:t.widgets=new Ot({timeSlider:e})}}valuesToTimeExtent(t){if(t==null)return null;const e=t.sort((n,h)=>n-h).map(n=>new Date(n)),s=e.length>0?e[0]:null,u=e.length>1?e[1]:null;switch(this.mode){case"time-window":return new y({start:s,end:u});case"instant":return new y({start:s,end:s});case"cumulative-from-start":return new y({start:null,end:s});case"cumulative-from-end":return new y({start:s,end:null});default:return y.allTime}}async _animate(){var t;try{const e=this.view,s=(t=this._animationController)==null?void 0:t.signal;await Promise.all([xt(this.playRate,null,s),e!=null&&wt(()=>e.updating===!1,s)])}catch(e){return bt(e)||Tt.getLogger(this).error(e),void(this._animationController=null)}this._step({forward:!0,allowRestart:!1}),this._animationController!=null&&this._animate()}_divideTimeExtentByCount(t,e=10){if(!t||!e)return[];const{start:s,end:u}=t;if(s==null||u==null)return[];if(e>at)return this._divideTimeExtentByCount(t);const n=[],h=s.getTime(),p=u.getTime()-h;for(let d=0;d<=e;d++)n.push(new Date(h+d/e*p));return n}_divideTimeExtentByInterval(t,e,s=at){if(!t||!e)return[];const{start:u,end:n}=t;if(u==null||n==null)return[];const h=n.getTime()-u.getTime(),p=e.toMilliseconds();if(p<=0||h/p>s)return this._divideTimeExtentByCount(t);const d=[],{value:T,unit:x}=e;let l=u;for(;l.getTime()<=n.getTime();)d.push(new Date(l.getTime())),l=mt(l,T,x);return d}_getDefaultTimeExtent(){const{effectiveStops:t,mode:e}=this;if(t==null||!e)return null;switch(e){case"time-window":return t.length>1?new y({start:t[0],end:t[1]}):null;case"cumulative-from-start":return t.length>0?new y({start:null,end:t[0]}):null;case"cumulative-from-end":return t.length>0?new y({start:t[0],end:null}):null;case"instant":return t.length>0?new y({start:t[0],end:t[0]}):null;default:return null}}_registerWidget(t){t!=null&&(t.persistableViewModels.includes(this)||t.persistableViewModels.add(this))}_startAnimation(){this._stopAnimation(),this._animationController=new AbortController,this._step({forward:!0,allowRestart:!0}),this._animate()}_step(t){const{forward:e,allowRestart:s}=t,{effectiveStops:u}=this;if(this.timeExtentValues==null||u==null)return;const n=u.map(l=>l.getTime()),h=this.timeExtentValues.map(l=>{const _=n.indexOf(l);if(_!==-1)return _;const $=n.reduce((f,M)=>Math.abs(M-l)<Math.abs(f-l)?M:f);return n.indexOf($)}),p=h.map(l=>l+(e?1:-1)),d=p.some(l=>l<0||l>n.length-1),{loop:T,state:x}=this;if(d)if(T||s){const l=Math.min(...h),_=Math.max(...h),$=(e?h.map(f=>f-l):h.map(f=>f+(n.length-1-_))).map(f=>n[f]);this.timeExtent=this.valuesToTimeExtent($)}else x==="playing"&&this.stop();else{const l=p.map(_=>n[_]);this.timeExtent=this.valuesToTimeExtent(l)}}_stopAnimation(){this._animationController!=null&&(this._animationController.abort(),this._animationController=null)}_unregisterWidget(t){t!=null&&t.persistableViewModels.remove(this)}};i([o()],v.prototype,"_animationController",void 0),i([o({type:ut})],v.prototype,"actions",void 0),i([o({readOnly:!0})],v.prototype,"effectiveStops",null),i([o({type:y})],v.prototype,"fullTimeExtent",void 0),i([o({nonNullable:!0})],v.prototype,"loop",void 0),i([o({nonNullable:!0})],v.prototype,"mode",void 0),i([o({nonNullable:!0,value:1e3})],v.prototype,"playRate",null),i([o({readOnly:!0})],v.prototype,"state",null),i([o({cast:t=>t==null?null:(D(t)&&(t.interval=st(Z,t.interval)),(D(t)||P(t))&&(t.timeExtent=st(y,t.timeExtent)),t)})],v.prototype,"stops",void 0),i([o({type:y})],v.prototype,"timeExtent",void 0),i([o({readOnly:!0})],v.prototype,"timeExtentValues",null),i([o()],v.prototype,"view",void 0),i([o()],v.prototype,"next",null),i([o()],v.prototype,"play",null),i([o()],v.prototype,"previous",null),i([o()],v.prototype,"stop",null),i([o()],v.prototype,"updateWebDocument",null),v=i([dt("esri.widgets.TimeSlider.TimeSliderViewModel")],v);const N=v,Vt=3,Bt=858,Wt=[{minor:{value:100,unit:"milliseconds"},major:{value:1,unit:"seconds"},format:{second:"numeric"}},{minor:{value:500,unit:"milliseconds"},major:{value:5,unit:"seconds"},format:{second:"numeric"}},{minor:{value:1,unit:"seconds"},major:{value:20,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:2,unit:"seconds"},major:{value:30,unit:"seconds"},format:{minute:"numeric",second:"numeric"}},{minor:{value:10,unit:"seconds"},major:{value:1,unit:"minutes"},format:{minute:"numeric"}},{minor:{value:15,unit:"seconds"},major:{value:5,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"minutes"},major:{value:20,unit:"minutes"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:5,unit:"minutes"},major:{value:2,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:15,unit:"minutes"},major:{value:6,unit:"hours"},format:{hour:"numeric",minute:"numeric"}},{minor:{value:1,unit:"hours"},major:{value:1,unit:"days"},format:{day:"numeric",month:"short"}},{minor:{value:6,unit:"hours"},major:{value:1,unit:"weeks"},format:{day:"numeric",month:"short"}},{minor:{value:1,unit:"days"},major:{value:1,unit:"months"},format:{month:"long"}},{minor:{value:2,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:3,unit:"days"},major:{value:1,unit:"months"},format:{month:"short"}},{minor:{value:4,unit:"days"},major:{value:3,unit:"months"},format:{month:"short",year:"numeric"}},{minor:{value:1,unit:"weeks"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"months"},major:{value:1,unit:"years"},format:{year:"numeric"}},{minor:{value:2,unit:"months"},major:{value:2,unit:"years"},format:{year:"numeric"}},{minor:{value:1,unit:"years"},major:{value:1,unit:"decades"},format:{year:"numeric"}},{minor:{value:2,unit:"years"},major:{value:5,unit:"decades"},format:{year:"numeric"}},{minor:{value:5,unit:"decades"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1,unit:"centuries"},major:{value:10,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:2,unit:"centuries"},major:{value:20,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:5,unit:"centuries"},major:{value:50,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:10,unit:"centuries"},major:{value:100,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:20,unit:"centuries"},major:{value:200,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:50,unit:"centuries"},major:{value:500,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:100,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:200,unit:"centuries"},major:{value:1e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:500,unit:"centuries"},major:{value:5e3,unit:"centuries"},format:{era:"short",year:"numeric"}},{minor:{value:1e3,unit:"centuries"},major:{value:1e4,unit:"centuries"},format:{era:"short",year:"numeric"}}];let m=class extends jt{constructor(t,e){super(t,e),this._ignoreNextSliderUpdate=!1,this._slider=new Ft({precision:0,visibleElements:{rangeLabels:!1},rangeLabelInputsEnabled:!1,thumbsConstrained:!1}),this._tickFormat=null,this.disabled=!1,this.iconClass=a.widgetIcon,this.icon=null,this.labelFormatFunction=null,this.messages=null,this.messagesCommon=null,this.tickConfigs=null,this.timeVisible=!1,this.viewModel=new N}initialize(){this.addHandles([F(()=>this._slider.values,t=>{if(this._ignoreNextSliderUpdate)return void(this._ignoreNextSliderUpdate=!1);const e=this.viewModel.valuesToTimeExtent(t);this.timeExtent!=null?e!=null?this.timeExtent.equals(e)||(this.timeExtent=e):this.timeExtent=null:e!=null&&(this.timeExtent=e)}),F(()=>this.effectiveStops,()=>this._updateSliderSteps(),B)])}loadDependencies(){return Dt({action:()=>W(()=>import("./calcite-action-dcffc330.js"),["assets/calcite-action-dcffc330.js","assets/action-79a6733c.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/guid-2347ca41.js","assets/interactive-39956fb6.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/observers-9c654f26.js","assets/component-7281ffa6.js","assets/t9n-622f279b.js","assets/icon-c122f720.js","assets/loader-ea663d25.js"]),"action-menu":()=>W(()=>import("./calcite-action-menu-3fc61751.js"),["assets/calcite-action-menu-3fc61751.js","assets/action-menu-8419d112.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/array-755a0ace.js","assets/guid-2347ca41.js","assets/key-c2c83cc7.js","assets/loadable-7d42c3de.js","assets/action-79a6733c.js","assets/interactive-39956fb6.js","assets/locale-2cb18332.js","assets/observers-9c654f26.js","assets/component-7281ffa6.js","assets/t9n-622f279b.js","assets/icon-c122f720.js","assets/loader-ea663d25.js","assets/popover-33772892.js","assets/floating-ui-a6c9d5df.js","assets/debounce-7cc294e2.js","assets/Heading-2d7d203c.js","assets/openCloseComponent-3fbda1cf.js","assets/FloatingArrow-9e5c8eb0.js"])})}destroy(){this._slider.destroy(),this._tickFormat=null}get _dateFormat(){return this._getIntlOptions("short-date")}get _timeFormat(){return this._getIntlOptions("long-time")}get actions(){return this.viewModel.actions}set actions(t){this.viewModel.actions=t}get effectiveStops(){return this.viewModel.effectiveStops}get fullTimeExtent(){return this.viewModel.fullTimeExtent}set fullTimeExtent(t){this.viewModel.fullTimeExtent=t}get interactive(){return!(this.disabled||this.viewModel.state==="disabled"||this.timeZone===Et)}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}set layout(t){["auto","compact","wide"].includes(t)||(t="auto"),this._set("layout",t)}get loop(){return this.viewModel.loop}set loop(t){this.viewModel.loop=t}get mode(){return this.viewModel.mode}set mode(t){this.viewModel.mode=t}get playRate(){return this.viewModel.playRate}set playRate(t){this.viewModel.playRate=t}get stops(){return this.viewModel.stops}set stops(t){this.viewModel.stops=t}get tickFormats(){const{timeZone:t}=this;return Wt.map(({minor:e,major:s,format:u})=>({minor:new Z(e),major:new Z(s),format:{...u,timeZone:t}}))}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(t){this.viewModel.timeExtent=t}get timeZone(){var t;return((t=this.viewModel.view)==null?void 0:t.timeZone)??kt}set timeZone(t){this._overrideIfSome("timeZone",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}static async getPropertiesFromWebMap(t,e){return N.getPropertiesFromWebMap(t,e)}next(){return this.viewModel.next()}play(){return this.viewModel.play()}previous(){return this.viewModel.previous()}stop(){return this.viewModel.stop()}render(){var Y,tt;const{_slider:t,actions:e,domNode:s,effectiveStops:u,fullTimeExtent:n,interactive:h,messages:p,messagesCommon:d,mode:T,tickConfigs:x,timeExtent:l,timeVisible:_,viewModel:{state:$,timeExtentValues:f}}=this;if(n!=null){const{start:b,end:et}=n;if(b!=null&&et!=null){const A=b.getTime(),R=et.getTime(),it=t.min!==A||t.max!==R;if(it&&(t.min=A,t.max=R),x!=null)t.tickConfigs!==x&&(t.tickConfigs=x);else{const ft=(R-A)/(((Y=t.trackElement)==null?void 0:Y.offsetWidth)||400),C=this.tickFormats.find(I=>I.minor.toMilliseconds()>Vt*ft)??this.tickFormats.at(-1),nt=this._tickFormat!==C&&C!=null;if(nt&&(this._tickFormat=C),it||nt){const I={mode:"position",values:this._getTickPositions(C.minor),labelsVisible:!1,tickCreatedFunction:(L,E)=>{E==null||E.classList.add(a.sliderMinorTick)}},yt={mode:"position",values:this._getTickPositions(C.major),labelsVisible:!0,tickCreatedFunction:(L,E)=>{E==null||E.classList.add(a.sliderMajorTick)},labelFormatFunction:L=>O(L,C.format)};t.tickConfigs=[I,yt]}}}}const M=((tt=this.fullTimeExtent)==null?void 0:tt.start)==null||this.fullTimeExtent.end==null||this.timeExtent==null||this.timeExtent.isAllTime||this.timeExtent.isEmpty||this.timeExtent.start!=null&&(this.timeExtent.start<this.fullTimeExtent.start||this.timeExtent.start>this.fullTimeExtent.end)||this.timeExtent.end!=null&&(this.timeExtent.end>this.fullTimeExtent.end||this.timeExtent.end<this.fullTimeExtent.start);if(M)switch(this._ignoreNextSliderUpdate=!0,T){case"time-window":t.values=[t.min,t.max];break;case"instant":case"cumulative-from-end":t.values=[t.min];break;case"cumulative-from-start":t.values=[t.max]}else f!=null?$t(t.values,f)||(t.values=f):t.values=null;t.disabled=!h;const ct=$==="ready",j=$==="playing",w=M||!h||u==null||u.length===0,S=this.layout==="auto"?s.clientWidth<Bt?"compact":"wide":this.layout,U=r("div",{class:a.animation},r("button",{"aria-disabled":w?"true":"false","aria-label":j?d.control.stop:d.control.play,bind:this,class:this.classes(g.widgetButton,a.animationButton,w&&g.buttonDisabled),disabled:w,onclick:this._playOrStopClick,title:j?d.control.stop:d.control.play,type:"button"},r("div",{class:this.classes((ct||w)&&k.play,j&&k.pause)}))),ht=this.labelFormatFunction!=null?r("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:a.timeExtentDate,"data-date":l?[l.start,l.end]:null,"data-layout":S,"data-type":"extent",key:"extent"}):l==null||l!=null&&l.isAllTime?[r("div",{class:this.classes(a.warning,k.noticeTriangle)}),r("div",{class:a.warningText,key:"warning-text"},p.noTimeExtent)]:l.isEmpty?[r("div",{class:this.classes(a.warning,k.noticeTriangle)}),r("div",{class:a.warningText,key:"warning-text"},p.emptyTimeExtent)]:[l.start!=null&&r("div",{class:a.timeExtentGroup,key:"start-date-group"},r("div",{class:a.timeExtentDate,key:"start-date"},this._formatDate(l.start)),_?r("div",{class:a.timeExtentTime,key:"start-time"},this._formatTime(l.start)):null),l.start!=null&&l.end!=null&&l.start.getTime()!==l.end.getTime()&&r("div",{class:a.timeExtentSeparator,key:"separator"},"–"),l.end!=null&&(l.start==null||l.start.getTime()!==l.end.getTime())&&r("div",{class:a.timeExtentGroup,key:"end-date-group"},r("div",{class:a.timeExtentDate,key:"end-date"},this._formatDate(l.end)),_?r("div",{class:a.timeExtentTime,key:"end-time"},this._formatTime(l.end)):null)],z=r("div",{class:this.classes(a.timeExtent,!h&&g.buttonDisabled)},[ht]),pt=this.labelFormatFunction!=null?r("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:a.minDate,"data-date":n==null?void 0:n.start,"data-layout":S,"data-type":"min",key:"min-date"}):(n==null?void 0:n.start)!=null&&[r("div",{class:a.minDate,key:"min-date"},this._formatDate(n.start)),_&&r("div",{class:a.minTime,key:"min-time"},this._formatTime(n.start))],G=r("div",{class:this.classes(a.min,!h&&g.buttonDisabled)},[pt]),H=r("div",{class:a.slider},t.render()),vt=this.labelFormatFunction!=null?r("div",{afterCreate:this._createLabel,afterUpdate:this._createLabel,bind:this,class:a.maxDate,"data-date":n==null?void 0:n.end,"data-layout":S,"data-type":"max",key:"max-date"}):(n==null?void 0:n.end)!=null&&[r("div",{class:a.maxDate,key:"max-date"},this._formatDate(n.end)),_&&r("div",{class:a.maxTime,key:"max-time"},this._formatTime(n.end))],q=r("div",{class:this.classes(a.max,!h&&g.buttonDisabled)},[vt]),X=r("div",{class:a.previous},r("button",{"aria-disabled":w?"true":"false","aria-label":d.pagination.previous,bind:this,class:this.classes(g.widgetButton,a.previousButton,(j||w)&&g.buttonDisabled),disabled:w,onclick:this._previousClick,title:d.pagination.previous,type:"button"},r("div",{class:k.reverse}))),J=r("div",{class:a.next},r("button",{"aria-disabled":w?"true":"false","aria-label":d.pagination.next,bind:this,class:this.classes(g.widgetButton,a.nextButton,(j||w)&&g.buttonDisabled),disabled:w,onclick:this._nextClick,title:d.pagination.next,type:"button"},r("div",{class:k.forward}))),K=(e==null?void 0:e.length)>0,Q=K&&r("div",{class:a.actions,title:d.options},r("calcite-action-menu",{class:a.actionsButton,label:d.options},e.toArray().map(b=>r("calcite-action",{bind:this,icon:b.icon,id:b.id,onclick:()=>this.viewModel.triggerAction(b),text:b.title,textEnabled:!0}))));return r("div",{afterCreate:b=>{this.addHandles(At(b,()=>this.scheduleRender()))},"aria-label":p.widgetLabel,class:this.classes(a.timeSlider,g.widget,`${a.timeSliderMode}${T}`,`${a.timeSliderLayout}${S}`,!h&&g.disabled,M&&a.timeSliderOutOfBounds,K&&a.hasActions,It())},S==="wide"&&r("div",{class:a.timeSliderRow},r("div",{class:a.playbackControls},[U,z,G,H,q,X,J]),Q),S==="compact"&&[r("div",{class:a.timeSliderRow,key:"time-slider-row-1"},[z,Q]),r("div",{class:a.timeSliderRow,key:"time-slider-row-2"},[H]),r("div",{class:a.timeSliderRow,key:"time-slider-row-3"},[G,X,U,J,q])])}updateWebDocument(t){var e;(e=this.viewModel)==null||e.updateWebDocument(t)}_createLabel(t){if(this.labelFormatFunction==null)return;const e=t.getAttribute("data-type"),s=t.getAttribute("data-layout"),u=t["data-date"];this.labelFormatFunction(u,e,t,s)}_formatDate(t){return O(t,this._dateFormat)}_formatTime(t){return O(t,this._timeFormat)}_getIntlOptions(t){const{timeZone:e}=this;return{...Mt(t),timeZone:e}}_getTickPositions(t){const{fullTimeExtent:e}=this;if((e==null?void 0:e.start)==null||e.end==null)return[];const{start:s,end:u}=e,n=[],{value:h,unit:p}=t;let d=St(s,p,this.timeZone);for(;d.getTime()<=u.getTime();)d.getTime()>=s.getTime()&&n.push(d.getTime()),d=mt(d,h,p,this.timeZone);return n}_updateSliderSteps(){this._slider.steps=this.effectiveStops!=null&&this.effectiveStops.length>0?this.effectiveStops.map(t=>t.getTime()):null}_playOrStopClick(){switch(this.viewModel.state){case"ready":this.viewModel.play();break;case"playing":this.viewModel.stop();break;case"disabled":break;default:Ct(this.viewModel.state)}}_previousClick(){this.viewModel.previous()}_nextClick(){this.viewModel.next()}};i([o()],m.prototype,"_dateFormat",null),i([o()],m.prototype,"_timeFormat",null),i([o()],m.prototype,"actions",null),i([o()],m.prototype,"disabled",void 0),i([o()],m.prototype,"effectiveStops",null),i([o()],m.prototype,"fullTimeExtent",null),i([o()],m.prototype,"iconClass",void 0),i([o()],m.prototype,"icon",void 0),i([o({readOnly:!0})],m.prototype,"interactive",null),i([o()],m.prototype,"label",null),i([o()],m.prototype,"labelFormatFunction",void 0),i([o({value:"auto"})],m.prototype,"layout",null),i([o()],m.prototype,"loop",null),i([o(),lt("esri/widgets/TimeSlider/t9n/TimeSlider")],m.prototype,"messages",void 0),i([o(),lt("esri/t9n/common")],m.prototype,"messagesCommon",void 0),i([o()],m.prototype,"mode",null),i([o()],m.prototype,"playRate",null),i([o()],m.prototype,"stops",null),i([o()],m.prototype,"tickConfigs",void 0),i([o()],m.prototype,"tickFormats",null),i([o()],m.prototype,"timeExtent",null),i([o({nonNullable:!0})],m.prototype,"timeVisible",void 0),i([o()],m.prototype,"timeZone",null),i([o()],m.prototype,"view",null),i([o({type:N}),Rt("trigger-action")],m.prototype,"viewModel",void 0),i([V()],m.prototype,"_playOrStopClick",null),i([V()],m.prototype,"_previousClick",null),i([V()],m.prototype,"_nextClick",null),m=i([dt("esri.widgets.TimeSlider")],m);const Jt=m;export{Jt as default};
