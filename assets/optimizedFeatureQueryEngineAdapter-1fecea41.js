import{t as G}from"./OptimizedFeature-e90b69df.js";import{t as p}from"./OptimizedGeometry-196224d4.js";function _(t,e){return t?e?4:3:e?3:2}function O(t,e,o,s,c){if(!(e!=null&&e.lengths.length))return null;const l=(c==null?void 0:c.originPosition)==="upperLeft"?-1:1;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);const r=t.coords,I=[],u=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:f,coords:T}=e,d=_(o,s);let E=0;for(const n of f){const i=P(u,T,E,n,o,s,l);i&&I.push(i),E+=n*d}if(I.sort((n,i)=>{let g=l*n[2]-l*i[2];return g===0&&o&&(g=n[4]-i[4]),g}),I.length){let n=6*I[0][2];r[0]=I[0][0]/n,r[1]=I[0][1]/n,o&&(n=6*I[0][4],r[2]=n!==0?I[0][3]/n:0),(r[0]<u[0]||r[0]>u[1]||r[1]<u[2]||r[1]>u[3]||o&&(r[2]<u[4]||r[2]>u[5]))&&(r.length=0)}if(!r.length){const n=e.lengths[0]?S(T,0,f[0],o,s):null;if(!n)return null;r[0]=n[0],r[1]=n[1],o&&n.length>2&&(r[2]=n[2])}return t}function P(t,e,o,s,c,l,r=1){const I=_(c,l);let u=o,f=o+I,T=0,d=0,E=0,n=0,i=0;for(let Y=0,F=s-1;Y<F;Y++,u+=I,f+=I){const h=e[u],m=e[u+1],N=e[u+2],b=e[f],a=e[f+1],A=e[f+2];let V=h*a-b*m;n+=V,T+=(h+b)*V,d+=(m+a)*V,c&&(V=h*A-b*N,E+=(N+A)*V,i+=V),h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),m<t[2]&&(t[2]=m),m>t[3]&&(t[3]=m),c&&(N<t[4]&&(t[4]=N),N>t[5]&&(t[5]=N))}if(n*r>0&&(n*=-1),i*r>0&&(i*=-1),!n)return null;const g=[T,d,.5*n];return c&&(g[3]=E,g[4]=.5*i),g}function S(t,e,o,s,c){const l=_(s,c);let r=e,I=e+l,u=0,f=0,T=0,d=0;for(let E=0,n=o-1;E<n;E++,r+=l,I+=l){const i=t[r],g=t[r+1],Y=t[r+2],F=t[I],h=t[I+1],m=t[I+2],N=s?j(i,g,Y,F,h,m):y(i,g,F,h);if(N)if(u+=N,s){const b=$(i,g,Y,F,h,m);f+=N*b[0],T+=N*b[1],d+=N*b[2]}else{const b=M(i,g,F,h);f+=N*b[0],T+=N*b[1]}}return u>0?s?[f/u,T/u,d/u]:[f/u,T/u]:o>0?s?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function y(t,e,o,s){const c=o-t,l=s-e;return Math.sqrt(c*c+l*l)}function j(t,e,o,s,c,l){const r=s-t,I=c-e,u=l-o;return Math.sqrt(r*r+I*I+u*u)}function M(t,e,o,s){return[t+.5*(o-t),e+.5*(s-e)]}function $(t,e,o,s,c,l){return[t+.5*(s-t),e+.5*(c-e),o+.5*(l-o)]}const x={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new G(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(t,e)=>(t.centroid==null&&(t.centroid=O(new p,t.geometry,e.hasZ,e.hasM)),t.centroid)};export{O as n,x as o};
