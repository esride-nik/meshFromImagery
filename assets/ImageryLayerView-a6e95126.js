import{a5 as s,a6 as p,eC as g,a9 as x,s as m,B as c}from"./index-b516d057.js";import{b as E}from"./Query-071039d7.js";import{p as b}from"./popupUtils-e4ebc84a.js";const N=y=>{let e=class extends y{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(t,n){const{layer:o}=this;if(!t)throw new m("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:o});const{popupEnabled:u}=o,a=b(o,n);if(!u||a==null)throw new m("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:a});const w=await a.getRequiredFields(),r=new E;r.timeExtent=this.timeExtent,r.geometry=t,r.outFields=w,r.outSpatialReference=t.spatialReference;const{resolution:i,spatialReference:l}=this.view,d=this.view.type==="2d"?new c(i,i,l):new c(.5*i,.5*i,l),{returnTopmostRaster:h,showNoDataRecords:R}=a.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:d,showNoDataRecords:R,signal:n!=null?n.signal:null};return o.queryVisibleRasters(r,f).then(v=>v)}canResume(){var t;return!!super.canResume()&&!((t=this.timeExtent)!=null&&t.isEmpty)}};return s([p()],e.prototype,"layer",void 0),s([p()],e.prototype,"suspended",void 0),s([p(g)],e.prototype,"timeExtent",void 0),s([p()],e.prototype,"view",void 0),e=s([x("esri.views.layers.ImageryLayerView")],e),e};export{N as n};
