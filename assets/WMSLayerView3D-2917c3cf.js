import{s as n,M as h,a5 as d,a9 as c}from"./index-b516d057.js";import{N as l}from"./DynamicLayerView3D-23a674d4.js";import{i as u}from"./WMSLayerView-17758430.js";import"./RenderGeometry-5dbc1699.js";import"./vec3f32-bac7ea57.js";import"./DefaultTechniqueConfiguration-b4dbe32f.js";import"./requestImageUtils-b142708c.js";import"./enums-bdecffa2.js";import"./Texture-bcb6d63f.js";import"./contextUtils-81fda295.js";import"./interfaces-8918b36f.js";import"./Material-5f4156ac.js";import"./ViewingMode-5d7d590b.js";import"./FramebufferObject-123b7c8d.js";import"./ShaderTechniqueConfiguration-2502462e.js";import"./ElevationProvider-abb53936.js";import"./dehydratedPoint-5a1dfed5.js";import"./hydratedFeatures-2365c307.js";import"./weather-2eb64924.js";import"./RenderState-1d6218ee.js";import"./NestedMap-1b5db22e.js";import"./frustum-f9d53cdf.js";import"./VertexElementDescriptor-2925c6af.js";import"./VertexArrayObject-d19dab8d.js";import"./Octree-7cea9440.js";import"./InterleavedLayout-d76b0d59.js";import"./types-1305598a.js";import"./OrderIndependentTransparency-755f7dcc.js";import"./floatRGBA-ca990bbb.js";import"./Intersector-2e1d9db3.js";import"./Intersector-fa865806.js";import"./boundedPlane-1da2f094.js";import"./verticalOffsetUtils-e5214af9.js";import"./orientedBoundingBox-67c5cd22.js";import"./glUtil-ce5ee52b.js";import"./Scheduler-ff5943a4.js";import"./signal-51ed66f5.js";import"./debugFlags-9a30f077.js";import"./LayerView3D-c03d44fc.js";import"./heightModelInfoUtils-0dd2b6e4.js";import"./HeightModelInfo-b816d32b.js";import"./projectExtentUtils-15e84132.js";import"./geometryServiceUtils-3e048225.js";import"./project-1bd91657.js";import"./ImageMaterial-10c9471b.js";import"./VerticalOffset.glsl-5743f98e.js";import"./LayerView-060b46d4.js";import"./UpdatingHandles-7949a657.js";import"./RefreshableLayerView-4a86a8ac.js";import"./layerViewUtils-6ebe90f4.js";import"./ExportWMSImageParameters-e60a8707.js";let e=class extends u(l){constructor(){super(...arguments),this.type="wms-3d"}initialize(){this.layer.serviceSupportsSpatialReference(this.view.spatialReference)||this.addResolvingPromise(Promise.reject(new n("layerview:spatial-reference-incompatible","The spatial references supported by this WMS layer are incompatible with the spatial reference of the view"))),this._updatingHandles.add(()=>{var t;return(t=this.exportImageParameters)==null?void 0:t.version},()=>{this._updatingHandles.addPromise(this.refreshDebounced())})}createFetchPopupFeaturesQuery(t){const o=this.findExtentInfoAt(t),i=o.extent,r=new h(i[0],i[1],i[2],i[3],this._spatialReference),p=o.imageSize,m=p.width,a=p.height,s=r.width/m;return{extent:r,width:m,height:a,x:Math.round((t.x-r.xmin)/s),y:Math.round((r.ymax-t.y)/s)}}getFetchOptions(){return{timeExtent:this.timeExtent}}};e=d([c("esri.views.3d.layers.WMSLayerView3D")],e);const ct=e;export{ct as default};
