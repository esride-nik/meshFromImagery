import{fQ as p,fR as S,fu as l,f5 as n,j$ as y,k0 as _,fM as g,d8 as d,f8 as A,gv as w,ez as R,k1 as h}from"./index-b516d057.js";import{o as C}from"./projectVectorToDehydratedPoint-e30a7ff8.js";import{t as P}from"./projectVectorToPoint-fbaf5599.js";import{t as u}from"./projectVectorToVector-56c29b20.js";import{h as M,j as B,O as b,T as v,Z as U,P as $,S as k,q as c,U as x,b as G,k as j,R as z}from"./coordinateSystem-38339d17.js";import{t as f}from"./ElevationProvider-abb53936.js";import{l as a}from"./ViewingMode-5d7d590b.js";function I(r){return p(r)&&r.length>=3}function L(r){return(S(r)||Array.isArray(r))&&r.length>=3}function O(r){return I(r)||L(r)}class m{constructor(t,e,s,i){this.viewingMode=t,this.spatialReference=e,this.unitInMeters=s,this._coordinateSystem=i,this._tmpCoordinateSystem=M(i)}set extent(t){t&&B(this._coordinateSystem,t,this._coordinateSystem)}getAltitude(t){return b(this._coordinateSystem,t)}setAltitude(t,e,s=t){return v(this._coordinateSystem,s,e,t)}setAltitudeOfTransformation(t,e){U(this._coordinateSystem,e,t,e)}worldUpAtPosition(t,e){return $(this._coordinateSystem,t,e)}worldBasisAtPosition(t,e,s){return k(this._coordinateSystem,t,e,s)}basisMatrixAtPosition(t,e){const s=this.worldBasisAtPosition(t,l.X,n.get()),i=this.worldBasisAtPosition(t,l.Y,n.get()),o=this.worldBasisAtPosition(t,l.Z,n.get());return y(e,s[0],s[1],s[2],0,i[0],i[1],i[2],0,o[0],o[1],o[2],0,0,0,0,1),e}headingAtPosition(t,e){const s=this.worldUpAtPosition(t,n.get()),i=this.worldBasisAtPosition(t,l.Y,n.get()),o=_(e,i,s);return g(o)}intersectManifoldClosestSilhouette(t,e,s){return c(this._coordinateSystem,e,this._tmpCoordinateSystem),x(this._tmpCoordinateSystem,t,s),s}intersectManifold(t,e,s){c(this._coordinateSystem,e,this._tmpCoordinateSystem);const i=n.get();return G(this._tmpCoordinateSystem,t,i)?d(s,i):null}intersectInfiniteManifold(t,e,s){if(this.viewingMode===a.Global)return this.intersectManifold(t,e,s);c(this._coordinateSystem,e,this._tmpCoordinateSystem);const i=this._tmpCoordinateSystem.value,o=n.get();return A(i.plane,t,o)?d(s,o):null}toRenderCoords(t,e,s){return f(t)?w(t,e,this.spatialReference):u(t,e,s,this.spatialReference)}fromRenderCoords(t,e,s=null){return f(e)?(s!=null&&(e.spatialReference=s),C(t,this.spatialReference,e)):O(e)?u(t,this.spatialReference,e,s)?e:null:P(t,this.spatialReference,e)}static create(t,e){switch(t){case a.Local:return new m(a.Local,e,R(e),z());case a.Global:return new m(a.Global,e,1,j(e))}}static renderUnitScaleFactor(t,e){return h(t)/h(e)}}export{m as U};
