import{jp as E0,f1 as j0,jx as g0,cI as f0,jl as V0,cG as L,cH as A,fF as a0,fG as y0,jo as v0,fa as S0,d2 as i0,d8 as r0,f6 as b0,d1 as P0,fD as R,fE as G0,jy as Y0,aW as Q,j3 as h0,jz as _0,fr as u0,aU as p0,jm as J0,fk as O0,fJ as B0,jA as D0}from"./index-b516d057.js";import{l as H0}from"./ViewingMode-5d7d590b.js";const H=1e-6,K=[0,0,0],W=[0,0,0];function K0(t,e){const{data:n,size:i}=t,r=n.length/i;if(r<=0)return;const s=new Z0(t);e0(K,s.minProj,s.maxProj),F(K,K,.5),P(W,s.maxProj,s.minProj);const o=s0(W),f=new tt;f.quality=o,r<14&&(t=new E0(new Float64Array(s.buffer,112,42),3));const a=[0,0,0],c=[0,0,0],q=[0,0,0],E=[0,0,0],m0=[0,0,0],$0=[0,0,0],z0=[0,0,0];switch(U0(s,t,z0,a,c,q,E,m0,$0,f)){case 1:return void I0(K,W,e);case 2:return void X0(t,E,e)}k0(t,z0,a,c,q,E,m0,$0,f),w0(t,f.b0,f.b1,f.b2,B,D);const n0=[0,0,0];P(n0,D,B),f.quality=s0(n0),f.quality<o?A0(f.b0,f.b1,f.b2,B,D,n0,e):I0(K,W,e)}function U0(t,e,n,i,r,s,o,f,a,c){return C0(t,i,r),o0(i,r)<H?1:(P(o,i,r),u(o,o),L0(e,i,o,s)<H?2:(P(f,r,s),u(f,f),P(a,s,i),u(a,a),x(n,f,o),u(n,n),d(e,n,o,f,a,c),0))}const U=[0,0,0],k=[0,0,0],z=[0,0,0],j=[0,0,0],S=[0,0,0],N=[0,0,0],V=[0,0,0],y=[0,0,0];function k0(t,e,n,i,r,s,o,f,a){Q0(t,e,n,U,k),U[0]!==void 0&&(P(z,U,n),u(z,z),P(j,U,i),u(j,j),P(S,U,r),u(S,S),x(N,j,s),u(N,N),x(V,S,o),u(V,V),x(y,z,f),u(y,y),d(t,N,s,j,z,a),d(t,V,o,S,j,a),d(t,y,f,z,S,a)),k[0]!==void 0&&(P(z,k,n),u(z,z),P(j,k,i),u(j,j),P(S,k,r),u(S,S),x(N,j,s),u(N,N),x(V,S,o),u(V,V),x(y,z,f),u(y,y),d(t,N,s,j,z,a),d(t,V,o,S,j,a),d(t,y,f,z,S,a))}function C0(t,e,n){let i=o0(t.maxVert[0],t.minVert[0]),r=0;for(let s=1;s<7;++s){const o=o0(t.maxVert[s],t.minVert[s]);o>i&&(i=o,r=s)}m(e,t.minVert[r]),m(n,t.maxVert[r])}const b=[0,0,0];function L0(t,e,n,i){const{data:r,size:s}=t;let o=Number.NEGATIVE_INFINITY,f=0;for(let a=0;a<r.length;a+=s){b[0]=r[a]-e[0],b[1]=r[a+1]-e[1],b[2]=r[a+2]-e[2];const c=n[0]*b[0]+n[1]*b[1]+n[2]*b[2],q=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],E=b[0]*b[0]+b[1]*b[1]+b[2]*b[2]-c*c/q;E>o&&(o=E,f=a)}return m(i,r,f),o}const h=[0,0];function Q0(t,e,n,i,r){W0(t,e,h,r,i);const s=F0(n,e);h[1]-H<=s&&(i[0]=void 0),h[0]+H>=s&&(r[0]=void 0)}const x0=[0,0,0],q0=[0,0,0],M0=[0,0,0],g=[0,0,0],v=[0,0,0],X=[0,0,0];function d(t,e,n,i,r,s){if(d0(e)<H)return;x(x0,n,e),x(q0,i,e),x(M0,r,e),O(t,e,h),v[1]=h[0],g[1]=h[1],X[1]=g[1]-v[1];const o=[n,i,r],f=[x0,q0,M0];for(let a=0;a<3;++a){O(t,o[a],h),v[0]=h[0],g[0]=h[1],O(t,f[a],h),v[2]=h[0],g[2]=h[1],X[0]=g[0]-v[0],X[2]=g[2]-v[2];const c=s0(X);c<s.quality&&(m(s.b0,o[a]),m(s.b1,e),m(s.b2,f[a]),s.quality=c)}}const R0=[0,0,0];function O(t,e,n){const{data:i,size:r}=t;n[0]=Number.POSITIVE_INFINITY,n[1]=Number.NEGATIVE_INFINITY;for(let s=0;s<i.length;s+=r){const o=i[s]*e[0]+i[s+1]*e[1]+i[s+2]*e[2];n[0]=Math.min(n[0],o),n[1]=Math.max(n[1],o)}}function W0(t,e,n,i,r){const{data:s,size:o}=t;m(i,s),m(r,i),n[0]=F0(R0,e),n[1]=n[0];for(let f=o;f<s.length;f+=o){const a=s[f]*e[0]+s[f+1]*e[1]+s[f+2]*e[2];a<n[0]&&(n[0]=a,m(i,s,f)),a>n[1]&&(n[1]=a,m(r,s,f))}}function I0(t,e,n){m(n.center,t),F(n.halfSize,e,.5),n.quaternion[0]=0,n.quaternion[1]=0,n.quaternion[2]=0,n.quaternion[3]=1}const I=[0,0,0],G=[0,0,0],C=[0,0,0],B=[0,0,0],D=[0,0,0],N0=[0,0,0];function X0(t,e,n){m(I,e),Math.abs(e[0])>Math.abs(e[1])&&Math.abs(e[0])>Math.abs(e[2])?I[0]=0:Math.abs(e[1])>Math.abs(e[2])?I[1]=0:I[2]=0,d0(I)<H&&(I[0]=I[1]=I[2]=1),x(G,e,I),u(G,G),x(C,e,G),u(C,C),w0(t,e,G,C,B,D),P(N0,D,B),A0(e,G,C,B,D,N0,n)}function w0(t,e,n,i,r,s){O(t,e,h),r[0]=h[0],s[0]=h[1],O(t,n,h),r[1]=h[0],s[1]=h[1],O(t,i,h),r[2]=h[0],s[2]=h[1]}const Z=[0,0,0],M=[1,0,0,0,1,0,0,0,1],Y=[0,0,0];function A0(t,e,n,i,r,s,o){M[0]=t[0],M[1]=t[1],M[2]=t[2],M[3]=e[0],M[4]=e[1],M[5]=e[2],M[6]=n[0],M[7]=n[1],M[8]=n[2],et(o.quaternion,M),e0(Y,i,r),F(Y,Y,.5),F(o.center,t,Y[0]),F(Z,e,Y[1]),e0(o.center,o.center,Z),F(Z,n,Y[2]),e0(o.center,o.center,Z),F(o.halfSize,s,.5)}const $=7;let Z0=class{constructor(e){this.minVert=new Array($),this.maxVert=new Array($);const n=64*$;this.buffer=new ArrayBuffer(n);let i=0;this.minProj=new Float64Array(this.buffer,i,$),i+=8*$,this.maxProj=new Float64Array(this.buffer,i,$),i+=8*$;for(let a=0;a<$;++a)this.minVert[a]=new Float64Array(this.buffer,i,3),i+=24;for(let a=0;a<$;++a)this.maxVert[a]=new Float64Array(this.buffer,i,3),i+=24;for(let a=0;a<$;++a)this.minProj[a]=Number.POSITIVE_INFINITY,this.maxProj[a]=Number.NEGATIVE_INFINITY;const r=new Array($),s=new Array($),{data:o,size:f}=e;for(let a=0;a<o.length;a+=f){let c=o[a];c<this.minProj[0]&&(this.minProj[0]=c,r[0]=a),c>this.maxProj[0]&&(this.maxProj[0]=c,s[0]=a),c=o[a+1],c<this.minProj[1]&&(this.minProj[1]=c,r[1]=a),c>this.maxProj[1]&&(this.maxProj[1]=c,s[1]=a),c=o[a+2],c<this.minProj[2]&&(this.minProj[2]=c,r[2]=a),c>this.maxProj[2]&&(this.maxProj[2]=c,s[2]=a),c=o[a]+o[a+1]+o[a+2],c<this.minProj[3]&&(this.minProj[3]=c,r[3]=a),c>this.maxProj[3]&&(this.maxProj[3]=c,s[3]=a),c=o[a]+o[a+1]-o[a+2],c<this.minProj[4]&&(this.minProj[4]=c,r[4]=a),c>this.maxProj[4]&&(this.maxProj[4]=c,s[4]=a),c=o[a]-o[a+1]+o[a+2],c<this.minProj[5]&&(this.minProj[5]=c,r[5]=a),c>this.maxProj[5]&&(this.maxProj[5]=c,s[5]=a),c=o[a]-o[a+1]-o[a+2],c<this.minProj[6]&&(this.minProj[6]=c,r[6]=a),c>this.maxProj[6]&&(this.maxProj[6]=c,s[6]=a)}for(let a=0;a<$;++a){let c=r[a];m(this.minVert[a],o,c),c=s[a],m(this.maxVert[a],o,c)}}},tt=class{constructor(){this.b0=[1,0,0],this.b1=[0,1,0],this.b2=[0,0,1],this.quality=0}};function s0(t){return t[0]*t[1]+t[0]*t[2]+t[1]*t[2]}function e0(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2]}function P(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}function F(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}function m(t,e,n=0){t[0]=e[n],t[1]=e[n+1],t[2]=e[n+2]}function x(t,e,n){const i=e[0],r=e[1],s=e[2],o=n[0],f=n[1],a=n[2];t[0]=r*a-s*f,t[1]=s*o-i*a,t[2]=i*f-r*o}function u(t,e){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(n>0){const i=1/Math.sqrt(n);t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i}}function d0(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function o0(t,e){const n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function F0(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function et(t,e){const n=e[0]+e[4]+e[8];if(n>0){let i=Math.sqrt(n+1);t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i}else{let i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);const r=(i+1)%3,s=(i+2)%3;let o=Math.sqrt(e[3*i+i]-e[3*r+r]-e[3*s+s]+1);t[i]=.5*o,o=.5/o,t[3]=(e[3*r+s]-e[3*s+r])*o,t[r]=(e[3*r+i]+e[3*i+r])*o,t[s]=(e[3*s+i]+e[3*i+s])*o}}const T=f0(),l=Q(),c0=Q(),nt=B0();function T0(t=[0,0,0],e=[-1,-1,-1],n=f0()){return{center:j0(t),halfSize:j0(e),quaternion:g0(n)}}function ot(t){return T0(t.center,t.halfSize,t.quaternion)}function ct(t,e){r0(e.center,t.center),r0(e.halfSize,t.halfSize),V0(e.quaternion,t.quaternion)}function ft(t,e){return e=e||T0(),K0(t,e),e}function _(t,e){const n=h0(e,t.center),i=l0(t,u0(e));return n>i?1:n<-i?-1:0}function ht(t,e){return l[0]=t.center[0]-e[0],l[1]=t.center[1]-e[1],l[2]=t.center[2]-e[2],L(T,t.quaternion),A(l,l,T),a0(l,l),y0(c0,l,t.halfSize),D0(c0,l)<e[3]*e[3]}function ut(t,e){e||(e=p0());const n=J0(nt,t.quaternion),i=t.halfSize[0]*Math.abs(n[0])+t.halfSize[1]*Math.abs(n[3])+t.halfSize[2]*Math.abs(n[6]),r=t.halfSize[0]*Math.abs(n[1])+t.halfSize[1]*Math.abs(n[4])+t.halfSize[2]*Math.abs(n[7]),s=t.halfSize[0]*Math.abs(n[2])+t.halfSize[1]*Math.abs(n[5])+t.halfSize[2]*Math.abs(n[8]);return e[0]=t.center[0]-i,e[1]=t.center[1]-r,e[2]=t.center[2]-s,e[3]=t.center[0]+i,e[4]=t.center[1]+r,e[5]=t.center[2]+s,e}function lt(t,e){return h0(e,t.center)-l0(t,u0(e))}function mt(t,e){return h0(e,t.center)+l0(t,u0(e))}function $t(t,e){return _(t,e[0])<=0&&_(t,e[1])<=0&&_(t,e[2])<=0&&_(t,e[3])<=0&&_(t,e[4])<=0&&_(t,e[5])<=0}function zt(t,e,n,i=0){L(T,t.quaternion),O0(l,e,t.center);const r=A(l,l,T),s=A(c0,n,T);let o=-1/0,f=1/0;for(let a=0;a<3;a++)if(Math.abs(s[a])>1e-6){const c=(i+t.halfSize[a]-r[a])/s[a],q=(-i-t.halfSize[a]-r[a])/s[a];o=Math.max(o,Math.min(c,q)),f=Math.min(f,Math.max(c,q))}else if(r[a]>t.halfSize[a]+i||r[a]<-t.halfSize[a]-i)return!1;return o<=f}(()=>{const t=new Int8Array(162);let e=0;const n=i=>{for(let r=0;r<i.length;r++)t[e+r]=i[r];e+=6};return n([6,2,3,1,5,4]),n([0,2,3,1,5,4]),n([0,2,3,7,5,4]),n([0,1,3,2,6,4]),n([0,1,3,2,0,0]),n([0,1,5,7,3,2]),n([0,1,3,7,6,4]),n([0,1,3,7,6,2]),n([0,1,5,7,6,2]),n([0,1,5,4,6,2]),n([0,1,5,4,0,0]),n([0,1,3,7,5,4]),n([0,2,6,4,0,0]),n([0,0,0,0,0,0]),n([1,3,7,5,0,0]),n([2,3,7,6,4,0]),n([2,3,7,6,0,0]),n([2,3,1,5,7,6]),n([0,1,5,7,6,2]),n([0,1,5,7,6,4]),n([0,1,3,7,6,4]),n([4,5,7,6,2,0]),n([4,5,7,6,0,0]),n([4,5,1,3,7,6]),n([0,2,3,7,5,4]),n([6,2,3,7,5,4]),n([6,2,3,1,5,4]),t})();function l0(t,e){L(T,t.quaternion),A(l,e,T);const n=t.halfSize;return Math.abs(l[0]*n[0])+Math.abs(l[1]*n[1])+Math.abs(l[2]*n[2])}function jt(t,e){for(let n=0;n<8;++n){const i=e[n];i[0]=1&n?-t.halfSize[0]:t.halfSize[0],i[1]=2&n?-t.halfSize[1]:t.halfSize[1],i[2]=4&n?-t.halfSize[2]:t.halfSize[2],A(i,i,t.quaternion),i0(i,i,t.center)}}function St(t){return _0(t.halfSize)}function bt(t,e,n,i,r){if(V0(r.quaternion,t.quaternion),i===H0.Global){L(t0,t.quaternion),A(w,t.center,t0),a0(p,w),y0(J,p,t.halfSize),v0(J,p,J);const s=S0(J);i0(J,p,t.halfSize);const o=S0(J);if(s<n)r0(r.center,t.center),b0(w,n,n,n),i0(r.halfSize,t.halfSize,w);else{const f=o>0?1+e/o:1,a=s>0?1+n/s:1,c=(a+f)/2,q=(a-f)/2;P0(r.halfSize,p,q),R(r.halfSize,r.halfSize,t.halfSize,c),P0(r.center,p,c),R(r.center,r.center,t.halfSize,q),G0(w,w),Y0(r.center,r.center,w),A(r.center,r.center,r.quaternion)}}else{const s=b0(w,0,0,1);R(r.center,t.center,s,(n+e)/2),L(t0,t.quaternion),A(s,s,t0),a0(s,s),R(r.halfSize,t.halfSize,s,(n-e)/2)}return r}const w=Q(),p=Q(),J=Q(),t0=f0();export{jt as $,T0 as H,ot as J,ct as K,ft as L,_ as N,ht as O,ut as P,lt as Q,mt as R,$t as T,zt as U,l0 as Z,St as _,bt as e};
