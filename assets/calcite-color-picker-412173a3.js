import{p as R,H as M,l as I,A as G,B as Y,j as re,h as a,C as Pe,k as ze,m as Re,u as F}from"./jsxFactory-92036771.js";import{c as b,i as Me,a as k,r as Ve,n as C,o as L,h as v,b as E,e as Ke,d as $e,f as J,g as A,p as Z,j as Be,k as Q,t as Ue,l as ee,m as je}from"./color-picker-swatch-ebbf0614.js";import{s as V,a as K,c as $}from"./loadable-7d42c3de.js";import{d as B}from"./icon-c122f720.js";import{d as ce}from"./input-number-9c00b0ee.js";import{s as We,c as _e,d as qe,H as Ne}from"./form-60623048.js";import{c as he,d as de,u as ue}from"./interactive-39956fb6.js";import{c as Xe,d as Ge,g as Ye}from"./label2-0071fcd4.js";import{c as pe,d as fe}from"./locale-2cb18332.js";import{c as Je}from"./observers-9c654f26.js";import{u as me,c as ge,d as Ce,s as be}from"./t9n-622f279b.js";import{g as te}from"./component-7281ffa6.js";import{d as U}from"./progress-2100df13.js";import{i as Ze}from"./key-c2c83cc7.js";import{r as ie,c as Qe,a as et}from"./math-d5d87794.js";import{d as tt}from"./button-27a2f99e.js";import{d as it}from"./loader-ea663d25.js";import{d as nt}from"./tab-eb1be4ce.js";import{d as st}from"./tab-nav-0cd87cbd.js";import{d as ot}from"./tab-title-34da98ef.js";import{d as lt}from"./tabs-87ec1ac7.js";import{t as at}from"./throttle-e5413962.js";import"./index-b516d057.js";import"./uuid-709b6c67.js";import"./guid-2347ca41.js";import"./debounce-7cc294e2.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.10.0
 */const g={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",resizeIconWrapper:"resize-icon-wrapper"},rt={action:"action"},ct=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}input{transition:var(--calcite-animation-timing), block-size 0, outline-offset 0s;-webkit-appearance:none;position:relative;margin:0px;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;border-radius:0px;background-color:var(--calcite-ui-foreground-1);font-family:inherit;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-1)}:host input{border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);color:var(--calcite-ui-text-1)}:host input::placeholder,:host input:-ms-input-placeholder,:host input::-ms-input-placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-3)}:host input:focus{border-color:var(--calcite-ui-brand);color:var(--calcite-ui-text-1)}:host input[readonly]{background-color:var(--calcite-ui-background);font-weight:var(--calcite-font-weight-medium)}:host input[readonly]:focus{color:var(--calcite-ui-text-1)}:host calcite-icon{color:var(--calcite-ui-text-3)}input{outline-color:transparent}input:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-ui-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-ui-focus-offset-invert),
                1
              )
            )
          )}:host([status=invalid]) input{border-color:var(--calcite-ui-danger)}:host([status=invalid]) input:focus{outline:2px solid var(--calcite-ui-danger);outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-ui-focus-offset-invert),
                1
              )
            )
          )}:host([scale=s]) .icon{inset-inline-start:0.5rem}:host([scale=m]) .icon{inset-inline-start:0.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;z-index:var(--calcite-app-z-index);display:block;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}.clear-button{pointer-events:initial;order:4;margin:0px;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-foreground-1);outline-color:transparent;border-inline-start-width:0px}.clear-button:hover{background-color:var(--calcite-ui-foreground-2);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:hover calcite-icon{color:var(--calcite-ui-text-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:active{background-color:var(--calcite-ui-foreground-3)}.clear-button:active calcite-icon{color:var(--calcite-ui-text-1)}.clear-button:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-ui-brand));outline-offset:calc(
            -2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-ui-focus-offset-invert),
                1
              )
            )
          )}.clear-button:disabled{opacity:var(--calcite-ui-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-background);font-weight:var(--calcite-font-weight-medium);line-height:1;color:var(--calcite-ui-text-2)}.prefix{order:2;border-inline-end-width:0px}.suffix{order:5;border-inline-start-width:0px}:host([alignment=start]) input{text-align:start}:host([alignment=end]) input{text-align:end}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-ui-border-1)}.inline-child{background-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.inline-child .editing-enabled{background-color:inherit}.inline-child:not(.editing-enabled){display:flex;cursor:pointer;border-color:transparent;padding-inline-start:0}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}:host([hidden]){display:none}[hidden]{display:none}`,ht=R(class extends M{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalInputTextFocus=I(this,"calciteInternalInputTextFocus",7),this.calciteInternalInputTextBlur=I(this,"calciteInternalInputTextBlur",7),this.calciteInputTextInput=I(this,"calciteInputTextInput",7),this.calciteInputTextChange=I(this,"calciteInputTextChange",7),this.previousValueOrigin="initial",this.mutationObserver=Je("mutation",()=>this.setDisabledAction()),this.userChangedValue=!1,this.keyDownHandler=e=>{this.readOnly||this.disabled||(this.isClearable&&e.key==="Escape"&&(this.clearInputTextValue(e),e.preventDefault()),e.key==="Enter"&&!e.defaultPrevented&&We(this)&&e.preventDefault())},this.clearInputTextValue=e=>{this.setValue({committing:!0,nativeEvent:e,origin:"user",value:""})},this.emitChangeIfUserModified=()=>{this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputTextChange.emit(),this.setPreviousEmittedValue(this.value))},this.inputTextBlurHandler=()=>{this.calciteInternalInputTextBlur.emit({element:this.childEl,value:this.value}),this.emitChangeIfUserModified()},this.clickHandler=e=>{if(this.disabled)return;const t=G(this.el,"action");e.target!==t&&this.setFocus()},this.inputTextFocusHandler=()=>{this.calciteInternalInputTextFocus.emit({element:this.childEl,value:this.value})},this.inputTextInputHandler=e=>{this.disabled||this.readOnly||this.setValue({nativeEvent:e,origin:"user",value:e.target.value})},this.inputTextKeyDownHandler=e=>{this.disabled||this.readOnly||e.key==="Enter"&&this.emitChangeIfUserModified()},this.hiddenInputChangeHandler=e=>{e.target.name===this.name&&this.setValue({value:e.target.value,origin:"direct"}),e.stopPropagation()},this.setChildElRef=e=>{this.childEl=e},this.setInputValue=e=>{this.childEl&&(this.childEl.value=e)},this.setPreviousEmittedValue=e=>{this.previousEmittedValue=e},this.setPreviousValue=e=>{this.previousValue=e},this.setValue=({committing:e=!1,nativeEvent:t,origin:i,previousValue:n,value:s})=>{this.setPreviousValue(n??this.value),this.previousValueOrigin=i,this.userChangedValue=i==="user"&&s!==this.value,this.value=s,i==="direct"&&(this.setInputValue(s),this.setPreviousEmittedValue(s)),t&&(this.calciteInputTextInput.emit().defaultPrevented?this.value=this.previousValue:e&&this.emitChangeIfUserModified())},this.alignment="start",this.autofocus=!1,this.clearable=!1,this.disabled=!1,this.form=void 0,this.hidden=!1,this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.loading=!1,this.maxLength=void 0,this.minLength=void 0,this.name=void 0,this.placeholder=void 0,this.prefixText=void 0,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.autocomplete=void 0,this.inputMode="text",this.enterKeyHint=void 0,this.pattern=void 0,this.suffixText=void 0,this.editingEnabled=!1,this.value="",this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale=void 0,this.defaultMessages=void 0,this.slottedActionElDisabledInternally=!1}disabledWatcher(){this.setDisabledAction()}onMessagesChange(){}valueWatcher(e,t){this.userChangedValue||this.setValue({origin:"direct",previousValue:t,value:e||""}),this.userChangedValue=!1}updateRequestedIcon(){this.requestedIcon=Y({},this.icon,"text")}get isClearable(){return this.clearable&&this.value.length>0}effectiveLocaleChange(){me(this,this.effectiveLocale)}connectedCallback(){var e;he(this),pe(this),ge(this),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),Xe(this),_e(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0}),this.setDisabledAction(),this.el.addEventListener("calciteInternalHiddenInputChange",this.hiddenInputChangeHandler)}disconnectedCallback(){var e;de(this),Ge(this),qe(this),fe(this),Ce(this),(e=this.mutationObserver)==null||e.disconnect(),this.el.removeEventListener("calciteInternalHiddenInputChange",this.hiddenInputChangeHandler)}async componentWillLoad(){V(this),this.requestedIcon=Y({},this.icon,"text"),await be(this)}componentDidLoad(){K(this)}componentDidRender(){ue(this)}async setFocus(){var e;await $(this),(e=this.childEl)==null||e.focus()}async selectText(){var e;(e=this.childEl)==null||e.select()}onLabelClick(){this.setFocus()}onFormReset(){this.setValue({origin:"reset",value:this.defaultValue})}syncHiddenFormInput(e){this.minLength!=null&&(e.minLength=this.minLength),this.maxLength!=null&&(e.maxLength=this.maxLength)}setDisabledAction(){const e=G(this.el,"action");e&&(this.disabled?(e.getAttribute("disabled")==null&&(this.slottedActionElDisabledInternally=!0),e.setAttribute("disabled","")):this.slottedActionElDisabledInternally&&(e.removeAttribute("disabled"),this.slottedActionElDisabledInternally=!1))}render(){const e=re(this.el),t=a("div",{class:g.loader},a("calcite-progress",{label:this.messages.loading,type:"indeterminate"})),i=a("button",{"aria-label":this.messages.clear,class:g.clearButton,disabled:this.disabled||this.readOnly,onClick:this.clearInputTextValue,tabIndex:-1,type:"button"},a("calcite-icon",{icon:"x",scale:te(this.scale)})),n=a("calcite-icon",{class:g.inputIcon,flipRtl:this.iconFlipRtl,icon:this.requestedIcon,scale:te(this.scale)}),s=a("div",{class:g.prefix},this.prefixText),o=a("div",{class:g.suffix},this.suffixText),l=a("input",{"aria-label":Ye(this),autocomplete:this.autocomplete,autofocus:this.autofocus?!0:null,class:{[g.editingEnabled]:this.editingEnabled,[g.inlineChild]:!!this.inlineEditableEl},defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:this.enterKeyHint,inputMode:this.inputMode,maxLength:this.maxLength,minLength:this.minLength,name:this.name,onBlur:this.inputTextBlurHandler,onFocus:this.inputTextFocusHandler,onInput:this.inputTextInputHandler,onKeyDown:this.inputTextKeyDownHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,required:this.required?!0:null,tabIndex:this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null,type:"text",value:this.value,ref:this.setChildElRef});return a(ze,{onClick:this.clickHandler,onKeyDown:this.keyDownHandler},a("div",{class:{[g.inputWrapper]:!0,[Pe.rtl]:e==="rtl"}},this.prefixText?s:null,a("div",{class:g.wrapper},l,this.isClearable?i:null,this.requestedIcon?n:null,this.loading?t:null),a("div",{class:g.actionWrapper},a("slot",{name:rt.action})),this.suffixText?o:null,a(Ne,{component:this})))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{disabled:["disabledWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return ct}},[1,"calcite-input-text",{alignment:[513],autofocus:[516],clearable:[516],disabled:[516],form:[513],hidden:[516],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],loading:[516],maxLength:[514,"max-length"],minLength:[514,"min-length"],name:[513],placeholder:[1],prefixText:[1,"prefix-text"],readOnly:[516,"read-only"],required:[516],scale:[513],status:[513],autocomplete:[1],inputMode:[1,"input-mode"],enterKeyHint:[1,"enter-key-hint"],pattern:[1],suffixText:[1,"suffix-text"],editingEnabled:[1540,"editing-enabled"],value:[1025],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],slottedActionElDisabledInternally:[32],setFocus:[64],selectText:[64]}]);function j(){if(typeof customElements>"u")return;["calcite-input-text","calcite-icon","calcite-progress"].forEach(t=>{switch(t){case"calcite-input-text":customElements.get(t)||customElements.define(t,ht);break;case"calcite-icon":customElements.get(t)||B();break;case"calcite-progress":customElements.get(t)||U();break}})}j();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.10.0
 */const r={channel:"channel",channels:"channels",colorField:"color-field",colorFieldScope:"scope--color-field",colorMode:"color-mode",colorModeContainer:"color-mode-container",container:"container",control:"control",controlAndScope:"control-and-scope",controlSection:"control-section",deleteColor:"delete-color",header:"header",hexAndChannelsGroup:"hex-and-channels-group",hexOptions:"color-hex-options",hueScope:"scope--hue",hueSlider:"hue-slider",opacityScope:"scope--opacity",opacitySlider:"opacity-slider",preview:"preview",previewAndSliders:"preview-and-sliders",saveColor:"save-color",savedColor:"saved-color",savedColors:"saved-colors",savedColorsButtons:"saved-colors-buttons",savedColorsSection:"saved-colors-section",scope:"scope",section:"section",slider:"slider",sliders:"sliders",splitSection:"section--split"},y=b("#007AC2"),P="calcite-color-",ne={r:255,g:255,b:255},f={h:360,s:100,v:100},se=f.h-1,S={min:0,max:100},oe={s:{slider:{height:12,width:104},colorField:{height:80,width:160},thumb:{radius:10}},m:{slider:{height:12,width:204},colorField:{height:150,width:272},thumb:{radius:10}},l:{slider:{height:12,width:384},colorField:{height:200,width:464},thumb:{radius:10}}},le=1,z={container:"container",hexInput:"hex-input",opacityInput:"opacity-input"},dt=":host{display:block}.container{display:flex;inline-size:100%;flex-wrap:nowrap;align-items:center}.hex-input{flex-grow:1;text-transform:uppercase}.opacity-input{inline-size:68px;margin-inline-start:-1px}:host([scale=s]) .container{flex-wrap:wrap;row-gap:0.125rem}:host([scale=s]) .opacity-input{inline-size:unset;margin-inline-start:unset}:host([scale=l]) .opacity-input{inline-size:88px}:host([hidden]){display:none}[hidden]{display:none}",ae=b(),ut=R(class extends M{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteColorPickerHexInputChange=I(this,"calciteColorPickerHexInputChange",6),this.onHexInputBlur=()=>{const e=this.hexInputNode,t=e.value,i=`#${t}`,{allowEmpty:n,internalColor:s}=this,o=n&&!t,l=Me(i);this.onHexInputChange(),!(o||k(i)&&l)&&(e.value=n&&!s?"":this.formatHexForInternalInput(Ve(s.object())))},this.onOpacityInputBlur=()=>{const e=this.opacityInputNode,t=e.value,{allowEmpty:i,internalColor:n}=this;i&&!t||(e.value=i&&!n?"":this.formatOpacityForInternalInput(n))},this.onHexInputChange=()=>{let t=this.hexInputNode.value;if(t){const i=C(t,!1);if(k(i)&&this.alphaChannel&&this.internalColor){const s=C(this.internalColor.hexa(),!0).slice(-2);t=`${i+s}`}}this.internalSetValue(t,this.value)},this.onOpacityInputChange=()=>{var i;const e=this.opacityInputNode;let t;if(!e.value)t=e.value;else{const n=L(Number(e.value));t=(i=this.internalColor)==null?void 0:i.alpha(n).hexa()}this.internalSetValue(t,this.value)},this.onInputKeyDown=e=>{const{altKey:t,ctrlKey:i,metaKey:n,shiftKey:s}=e,{alphaChannel:o,hexInputNode:l,internalColor:c,value:h}=this,{key:d}=e,m=e.composedPath();if(d==="Tab"||d==="Enter"){m.includes(l)?this.onHexInputChange():this.onOpacityInputChange(),d==="Enter"&&e.preventDefault();return}const p=d==="ArrowDown"||d==="ArrowUp",u=this.value;if(p){if(!h){this.internalSetValue(this.previousNonNullValue,u),e.preventDefault();return}const H=d==="ArrowUp"?1:-1,w=s?10:1;this.internalSetValue(v(this.nudgeRGBChannels(c,w*H,m.includes(l)?"rgb":"a"),o),u),e.preventDefault();return}const x=t||i||n,D=d.length===1,T=Ke.test(d);D&&!x&&!T&&e.preventDefault()},this.onHexInputPaste=e=>{const t=e.clipboardData.getData("text");k(t)&&(e.preventDefault(),this.hexInputNode.value=t.slice(1))},this.previousNonNullValue=this.value,this.storeHexInputRef=e=>{this.hexInputNode=e},this.storeOpacityInputRef=e=>{this.opacityInputNode=e},this.allowEmpty=!1,this.alphaChannel=!1,this.hexLabel="Hex",this.messages=void 0,this.numberingSystem=void 0,this.scale="m",this.value=C(v(ae,this.alphaChannel),this.alphaChannel,!0),this.internalColor=ae}connectedCallback(){const{allowEmpty:e,alphaChannel:t,value:i}=this;if(i){const n=C(i,t);k(n,t)&&this.internalSetValue(n,n,!1);return}e&&this.internalSetValue(null,null,!1)}componentWillLoad(){V(this)}componentDidLoad(){K(this)}handleValueChange(e,t){this.internalSetValue(e,t,!1)}render(){const{alphaChannel:e,hexLabel:t,internalColor:i,messages:n,scale:s,value:o}=this,l=this.formatHexForInternalInput(o),c=this.formatOpacityForInternalInput(i),h=s==="l"?"m":"s";return a("div",{class:z.container},a("calcite-input-text",{class:z.hexInput,label:(n==null?void 0:n.hex)||t,maxLength:6,onCalciteInputTextChange:this.onHexInputChange,onCalciteInternalInputTextBlur:this.onHexInputBlur,onKeyDown:this.onInputKeyDown,onPaste:this.onHexInputPaste,prefixText:"#",scale:h,value:l,ref:this.storeHexInputRef}),e?a("calcite-input-number",{class:z.opacityInput,key:"opacity-input",label:n==null?void 0:n.opacity,max:S.max,maxLength:3,min:S.min,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputNumberChange:this.onOpacityInputChange,onCalciteInternalInputNumberBlur:this.onOpacityInputBlur,onKeyDown:this.onInputKeyDown,scale:h,suffixText:"%",value:c,ref:this.storeOpacityInputRef}):null)}async setFocus(){return await $(this),Re(this.hexInputNode)}internalSetValue(e,t,i=!0){if(e){const{alphaChannel:n}=this,s=C(e,n,n);if(k(s,n)){const{internalColor:o}=this,l=b(s),c=C(v(l,n),n),h=!o||c!==C(v(o,n),n);this.internalColor=l,this.previousNonNullValue=c,this.value=c,h&&i&&this.calciteColorPickerHexInputChange.emit();return}}else if(this.allowEmpty){this.internalColor=null,this.value=null,i&&this.calciteColorPickerHexInputChange.emit();return}this.value=t}formatHexForInternalInput(e){return e?e.replace("#","").slice(0,6):""}formatOpacityForInternalInput(e){return e?`${E(e.alpha())}`:""}nudgeRGBChannels(e,t,i){let n;const s=e.array(),o=s.slice(0,3);if(i==="rgb")n=[...o.map(c=>c+t),this.alphaChannel?s[3]:void 0];else{const l=L(E(e.alpha())+t);n=[...o,l]}return b(n)}get el(){return this}static get watchers(){return{value:["handleValueChange"]}}static get style(){return dt}},[1,"calcite-color-picker-hex-input",{allowEmpty:[4,"allow-empty"],alphaChannel:[4,"alpha-channel"],hexLabel:[1,"hex-label"],messages:[16],numberingSystem:[1,"numbering-system"],scale:[513],value:[1537],internalColor:[32],setFocus:[64]}]);function ve(){if(typeof customElements>"u")return;["calcite-color-picker-hex-input","calcite-icon","calcite-input-number","calcite-input-text","calcite-progress"].forEach(t=>{switch(t){case"calcite-color-picker-hex-input":customElements.get(t)||customElements.define(t,ut);break;case"calcite-icon":customElements.get(t)||B();break;case"calcite-input-number":customElements.get(t)||ce();break;case"calcite-input-text":customElements.get(t)||j();break;case"calcite-progress":customElements.get(t)||U();break}})}ve();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.10.0
 */const pt=`:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]){--calcite-color-picker-spacing:8px}:host([scale=s]) .container{inline-size:160px}:host([scale=s]) .saved-colors{gap:0.25rem;grid-template-columns:repeat(auto-fill, 20px)}:host([scale=m]){--calcite-color-picker-spacing:12px}:host([scale=m]) .container{inline-size:272px}:host([scale=l]){--calcite-color-picker-spacing:16px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) .container{inline-size:464px}:host([scale=l]) .section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}:host([scale=l]) .saved-colors{grid-template-columns:repeat(auto-fill, 32px)}:host([scale=l]) .control-section{flex-wrap:nowrap;align-items:baseline;flex-wrap:wrap}:host([scale=l]) .color-hex-options{display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around}:host([scale=l]) .color-mode-container{flex-shrink:3}.container{background-color:var(--calcite-ui-foreground-1);display:inline-block;border:1px solid var(--calcite-ui-border-1)}.control-and-scope{position:relative;display:flex;cursor:pointer;touch-action:none}.scope{pointer-events:none;position:absolute;z-index:var(--calcite-app-z-index);block-size:1px;inline-size:1px;border-radius:9999px;background-color:transparent;font-size:var(--calcite-font-size--1);outline-color:transparent}.scope:focus{outline:2px solid var(--calcite-ui-focus-color, var(--calcite-ui-brand));outline-offset:calc(
            2px *
            calc(
              1 -
              2 * clamp(
                0,
                var(--calcite-ui-focus-offset-invert),
                1
              )
            )
          );outline-offset:11px}.hex-and-channels-group{inline-size:100%}.hex-and-channels-group,.control-section{display:flex;flex-direction:row;flex-wrap:wrap}.section{padding-block:0 var(--calcite-color-picker-spacing);padding-inline:var(--calcite-color-picker-spacing)}.section:first-of-type{padding-block-start:var(--calcite-color-picker-spacing)}.sliders{display:flex;flex-direction:column;justify-content:space-between;margin-inline-start:var(--calcite-color-picker-spacing)}.preview-and-sliders{display:flex;align-items:center;padding:var(--calcite-color-picker-spacing)}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;color:var(--calcite-ui-text-1)}.color-mode-container{padding-block-start:var(--calcite-color-picker-spacing)}.channels{display:flex;row-gap:0.125rem}.channel[data-channel-index="3"]{inline-size:159px}:host([scale=s]) .channels{flex-wrap:wrap}:host([scale=s]) .channel{flex-basis:30%;flex-grow:1}:host([scale=s]) .channel[data-channel-index="3"]{inline-size:unset;margin-inline-start:unset}:host([scale=l]) .channel[data-channel-index="3"]{inline-size:131px}.saved-colors{display:grid;gap:0.5rem;padding-block-start:var(--calcite-color-picker-spacing);grid-template-columns:repeat(auto-fill, 24px)}.saved-colors-buttons{display:flex}.saved-color{outline-offset:0;outline-color:transparent;cursor:pointer}.saved-color:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.saved-color:hover{transition:outline-color var(--calcite-internal-animation-timing-fast) ease-in-out;outline:2px solid var(--calcite-ui-border-2);outline-offset:2px}:host([hidden]){display:none}[hidden]{display:none}`,ft=16,xe=R(class extends M{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteColorPickerChange=I(this,"calciteColorPickerChange",6),this.calciteColorPickerInput=I(this,"calciteColorPickerInput",6),this.internalColorUpdateContext=null,this.mode=J.HEX,this.shiftKeyChannelAdjustment=0,this.handleTabActivate=e=>{this.channelMode=e.currentTarget.getAttribute("data-color-mode"),this.updateChannelsFromColor(this.color)},this.handleColorFieldScopeKeyDown=e=>{const{key:t}=e,i={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};i[t]&&(e.preventDefault(),this.scopeOrientation=t==="ArrowDown"||t==="ArrowUp"?"vertical":"horizontal",this.captureColorFieldColor(this.colorFieldScopeLeft+i[t].x||0,this.colorFieldScopeTop+i[t].y||0,!1))},this.handleHueScopeKeyDown=e=>{const t=e.shiftKey?10:1,{key:i}=e,n={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};if(n[i]){e.preventDefault();const s=n[i]*t,o=this.baseColorFieldColor.hue(),l=this.baseColorFieldColor.hue(o+s);this.internalColorSet(l,!1)}},this.handleHexInputChange=e=>{e.stopPropagation();const{allowEmpty:t,color:i}=this,s=e.target.value;if(t&&!s){this.internalColorSet(null);return}const o=i&&C(v(i,A(this.mode)));s!==o&&this.internalColorSet(b(s))},this.handleSavedColorSelect=e=>{const t=e.currentTarget;this.internalColorSet(b(t.color))},this.handleChannelInput=e=>{const t=e.currentTarget,i=Number(t.getAttribute("data-channel-index")),s=i===3?S.max:this.channelMode==="rgb"?ne[Object.keys(ne)[i]]:f[Object.keys(f)[i]];let o;if(this.allowEmpty&&!t.value)o="";else{const c=Number(t.value)+this.shiftKeyChannelAdjustment;o=Qe(c,0,s).toString()}t.value=o},this.handleChannelChange=e=>{const t=e.currentTarget,i=Number(t.getAttribute("data-channel-index")),n=[...this.channels];if(this.allowEmpty&&!t.value){this.channels=[null,null,null,null],this.internalColorSet(null);return}const o=i===3,l=Number(t.value);n[i]=o?L(l):l,this.updateColorFromChannels(n)},this.handleSavedColorKeyDown=e=>{Ze(e.key)&&(e.preventDefault(),this.handleSavedColorSelect(e))},this.handleColorFieldPointerDown=e=>{if(!F(e))return;const{offsetX:t,offsetY:i}=e;document.addEventListener("pointermove",this.globalPointerMoveHandler),document.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeCanvasInfo={context:this.colorFieldRenderingContext,bounds:this.colorFieldRenderingContext.canvas.getBoundingClientRect()},this.captureColorFieldColor(t,i),this.colorFieldScopeNode.focus()},this.handleHueSliderPointerDown=e=>{if(!F(e))return;const{offsetX:t}=e;document.addEventListener("pointermove",this.globalPointerMoveHandler),document.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeCanvasInfo={context:this.hueSliderRenderingContext,bounds:this.hueSliderRenderingContext.canvas.getBoundingClientRect()},this.captureHueSliderColor(t),this.hueScopeNode.focus()},this.handleOpacitySliderPointerDown=e=>{if(!F(e))return;const{offsetX:t}=e;document.addEventListener("pointermove",this.globalPointerMoveHandler),document.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeCanvasInfo={context:this.opacitySliderRenderingContext,bounds:this.opacitySliderRenderingContext.canvas.getBoundingClientRect()},this.captureOpacitySliderValue(t),this.opacityScopeNode.focus()},this.globalPointerUpHandler=e=>{if(!F(e))return;const t=this.activeCanvasInfo;this.activeCanvasInfo=null,this.drawColorControls(),t&&this.calciteColorPickerChange.emit()},this.globalPointerMoveHandler=e=>{const{activeCanvasInfo:t,el:i}=this;if(!i.isConnected||!t)return;const{context:n,bounds:s}=t;let o,l;const{clientX:c,clientY:h}=e;n.canvas.matches(":hover")?(o=c-s.x,l=h-s.y):(c<s.x+s.width&&c>s.x?o=c-s.x:c<s.x?o=0:o=s.width,h<s.y+s.height&&h>s.y?l=h-s.y:h<s.y?l=0:l=s.height),n===this.colorFieldRenderingContext?this.captureColorFieldColor(o,l,!1):n===this.hueSliderRenderingContext?this.captureHueSliderColor(o):n===this.opacitySliderRenderingContext&&this.captureOpacitySliderValue(o)},this.storeColorFieldScope=e=>{this.colorFieldScopeNode=e},this.storeHueScope=e=>{this.hueScopeNode=e},this.renderChannelsTabTitle=e=>{const{channelMode:t,messages:i}=this,n=e===t,s=e==="rgb"?i.rgb:i.hsv;return a("calcite-tab-title",{class:r.colorMode,"data-color-mode":e,key:e,onCalciteTabsActivate:this.handleTabActivate,selected:n},s)},this.renderChannelsTab=e=>{const{allowEmpty:t,channelMode:i,channels:n,messages:s,alphaChannel:o}=this,l=e===i,h=e==="rgb"?[s.red,s.green,s.blue]:[s.hue,s.saturation,s.value],d=re(this.el),m=o?n:n.slice(0,3);return a("calcite-tab",{class:r.control,key:e,selected:l},a("div",{class:r.channels,dir:"ltr"},m.map((p,u)=>{const x=u===3;return x&&(p=t&&!p?p:E(p)),this.renderChannel(p,u,h[u],d,x?"%":"")})))},this.renderChannel=(e,t,i,n,s)=>a("calcite-input-number",{class:r.channel,"data-channel-index":t,dir:n,key:t,label:i,lang:this.effectiveLocale,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputNumberChange:this.handleChannelChange,onCalciteInputNumberInput:this.handleChannelInput,onKeyDown:this.handleKeyDown,scale:this.scale==="l"?"m":"s",style:{marginLeft:t>0&&!(this.scale==="s"&&this.alphaChannel&&t===3)?"-1px":""},suffixText:s,value:e==null?void 0:e.toString()}),this.deleteColor=()=>{const e=v(this.color,this.alphaChannel);if(!(this.savedColors.indexOf(e)>-1))return;const i=this.savedColors.filter(s=>s!==e);this.savedColors=i;const n=`${P}${this.storageId}`;this.storageId&&localStorage.setItem(n,JSON.stringify(i))},this.saveColor=()=>{const e=v(this.color,this.alphaChannel);if(this.savedColors.indexOf(e)>-1)return;const i=[...this.savedColors,e];this.savedColors=i;const n=`${P}${this.storageId}`;this.storageId&&localStorage.setItem(n,JSON.stringify(i))},this.drawColorControls=at((e="all")=>{(e==="all"||e==="color-field")&&this.colorFieldRenderingContext&&this.drawColorField(),(e==="all"||e==="hue-slider")&&this.hueSliderRenderingContext&&this.drawHueSlider(),this.alphaChannel&&(e==="all"||e==="opacity-slider")&&this.opacitySliderRenderingContext&&this.drawOpacitySlider()},ft),this.captureColorFieldColor=(e,t,i=!0)=>{const{dimensions:{colorField:{height:n,width:s}}}=this,o=Math.round(f.s/s*e),l=Math.round(f.v/n*(n-t));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(o).value(l),i)},this.initColorField=e=>{this.colorFieldRenderingContext=e.getContext("2d"),this.updateCanvasSize("color-field"),this.drawColorControls()},this.initHueSlider=e=>{this.hueSliderRenderingContext=e.getContext("2d"),this.updateCanvasSize("hue-slider"),this.drawHueSlider()},this.initOpacitySlider=e=>{e&&(this.opacitySliderRenderingContext=e.getContext("2d"),this.updateCanvasSize("opacity-slider"),this.drawOpacitySlider())},this.storeOpacityScope=e=>{this.opacityScopeNode=e},this.handleOpacityScopeKeyDown=e=>{const t=e.shiftKey?10:1,{key:i}=e,n={ArrowUp:.01,ArrowRight:.01,ArrowDown:-.01,ArrowLeft:-.01};if(n[i]){e.preventDefault();const s=n[i]*t,o=this.baseColorFieldColor.alpha(),l=this.baseColorFieldColor.alpha(o+s);this.internalColorSet(l,!1)}},this.allowEmpty=!1,this.alphaChannel=!1,this.channelsDisabled=!1,this.color=y,this.disabled=!1,this.format="auto",this.hideChannels=!1,this.hexDisabled=!1,this.hideHex=!1,this.hideSaved=!1,this.savedDisabled=!1,this.scale="m",this.storageId=void 0,this.messageOverrides=void 0,this.numberingSystem=void 0,this.value=C(v(y,this.alphaChannel)),this.defaultMessages=void 0,this.channelMode="rgb",this.channels=this.toChannels(y),this.dimensions=oe.m,this.effectiveLocale="",this.messages=void 0,this.savedColors=[],this.colorFieldScopeTop=void 0,this.colorFieldScopeLeft=void 0,this.hueScopeLeft=void 0,this.opacityScopeLeft=void 0,this.scopeOrientation=void 0}handleAlphaChannelChange(e){const{format:t}=this;e&&t!=="auto"&&!A(t)&&(console.warn(`ignoring alphaChannel as the current format (${t}) does not support alpha`),this.alphaChannel=!1)}handleColorChange(e,t){this.drawColorControls(),this.updateChannelsFromColor(e),this.previousColor=t}handleFormatOrAlphaChannelChange(){this.setMode(this.format),this.internalColorSet(this.color,!1,"internal")}handleScaleChange(e="m"){this.updateDimensions(e),this.updateCanvasSize("all"),this.drawColorControls()}onMessagesChange(){}handleValueChange(e,t){const{allowEmpty:i,format:n}=this,s=!i||e;let o=!1;if(s){const d=Z(e);if(!d||n!=="auto"&&d!==n){this.showIncompatibleColorWarning(e,n),this.value=t;return}o=this.mode!==d,this.setMode(d,this.internalColorUpdateContext===null)}const l=this.activeCanvasInfo;if(this.internalColorUpdateContext==="initial")return;if(this.internalColorUpdateContext==="user-interaction"){this.calciteColorPickerInput.emit(),l||this.calciteColorPickerChange.emit();return}const c=i&&!e?null:b(e!=null&&typeof e=="object"&&A(this.mode)?Be(e):e),h=!Q(c,this.color);(o||h)&&this.internalColorSet(c,this.alphaChannel&&!(this.mode.endsWith("a")||this.mode.endsWith("a-css")),"internal")}get baseColorFieldColor(){return this.color||this.previousColor||y}effectiveLocaleChange(){me(this,this.effectiveLocale)}handleChannelKeyUpOrDown(e){this.shiftKeyChannelAdjustment=0;const{key:t}=e;if(t!=="ArrowUp"&&t!=="ArrowDown"||!e.composedPath().some(s=>{var o;return(o=s.classList)==null?void 0:o.contains(r.channel)}))return;const{shiftKey:i}=e;if(e.preventDefault(),!this.color){this.internalColorSet(this.previousColor),e.stopPropagation();return}const n=9;this.shiftKeyChannelAdjustment=t==="ArrowUp"&&i?n:t==="ArrowDown"&&i?-n:0}async setFocus(){await $(this),this.el.focus()}async componentWillLoad(){V(this);const{allowEmpty:e,color:t,format:i,value:n}=this,s=e&&!n,o=Z(n),l=s||i==="auto"&&o||i===o,c=s?null:l?b(n):t;l||this.showIncompatibleColorWarning(n,i),this.setMode(i,!1),this.internalColorSet(c,!1,"initial"),this.updateDimensions(this.scale);const h=`${P}${this.storageId}`;this.storageId&&localStorage.getItem(h)&&(this.savedColors=JSON.parse(localStorage.getItem(h))),await be(this)}connectedCallback(){he(this),pe(this),ge(this)}componentDidLoad(){K(this)}disconnectedCallback(){document.removeEventListener("pointermove",this.globalPointerMoveHandler),document.removeEventListener("pointerup",this.globalPointerUpHandler),de(this),fe(this),Ce(this)}componentDidRender(){ue(this)}render(){const{allowEmpty:e,channelsDisabled:t,color:i,colorFieldScopeLeft:n,colorFieldScopeTop:s,dimensions:{slider:{width:o},thumb:{radius:l}},hexDisabled:c,hideChannels:h,hideHex:d,hideSaved:m,hueScopeLeft:p,messages:u,alphaChannel:x,opacityScopeLeft:D,savedColors:T,savedDisabled:H,scale:w,scopeOrientation:Se}=this,W=i?v(i,x):null,we=l,Ie=p??o*y.hue()/f.h,ke=l,Ee=D??o*E(y.alpha())/S.max,_=i===null,O=Se==="vertical",q=c||d,N=t||h,Te=H||m,[Fe,Ae]=this.getAdjustedScopePosition(n,s),[Le,De]=this.getAdjustedScopePosition(Ie,we),[He,Oe]=this.getAdjustedScopePosition(Ee,ke);return a("div",{class:r.container},a("div",{class:r.controlAndScope},a("canvas",{class:r.colorField,onPointerDown:this.handleColorFieldPointerDown,ref:this.initColorField}),a("div",{"aria-label":O?u.value:u.saturation,"aria-valuemax":O?f.v:f.s,"aria-valuemin":"0","aria-valuenow":(O?i==null?void 0:i.saturationv():i==null?void 0:i.value())||"0",class:{[r.scope]:!0,[r.colorFieldScope]:!0},onKeyDown:this.handleColorFieldScopeKeyDown,role:"slider",style:{top:`${Ae||0}px`,left:`${Fe||0}px`},tabindex:"0",ref:this.storeColorFieldScope})),a("div",{class:r.previewAndSliders},a("calcite-color-picker-swatch",{class:r.preview,color:W,scale:"l"}),a("div",{class:r.sliders},a("div",{class:r.controlAndScope},a("canvas",{class:{[r.slider]:!0,[r.hueSlider]:!0},onPointerDown:this.handleHueSliderPointerDown,ref:this.initHueSlider}),a("div",{"aria-label":u.hue,"aria-valuemax":f.h,"aria-valuemin":"0","aria-valuenow":(i==null?void 0:i.round().hue())||y.round().hue(),class:{[r.scope]:!0,[r.hueScope]:!0},onKeyDown:this.handleHueScopeKeyDown,role:"slider",style:{top:`${De}px`,left:`${Le}px`},tabindex:"0",ref:this.storeHueScope})),x?a("div",{class:r.controlAndScope},a("canvas",{class:{[r.slider]:!0,[r.opacitySlider]:!0},onPointerDown:this.handleOpacitySliderPointerDown,ref:this.initOpacitySlider}),a("div",{"aria-label":u.opacity,"aria-valuemax":S.max,"aria-valuemin":S.min,"aria-valuenow":(i||y).round().alpha(),class:{[r.scope]:!0,[r.opacityScope]:!0},onKeyDown:this.handleOpacityScopeKeyDown,role:"slider",style:{top:`${Oe}px`,left:`${He}px`},tabindex:"0",ref:this.storeOpacityScope})):null)),q&&N?null:a("div",{class:{[r.controlSection]:!0,[r.section]:!0}},a("div",{class:r.hexAndChannelsGroup},q?null:a("div",{class:r.hexOptions},a("calcite-color-picker-hex-input",{allowEmpty:e,alphaChannel:x,class:r.control,messages:u,numberingSystem:this.numberingSystem,onCalciteColorPickerHexInputChange:this.handleHexInputChange,scale:w,value:W})),N?null:a("calcite-tabs",{class:{[r.colorModeContainer]:!0,[r.splitSection]:!0},scale:w==="l"?"m":"s"},a("calcite-tab-nav",{slot:"title-group"},this.renderChannelsTabTitle("rgb"),this.renderChannelsTabTitle("hsv")),this.renderChannelsTab("rgb"),this.renderChannelsTab("hsv")))),Te?null:a("div",{class:{[r.savedColorsSection]:!0,[r.section]:!0}},a("div",{class:r.header},a("label",null,u.saved),a("div",{class:r.savedColorsButtons},a("calcite-button",{appearance:"transparent",class:r.deleteColor,disabled:_,iconStart:"minus",kind:"neutral",label:u.deleteColor,onClick:this.deleteColor,scale:w,type:"button"}),a("calcite-button",{appearance:"transparent",class:r.saveColor,disabled:_,iconStart:"plus",kind:"neutral",label:u.saveColor,onClick:this.saveColor,scale:w,type:"button"}))),T.length>0?a("div",{class:r.savedColors},[...T.map(X=>a("calcite-color-picker-swatch",{class:r.savedColor,color:X,key:X,onClick:this.handleSavedColorSelect,onKeyDown:this.handleSavedColorKeyDown,scale:w,tabIndex:0}))]):null))}handleKeyDown(e){e.key==="Enter"&&e.preventDefault()}showIncompatibleColorWarning(e,t){console.warn(`ignoring color value (${e}) as it is not compatible with the current format (${t})`)}setMode(e,t=!0){const i=e==="auto"?this.mode:e;this.mode=this.ensureCompatibleMode(i,t)}ensureCompatibleMode(e,t){const{alphaChannel:i}=this,n=A(e);if(i&&!n){const s=Ue(e);return t&&console.warn(`setting format to (${s}) as the provided one (${e}) does not support alpha`),s}if(!i&&n){const s=ee(e);return t&&console.warn(`setting format to (${s}) as the provided one (${e}) does not support alpha`),s}return e}captureHueSliderColor(e){const{dimensions:{slider:{width:t}}}=this,i=se/t*e;this.internalColorSet(this.baseColorFieldColor.hue(i),!1)}captureOpacitySliderValue(e){const{dimensions:{slider:{width:t}}}=this,i=L(S.max/t*e);this.internalColorSet(this.baseColorFieldColor.alpha(i),!1)}internalColorSet(e,t=!0,i="user-interaction"){t&&Q(e,this.color)||(this.internalColorUpdateContext=i,this.color=e,this.value=this.toValue(e),this.internalColorUpdateContext=null)}toValue(e,t=this.mode){if(!e)return null;const i="hex";if(t.includes(i)){const s=t===J.HEXA;return C(v(e.round(),s),s)}if(t.includes("-css")){const s=e[t.replace("-css","").replace("a","")]().round().string();if((t.endsWith("a")||t.endsWith("a-css"))&&e.alpha()===1){const l=s.slice(0,3),c=s.slice(4,-1);return`${l}a(${c}, ${e.alpha()})`}return s}const n=e[ee(t)]().round().object();return t.endsWith("a")?je(n):n}getSliderCapSpacing(){const{dimensions:{slider:{height:e},thumb:{radius:t}}}=this;return t*2-e}updateDimensions(e="m"){this.dimensions=oe[e]}drawColorField(){const e=this.colorFieldRenderingContext,{dimensions:{colorField:{height:t,width:i}}}=this;e.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).alpha(1).string(),e.fillRect(0,0,i,t);const n=e.createLinearGradient(0,0,i,0);n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=n,e.fillRect(0,0,i,t);const s=e.createLinearGradient(0,0,0,t);s.addColorStop(0,"rgba(0,0,0,0)"),s.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=s,e.fillRect(0,0,i,t),this.drawActiveColorFieldColor()}setCanvasContextSize(e,{height:t,width:i}){if(!e)return;const n=window.devicePixelRatio||1;e.width=i*n,e.height=t*n,e.style.height=`${t}px`,e.style.width=`${i}px`,e.getContext("2d").scale(n,n)}updateCanvasSize(e="all"){var n,s,o;const{dimensions:t}=this;(e==="all"||e==="color-field")&&this.setCanvasContextSize((n=this.colorFieldRenderingContext)==null?void 0:n.canvas,t.colorField);const i={width:t.slider.width,height:t.slider.height+(t.thumb.radius-t.slider.height/2)*2};(e==="all"||e==="hue-slider")&&this.setCanvasContextSize((s=this.hueSliderRenderingContext)==null?void 0:s.canvas,i),(e==="all"||e==="opacity-slider")&&this.setCanvasContextSize((o=this.opacitySliderRenderingContext)==null?void 0:o.canvas,i)}drawActiveColorFieldColor(){const{color:e}=this;if(!e)return;const t=e.hsv(),{dimensions:{colorField:{height:i,width:n},thumb:{radius:s}}}=this,o=t.saturationv()/(f.s/n),l=i-t.value()/(f.v/i);requestAnimationFrame(()=>{this.colorFieldScopeLeft=o,this.colorFieldScopeTop=l}),this.drawThumb(this.colorFieldRenderingContext,s,o,l,t)}drawThumb(e,t,i,n,s){const l=2*Math.PI,c=1;e.beginPath(),e.arc(i,n,t,0,l),e.fillStyle="#fff",e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=c,e.stroke(),e.beginPath(),e.arc(i,n,t-3,0,l),e.fillStyle=s.rgb().alpha(1).string(),e.fill()}drawActiveHueSliderColor(){const{color:e}=this;if(!e)return;const t=e.hsv().saturationv(100).value(100),{dimensions:{slider:{width:i},thumb:{radius:n}}}=this,s=t.hue()/(se/i),o=n,l=this.getSliderBoundX(s,i,n);requestAnimationFrame(()=>{this.hueScopeLeft=l}),this.drawThumb(this.hueSliderRenderingContext,n,l,o,t)}drawHueSlider(){const e=this.hueSliderRenderingContext,{dimensions:{slider:{height:t,width:i},thumb:{radius:n}}}=this,s=0,o=n-t/2,l=e.createLinearGradient(0,0,i,0),c=["red","yellow","lime","cyan","blue","magenta","#ff0004"],h=1/(c.length-1);let d=0;c.forEach(m=>{l.addColorStop(d,b(m).string()),d+=h}),e.clearRect(0,0,i,t+this.getSliderCapSpacing()*2),this.drawSliderPath(e,t,i,s,o),e.fillStyle=l,e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=1,e.stroke(),this.drawActiveHueSliderColor()}drawOpacitySlider(){const e=this.opacitySliderRenderingContext,{baseColorFieldColor:t,dimensions:{slider:{height:i,width:n},thumb:{radius:s}}}=this,o=0,l=s-i/2;e.clearRect(0,0,n,i+this.getSliderCapSpacing()*2);const c=e.createLinearGradient(0,l,n,0),h=t.rgb().alpha(0),d=t.rgb().alpha(.5),m=t.rgb().alpha(1);c.addColorStop(0,h.string()),c.addColorStop(.5,d.string()),c.addColorStop(1,m.string()),this.drawSliderPath(e,i,n,o,l);const p=e.createPattern(this.getCheckeredBackgroundPattern(),"repeat");e.fillStyle=p,e.fill(),e.fillStyle=c,e.fill(),e.strokeStyle="rgba(0,0,0,0.3)",e.lineWidth=1,e.stroke(),this.drawActiveOpacitySliderColor()}drawSliderPath(e,t,i,n,s){const o=t/2+1;e.beginPath(),e.moveTo(n+o,s),e.lineTo(n+i-o,s),e.quadraticCurveTo(n+i,s,n+i,s+o),e.lineTo(n+i,s+t-o),e.quadraticCurveTo(n+i,s+t,n+i-o,s+t),e.lineTo(n+o,s+t),e.quadraticCurveTo(n,s+t,n,s+t-o),e.lineTo(n,s+o),e.quadraticCurveTo(n,s,n+o,s),e.closePath()}getCheckeredBackgroundPattern(){if(this.checkerPattern)return this.checkerPattern;const e=document.createElement("canvas");e.width=10,e.height=10;const t=e.getContext("2d");return t.fillStyle="#ccc",t.fillRect(0,0,10,10),t.fillStyle="#fff",t.fillRect(0,0,5,5),t.fillRect(5,5,5,5),this.checkerPattern=e,e}drawActiveOpacitySliderColor(){const{color:e}=this;if(!e)return;const t=e,{dimensions:{slider:{width:i},thumb:{radius:n}}}=this,s=E(t.alpha())/(S.max/i),o=n,l=this.getSliderBoundX(s,i,n);requestAnimationFrame(()=>{this.opacityScopeLeft=l}),this.drawThumb(this.opacitySliderRenderingContext,n,l,o,t)}getSliderBoundX(e,t,i){const n=et(e,t,i);return n===0?e:n===-1?ie(e,0,t,i,i*2):ie(e,0,t,t-i*2,t-i)}updateColorFromChannels(e){this.internalColorSet(b(e,this.channelMode))}updateChannelsFromColor(e){this.channels=e?this.toChannels(e):[null,null,null,null]}toChannels(e){const{channelMode:t}=this,i=e[t]().array().map((n,s)=>s===3?n:Math.floor(n));return i.length===3&&i.push(1),i}getAdjustedScopePosition(e,t){return[e-le/2,t-le/2]}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{alphaChannel:["handleAlphaChannelChange","handleFormatOrAlphaChannelChange"],color:["handleColorChange"],format:["handleFormatOrAlphaChannelChange"],scale:["handleScaleChange"],messageOverrides:["onMessagesChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return pt}},[17,"calcite-color-picker",{allowEmpty:[516,"allow-empty"],alphaChannel:[4,"alpha-channel"],channelsDisabled:[4,"channels-disabled"],color:[1040],disabled:[516],format:[513],hideChannels:[516,"hide-channels"],hexDisabled:[4,"hex-disabled"],hideHex:[516,"hide-hex"],hideSaved:[516,"hide-saved"],savedDisabled:[516,"saved-disabled"],scale:[513],storageId:[513,"storage-id"],messageOverrides:[1040],numberingSystem:[513,"numbering-system"],value:[1025],messages:[1040],defaultMessages:[32],channelMode:[32],channels:[32],dimensions:[32],effectiveLocale:[32],savedColors:[32],colorFieldScopeTop:[32],colorFieldScopeLeft:[32],hueScopeLeft:[32],opacityScopeLeft:[32],scopeOrientation:[32],setFocus:[64]},[[2,"keydown","handleChannelKeyUpOrDown"],[2,"keyup","handleChannelKeyUpOrDown"]]]);function ye(){if(typeof customElements>"u")return;["calcite-color-picker","calcite-button","calcite-color-picker-hex-input","calcite-color-picker-swatch","calcite-icon","calcite-input-number","calcite-input-text","calcite-loader","calcite-progress","calcite-tab","calcite-tab-nav","calcite-tab-title","calcite-tabs"].forEach(t=>{switch(t){case"calcite-color-picker":customElements.get(t)||customElements.define(t,xe);break;case"calcite-button":customElements.get(t)||tt();break;case"calcite-color-picker-hex-input":customElements.get(t)||ve();break;case"calcite-color-picker-swatch":customElements.get(t)||$e();break;case"calcite-icon":customElements.get(t)||B();break;case"calcite-input-number":customElements.get(t)||ce();break;case"calcite-input-text":customElements.get(t)||j();break;case"calcite-loader":customElements.get(t)||it();break;case"calcite-progress":customElements.get(t)||U();break;case"calcite-tab":customElements.get(t)||nt();break;case"calcite-tab-nav":customElements.get(t)||st();break;case"calcite-tab-title":customElements.get(t)||ot();break;case"calcite-tabs":customElements.get(t)||lt();break}})}ye();const Bt=xe,Ut=ye;export{Bt as CalciteColorPicker,Ut as defineCustomElement};
