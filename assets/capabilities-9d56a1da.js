import{o as d,n,r as f}from"./contextUtils-81fda295.js";let l,a;function S(t){const e=d(t);for(;e.length>1;){const o=p(e.shift());if(o.available)return o}return p(e.shift())}function p(t){switch(t){case n.WEBGL1:return x();case n.WEBGL2:return h()}}function x(){return l||(l=B()),l}function h(){return a||(a=F()),a}class c{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class m extends c{constructor(){super(...arguments),this.type=n.WEBGL1}}class g extends c{constructor(){super(...arguments),this.type=n.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function E(t,e){if(t===n.WEBGL1&&typeof WebGLRenderingContext>"u"||t===n.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const o=document.createElement("canvas");if(!o)return null;let r=f(o,t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=f(o,t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;if(t===n.WEBGL1){const s=r.getParameter(r.VERSION),i=s==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(i){const _=parseFloat(i[1]);e.available=_>=.94}}else e.available=!0;e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const u=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return u&&(e.supportsHighPrecisionFragment=u.precision>0),r}function B(){const t=new m,e=E(n.WEBGL1,t);return e==null||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function F(){const t=new g,e=E(n.WEBGL2,t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}export{S as n};
