import{cb as l,h3 as h,a5 as i,a6 as s,a9 as w,bA as _,_ as p}from"./index-b516d057.js";import{i as g,e as y,O as b,r as $,n as d}from"./jsxFactory-92036771.js";import{t as f}from"./GoTo-4d856ce0.js";import{e as u}from"./globalCss-94006b67.js";import"./uuid-709b6c67.js";function R(t){var e,o;return((e=t==null?void 0:t.spatialReference)==null?void 0:e.isWebMercator)||((o=t==null?void 0:t.spatialReference)==null?void 0:o.isGeographic)||!1}const C="esri.widgets.CompassViewModel";let a=class extends f(_){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(l(()=>this.view,this._updateRotationWatcher,h))}destroy(){this.view=null}get canShowNorth(){return R(this.view)}get state(){var e;return!((e=this.view)!=null&&e.ready)||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){var o,n;if(!((o=this.view)!=null&&o.ready))return;const e={};((n=this.view)==null?void 0:n.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const o=-e.heading;this.orientation={x:0,y:0,z:o}}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?l(()=>e==null?void 0:e.rotation,this._updateForRotation,h):l(()=>e==null?void 0:e.camera,this._updateForCamera,h))}};i([s({readOnly:!0})],a.prototype,"canShowNorth",null),i([s()],a.prototype,"orientation",void 0),i([s({readOnly:!0})],a.prototype,"state",null),i([s()],a.prototype,"view",void 0),a=i([w(C)],a);const m=a,v="esri-compass",c={base:v,widgetIcon:g.locateCircled,iconContainer:`${v}__icon-container`};let r=class extends b{constructor(t,e){super(t,e),this.iconClass=c.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new m,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=o=>({transform:`rotateZ(${o.z}deg)`})}loadDependencies(){return $({button:()=>p(()=>import("./calcite-button-5457cec5.js"),["assets/calcite-button-5457cec5.js","assets/button-27a2f99e.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/form-60623048.js","assets/interactive-39956fb6.js","assets/label2-0071fcd4.js","assets/loadable-7d42c3de.js","assets/locale-2cb18332.js","assets/key-c2c83cc7.js","assets/observers-9c654f26.js","assets/component-7281ffa6.js","assets/t9n-622f279b.js","assets/icon-c122f720.js","assets/loader-ea663d25.js","assets/guid-2347ca41.js"]),icon:()=>p(()=>import("./calcite-icon-39deb8ae.js"),["assets/calcite-icon-39deb8ae.js","assets/icon-c122f720.js","assets/jsxFactory-92036771.js","assets/index-b516d057.js","assets/index-b252abd2.css","assets/uuid-709b6c67.js","assets/observers-9c654f26.js"])})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:e}=this.viewModel,o=e==="rotation"?"arrow-up":"compass-needle",{messages:n}=this;return d("div",{class:this.classes(c.base,u.widget)},d("calcite-button",{"aria-label":n.reset,class:u.widgetButton,disabled:e==="disabled",kind:"neutral",onclick:this._reset,round:!0,scale:"s",title:n.reset},d("div",{"aria-hidden":"true",class:c.iconContainer,title:n.reset},d("calcite-icon",{icon:o,scale:"m",styles:this._toRotationTransform(t)}))))}};i([s()],r.prototype,"goToOverride",null),i([s()],r.prototype,"iconClass",void 0),i([s()],r.prototype,"icon",void 0),i([s()],r.prototype,"label",null),i([s(),y("esri/widgets/Compass/t9n/Compass")],r.prototype,"messages",void 0),i([s()],r.prototype,"view",null),i([s({type:m})],r.prototype,"viewModel",void 0),r=i([w("esri.widgets.Compass")],r);const E=r;export{E as default};
