import{r as d,e as i,h as a,g as r}from"./index-b516d057.js";import{n as m,a as n,b as p,i as c,c as E,d as b,e as W,f as y}from"./index-c227d296-dd1efda8.js";import{r as l,c as u}from"./component-utils-2ebdae59-b855ce5d.js";import{o}from"./disconnected-bc5fc8bc-72f6378d.js";import{d as S}from"./mapping-utils-26beb904-81783ae9.js";const v="arcgis-expand>.esri-expand__content--expanded{background-color:var(--calcite-ui-background)}",C=class{constructor(e){d(this,e),this.widgetReady=i(this,"widgetReady",7),this.referenceElement=void 0,this.position="top-right",this.view=void 0,this.widget=void 0}positionWatcher(e){e!==void 0&&this.widget&&typeof this.view!="string"&&this.view.ui.move(this.childElem,e)}referenceElementWatcher(e){l(this,e)}viewWatcher(e){e!==void 0&&this.widget&&(this.widget.view=e)}async componentDidLoad(){const e=await m({container:this.childElem});this.widget=e,this.view&&(this.widget.view=this.view),this._checkForView()}disconnectedCallback(){o(this)}render(){return a("div",{ref:e=>this.childElem=e})}_checkForView(){const e=this.el.closest("arcgis-map")||this.el.closest("arcgis-scene");if(e!=null&&e.view)this.view=e.view,this.view.ui.add(this.childElem,this.position),this.widgetReady.emit({widget:this.widget});else if(e){const t=()=>{this.view=e.view,this.view.ui.add(this.childElem,this.position),this.widgetReady.emit({widget:this.widget})};e.addEventListener("viewReady",t,!1)}}get el(){return r(this)}static get watchers(){return{position:["positionWatcher"],referenceElement:["referenceElementWatcher"],view:["viewWatcher"]}}};C.style=v;const R=".arcgis-feature-table{width:100%;height:100%}",x=class{constructor(e){d(this,e),this.rowSelectionChange=i(this,"rowSelectionChange",7),this.widgetReady=i(this,"widgetReady",7),this.referenceElement=void 0,this.activeFilters=void 0,this.activeSortOrders=void 0,this.attachmentsEnabled=void 0,this.autoRefreshEnabled=void 0,this.columnReorderingEnabled=void 0,this.columns=void 0,this.editingEnabled=void 0,this.filterGeometry=void 0,this.hiddenFields=void 0,this.highlightEnabled=void 0,this.highlightIds=void 0,this.layer=void 0,this.menu=void 0,this.menuConfig=void 0,this.multiSortEnabled=void 0,this.pageSize=void 0,this.state=void 0,this.tableTemplate=void 0,this.itemId=void 0,this.position="bottom-left",this.url=void 0,this.view=void 0,this.widget=void 0}positionWatcher(e){e!==void 0&&this.widget&&typeof this.view!="string"&&this.view.ui.move(this.childElem,e)}attachmentsEnabledWatcher(e){e&&this.widget&&(this.widget.attachmentsEnabled=e)}autoRefreshEnabledWatcher(e){e&&this.widget&&(this.widget.autoRefreshEnabled=e)}columnReorderingEnabledWatcher(e){e&&this.widget&&(this.widget.columnReorderingEnabled=e)}editingEnabledWatcher(e){e&&this.widget&&(this.widget.editingEnabled=e)}filterGeometryWatcher(e){e&&this.widget&&(this.widget.filterGeometry=e)}hiddenFieldsWatcher(e){e&&this.widget&&(this.widget.hiddenFields=e)}highlightEnabledWatcher(e){e&&this.widget&&(this.widget.highlightEnabled=e)}highlightIdsWatcher(e){e&&this.widget&&(this.widget.highlightIds=e)}menuConfigWatcher(e){e&&this.widget&&(this.widget.menuConfig=e)}multiSortEnabledWatcher(e){e&&this.widget&&(this.widget.multiSortEnabled=e)}pageSizeWatcher(e){e&&this.widget&&(this.widget.pageSize=e)}tableTemplateWatcher(e){e&&this.widget&&(this.widget.tableTemplate=e)}async itemIdWatcher(e,t){if(e&&e!==t){const s=await n({portalItem:{id:e}});this.layer=s}}layerWatcher(e){e&&this.widget&&(this.widget.layer=e)}async urlWatcher(e,t){if(e&&e!==t){const s=await n({url:e});this.layer=s}}referenceElementWatcher(e){l(this,e)}viewWatcher(e){e!==void 0&&this.widget&&(this.widget.view=e)}async clearSelectionFilter(){var e;return(e=this.widget)==null?void 0:e.clearSelectionFilter()}async deleteSelection(e){var t;return(t=this.widget)==null?void 0:t.deleteSelection(e)}async filterBySelection(){var e;return(e=this.widget)==null?void 0:e.filterBySelection()}async findColumn(e){var t;return(t=this.widget)==null?void 0:t.findColumn(e)}async hideColumn(e){var t;return(t=this.widget)==null?void 0:t.hideColumn(e)}async refresh(){var e;return(e=this.widget)==null?void 0:e.refresh()}async scrollToIndex(e){var t;return(t=this.widget)==null?void 0:t.scrollToIndex(e)}async showAllColumns(){var e;return(e=this.widget)==null?void 0:e.showAllColumns()}async showColumn(e){var t;return(t=this.widget)==null?void 0:t.showColumn(e)}async sortColumn(e,t){var s;return(s=this.widget)==null?void 0:s.sortColumn(e,t)}async componentDidLoad(){const e=await this._createParams(),t=await p(e);this.widget=t,await this._addWatchers(),this._proxyEvents(),this.widgetReady.emit({widget:this.widget}),u(this)}disconnectedCallback(){o(this)}render(){return a("div",{class:"arcgis-feature-table",ref:e=>this.childElem=e})}async _addWatchers(){const{watch:e}=await c();e(()=>this.widget.activeFilters,t=>this.activeFilters=t,{initial:!0}),e(()=>this.widget.activeSortOrders,t=>this.activeSortOrders=t,{initial:!0}),e(()=>this.widget.columns,t=>this.columns=t,{initial:!0}),e(()=>this.widget.menu,t=>this.menu=t,{initial:!0}),e(()=>this.widget.state,t=>this.state=t,{initial:!0})}async _createParams(){const e={container:this.childElem};return this.view&&(e.view=this.view),this.attachmentsEnabled!==void 0&&(e.attachmentsEnabled=this.attachmentsEnabled),this.autoRefreshEnabled!==void 0&&(e.autoRefreshEnabled=this.autoRefreshEnabled),this.columnReorderingEnabled!==void 0&&(e.columnReorderingEnabled=this.columnReorderingEnabled),this.editingEnabled!==void 0&&(e.editingEnabled=this.editingEnabled),this.filterGeometry!==void 0&&(e.filterGeometry=this.filterGeometry),this.hiddenFields!==void 0&&(e.hiddenFields=this.hiddenFields),this.highlightEnabled!==void 0&&(e.highlightEnabled=this.highlightEnabled),this.highlightIds!==void 0&&(e.highlightIds=this.highlightIds),this.menuConfig!==void 0&&(e.menuConfig=this.menuConfig),this.multiSortEnabled!==void 0&&(e.multiSortEnabled=this.multiSortEnabled),this.pageSize!==void 0&&(e.pageSize=this.pageSize),this.tableTemplate!==void 0&&(e.tableTemplate=this.tableTemplate),this.layer!==void 0?e.layer=this.layer:this.url?e.layer=await n({url:this.url}):this.itemId&&(e.layer=await n({portalItem:{id:this.itemId}})),e}async _proxyEvents(){var e;(e=this.widget)==null||e.highlightIds.on("change",t=>this.rowSelectionChange.emit(t))}get el(){return r(this)}static get watchers(){return{position:["positionWatcher"],attachmentsEnabled:["attachmentsEnabledWatcher"],autoRefreshEnabled:["autoRefreshEnabledWatcher"],columnReorderingEnabled:["columnReorderingEnabledWatcher"],editingEnabled:["editingEnabledWatcher"],filterGeometry:["filterGeometryWatcher"],hiddenFields:["hiddenFieldsWatcher"],highlightEnabled:["highlightEnabledWatcher"],highlightIds:["highlightIdsWatcher"],menuConfig:["menuConfigWatcher"],multiSortEnabled:["multiSortEnabledWatcher"],pageSize:["pageSizeWatcher"],tableTemplate:["tableTemplateWatcher"],itemId:["itemIdWatcher"],layer:["layerWatcher"],url:["urlWatcher"],referenceElement:["referenceElementWatcher"],view:["viewWatcher"]}}};x.style=R;const I=".arcgis-map{padding:0;margin:0;height:100%;width:100%}",F=class{constructor(e){d(this,e),this.viewReady=i(this,"viewReady",7),this.apiKey=void 0,this.basemap=void 0,this.disableNavigation=!1,this.itemId=void 0,this.zoom=void 0,this.center=void 0,this.view=void 0}apiKeyWatcher(e){this.config.apiKey=e}itemIdWatcher(e,t){e&&e!==t&&this.loadMap()}async componentWillLoad(){this.config=await E(),this.apiKey&&(this.config.apiKey=this.apiKey),await this.loadMap()}componentDidRender(){this.view&&(this.view.container=this.el)}render(){return a("div",{class:"arcgis-map",ref:e=>this.el=e})}async loadMap(){const e={};this.itemId&&(e.portalItem={id:this.itemId}),this.basemap&&(e.basemap=this.basemap);const t=await b(e),s={};this.zoom&&(s.zoom=this.zoom),this.center&&(typeof this.center=="string"?s.center=this.center.split(",").map(h=>Number(h)):s.center=this.center);const f=await W({map:t,...s}),{watch:g}=await c();this.view=f,g(()=>this.view.center,h=>{const w=`${h.longitude},${h.latitude}`;this.center=w}),g(()=>this.view.zoom,h=>this.zoom=h),this.disableNavigation&&S(this.view),this.view.when(()=>this.viewReady.emit({view:this.view}))}get hostElem(){return r(this)}static get watchers(){return{apiKey:["apiKeyWatcher"],itemId:["itemIdWatcher"]}}};F.style=I;const T="",_=class{constructor(e){d(this,e),this.widgetReady=i(this,"widgetReady",7),this.searchBlur=i(this,"searchBlur",7),this.searchClear=i(this,"searchClear",7),this.searchComplete=i(this,"searchComplete",7),this.searchFocus=i(this,"searchFocus",7),this.searchStart=i(this,"searchStart",7),this.selectResult=i(this,"selectResult",7),this.suggestComplete=i(this,"suggestComplete",7),this.suggestStart=i(this,"suggestStart",7),this.referenceElement=void 0,this.activeMenu=void 0,this.activeSource=void 0,this.activeSourceIndex=void 0,this.allPlaceholder=void 0,this.allSources=void 0,this.autoSelect=void 0,this.defaultSources=void 0,this.includeDefaultSources=void 0,this.locationEnabled=void 0,this.maxResults=void 0,this.maxSuggestions=void 0,this.minSuggestCharacters=void 0,this.popupEnabled=void 0,this.popupTemplate=void 0,this.portal=void 0,this.resultGraphic=void 0,this.resultGraphicEnabled=void 0,this.results=void 0,this.searchAllEnabled=void 0,this.searchTerm=void 0,this.selectedResult=void 0,this.sources=void 0,this.suggestions=void 0,this.suggestionsEnabled=void 0,this.position="top-right",this.expandable=!1,this.view=void 0,this.widget=void 0}positionWatcher(e){e!==void 0&&this.widget&&typeof this.view!="string"&&this.view.ui.move(this.childElem,e)}activeMenuWatcher(e){e!==void 0&&this.widget&&(this.widget.activeMenu=e)}activeSourceIndexWatcher(e){e!==void 0&&this.widget&&(this.widget.activeSourceIndex=e)}allPlaceholderWatcher(e){e!==void 0&&this.widget&&(this.widget.allPlaceholder=e)}autoSelectWatcher(e){e!==void 0&&this.widget&&(this.widget.autoSelect=e)}includeDefaultSourcesWatcher(e){e!==void 0&&this.widget&&(this.widget.includeDefaultSources=e)}locationEnabledWatcher(e){e!==void 0&&this.widget&&(this.widget.locationEnabled=e)}maxResultsWatcher(e){e!==void 0&&this.widget&&(this.widget.maxResults=e)}maxSuggestionsWatcher(e){e!==void 0&&this.widget&&(this.widget.maxSuggestions=e)}minSuggestCharactersWatcher(e){e!==void 0&&this.widget&&(this.widget.minSuggestCharacters=e)}popupEnabledWatcher(e){e!==void 0&&this.widget&&(this.widget.popupEnabled=e)}popupTemplateWatcher(e){e!==void 0&&this.widget&&(this.widget.popupTemplate=e)}portalWatcher(e){e!==void 0&&this.widget&&(this.widget.portal=e)}resultGraphicEnabledWatcher(e){e!==void 0&&this.widget&&(this.widget.resultGraphicEnabled=e)}searchAllEnabledWatcher(e){e!==void 0&&this.widget&&(this.widget.searchAllEnabled=e)}searchTermWatcher(e){e!==void 0&&this.widget&&(this.widget.searchTerm=e)}sourcesWatcher(e){e!==void 0&&this.widget&&(this.widget.sources=e)}suggestionsEnabledWatcher(e){e!==void 0&&this.widget&&(this.widget.suggestionsEnabled=e)}referenceElementWatcher(e){l(this,e)}viewWatcher(e){e!==void 0&&this.widget&&(this.widget.view=e)}async blurSearch(){var e;return(e=this.widget)==null?void 0:e.blur()}async clearSearch(){var e;return(e=this.widget)==null?void 0:e.clear()}async focusSearch(){var e;return(e=this.widget)==null?void 0:e.focus()}async search(e){var t;return(t=this.widget)==null?void 0:t.search(e)}async suggest(e){var t;return(t=this.widget)==null?void 0:t.suggest(e)}async componentDidLoad(){const e=this._createParams(),t=await y(e);this.widget=t,await this._addWatchers(),this._proxyEvents(),this.widgetReady.emit({widget:this.widget}),u(this)}disconnectedCallback(){o(this)}render(){return this.expandable?a("arcgis-expand",{position:this.position,ref:e=>this.expandElem=e},a("div",{ref:e=>this.childElem=e})):a("div",{ref:e=>this.childElem=e})}async _addWatchers(){const{watch:e}=await c();e(()=>this.widget.activeSource,t=>this.activeSource=t,{initial:!0}),e(()=>this.widget.activeSourceIndex,t=>this.activeSourceIndex=t,{initial:!0}),e(()=>this.widget.allSources,t=>this.allSources=t,{initial:!0}),e(()=>this.widget.defaultSources,t=>this.defaultSources=t,{initial:!0}),e(()=>this.widget.resultGraphic,t=>this.resultGraphic=t,{initial:!0}),e(()=>this.widget.results,t=>this.results=t,{initial:!0}),e(()=>this.widget.selectedResult,t=>this.selectedResult=t,{initial:!0})}_createParams(){const e={container:this.childElem};return this.view&&(e.view=this.view),e}_proxyEvents(){this.widget.on("search-blur",e=>this.searchBlur.emit(e)),this.widget.on("search-clear",e=>this.searchClear.emit(e)),this.widget.on("search-complete",e=>this.searchComplete.emit(e)),this.widget.on("search-focus",e=>this.searchFocus.emit(e)),this.widget.on("search-start",e=>this.searchStart.emit(e)),this.widget.on("select-result",e=>this.selectResult.emit(e)),this.widget.on("suggest-complete",e=>this.suggestComplete.emit(e)),this.widget.on("suggest-start",e=>this.suggestStart.emit(e))}get el(){return r(this)}static get watchers(){return{position:["positionWatcher"],activeMenu:["activeMenuWatcher"],activeSourceIndex:["activeSourceIndexWatcher"],allPlaceholder:["allPlaceholderWatcher"],autoSelect:["autoSelectWatcher"],includeDefaultSources:["includeDefaultSourcesWatcher"],locationEnabled:["locationEnabledWatcher"],maxResults:["maxResultsWatcher"],maxSuggestions:["maxSuggestionsWatcher"],minSuggestCharacters:["minSuggestCharactersWatcher"],popupEnabled:["popupEnabledWatcher"],popupTemplate:["popupTemplateWatcher"],portal:["portalWatcher"],resultGraphicEnabled:["resultGraphicEnabledWatcher"],searchAllEnabled:["searchAllEnabledWatcher"],searchTerm:["searchTermWatcher"],sources:["sourcesWatcher"],suggestionsEnabled:["suggestionsEnabledWatcher"],referenceElement:["referenceElementWatcher"],view:["viewWatcher"]}}};_.style=T;export{C as arcgis_expand,x as arcgis_feature_table,F as arcgis_map,_ as arcgis_search};
