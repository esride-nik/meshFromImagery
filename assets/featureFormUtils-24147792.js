import{gX as d,bh as V,aL as _,gY as N,gZ as O,dR as f,g_ as L,g$ as y,h0 as A,h1 as b,h2 as F}from"./index-b516d057.js";import{Z as I}from"./utils-1a995f8e.js";const Z=e=>(e==null?void 0:e.type)==="field",x=e=>(e==null?void 0:e.type)==="group",j=e=>(e==null?void 0:e.type)==="relationship",S=e=>!x(e)&&e.group!=null,R=e=>e.type==="field",k=e=>e.type==="group",G=e=>e.type==="relationship",h=e=>e.reduce((t,n)=>x(n)?[...t,...n.inputs]:[...t,n],[]),H=e=>h(e).filter(Z),P=e=>h(e).filter(j),Y=e=>e!=null&&(p(e,"combo-box")||p(e,"radio-buttons")),p=(e,t)=>{var n;return e!=null&&((n=e.input)==null?void 0:n.type)===t},q=e=>e!=null&&(p(e,"text-box")||p(e,"text-area")),B=({domain:e,inputType:t="text-box",dataType:n})=>n==="number"&&t==="text-box"&&(!e||e.type!=="coded-value"),X=e=>"items"in e,T={typeFieldName:null,types:[]};function z(e){const{attributes:t,fieldsIndex:n,label:o,timeZone:i}=e;if(!t||typeof t!="object")return o;const r=Object.keys(t).filter(a=>d(o,a)),s=r.map(a=>t[a]),l=r.map(a=>n.get(a)).filter(V);return U(o,D({values:s,fields:l,timeZone:i}))}function D(e){const{fields:t,values:n}=e,o=e.timeZone??void 0,i=t.map((r,s)=>{let l=n[s];if(r.domain&&r.domain.type==="coded-value"){const a=r.domain.codedValues.find(u=>u.code===l);a!=null&&a.name&&(l=a.name)}return(I(r)||_(r))&&(l=N(r,l,{timeZone:o,...O(r)})),[r.name,l]});return Object.fromEntries(i)}function U(e,t){return f(f(e,n=>`{${n.toLowerCase()}}`),Object.fromEntries(Object.entries(t).map(([n,o])=>[n.toLowerCase(),o])))}const J=e=>{var t,n;return e?e.type==="subtype-sublayer"?{typeFieldName:(t=e.parent)==null?void 0:t.subtypeField,types:((n=e.parent)==null?void 0:n.subtypes)??[]}:"types"in e&&e.types?{typeFieldName:e.typeIdField,types:e.types.map(({id:o,name:i,domains:r})=>({code:o,name:i,domains:r}))}:T:T},K=(e,t)=>{if(!e)return!0;const{operations:n}=e;switch(t){case"INSERT":return n.supportsAdd;case"UPDATE":case"DELETE":return n.supportsUpdate;default:return!0}};var m;(function(e){e.TOO_SHORT="length-validation-error::too-short"})(m||(m={}));const E={type:"number"},g={type:"number",intlOptions:{notation:"scientific"}};function v(e){return e>=1e7||e<=-1e7}const M=(e,t,n)=>{const{dataType:o,error:i,minLength:r,value:s,required:l}=e;if(!t||!i)return null;if(l&&s===null)return t.validationErrors.cannotBeNull;if(i===y.VALUE_OUT_OF_RANGE||i===A.OUT_OF_RANGE){const{field:a,range:u}=e,c={type:"date",intlOptions:{timeZone:n??void 0,...O(a)}};return b(t.validationErrors.outsideRange,u,{format:{max:o==="date"?c:u.max!=null&&v(u.max)?g:E,min:o==="date"?c:u.min!=null&&v(u.min)?g:E}})}return i===y.INVALID_CODED_VALUE?t.validationErrors.invalidCodedValue:i===F.INVALID_TYPE?t.validationErrors.invalidType:i===m.TOO_SHORT?b(t.validationErrors.tooShort,{min:r}):null},Q=e=>{var i;if(!e)return;const t=e.layer,n=t&&"geometryType"in t?t.geometryType:void 0,o=(i=e.geometry)==null?void 0:i.type;return o==="polyline"||n==="polyline"?"line":o||n||"table"},W=e=>{var n;const t=[];if(e.formTemplate){const{description:o,title:i}=e.formTemplate;(n=e.fields)==null||n.forEach(r=>{const s=i&&d(i,r.name),l=o&&d(o,r.name);(s||l)&&t.push(r.name)})}return t};function $(e){var t;return"formTemplate"in e&&e.formTemplate?(((t=e.formTemplate.elements)==null?void 0:t.filter(R))??[]).some(({fieldName:n})=>!e.fieldsIndex.get(n)):!1}function ee(e,t){return e==null||t.onValue!==e&&t.offValue!==e}function te(e,t){var n;switch(t.objectType){case"any":return!0;case"null":return e==null;case"code":return e===((n=t.codedValue)==null?void 0:n.code);case"range":return e!=null&&t.minValue!=null&&t.maxValue!=null&&+e>=t.minValue&&+e<=t.maxValue;default:return L(t.objectType),!1}}export{D as A,M as C,m as D,G as E,K as F,W as G,$ as H,J as L,H as O,ee as P,Q as S,k as T,B as U,q as V,z as _,R as b,x as c,Z as d,j as f,p as g,X as h,P as j,te as k,Y as x,S as y};
