import{dv as v}from"./index-b516d057.js";function f(n){return n?b:x}function g(n,e){return e!=null&&e.mode?e.mode:f(n).mode}function h(n,e){return e??f(n)}function c(n,e){return g(n!=null&&n.hasZ,e)}function Z(n,e){return h(n!=null&&!!n.hasZ,e)}function m(n){const e=a(n);return c(n.geometry,e)}function I(n){const e=a(n),o=c(n.geometry,e);return{mode:o,offset:e!=null&&o!=="on-the-ground"?(e.offset??0)*v(e.unit??"meters"):0}}function P(n){if(m(n)==="on-the-ground")return!1;const e=a(n),o=e!=null&&e.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!o||o==="0")}function a(n){return n.layer&&"elevationInfo"in n.layer?n.layer.elevationInfo:null}function $(n,e,o){if(!(o!=null&&o.mode))return;const t=n.hasZ?n.z:0,r=o.offset!=null?o.offset:0;switch(o.mode){case"absolute-height":return t-r;case"on-the-ground":return 0;case"relative-to-ground":return t-((e.elevationProvider.getElevation(n.x,n.y,t,n.spatialReference,"ground")??0)+r);case"relative-to-scene":return t-((e.elevationProvider.getElevation(n.x,n.y,t,n.spatialReference,"scene")??0)+r)}}function w(n,e,o,t=null){return d(n,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,o,t)}function R(n,e,o,t,r=null){return d(n,e[0],e[1],e.length>2?e[2]:0,o,t,r)}function d(n,e,o,t,r,l,i=null){if(l==null)return;const u=i!=null?i.mode:"absolute-height";if(u==="on-the-ground")return 0;const{absoluteZ:s}=p(e,o,t,r,n,l);return E(s,e,o,t,r,n,i,u)}function p(n,e,o,t,r,l){const i=l.offset!=null?l.offset:0;switch(l.mode){case"absolute-height":return{absoluteZ:o+i,elevation:0};case"on-the-ground":{const u=r.elevationProvider.getElevation(n,e,0,t,"ground")??0;return{absoluteZ:u,elevation:u}}case"relative-to-ground":{const u=r.elevationProvider.getElevation(n,e,o,t,"ground")??0;return{absoluteZ:o+u+i,elevation:u}}case"relative-to-scene":{const u=r.elevationProvider.getElevation(n,e,o,t,"scene")??0;return{absoluteZ:o+u+i,elevation:u}}}}function E(n,e,o,t,r,l,i,u){const s=(i==null?void 0:i.offset)!=null?i.offset:0;switch(u){case"absolute-height":return n-s;case"relative-to-ground":return n-((l.elevationProvider.getElevation(e,o,t,r,"ground")??0)+s);case"relative-to-scene":return n-((l.elevationProvider.getElevation(e,o,t,r,"scene")??0)+s)}}function z(n,e){if(e==null)return!1;const{mode:o}=e;return o!=null&&(n==="scene"&&o==="relative-to-scene"||n==="ground"&&o!=="absolute-height")}function j(n,e,o){return o&&o.mode!==e?`${n} only support ${e} elevation mode`:null}function k(n,e,o){return(o==null?void 0:o.mode)===e?`${n} do not support ${e} elevation mode`:null}function q(n,e){return(e==null?void 0:e.featureExpressionInfo)!=null&&e.featureExpressionInfo.expression!=="0"?`${n} do not support featureExpressionInfo`:null}function A(n,e){e&&n.warn(".elevationInfo=",e)}const b={mode:"absolute-height",offset:0},x={mode:"on-the-ground",offset:null};export{q as E,x as Z,k as b,w as c,R as d,$ as f,p as g,P as i,m as l,z as m,h as o,j as p,c as r,I as s,g as t,Z as u,A as x,b as y};
